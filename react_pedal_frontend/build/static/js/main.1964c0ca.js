/*! For license information please see main.1964c0ca.js.LICENSE.txt */
(()=>{var e={43:(e,t,r)=>{"use strict";e.exports=r(202)},153:(e,t,r)=>{"use strict";var s=r(43),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var s,a={},c=null,d=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,s)&&!l.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},161:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});const s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:3001/api";const n=new class{async searchUsers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const r=(e||"").trim();if(!r)return[];const n=localStorage.getItem("authToken");try{const e=new URLSearchParams({q:r,limit:String(t)}),a=await fetch(`${s}/users/search?${e.toString()}`,{headers:{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{}}});if(!a.ok)throw new Error("Search failed");const i=await a.json();return(i.users||[]).map(e=>({id:e.id,username:e.username,fullName:e.fullName,avatar:e.avatar})).slice(0,t)}catch(a){return console.warn("Backend search not available, using mock search:",a),this.mockSearchUsers(r,t)}}async login(e,t){try{const r=await fetch(`${s}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailOrUsername:e,password:t})});if(!r.ok){const e=await r.json();throw new Error(e.message||"Login failed")}const n=await r.json();return n.token&&localStorage.setItem("authToken",n.token),n.user}catch(r){return console.warn("Backend not available, using mock data:",r),this.getMockUser(e)}}async register(e){try{const t=await fetch(`${s}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Registration failed")}const r=await t.json();return r.token&&localStorage.setItem("authToken",r.token),r.user}catch(t){return console.warn("Backend not available, using mock data:",t),this.createMockUser(e)}}async getCurrentUser(){const e=localStorage.getItem("authToken");if(!e)return null;try{const t=await fetch(`${s}/auth/me`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to get current user");return(await t.json()).user}catch(t){console.warn("Backend not available, using localStorage data:",t);const e=localStorage.getItem("user");return e?JSON.parse(e):null}}async updateProfile(e,t){const r=localStorage.getItem("authToken");try{const n=await fetch(`${s}/users/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(t)});if(!n.ok){const e=await n.json();throw new Error(e.message||"Profile update failed")}return(await n.json()).user}catch(n){console.warn("Backend not available, using mock update:",n);return{...JSON.parse(localStorage.getItem("user")||"{}"),...t}}}async logout(){const e=localStorage.getItem("authToken");try{await fetch(`${s}/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${e}`}})}catch(t){console.warn("Backend logout failed:",t)}finally{localStorage.removeItem("authToken"),localStorage.removeItem("user")}}mockSearchUsers(e,t){return[]}getMockUser(e){return{id:"temp-user-"+Date.now(),username:e.includes("@")?e.split("@")[0]:e,email:e.includes("@")?e:`${e}@example.com`,fullName:e.includes("@")?e.split("@")[0]:e,avatar:"",bio:"",location:"",joinedDate:(new Date).toISOString(),followers:0,following:0,posts:0}}createMockUser(e){return{id:"temp-user-"+Date.now(),username:e.username,email:e.email,fullName:e.fullName,avatar:"",bio:"",location:"",joinedDate:(new Date).toISOString(),followers:0,following:0,posts:0}}}},202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,x={};function g(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||m}function y(){}function v(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||m}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=v.prototype=new y;b.constructor=v,f(b,g.prototype),b.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,s){var n,a={},i=null,o=null;if(null!=t)for(n in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,n)&&!k.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(1===l)a.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===a[n]&&(a[n]=l[n]);return{$$typeof:r,type:e,key:i,ref:o,props:a,_owner:N.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var E=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,n,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case s:l=!0}}if(l)return i=i(l=e),e=""===a?"."+_(l,0):a,w(i)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),P(i,t,n,"",function(e){return e})):null!=i&&(C(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var d=a+_(o=e[c],c);l+=P(o,t,n,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,n,d=a+_(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,r){if(null==e)return e;var s=[],n=0;return P(e,s,"","",function(e){return t.call(r,e,n++)}),s}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},M={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:N};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,r){T(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=n,t.Profiler=i,t.PureComponent=v,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=L,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=f({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!k.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:r,type:e.type,key:a,ref:i,props:n,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,r){return O.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,r){return O.current.useReducer(e,t,r)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return O.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},210:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(829)),a=s(r(736)),i=r(745);class o{constructor(e){let{headers:t={},schema:r,fetch:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new n.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new o(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:s=!1,get:n=!1,count:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=new URL(`${this.url}/rpc/${e}`);let l;s||n?(t=s?"HEAD":"GET",Object.entries(r).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?`{${r.join(",")}}`:`${r}`]}).forEach(e=>{let[t,r]=e;o.searchParams.append(t,r)})):(t="POST",l=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new a.default({method:t,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=o},234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var s=r-1>>>1,n=e[s];if(!(0<a(n,t)))break e;e[s]=t,e[r]=n,r=s}}function s(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var s=0,n=e.length,i=n>>>1;s<i;){var o=2*(s+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,r))c<n&&0>a(d,l)?(e[s]=d,e[c]=r,s=c):(e[s]=l,e[o]=r,s=o);else{if(!(c<n&&0>a(d,r)))break e;e[s]=d,e[c]=r,s=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,f=!1,x=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=s(d);null!==t;){if(null===t.callback)n(d);else{if(!(t.startTime<=e))break;n(d),t.sortIndex=t.expirationTime,r(c,t)}t=s(d)}}function w(e){if(x=!1,b(e),!f)if(null!==s(c))f=!0,R(j);else{var t=s(d);null!==t&&M(w,t.startTime-e)}}function j(e,r){f=!1,x&&(x=!1,y(C),C=-1),m=!0;var a=p;try{for(b(r),h=s(c);null!==h&&(!(h.expirationTime>r)||e&&!P());){var i=h.callback;if("function"===typeof i){h.callback=null,p=h.priorityLevel;var o=i(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?h.callback=o:h===s(c)&&n(c),b(r)}else n(c);h=s(c)}if(null!==h)var l=!0;else{var u=s(d);null!==u&&M(w,u.startTime-r),l=!1}return l}finally{h=null,p=a,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,S=null,C=-1,E=5,_=-1;function P(){return!(t.unstable_now()-_<E)}function T(){if(null!==S){var e=t.unstable_now();_=e;var r=!0;try{r=S(!0,e)}finally{r?N():(k=!1,S=null)}}else k=!1}if("function"===typeof v)N=function(){v(T)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=T,N=function(){O.postMessage(null)}}else N=function(){g(T,0)};function R(e){S=e,k||(k=!0,N())}function M(e,r){C=g(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,R(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,n,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,r(d,e),null===s(c)&&e===s(d)&&(x?(y(C),C=-1):x=!0,M(w,a-i))):(e.sortIndex=o,r(c,e),f||m||(f=!0,R(j))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},240:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthService:()=>rr,EventsService:()=>nr,MapsService:()=>ur,MessagesService:()=>ar,NetworkService:()=>lr,NotificationsService:()=>ir,PostsService:()=>sr,ProfileService:()=>or,StorageService:()=>dr,api:()=>cr,auth:()=>hr,events:()=>mr,maps:()=>br,messages:()=>fr,network:()=>yr,notifications:()=>xr,posts:()=>pr,profile:()=>gr,storage:()=>vr});class s extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class n extends s{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class a extends s{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class i extends s{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var o;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(o||(o={}));var l=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:s,region:n=o.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=n,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return l(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l}=t;let c={},{region:d}=t;d||(d=this.region);const u=new URL(`${this.url}/${e}`);let h;d&&"any"!==d&&(c["x-region"]=d,u.searchParams.set("forceFunctionRegion",d)),l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):"string"===typeof l?(c["Content-Type"]="text/plain",h=l):"undefined"!==typeof FormData&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const p=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h}).catch(e=>{throw new n(e)}),m=p.headers.get("x-relay-error");if(m&&"true"===m)throw new a(p);if(!p.ok)throw new i(p);let f,x=(null!==(r=p.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return f="application/json"===x?yield p.json():"application/octet-stream"===x?yield p.blob():"text/event-stream"===x?p:"multipart/form-data"===x?yield p.formData():yield p.text(),{data:f,error:null,response:p}}catch(s){return{data:null,error:s,response:s instanceof i||s instanceof a?s.context:void 0}}})}}var d=r(980);const{PostgrestClient:u,PostgrestQueryBuilder:h,PostgrestFilterBuilder:p,PostgrestTransformBuilder:m,PostgrestBuilder:f,PostgrestError:x}=d;const g=class{static dynamicRequire(e){try{return"undefined"!==typeof process&&process.versions&&process.versions.node?r(986)(e):null}catch(t){return null}}static detectEnvironment(){var e,t;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof r.g&&"undefined"!==typeof r.g.WebSocket)return{type:"native",constructor:r.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);if(e>=22)try{if("undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};const e=this.dynamicRequire("undici");if(e&&e.WebSocket)return{type:"native",constructor:e.WebSocket};throw new Error("undici not available")}catch(s){return{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:'Install the "ws" package or check your Node.js installation.'}}try{const e=this.dynamicRequire("ws");if(e)return{type:"ws",constructor:null!==(t=e.WebSocket)&&void 0!==t?t:e};throw new Error("ws package not available")}catch(s){return{type:"unsupported",error:`Node.js ${e} detected without WebSocket support.`,workaround:'Install the "ws" package: npm install ws'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},y=1e4;var v,b,w,j,N,k;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(v||(v={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(b||(b={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(w||(w={})),function(e){e.websocket="websocket"}(j||(j={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(N||(N={}));class S{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),n=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=r.decode(e.slice(a,a+s));a+=s;const o=r.decode(e.slice(a,a+n));a+=n;return{ref:null,topic:i,event:o,payload:JSON.parse(r.decode(e.slice(a,e.byteLength)))}}}class C{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(k||(k={}));const E=function(e,t){var r;const s=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((r,n)=>(r[n]=_(n,e,t,s),r),{})},_=(e,t,r,s)=>{const n=t.find(t=>t.name===e),a=null===n||void 0===n?void 0:n.type,i=r[e];return a&&!s.includes(a)?P(a,i):T(i)},P=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return M(t,r)}switch(e){case k.bool:return A(t);case k.float4:case k.float8:case k.int2:case k.int4:case k.int8:case k.numeric:case k.oid:return O(t);case k.json:case k.jsonb:return R(t);case k.timestamp:return L(t);case k.abstime:case k.date:case k.daterange:case k.int4range:case k.int8range:case k.money:case k.reltime:case k.text:case k.time:case k.timestamptz:case k.timetz:case k.tsrange:case k.tstzrange:default:return T(t)}},T=e=>e,A=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},O=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},R=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},M=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,s=e[r];if("{"===e[0]&&"}"===s){let s;const a=e.slice(1,r);try{s=JSON.parse("["+a+"]")}catch(n){s=a?a.split(","):[]}return s.map(e=>P(t,e))}return e},L=e=>"string"===typeof e?e.replace(" ","T"):e,D=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class I{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y;this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var F,U,$,B;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(F||(F={}));class z{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=z.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=z.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=z.syncDiff(this.state,e,t,r),s())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const n=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(n,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const r=n[e];if(r){const s=t.map(e=>e.presence_ref),n=r.map(e=>e.presence_ref),a=t.filter(e=>n.indexOf(e.presence_ref)<0),l=r.filter(e=>s.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(n,{joins:i,leaves:o},r,s)}static syncDiff(e,t,r,s){const{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(n,(t,s)=>{var n;const a=null!==(n=e[t])&&void 0!==n?n:[];if(e[t]=this.cloneDeep(s),a.length>0){const r=e[t].map(e=>e.presence_ref),s=a.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...s)}r(t,a,s)}),this.map(a,(t,r)=>{let n=e[t];if(!n)return;const a=r.map(e=>e.presence_ref);n=n.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=n,s(t,n,r),0===n.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return t[r]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(U||(U={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}($||($={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(B||(B={}));class q{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=b.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new I(this,w.join,this.params,this.timeout),this.rejoinTimer=new C(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=b.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=b.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=b.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=b.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=b.errored,this.rejoinTimer.scheduleTimeout())}),this._on(w.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new z(this),this.broadcastEndpointURL=D(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==b.closed){const{config:{broadcast:n,presence:a,private:i}}=this.params,o=null!==(s=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==s?s:[],l=!!this.bindings[$.PRESENCE]&&this.bindings[$.PRESENCE].length>0,c={},d={broadcast:n,presence:Object.assign(Object.assign({},a),{enabled:l}),postgres_changes:o,private:i};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(B.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(B.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:r}=t;var s;if(this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,n=null!==(s=null===t||void 0===t?void 0:t.length)&&void 0!==s?s:0,a=[];for(let s=0;s<n;s++){const n=t[s],{filter:{event:i,schema:o,table:l,filter:c}}=n,d=r&&r[s];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=b.errored,void(null===e||void 0===e||e(B.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},n),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(B.SUBSCRIBED))}null===e||void 0===e||e(B.SUBSCRIBED)}).receive("error",t=>{this.state=b.errored,null===e||void 0===e||e(B.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(B.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===b.joined&&e===$.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var s,n,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(n=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===n?void 0:n.broadcast)||void 0===a?void 0:a.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(n){return"AbortError"===n.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=b.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(w.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new I(this,w.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null===r||void 0===r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=b.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,n=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(n),a}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new I(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,n;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=w;if(r&&[i,o,l,c].indexOf(a)>=0&&r!==this._joinRef())return;let d=this._onMessage(a,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,r,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===s?void 0:s.toLocaleLowerCase())===a}).map(e=>e.callback(d,r)):null===(n=this.bindings[a])||void 0===n||n.filter(e=>{var r,s,n,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(r=e.filter)||void 0===r?void 0:r.event;return a&&(null===(s=t.ids)||void 0===s?void 0:s.includes(a))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(n=t.data)||void 0===n?void 0:n.type.toLocaleLowerCase()))}{const r=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:s,type:n,errors:a}=e,i={schema:t,table:r,commit_timestamp:s,eventType:n,new:{},old:{},errors:a};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===b.closed}_isJoined(){return this.state===b.joined}_isJoining(){return this.state===b.joining}_isLeaving(){return this.state===b.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),n={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(n):this.bindings[s]=[n],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===r&&q.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(w.close,{},e)}_onError(e){this._on(w.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=b.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=E(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=E(e.columns,e.old_record)),t}}const V=()=>{},H=25e3,W=10,K=100,J=[1e3,2e3,5e3,1e4];class G{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=y,this.transport=null,this.heartbeatIntervalMs=H,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=V,this.ref=0,this.reconnectTimer=null,this.logger=V,this.conn=null,this.sendBuffer=[],this.serializer=new S,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)}).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)})}:fetch),function(){return t(...arguments)}},!(null===(s=null===t||void 0===t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${j.websocket}`,this.httpEndpoint=D(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=g.createWebSocket(this.endpointURL())}catch(e){throw this._setConnectionState("disconnected"),new Error(`WebSocket not available: ${e.message}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case v.connecting:return N.Connecting;case v.open:return N.Open;case v.closing:return N.Closing;default:return N.Closed}}isConnected(){return this.connectionState()===N.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const r=`realtime:${e}`,s=this.getChannels().find(e=>e.topic===r);if(s)return s;{const r=new q(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:s,ref:n}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${n})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},K);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:s,ref:n}=e,a=n?`(${n})`:"",i=s.status||"";this.log("receive",`${i} ${t} ${r} ${a}`.trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,s,n)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(w.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const r={access_token:e,version:"realtime-js/2.15.0"};e&&t.updateJoinPayload(r),t.joinedOnce&&t._isJoined()&&t._push(w.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new C(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},W)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,n,a,i,o,l;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null===e||void 0===e?void 0:e.timeout)&&void 0!==r?r:y,this.heartbeatIntervalMs=null!==(s=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==s?s:H,this.worker=null!==(n=null===e||void 0===e?void 0:e.worker)&&void 0!==n&&n,this.accessToken=null!==(a=null===e||void 0===e?void 0:e.accessToken)&&void 0!==a?a:null,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(i=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==i?i:e=>J[e-1]||1e4,this.encode=null!==(o=null===e||void 0===e?void 0:e.encode)&&void 0!==o?o:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null===e||void 0===e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class Q extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Y(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class X extends Q{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Z extends Q{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ee=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const te=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},re=e=>{if(Array.isArray(e))return e.map(e=>re(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[r,s]=e;const n=r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[n]=re(s)}),t};var se=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const ne=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ae=(e,t,s)=>se(void 0,void 0,void 0,function*(){const n=yield ee(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(r.bind(r,630))).Response:Response});e instanceof n&&!(null===s||void 0===s?void 0:s.noResolveJson)?e.json().then(r=>{const s=e.status||500,n=(null===r||void 0===r?void 0:r.statusCode)||s+"";t(new X(ne(r),s,n))}).catch(e=>{t(new Z(ne(e),e))}):t(new Z(ne(e),e))}),ie=(e,t,r,s)=>{const n={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&s?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(s)?(n.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),n.body=JSON.stringify(s)):n.body=s,Object.assign(Object.assign({},n),r)):n};function oe(e,t,r,s,n,a){return se(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(r,ie(t,s,n,a)).then(e=>{if(!e.ok)throw e;return(null===s||void 0===s?void 0:s.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>ae(e,o,s))})})}function le(e,t,r,s){return se(this,void 0,void 0,function*(){return oe(e,"GET",t,r,s)})}function ce(e,t,r,s,n){return se(this,void 0,void 0,function*(){return oe(e,"POST",t,s,n,r)})}function de(e,t,r,s,n){return se(this,void 0,void 0,function*(){return oe(e,"PUT",t,s,n,r)})}function ue(e,t,r,s,n){return se(this,void 0,void 0,function*(){return oe(e,"DELETE",t,s,n,r)})}var he=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const pe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},me={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class fe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=r,this.fetch=te(s)}uploadOrUpdate(e,t,r,s){return he(this,void 0,void 0,function*(){try{let n;const a=Object.assign(Object.assign({},me),s);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;"undefined"!==typeof Blob&&r instanceof Blob?(n=new FormData,n.append("cacheControl",a.cacheControl),o&&n.append("metadata",this.encodeMetadata(o)),n.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(n=r,n.append("cacheControl",a.cacheControl),o&&n.append("metadata",this.encodeMetadata(o))):(n=r,i["cache-control"]=`max-age=${a.cacheControl}`,i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===s||void 0===s?void 0:s.headers)&&(i=Object.assign(Object.assign({},i),s.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?de:ce)(this.fetch,`${this.url}/object/${c}`,n,Object.assign({headers:i},(null===a||void 0===a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}})}upload(e,t,r){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return he(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),a=this._getFinalPath(n),i=new URL(this.url+`/object/upload/sign/${a}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:me.upsert},s),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType);return{data:{path:n,fullPath:(yield de(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(o){if(Y(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return he(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(s["x-upsert"]="true");const n=yield ce(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+n.url),i=a.searchParams.get("token");if(!i)throw new Q("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})}update(e,t,r){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return he(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}copy(e,t,r){return he(this,void 0,void 0,function*(){try{return{data:{path:(yield ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return he(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),n=yield ce(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const a=(null===r||void 0===r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${a}`)},{data:n,error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return he(this,void 0,void 0,function*(){try{const s=yield ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=(null===r||void 0===r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${n}`):null})),error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}download(e,t){return he(this,void 0,void 0,function*(){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),n=s?`?${s}`:"";try{const t=this._getFinalPath(e),s=yield le(this.fetch,`${this.url}/${r}/${t}${n}`,{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(a){if(Y(a))return{data:null,error:a};throw a}})}info(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield le(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:re(e),error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})}exists(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,s){return se(this,void 0,void 0,function*(){return oe(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Y(r)&&r instanceof Z){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],n=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==n&&s.push(n);const a="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&s.push(i);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${o}`)}}}remove(e){return he(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}list(e,t,r){return he(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},pe),t),{prefix:e||""});return{data:yield ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const xe={"X-Client-Info":"storage-js/2.10.4"};var ge=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class ye{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;const n=new URL(e);if(null===s||void 0===s?void 0:s.useNewHostname){/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase."))}this.url=n.href,this.headers=Object.assign(Object.assign({},xe),t),this.fetch=te(r)}listBuckets(){return ge(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Y(e))return{data:null,error:e};throw e}})}getBucket(e){return ge(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return ge(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ge(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ge(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ge(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}}class ve extends ye{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new fe(this.url,this.headers,e,this.fetch)}}let be="";be="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const we={headers:{"X-Client-Info":`supabase-js-${be}/2.54.0`}},je={schema:"public"},Ne={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ke={};var Se=r(630),Ce=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const Ee=e=>{let t;return t=e||("undefined"===typeof fetch?Se.default:fetch),function(){return t(...arguments)}},_e=(e,t,r)=>{const s=Ee(r),n="undefined"===typeof Headers?Se.Headers:Headers;return(r,a)=>Ce(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new n(null===a||void 0===a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),s(r,Object.assign(Object.assign({},a),{headers:l}))})};var Pe=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const Te="2.71.1",Ae=3e4,Oe=9e4,Re={"X-Client-Info":`gotrue-js/${Te}`},Me="X-Supabase-Api-Version",Le={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},De=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ie extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Fe(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Ue extends Ie{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class $e extends Ie{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Be extends Ie{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class ze extends Be{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class qe extends Be{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ve extends Be{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class He extends Be{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class We extends Be{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ke extends Be{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Je(e){return Fe(e)&&"AuthRetryableFetchError"===e.name}class Ge extends Be{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Qe extends Be{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xe=" \t\n\r=".split(""),Ze=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Xe.length;t+=1)e[Xe[t].charCodeAt(0)]=-2;for(let t=0;t<Ye.length;t+=1)e[Ye[t].charCodeAt(0)]=t;return e})();function et(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Ye[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Ye[e]),t.queuedBits-=6}}function tt(e,t,r){const s=Ze[e];if(!(s>-1)){if(-2===s)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function rt(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(0===(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,s,r)};for(let i=0;i<e.length;i+=1)tt(e.charCodeAt(i),n,a);return t.join("")}function st(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function nt(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}st(s,t)}}function at(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let n=0;n<e.length;n+=1)tt(e.charCodeAt(n),r,s);return new Uint8Array(t)}function it(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>et(e,r,s)),et(null,r,s),t.join("")}const ot=()=>"undefined"!==typeof window&&"undefined"!==typeof document,lt={tested:!1,writable:!1},ct=()=>{if(!ot())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(lt.tested)return lt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),lt.tested=!0,lt.writable=!0}catch(t){lt.tested=!0,lt.writable=!1}return lt.writable};const dt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(r.bind(r,630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},ut=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ht=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(s){return r}},pt=async(e,t)=>{await e.removeItem(t)};class mt{constructor(){this.promise=new mt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function ft(e){const t=e.split(".");if(3!==t.length)throw new Qe("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!De.test(t[r]))throw new Qe("JWT not in base64url format");return{header:JSON.parse(rt(t[0])),payload:JSON.parse(rt(t[1])),signature:at(t[2]),raw:{header:t[0],payload:t[1]}}}function xt(e){return("0"+e.toString(16)).substr(-2)}async function gt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yt(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,xt).join("")}();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await ut(e,`${t}-code-verifier`,n);const a=await gt(s);return[a,s===a?"plain":"s256"]}mt.promiseConstructor=Promise;const vt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const bt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wt(e){if(!bt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jt(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Nt(e){return JSON.parse(JSON.stringify(e))}var kt=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r};const St=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ct=[502,503,504];async function Et(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new Ke(St(e),0);if(Ct.includes(e.status))throw new Ke(St(e),e.status);let s,n;try{s=await e.json()}catch(i){throw new $e(St(i),i)}const a=function(e){const t=e.headers.get(Me);if(!t)return null;if(!t.match(vt))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(i){return null}}(e);if(a&&a.getTime()>=Le.timestamp&&"object"===typeof s&&s&&"string"===typeof s.code?n=s.code:"object"===typeof s&&s&&"string"===typeof s.error_code&&(n=s.error_code),n){if("weak_password"===n)throw new Ge(St(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===n)throw new ze}else if("object"===typeof s&&s&&"object"===typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Ge(St(s),e.status,s.weak_password.reasons);throw new Ue(St(s),e.status||500,n)}async function _t(e,t,r,s){var n;const a=Object.assign({},null===s||void 0===s?void 0:s.headers);a[Me]||(a[Me]=Le.name),(null===s||void 0===s?void 0:s.jwt)&&(a.Authorization=`Bearer ${s.jwt}`);const i=null!==(n=null===s||void 0===s?void 0:s.query)&&void 0!==n?n:{};(null===s||void 0===s?void 0:s.redirectTo)&&(i.redirect_to=s.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,r,s,n,a){const i=((e,t,r,s)=>{const n={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))})(t,s,n,a);let o;try{o=await e(r,Object.assign({},i))}catch(l){throw console.error(l),new Ke(St(l),0)}o.ok||await Et(o);if(null===s||void 0===s?void 0:s.noResolveJson)return o;try{return await o.json()}catch(l){await Et(l)}}(e,t,r+o,{headers:a,noResolveJson:null===s||void 0===s?void 0:s.noResolveJson},{},null===s||void 0===s?void 0:s.body);return(null===s||void 0===s?void 0:s.xform)?null===s||void 0===s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}function Pt(e){var t;let r=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Tt(e){const t=Pt(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function At(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Ot(e){return{data:e,error:null}}function Rt(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a}=e,i=kt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a},user:Object.assign({},i)},error:null}}function Mt(e){return e}const Lt=["global","local","others"];var Dt=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r};class It{constructor(e){let{url:t="",headers:r={},fetch:s}=e;this.url=t,this.headers=r,this.fetch=dt(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt[0];if(Lt.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Lt.join(", ")}`);try{return await _t(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await _t(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:At})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Dt(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=null===r||void 0===r?void 0:r.newEmail,delete s.newEmail),await _t(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Rt,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Fe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await _t(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:At})}catch(t){if(Fe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,n,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await _t(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(n=null===(s=null===e||void 0===e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==n?n:""},xform:Mt});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Fe(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){wt(e);try{return await _t(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:At})}catch(t){if(Fe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){wt(e);try{return await _t(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:At})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];wt(e);try{return await _t(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:At})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){wt(e.userId);try{const{data:t,error:r}=await _t(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){wt(e.userId),wt(e.id);try{return{data:await _t(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}}function Ft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ut=!!(globalThis&&ct()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class $t extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Bt extends $t{}async function zt(e,t,r){Ut&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Ut&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw Ut&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Bt(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ut)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}Ut&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Ut&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const qt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Re,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Vt(e,t,r){return await r()}const Ht={};class Wt{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Wt.nextInstanceID,Wt.nextInstanceID+=1,this.instanceID>0&&ot()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},qt),e);if(this.logDebugMessages=!!s.debug,"function"===typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new It({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=dt(s.fetch),this.lock=s.lock||Vt,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ot()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=zt:this.lock=Vt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:ct()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ft(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Ft(this.memoryStorage)),ot()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Ht[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Ht[this.storageKey]=Object.assign(Object.assign({},Ht[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Ht[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ht[this.storageKey]=Object.assign(Object.assign({},Ht[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger(`GoTrueClient@${this.instanceID} (${Te}) ${(new Date).toISOString()}`,...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(s){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),ot()&&this.detectSessionInUrl&&"none"!==r){const{data:s,error:n}=await this._getSessionFromURL(t,r);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),function(e){return Fe(e)&&"AuthImplicitGrantRedirectError"===e.name}(n)){const t=null===(e=n.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:n}}return await this._removeSession(),{error:n}}const{session:a,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Fe(t)?{error:t}:{error:new $e("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const n=await _t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:Pt}),{data:a,error:i}=n;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(Fe(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,r,s;try{let n;if("email"in e){const{email:r,password:s,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await yt(this.storage,this.storageKey)),n=await _t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo,body:{email:r,password:s,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:Pt})}else{if(!("phone"in e))throw new Ve("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;n=await _t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!==(r=null===i||void 0===i?void 0:i.data)&&void 0!==r?r:{},channel:null!==(s=null===i||void 0===i?void 0:i.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Pt})}}const{data:a,error:i}=n;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(Fe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:s,options:n}=e;t=await _t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},xform:Tt})}else{if(!("phone"in e))throw new Ve("You must provide either an email or phone number and a password");{const{phone:r,password:s,options:n}=e;t=await _t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},xform:Tt})}}const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s}):{data:{user:null,session:null},error:new qe}}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,n;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(n=e.options)||void 0===n?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,n,a,i,o,l,c,d,u,h;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:u,wallet:h,statement:f,options:x}=e;let g;if(ot())if("object"===typeof h)g=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");g=e.solana}else{if("object"!==typeof h||!(null===x||void 0===x?void 0:x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=h}const y=new URL(null!==(t=null===x||void 0===x?void 0:x.url)&&void 0!==t?t:window.location.href);if("signIn"in g&&g.signIn){const e=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===x||void 0===x?void 0:x.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),m=t.signature}else{if(!("signMessage"in g)||"function"!==typeof g.signMessage||!("publicKey"in g)||"object"!==typeof g||!g.publicKey||!("toBase58"in g.publicKey)||"function"!==typeof g.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${y.host} wants you to sign in with your Solana account:`,g.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(s=null===(r=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...(null===(n=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===n?void 0:n.notBefore)?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...(null===(a=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===a?void 0:a.expirationTime)?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...(null===(i=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...(null===(o=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...(null===(l=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null===x||void 0===x?void 0:x.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...x.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await g.signMessage((new TextEncoder).encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:t,error:r}=await _t(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:it(m)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Pt});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new qe}}catch(f){if(Fe(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:n}=await _t(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Pt});if(await pt(this.storage,`${this.storageKey}-code-verifier`),n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==s&&void 0!==s?s:null}),error:n}):{data:{user:null,session:null,redirectType:null},error:new qe}}catch(n){if(Fe(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:n,nonce:a}=e,i=await _t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Pt}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new qe}}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,n,a;try{if("email"in e){const{email:s,options:n}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await yt(this.storage,this.storageKey));const{error:o}=await _t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null===n||void 0===n?void 0:n.data)&&void 0!==t?t:{},create_user:null===(r=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null===n||void 0===n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:r}=e,{data:i,error:o}=await _t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null===r||void 0===r?void 0:r.data)&&void 0!==s?s:{},create_user:null===(n=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(a=null===r||void 0===r?void 0:r.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new Ve("You must provide either an email or phone number.")}catch(i){if(Fe(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,r;try{let s,n;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,n=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:a,error:i}=await _t(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:s,xform:Pt});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(Fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let n=null,a=null;return"pkce"===this.flowType&&([n,a]=await yt(this.storage,this.storageKey)),await _t(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:Ot})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ze;const{error:s}=await _t(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Fe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:n}=e,{error:a}=await _t(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},redirectTo:null===n||void 0===n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:r,type:s,options:n}=e,{data:a,error:i}=await _t(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:i}}throw new Ve("You must provide either an email or phone number and a type")}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await ht(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<Oe;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await ht(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=jt()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,s)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,s))})}return{data:{session:e},error:null}}const{session:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await _t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:At}):await this._useSession(async e=>{var t,r,s;const{data:n,error:a}=e;if(a)throw a;return(null===(t=n.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await _t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(s=null===(r=n.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0,xform:At}):{data:{user:null},error:new ze}})}catch(t){if(Fe(t))return function(e){return Fe(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await pt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{const{data:s,error:n}=r;if(n)throw n;if(!s.session)throw new ze;const a=s.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await yt(this.storage,this.storageKey));const{data:l,error:c}=await _t(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:At});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ze;const t=Date.now()/1e3;let r=t,s=!0,n=null;const{payload:a}=ft(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};n=t}else{const{data:s,error:a}=await this._getUser(e.access_token);if(a)throw a;n={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(Fe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:s,error:n}=t;if(n)throw n;e=null!==(r=s.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new ze;const{session:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ot())throw new He("No browser detected.");if(e.error||e.error_description||e.error_code)throw new He(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new We("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new He("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new We("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:n,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!n||!i||!a||!l)throw new He("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=Ae&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=u-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,u,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,u,c);const{data:m,error:f}=await this._getUser(n);if(f)throw f;const x={provider_token:r,provider_refresh_token:s,access_token:n,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(Fe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;const{data:s,error:n}=t;if(n)return{error:n};const a=null===(r=s.session)||void 0===r?void 0:r.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return Fe(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await pt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:s},error:n}=t;if(n)throw n;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(n){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,s=null;"pkce"===this.flowType&&([r,s]=await yt(this.storage,this.storageKey,!0));try{return await _t(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async t=>{var r,s,n,a,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:!0});return await _t(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(s)throw s;return ot()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),{data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null}}catch(r){if(Fe(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:n,error:a}=t;if(a)throw a;return await _t(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(s=null===(r=n.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await _t(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Pt})),s=(e,t)=>{const r=200*Math.pow(2,e);return t&&Je(t)&&Date.now()+r-n<Ae},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await r(a);if(!s(a,null,t))return void e(t)}catch(n){if(!s(a,n))return void t(n)}})()}))}catch(n){if(this._debug(t,"error",n),Fe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}var r,s}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ot()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await ht(this.storage,this.storageKey);if(n&&this.userStorage){let t=await ht(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:n.user},await ut(this.userStorage,this.storageKey+"-user",t)),n.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:jt()}else if(n&&!n.user&&!n.user){const e=await ht(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(n.user=e.user,await pt(this.storage,this.storageKey+"-user"),await ut(this.storage,this.storageKey,n)):n.user=jt()}if(this._debug(r,"session from storage",n),!this._isValidSession(n))return this._debug(r,"session is not valid"),void(null!==n&&await this._removeSession());const a=1e3*(null!==(t=n.expires_at)&&void 0!==t?t:1/0)-Date.now()<Oe;if(this._debug(r,`session has${a?"":" not"} expired with margin of 90000s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Je(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(n.user&&!0===n.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(n.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(n.user=e.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(r,"error",n),void console.error(n)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ze;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new mt;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new ze;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(n){if(this._debug(s,"error",n),Fe(n)){const e={session:null,error:n};return Je(n)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],n=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(n){s.push(n)}});if(await Promise.all(n),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await ut(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const s=Nt(e);await ut(this.storage,this.storageKey,s)}else{const e=Nt(t);await ut(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await pt(this.storage,this.storageKey),await pt(this.storage,this.storageKey+"-code-verifier"),await pt(this.storage,this.storageKey+"-user"),this.userStorage&&await pt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ot()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ae);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*r.expires_at-t)/Ae);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof $t))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ot()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if((null===r||void 0===r?void 0:r.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null===r||void 0===r?void 0:r.scopes)&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await yt(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});s.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);s.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;return n?{data:null,error:n}:await _t(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null===s||void 0===s?void 0:s.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:n,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await _t(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(s=null===o||void 0===o?void 0:o.totp)||void 0===s?void 0:s.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;if(n)return{data:null,error:n};const{data:a,error:i}=await _t(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null===s||void 0===s?void 0:s.session)||void 0===r?void 0:r.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:i})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;return n?{data:null,error:n}:await _t(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null===s||void 0===s?void 0:s.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null===e||void 0===e?void 0:e.factors)||[],s=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),n=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:s,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:n}=e;if(n)return{data:null,error:n};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=ft(s.access_token);let i=null;a.aal&&(i=a.aal);let o=i;(null!==(r=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const r=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>r)return t;const{data:s,error:n}=await _t(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=r,t=s.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:s,payload:n,signature:a,raw:{header:i,payload:o}}=ft(r);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(n.exp);const l=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(s.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:n,header:s,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,a,function(e){const t=[];return nt(e,e=>t.push(e)),new Uint8Array(t)}(`${i}.${o}`)))throw new Qe("Invalid JWT signature");return{data:{claims:n,header:s,signature:a},error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}}Wt.nextInstanceID=0;const Kt=Wt;class Jt extends Kt{constructor(e){super(e)}}var Gt=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class Qt{constructor(e,t,r){var s,n,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var r,s;const{db:n,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(r=null===u||void 0===u?void 0:u.headers)&&void 0!==r?r:{}),null!==(s=null===o||void 0===o?void 0:o.headers)&&void 0!==s?s:{})}),accessToken:()=>Pe(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==r&&void 0!==r?r:{},{db:je,realtime:ke,auth:Object.assign(Object.assign({},Ne),{storageKey:c}),global:we});this.storageKey=null!==(s=d.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(n=d.global.headers)&&void 0!==n?n:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(a=d.auth)&&void 0!==a?a:{},this.headers,d.global.fetch),this.fetch=_e(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new u(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new ve(this.storageUrl.href,this.headers,this.fetch,null===r||void 0===r?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Gt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:s,persistSession:n,detectSessionInUrl:a,storage:i,storageKey:o,flowType:l,lock:c,debug:d}=e;const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jt({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),t),storageKey:o,autoRefreshToken:s,persistSession:n,detectSessionInUrl:a,storage:i,flowType:l,lock:c,debug:d,fetch:r,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new G(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Yt={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SUPABASE_URL||"https://your-project.supabase.co",Xt={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SUPABASE_ANON_KEY||"your-anon-key-here";({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SUPABASE_URL||console.warn("\u26a0\ufe0f Supabase URL not configured. Using mock configuration for development.");const Zt=((e,t,r)=>new Qt(e,t,r))(Yt,Xt,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}});class er{constructor(){this.cache=new Map}static getInstance(){return er.instance||(er.instance=new er),er.instance}set(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e5;this.cache.set(e,{data:t,timestamp:Date.now(),ttl:r});try{localStorage.setItem(`cache_${e}`,JSON.stringify({data:t,timestamp:Date.now(),ttl:r}))}catch(s){console.warn("Failed to store in localStorage:",s)}}get(e){const t=this.cache.get(e);if(t&&Date.now()-t.timestamp<t.ttl)return t.data;try{const t=localStorage.getItem(`cache_${e}`);if(t){const r=JSON.parse(t);if(Date.now()-r.timestamp<r.ttl)return this.cache.set(e,r),r.data}}catch(r){console.warn("Failed to read from localStorage:",r)}return null}clear(e){e?(this.cache.delete(e),localStorage.removeItem(`cache_${e}`)):(this.cache.clear(),Object.keys(localStorage).forEach(e=>{e.startsWith("cache_")&&localStorage.removeItem(e)}))}}er.instance=void 0;const tr=er.getInstance();class rr{static async signUp(e,t,r){try{const{data:s,error:n}=await Zt.auth.signUp({email:e,password:t,options:{data:r}});if(n)throw n;return{data:s.user,error:null,success:!0}}catch(s){return{data:null,error:s.message,success:!1}}}static async signIn(e,t){try{const{data:r,error:s}=await Zt.auth.signInWithPassword({email:e,password:t});if(s)throw s;return{data:r.user,error:null,success:!0}}catch(r){return{data:null,error:r.message,success:!1}}}static async signOut(){try{const{error:e}=await Zt.auth.signOut();if(e)throw e;return tr.clear(),{data:null,error:null,success:!0}}catch(e){return{data:null,error:e.message,success:!1}}}static async getCurrentUser(){const{data:{user:e}}=await Zt.auth.getUser();return e}static onAuthStateChange(e){return Zt.auth.onAuthStateChange((t,r)=>{e((null===r||void 0===r?void 0:r.user)||null)})}}class sr{static async createPost(e){try{const{data:t,error:r}=await Zt.from("posts").insert(e).select().single();if(r)throw r;return tr.clear("posts_feed"),tr.clear("posts_user"),{data:t,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}static async getFeed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=`posts_feed_${e}_${t}`,s=tr.get(r);if(s)return{data:s,error:null,success:!0};try{const{data:s,error:n}=await Zt.from("posts").select("\n          *,\n          profiles:user_id (\n            username,\n            full_name,\n            avatar_url\n          )\n        ").order("created_at",{ascending:!1}).range(t,t+e-1);if(n)throw n;return tr.set(r,s,12e4),{data:s,error:null,success:!0}}catch(n){const e=tr.get(r);return e?{data:e,error:"Using cached data (offline)",success:!0}:{data:null,error:n.message,success:!1}}}static async likePost(e){try{const{error:t}=await Zt.rpc("increment_post_likes",{post_id:e});if(t)throw t;return tr.clear("posts_feed"),{data:null,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}static async uploadMedia(e){try{const t=e.name.split(".").pop(),r=`posts/${`${Date.now()}.${t}`}`,{error:s}=await Zt.storage.from("media").upload(r,e);if(s)throw s;const{data:n}=Zt.storage.from("media").getPublicUrl(r);return{data:n.publicUrl,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}}class nr{static async createEvent(e){try{const{data:t,error:r}=await Zt.from("events").insert(e).select().single();if(r)throw r;return tr.clear("events_list"),{data:t,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}static async getEvents(){const e="events_list",t=tr.get(e);if(t)return{data:t,error:null,success:!0};try{const{data:t,error:r}=await Zt.from("events").select("\n          *,\n          profiles:organizer_id (\n            username,\n            full_name,\n            avatar_url\n          )\n        ").order("date",{ascending:!0});if(r)throw r;return tr.set(e,t,3e5),{data:t,error:null,success:!0}}catch(r){const t=tr.get(e);return t?{data:t,error:"Using cached data (offline)",success:!0}:{data:null,error:r.message,success:!1}}}static async joinEvent(e,t){try{const r=await rr.getCurrentUser();if(!r)throw new Error("User not authenticated");const{error:s}=await Zt.from("event_attendees").insert({event_id:e,user_id:r.id,verification_answers:t,status:t?"pending":"approved"});if(s)throw s;return tr.clear("events_list"),{data:null,error:null,success:!0}}catch(r){return{data:null,error:r.message,success:!1}}}}class ar{static async getConversations(){try{const e=await rr.getCurrentUser();if(!e)throw new Error("User not authenticated");const{data:t,error:r}=await Zt.from("conversations").select("\n          *,\n          participants:conversation_participants(\n            user_id,\n            profiles(id, email, user_metadata)\n          ),\n          last_message:messages(content, created_at)\n        ").or(`created_by.eq.${e.id},participants.user_id.eq.${e.id}`).order("updated_at",{ascending:!1});if(r)throw r;return{data:t,error:null,success:!0}}catch(e){return{data:null,error:e.message,success:!1}}}static async getMessages(e){try{const{data:t,error:r}=await Zt.from("messages").select("\n          *,\n          sender:profiles(id, email, user_metadata)\n        ").eq("conversation_id",e).order("created_at",{ascending:!0});if(r)throw r;return{data:t,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}static async sendMessage(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";try{const s=await rr.getCurrentUser();if(!s)throw new Error("User not authenticated");const{data:n,error:a}=await Zt.from("messages").insert({conversation_id:e,sender_id:s.id,content:t,message_type:r}).select().single();if(a)throw a;return await Zt.from("conversations").update({updated_at:(new Date).toISOString()}).eq("id",e),{data:n,error:null,success:!0}}catch(s){return{data:null,error:s.message,success:!1}}}static async createConversation(e,t){try{const r=await rr.getCurrentUser();if(!r)throw new Error("User not authenticated");const{data:s,error:n}=await Zt.from("conversations").insert({title:t||"New Conversation",created_by:r.id,type:e.length>1?"group":"direct"}).select().single();if(n)throw n;const a=e.map(e=>({conversation_id:s.id,user_id:e})),{error:i}=await Zt.from("conversation_participants").insert(a);if(i)throw i;return{data:s,error:null,success:!0}}catch(r){return{data:null,error:r.message,success:!1}}}static subscribeToMessages(e,t){return Zt.channel(`messages:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=eq.${e}`},t).subscribe()}static subscribeToConversations(e,t){return Zt.channel(`conversations:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"conversations"},t).subscribe()}}class ir{static async getNotifications(){try{const e=await rr.getCurrentUser();if(!e)throw new Error("User not authenticated");const{data:t,error:r}=await Zt.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(r)throw r;return{data:t,error:null,success:!0}}catch(e){return{data:null,error:e.message,success:!1}}}static async markAsRead(e){try{const{error:t}=await Zt.from("notifications").update({read:!0}).eq("id",e);if(t)throw t;return{data:null,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}static async createNotification(e){try{const{data:t,error:r}=await Zt.from("notifications").insert(e).select().single();if(r)throw r;return{data:t,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}}class or{static async getProfile(e){try{var t;const r=e||(null===(t=await rr.getCurrentUser())||void 0===t?void 0:t.id);if(!r)throw new Error("User not found");const{data:s,error:n}=await Zt.from("profiles").select("*").eq("id",r).single();if(n)throw n;return{data:s,error:null,success:!0}}catch(r){return{data:null,error:r.message,success:!1}}}static async updateProfile(e){try{const t=await rr.getCurrentUser();if(!t)throw new Error("User not authenticated");const{data:r,error:s}=await Zt.from("profiles").update(e).eq("id",t.id).select().single();if(s)throw s;return{data:r,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}}class lr{static isOnline(){return navigator.onLine}static onNetworkChange(e){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t),window.addEventListener("offline",r),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}const cr={auth:rr,posts:sr,events:nr,messages:ar,notifications:ir,profile:or,network:lr};class dr{static async uploadFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"uploads",r=arguments.length>2?arguments[2]:void 0;try{if(!await rr.getCurrentUser())throw new Error("User not authenticated");const s=e.name.split(".").pop(),n=`${Date.now()}-${Math.random().toString(36).substring(2)}.${s}`,a=r?`${r}/${n}`:n,{data:i,error:o}=await Zt.storage.from(t).upload(a,e,{cacheControl:"3600",upsert:!1});if(o)throw o;const{data:{publicUrl:l}}=Zt.storage.from(t).getPublicUrl(i.path);return{data:{url:l,path:i.path},error:null,success:!0}}catch(s){return{data:null,error:s.message,success:!1}}}static async uploadProfileImage(e){return this.uploadFile(e,"profiles","avatars")}static async uploadPostMedia(e){return this.uploadFile(e,"posts","media")}static async uploadMessageFile(e){return this.uploadFile(e,"messages","attachments")}static async deleteFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"uploads";try{const{error:r}=await Zt.storage.from(t).remove([e]);if(r)throw r;return{data:null,error:null,success:!0}}catch(r){return{data:null,error:r.message,success:!1}}}static getPublicUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"uploads";const{data:r}=Zt.storage.from(t).getPublicUrl(e);return r.publicUrl}static validateFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5242880,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["image/jpeg","image/png","image/gif","image/webp"];return e.size>t?{valid:!1,error:`File size must be less than ${t/1024/1024}MB`}:r.includes(e.type)?{valid:!0}:{valid:!1,error:`File type ${e.type} is not allowed`}}}class ur{static async saveRoute(e){try{const t=await rr.getCurrentUser();if(!t)throw new Error("User not authenticated");const{data:r,error:s}=await Zt.from("routes").insert({user_id:t.id,name:e.name,description:e.description,waypoints:e.waypoints,distance:e.distance,duration:e.duration,difficulty:e.difficulty,tags:e.tags,is_public:!1}).select().single();if(s)throw s;return{data:r,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}static async getRoutes(e){try{let t=Zt.from("routes").select("\n          *,\n          user:profiles(id, email, user_metadata)\n        ").order("created_at",{ascending:!1});null!==e&&void 0!==e&&e.userId&&(t=t.eq("user_id",e.userId)),null!==e&&void 0!==e&&e.difficulty&&(t=t.eq("difficulty",e.difficulty)),void 0!==(null===e||void 0===e?void 0:e.isPublic)&&(t=t.eq("is_public",e.isPublic)),null!==e&&void 0!==e&&e.tags&&e.tags.length>0&&(t=t.overlaps("tags",e.tags));const{data:r,error:s}=await t;if(s)throw s;return{data:r,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}static async getRoute(e){try{const{data:t,error:r}=await Zt.from("routes").select("\n          *,\n          user:profiles(id, email, user_metadata)\n        ").eq("id",e).single();if(r)throw r;return{data:t,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}static async updateRoute(e,t){try{const r=await rr.getCurrentUser();if(!r)throw new Error("User not authenticated");const{data:s,error:n}=await Zt.from("routes").update(t).eq("id",e).eq("user_id",r.id).select().single();if(n)throw n;return{data:s,error:null,success:!0}}catch(r){return{data:null,error:r.message,success:!1}}}static async deleteRoute(e){try{const t=await rr.getCurrentUser();if(!t)throw new Error("User not authenticated");const{error:r}=await Zt.from("routes").delete().eq("id",e).eq("user_id",t.id);if(r)throw r;return{data:null,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}static async saveOfflineMap(e){try{const t=await rr.getCurrentUser();if(!t)throw new Error("User not authenticated");const{data:r,error:s}=await Zt.from("offline_maps").insert({user_id:t.id,name:e.name,bounds:e.bounds,zoom_level:e.zoom_level,tiles_data:e.tiles_data,size_mb:e.size_mb}).select().single();if(s)throw s;return{data:r,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}static async getOfflineMaps(){try{const e=await rr.getCurrentUser();if(!e)throw new Error("User not authenticated");const{data:t,error:r}=await Zt.from("offline_maps").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(r)throw r;return{data:t,error:null,success:!0}}catch(e){return{data:null,error:e.message,success:!1}}}static async deleteOfflineMap(e){try{const t=await rr.getCurrentUser();if(!t)throw new Error("User not authenticated");const{error:r}=await Zt.from("offline_maps").delete().eq("id",e).eq("user_id",t.id);if(r)throw r;return{data:null,error:null,success:!0}}catch(t){return{data:null,error:t.message,success:!1}}}static calculateDistance(e,t){const r=(t.lat-e.lat)*Math.PI/180,s=(t.lng-e.lng)*Math.PI/180,n=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.lat*Math.PI/180)*Math.cos(t.lat*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)))}static calculateRouteDistance(e){if(e.length<2)return 0;let t=0;for(let r=1;r<e.length;r++)t+=this.calculateDistance(e[r-1],e[r]);return t}}const{auth:hr,posts:pr,events:mr,messages:fr,notifications:xr,profile:gr,network:yr}=cr,vr=dr,br=ur},286:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(630)),a=s(r(611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,s;let n=null,i=null,o=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const s=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),a=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");s&&a&&a.length>1&&(o=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(n={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,o=null,l=406,c="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{n=JSON.parse(t),Array.isArray(n)&&404===e.status&&(i=[],n=null,l=200,c="OK")}catch(d){404===e.status&&""===t?(l=204,c="No Content"):n={message:t}}if(n&&this.isMaybeSingle&&(null===(s=null===n||void 0===n?void 0:n.details)||void 0===s?void 0:s.includes("0 rows"))&&(n=null,l=200,c="OK"),n&&this.shouldThrowOnError)throw new a.default(n)}return{error:n,data:i,count:o,status:l,statusText:c}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,s;return{error:{message:`${null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(r=null===e||void 0===e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(s=null===e||void 0===e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},374:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(286));class a extends n.default{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=n?`${n}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="undefined"===typeof r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t){let{foreignTable:r,referencedTable:s=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n="undefined"===typeof s?"offset":`${s}.offset`,a="undefined"===typeof s?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(a,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:a="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.Accept)&&void 0!==i?i:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=a},391:(e,t,r)=>{"use strict";var s=r(950);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},400:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},579:(e,t,r)=>{"use strict";e.exports=r(153)},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=r},630:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Headers:()=>i,Request:()=>o,Response:()=>l,default:()=>a,fetch:()=>n});var s=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}();const n=s.fetch,a=s.fetch.bind(s),i=s.Headers,o=s.Request,l=s.Response},730:(e,t,r)=>{"use strict";var s=r(43),n=r(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,r,s,n,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){x[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];x[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){x[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){x[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){x[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){x[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){x[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){x[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){x[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function v(e,t,r,s){var n=x.hasOwnProperty(t)?x[t]:null;(null!==n?0!==n.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,s){if(null===t||"undefined"===typeof t||function(e,t,r,s){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,s))return!0;if(s)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,n,s)&&(r=null),s||null===n?function(e){return!!u.call(m,e)||!u.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=null===r?3!==n.type&&"":r:(t=n.attributeName,s=n.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(n=n.type)||4===n&&!0===r?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,y);x[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,y);x[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,y);x[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),x.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var D,I=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var U=!1;function $(e,t){if(!e||U)return"";U=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),a=s.stack.split("\n"),i=n.length-1,o=a.length-1;1<=i&&0<=o&&n[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(n[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||n[i]!==a[o]){var l="\n"+n[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1);case 11:return e=$(e.type.render,!1);case 1:return e=$(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case j:return"Portal";case S:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(r){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var n=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){s=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=H(e)?e.checked?"true":"false":e.value),(e=s)!==r&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var r=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Q(e,t){var r=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;r=V(null!=t.value?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function X(e,t){Y(e,t);var r=V(t.value),s=t.type;if(null!=r)"number"===s?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&J(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,s){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&s&&(e[r].defaultSelected=!0)}else{for(r=""+V(r),t=null,n=0;n<e.length;n++){if(e[n].value===r)return e[n].selected=!0,void(s&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(te(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:V(r)}}function ae(e,t){var r=V(t.value),s=V(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=s&&(e.defaultValue=""+s)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function xe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var s=0===r.indexOf("--"),n=fe(r,t[r],s);"float"===r&&(r="cssFloat"),s?e.setProperty(r,n):e[r]=n}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ge=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,Ne=null,ke=null;function Se(e){if(e=vn(e)){if("function"!==typeof je)throw Error(a(280));var t=e.stateNode;t&&(t=wn(t),je(e.stateNode,e.type,t))}}function Ce(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function Ee(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function _e(e,t){return e(t)}function Pe(){}var Te=!1;function Ae(e,t,r){if(Te)return e(t,r);Te=!0;try{return _e(e,t,r)}finally{Te=!1,(null!==Ne||null!==ke)&&(Pe(),Ee())}}function Oe(e,t){var r=e.stateNode;if(null===r)return null;var s=wn(r);if(null===s)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}var Re=!1;if(d)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(de){Re=!1}function Le(e,t,r,s,n,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var De=!1,Ie=null,Fe=!1,Ue=null,$e={onError:function(e){De=!0,Ie=e}};function Be(e,t,r,s,n,a,i,o,l){De=!1,Ie=null,Le.apply($e,arguments)}function ze(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(ze(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,s=t;;){var n=r.return;if(null===n)break;var i=n.alternate;if(null===i){if(null!==(s=n.return)){r=s;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return Ve(n),e;if(i===s)return Ve(n),t;i=i.sibling}throw Error(a(188))}if(r.return!==s.return)r=n,s=i;else{for(var o=!1,l=n.child;l;){if(l===r){o=!0,r=n,s=i;break}if(l===s){o=!0,s=n,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=n;break}if(l===s){o=!0,s=i,r=n;break}l=l.sibling}if(!o)throw Error(a(189))}}if(r.alternate!==s)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=n.unstable_scheduleCallback,Je=n.unstable_cancelCallback,Ge=n.unstable_shouldYield,Qe=n.unstable_requestPaint,Ye=n.unstable_now,Xe=n.unstable_getCurrentPriorityLevel,Ze=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,rt=n.unstable_LowPriority,st=n.unstable_IdlePriority,nt=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var s=0,n=e.suspendedLanes,a=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~n;0!==o?s=ut(o):0!==(a&=i)&&(s=ut(a))}else 0!==(i=r&~n)?s=ut(i):0!==a&&(s=ut(a));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&n)&&((n=s&-s)>=(a=t&-t)||16===n&&0!==(4194240&a)))return t;if(0!==(4&s)&&(s|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)n=1<<(r=31-it(t)),s|=e[r],t&=~n;return s}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function xt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function yt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-it(r),n=1<<s;n&t|e[s]&t&&(e[s]|=t),r&=~n}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,Nt,kt,St,Ct=!1,Et=[],_t=null,Pt=null,Tt=null,At=new Map,Ot=new Map,Rt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Dt(e,t,r,s,n,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[n]},null!==t&&(null!==(t=vn(t))&&jt(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function It(e){var t=yn(e.target);if(null!==t){var r=ze(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=qe(r)))return e.blockedOn=t,void St(e.priority,function(){Nt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=vn(r))&&jt(t),e.blockedOn=r,!1;var s=new(r=e.nativeEvent).constructor(r.type,r);be=s,r.target.dispatchEvent(s),be=null,t.shift()}return!0}function Ut(e,t,r){Ft(e)&&r.delete(t)}function $t(){Ct=!1,null!==_t&&Ft(_t)&&(_t=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==Tt&&Ft(Tt)&&(Tt=null),At.forEach(Ut),Ot.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$t)))}function zt(e){function t(t){return Bt(t,e)}if(0<Et.length){Bt(Et[0],e);for(var r=1;r<Et.length;r++){var s=Et[r];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==_t&&Bt(_t,e),null!==Pt&&Bt(Pt,e),null!==Tt&&Bt(Tt,e),At.forEach(t),Ot.forEach(t),r=0;r<Rt.length;r++)(s=Rt[r]).blockedOn===e&&(s.blockedOn=null);for(;0<Rt.length&&null===(r=Rt[0]).blockedOn;)It(r),null===r.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Vt=!0;function Ht(e,t,r,s){var n=vt,a=qt.transition;qt.transition=null;try{vt=1,Kt(e,t,r,s)}finally{vt=n,qt.transition=a}}function Wt(e,t,r,s){var n=vt,a=qt.transition;qt.transition=null;try{vt=4,Kt(e,t,r,s)}finally{vt=n,qt.transition=a}}function Kt(e,t,r,s){if(Vt){var n=Gt(e,t,r,s);if(null===n)qs(e,t,s,Jt,r),Lt(e,s);else if(function(e,t,r,s,n){switch(t){case"focusin":return _t=Dt(_t,e,t,r,s,n),!0;case"dragenter":return Pt=Dt(Pt,e,t,r,s,n),!0;case"mouseover":return Tt=Dt(Tt,e,t,r,s,n),!0;case"pointerover":var a=n.pointerId;return At.set(a,Dt(At.get(a)||null,e,t,r,s,n)),!0;case"gotpointercapture":return a=n.pointerId,Ot.set(a,Dt(Ot.get(a)||null,e,t,r,s,n)),!0}return!1}(n,e,t,r,s))s.stopPropagation();else if(Lt(e,s),4&t&&-1<Mt.indexOf(e)){for(;null!==n;){var a=vn(n);if(null!==a&&wt(a),null===(a=Gt(e,t,r,s))&&qs(e,t,s,Jt,r),a===n)break;n=a}null!==n&&s.stopPropagation()}else qs(e,t,s,null,r)}}var Jt=null;function Gt(e,t,r,s){if(Jt=null,null!==(e=yn(e=we(s))))if(null===(t=ze(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Xt,s=r.length,n="value"in Yt?Yt.value:Yt.textContent,a=n.length;for(e=0;e<s&&r[e]===n[e];e++);var i=s-e;for(t=1;t<=i&&r[s-t]===n[a-t];t++);return Zt=n.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function sr(){return!1}function nr(e){function t(t,r,s,n,a){for(var i in this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=n,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(n):n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?rr:sr,this.isPropagationStopped=sr,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ar,ir,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=nr(lr),dr=I({},lr,{view:0,detail:0}),ur=nr(dr),hr=I({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(ar=e.screenX-or.screenX,ir=e.screenY-or.screenY):ir=ar=0,or=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),pr=nr(hr),mr=nr(I({},hr,{dataTransfer:0})),fr=nr(I({},dr,{relatedTarget:0})),xr=nr(I({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=I({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=nr(gr),vr=nr(I({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jr[e])&&!!t[e]}function kr(){return Nr}var Sr=I({},dr,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cr=nr(Sr),Er=nr(I({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_r=nr(I({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),Pr=nr(I({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tr=I({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ar=nr(Tr),Or=[9,13,27,32],Rr=d&&"CompositionEvent"in window,Mr=null;d&&"documentMode"in document&&(Mr=document.documentMode);var Lr=d&&"TextEvent"in window&&!Mr,Dr=d&&(!Rr||Mr&&8<Mr&&11>=Mr),Ir=String.fromCharCode(32),Fr=!1;function Ur(e,t){switch(e){case"keyup":return-1!==Or.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $r(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Br=!1;var zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zr[e.type]:"textarea"===t}function Vr(e,t,r,s){Ce(s),0<(t=Hs(t,"onChange")).length&&(r=new cr("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Hr=null,Wr=null;function Kr(e){Is(e,0)}function Jr(e){if(K(bn(e)))return e}function Gr(e,t){if("change"===e)return t}var Qr=!1;if(d){var Yr;if(d){var Xr="oninput"in document;if(!Xr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Xr="function"===typeof Zr.oninput}Yr=Xr}else Yr=!1;Qr=Yr&&(!document.documentMode||9<document.documentMode)}function es(){Hr&&(Hr.detachEvent("onpropertychange",ts),Wr=Hr=null)}function ts(e){if("value"===e.propertyName&&Jr(Wr)){var t=[];Vr(t,Wr,e,we(e)),Ae(Kr,t)}}function rs(e,t,r){"focusin"===e?(es(),Wr=r,(Hr=t).attachEvent("onpropertychange",ts)):"focusout"===e&&es()}function ss(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jr(Wr)}function ns(e,t){if("click"===e)return Jr(t)}function as(e,t){if("input"===e||"change"===e)return Jr(t)}var is="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function os(e,t){if(is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!u.call(t,n)||!is(e[n],t[n]))return!1}return!0}function ls(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cs(e,t){var r,s=ls(e);for(e=0;s;){if(3===s.nodeType){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ls(s)}}function ds(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ds(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function us(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(s){r=!1}if(!r)break;t=J((e=t.contentWindow).document)}return t}function hs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ps(e){var t=us(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ds(r.ownerDocument.documentElement,r)){if(null!==s&&hs(r))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=r.textContent.length,a=Math.min(s.start,n);s=void 0===s.end?a:Math.min(s.end,n),!e.extend&&a>s&&(n=s,s=a,a=n),n=cs(r,a);var i=cs(r,s);n&&i&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ms=d&&"documentMode"in document&&11>=document.documentMode,fs=null,xs=null,gs=null,ys=!1;function vs(e,t,r){var s=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;ys||null==fs||fs!==J(s)||("selectionStart"in(s=fs)&&hs(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},gs&&os(gs,s)||(gs=s,0<(s=Hs(xs,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=fs)))}function bs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ws={animationend:bs("Animation","AnimationEnd"),animationiteration:bs("Animation","AnimationIteration"),animationstart:bs("Animation","AnimationStart"),transitionend:bs("Transition","TransitionEnd")},js={},Ns={};function ks(e){if(js[e])return js[e];if(!ws[e])return e;var t,r=ws[e];for(t in r)if(r.hasOwnProperty(t)&&t in Ns)return js[e]=r[t];return e}d&&(Ns=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);var Ss=ks("animationend"),Cs=ks("animationiteration"),Es=ks("animationstart"),_s=ks("transitionend"),Ps=new Map,Ts="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(e,t){Ps.set(e,t),l(t,[e])}for(var Os=0;Os<Ts.length;Os++){var Rs=Ts[Os];As(Rs.toLowerCase(),"on"+(Rs[0].toUpperCase()+Rs.slice(1)))}As(Ss,"onAnimationEnd"),As(Cs,"onAnimationIteration"),As(Es,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(_s,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ls=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ms));function Ds(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,s,n,i,o,l,c){if(Be.apply(this,arguments),De){if(!De)throw Error(a(198));var d=Ie;De=!1,Ie=null,Fe||(Fe=!0,Ue=d)}}(s,t,void 0,e),e.currentTarget=null}function Is(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var s=e[r],n=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&n.isPropagationStopped())break e;Ds(n,o,c),a=l}else for(i=0;i<s.length;i++){if(l=(o=s[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&n.isPropagationStopped())break e;Ds(n,o,c),a=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Fs(e,t){var r=t[fn];void 0===r&&(r=t[fn]=new Set);var s=e+"__bubble";r.has(s)||(zs(t,e,2,!1),r.add(s))}function Us(e,t,r){var s=0;t&&(s|=4),zs(r,e,s,t)}var $s="_reactListening"+Math.random().toString(36).slice(2);function Bs(e){if(!e[$s]){e[$s]=!0,i.forEach(function(t){"selectionchange"!==t&&(Ls.has(t)||Us(t,!1,e),Us(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$s]||(t[$s]=!0,Us("selectionchange",!1,t))}}function zs(e,t,r,s){switch(Qt(t)){case 1:var n=Ht;break;case 4:n=Wt;break;default:n=Kt}r=n.bind(null,t,r,e),n=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),s?void 0!==n?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):void 0!==n?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function qs(e,t,r,s,n){var a=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var i=s.tag;if(3===i||4===i){var o=s.stateNode.containerInfo;if(o===n||8===o.nodeType&&o.parentNode===n)break;if(4===i)for(i=s.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===n||8===l.nodeType&&l.parentNode===n))return;i=i.return}for(;null!==o;){if(null===(i=yn(o)))return;if(5===(l=i.tag)||6===l){s=a=i;continue e}o=o.parentNode}}s=s.return}Ae(function(){var s=a,n=we(r),i=[];e:{var o=Ps.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Cr;break;case"focusin":c="focus",l=fr;break;case"focusout":c="blur",l=fr;break;case"beforeblur":case"afterblur":l=fr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_r;break;case Ss:case Cs:case Es:l=xr;break;case _s:l=Pr;break;case"scroll":l=ur;break;case"wheel":l=Ar;break;case"copy":case"cut":case"paste":l=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Er}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=s;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Oe(m,h))&&d.push(Vs(m,f,p)))),u)break;m=m.return}0<d.length&&(o=new l(o,c,null,r,n),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!yn(c)&&!c[mn])&&(l||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=s,null!==(c=(c=r.relatedTarget||r.toElement)?yn(c):null)&&(c!==(u=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(d=pr,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=Er,f="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?o:bn(l),p=null==c?o:bn(c),(o=new d(f,m+"leave",l,r,n)).target=u,o.relatedTarget=p,f=null,yn(n)===s&&((d=new d(h,m+"enter",c,r,n)).target=p,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,m=0,p=d=l;p;p=Ws(p))m++;for(p=0,f=h;f;f=Ws(f))p++;for(;0<m-p;)d=Ws(d),m--;for(;0<p-m;)h=Ws(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Ws(d),h=Ws(h)}d=null}else d=null;null!==l&&Ks(i,o,l,d,!1),null!==c&&null!==u&&Ks(i,u,c,d,!0)}if("select"===(l=(o=s?bn(s):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var x=Gr;else if(qr(o))if(Qr)x=as;else{x=ss;var g=rs}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(x=ns);switch(x&&(x=x(e,s))?Vr(i,x,r,n):(g&&g(e,o,s),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=s?bn(s):window,e){case"focusin":(qr(g)||"true"===g.contentEditable)&&(fs=g,xs=s,gs=null);break;case"focusout":gs=xs=fs=null;break;case"mousedown":ys=!0;break;case"contextmenu":case"mouseup":case"dragend":ys=!1,vs(i,r,n);break;case"selectionchange":if(ms)break;case"keydown":case"keyup":vs(i,r,n)}var y;if(Rr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Br?Ur(e,r)&&(v="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(v="onCompositionStart");v&&(Dr&&"ko"!==r.locale&&(Br||"onCompositionStart"!==v?"onCompositionEnd"===v&&Br&&(y=er()):(Xt="value"in(Yt=n)?Yt.value:Yt.textContent,Br=!0)),0<(g=Hs(s,v)).length&&(v=new vr(v,e,null,r,n),i.push({event:v,listeners:g}),y?v.data=y:null!==(y=$r(r))&&(v.data=y))),(y=Lr?function(e,t){switch(e){case"compositionend":return $r(t);case"keypress":return 32!==t.which?null:(Fr=!0,Ir);case"textInput":return(e=t.data)===Ir&&Fr?null:e;default:return null}}(e,r):function(e,t){if(Br)return"compositionend"===e||!Rr&&Ur(e,t)?(e=er(),Zt=Xt=Yt=null,Br=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(s=Hs(s,"onBeforeInput")).length&&(n=new vr("onBeforeInput","beforeinput",null,r,n),i.push({event:n,listeners:s}),n.data=y))}Is(i,t)})}function Vs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hs(e,t){for(var r=t+"Capture",s=[];null!==e;){var n=e,a=n.stateNode;5===n.tag&&null!==a&&(n=a,null!=(a=Oe(e,r))&&s.unshift(Vs(e,a,n)),null!=(a=Oe(e,t))&&s.push(Vs(e,a,n))),e=e.return}return s}function Ws(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ks(e,t,r,s,n){for(var a=t._reactName,i=[];null!==r&&r!==s;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===s)break;5===o.tag&&null!==c&&(o=c,n?null!=(l=Oe(r,a))&&i.unshift(Vs(r,l,o)):n||null!=(l=Oe(r,a))&&i.push(Vs(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Js=/\r\n?/g,Gs=/\u0000|\uFFFD/g;function Qs(e){return("string"===typeof e?e:""+e).replace(Js,"\n").replace(Gs,"")}function Ys(e,t,r){if(t=Qs(t),Qs(e)!==t&&r)throw Error(a(425))}function Xs(){}var Zs=null,en=null;function tn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rn="function"===typeof setTimeout?setTimeout:void 0,sn="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,an="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(e){return nn.resolve(null).then(e).catch(on)}:rn;function on(e){setTimeout(function(){throw e})}function ln(e,t){var r=t,s=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&8===n.nodeType)if("/$"===(r=n.data)){if(0===s)return e.removeChild(n),void zt(t);s--}else"$"!==r&&"$?"!==r&&"$!"!==r||s++;r=n}while(r);zt(t)}function cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),hn="__reactFiber$"+un,pn="__reactProps$"+un,mn="__reactContainer$"+un,fn="__reactEvents$"+un,xn="__reactListeners$"+un,gn="__reactHandles$"+un;function yn(e){var t=e[hn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[mn]||r[hn]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=dn(e);null!==e;){if(r=e[hn])return r;e=dn(e)}return t}r=(e=r).parentNode}return null}function vn(e){return!(e=e[hn]||e[mn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wn(e){return e[pn]||null}var jn=[],Nn=-1;function kn(e){return{current:e}}function Sn(e){0>Nn||(e.current=jn[Nn],jn[Nn]=null,Nn--)}function Cn(e,t){Nn++,jn[Nn]=e.current,e.current=t}var En={},_n=kn(En),Pn=kn(!1),Tn=En;function An(e,t){var r=e.type.contextTypes;if(!r)return En;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n,a={};for(n in r)a[n]=t[n];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function On(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rn(){Sn(Pn),Sn(_n)}function Mn(e,t,r){if(_n.current!==En)throw Error(a(168));Cn(_n,t),Cn(Pn,r)}function Ln(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return r;for(var n in s=s.getChildContext())if(!(n in t))throw Error(a(108,q(e)||"Unknown",n));return I({},r,s)}function Dn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||En,Tn=_n.current,Cn(_n,e),Cn(Pn,Pn.current),!0}function In(e,t,r){var s=e.stateNode;if(!s)throw Error(a(169));r?(e=Ln(e,t,Tn),s.__reactInternalMemoizedMergedChildContext=e,Sn(Pn),Sn(_n),Cn(_n,e)):Sn(Pn),Cn(Pn,r)}var Fn=null,Un=!1,$n=!1;function Bn(e){null===Fn?Fn=[e]:Fn.push(e)}function zn(){if(!$n&&null!==Fn){$n=!0;var e=0,t=vt;try{var r=Fn;for(vt=1;e<r.length;e++){var s=r[e];do{s=s(!0)}while(null!==s)}Fn=null,Un=!1}catch(n){throw null!==Fn&&(Fn=Fn.slice(e+1)),Ke(Ze,zn),n}finally{vt=t,$n=!1}}return null}var qn=[],Vn=0,Hn=null,Wn=0,Kn=[],Jn=0,Gn=null,Qn=1,Yn="";function Xn(e,t){qn[Vn++]=Wn,qn[Vn++]=Hn,Hn=e,Wn=t}function Zn(e,t,r){Kn[Jn++]=Qn,Kn[Jn++]=Yn,Kn[Jn++]=Gn,Gn=e;var s=Qn;e=Yn;var n=32-it(s)-1;s&=~(1<<n),r+=1;var a=32-it(t)+n;if(30<a){var i=n-n%5;a=(s&(1<<i)-1).toString(32),s>>=i,n-=i,Qn=1<<32-it(t)+n|r<<n|s,Yn=a+e}else Qn=1<<a|r<<n|s,Yn=e}function ea(e){null!==e.return&&(Xn(e,1),Zn(e,1,0))}function ta(e){for(;e===Hn;)Hn=qn[--Vn],qn[Vn]=null,Wn=qn[--Vn],qn[Vn]=null;for(;e===Gn;)Gn=Kn[--Jn],Kn[Jn]=null,Yn=Kn[--Jn],Kn[Jn]=null,Qn=Kn[--Jn],Kn[Jn]=null}var ra=null,sa=null,na=!1,aa=null;function ia(e,t){var r=Ac(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function oa(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,sa=cn(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,sa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Gn?{id:Qn,overflow:Yn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ac(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ra=e,sa=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(na){var t=sa;if(t){var r=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cn(r.nextSibling);var s=ra;t&&oa(e,t)?ia(s,r):(e.flags=-4097&e.flags|2,na=!1,ra=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,na=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ua(e){if(e!==ra)return!1;if(!na)return da(e),na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tn(e.type,e.memoizedProps)),t&&(t=sa)){if(la(e))throw ha(),Error(a(418));for(;t;)ia(e,t),t=cn(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){sa=cn(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}sa=null}}else sa=ra?cn(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=sa;e;)e=cn(e.nextSibling)}function pa(){sa=ra=null,na=!1}function ma(e){null===aa?aa=[e]:aa.push(e)}var fa=b.ReactCurrentBatchConfig;function xa(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var s=r.stateNode}if(!s)throw Error(a(147,e));var n=s,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=n.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function va(e){function t(t,r){if(e){var s=t.deletions;null===s?(t.deletions=[r],t.flags|=16):s.push(r)}}function r(r,s){if(!e)return null;for(;null!==s;)t(r,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,r,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<r?(t.flags|=2,r):s:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,s){return null===t||6!==t.tag?((t=Ic(r,e.mode,s)).return=e,t):((t=n(t,r)).return=e,t)}function c(e,t,r,s){var a=r.type;return a===N?u(e,t,r.props.children,s,r.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&ya(a)===t.type)?((s=n(t,r.props)).ref=xa(e,t,r),s.return=e,s):((s=Mc(r.type,r.key,r.props,null,e.mode,s)).ref=xa(e,t,r),s.return=e,s)}function d(e,t,r,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fc(r,e.mode,s)).return=e,t):((t=n(t,r.children||[])).return=e,t)}function u(e,t,r,s,a){return null===t||7!==t.tag?((t=Lc(r,e.mode,s,a)).return=e,t):((t=n(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ic(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Mc(t.type,t.key,t.props,null,e.mode,r)).ref=xa(e,null,t),r.return=e,r;case j:return(t=Fc(t,e.mode,r)).return=e,t;case O:return h(e,(0,t._init)(t._payload),r)}if(te(t)||L(t))return(t=Lc(t,e.mode,r,null)).return=e,t;ga(e,t)}return null}function p(e,t,r,s){var n=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==n?null:l(e,t,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===n?c(e,t,r,s):null;case j:return r.key===n?d(e,t,r,s):null;case O:return p(e,t,(n=r._init)(r._payload),s)}if(te(r)||L(r))return null!==n?null:u(e,t,r,s,null);ga(e,r)}return null}function m(e,t,r,s,n){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(r)||null,""+s,n);if("object"===typeof s&&null!==s){switch(s.$$typeof){case w:return c(t,e=e.get(null===s.key?r:s.key)||null,s,n);case j:return d(t,e=e.get(null===s.key?r:s.key)||null,s,n);case O:return m(e,t,r,(0,s._init)(s._payload),n)}if(te(s)||L(s))return u(t,e=e.get(r)||null,s,n,null);ga(t,s)}return null}function f(n,a,o,l){for(var c=null,d=null,u=a,f=a=0,x=null;null!==u&&f<o.length;f++){u.index>f?(x=u,u=null):x=u.sibling;var g=p(n,u,o[f],l);if(null===g){null===u&&(u=x);break}e&&u&&null===g.alternate&&t(n,u),a=i(g,a,f),null===d?c=g:d.sibling=g,d=g,u=x}if(f===o.length)return r(n,u),na&&Xn(n,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(n,o[f],l))&&(a=i(u,a,f),null===d?c=u:d.sibling=u,d=u);return na&&Xn(n,f),c}for(u=s(n,u);f<o.length;f++)null!==(x=m(u,n,f,o[f],l))&&(e&&null!==x.alternate&&u.delete(null===x.key?f:x.key),a=i(x,a,f),null===d?c=x:d.sibling=x,d=x);return e&&u.forEach(function(e){return t(n,e)}),na&&Xn(n,f),c}function x(n,o,l,c){var d=L(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,f=o,x=o=0,g=null,y=l.next();null!==f&&!y.done;x++,y=l.next()){f.index>x?(g=f,f=null):g=f.sibling;var v=p(n,f,y.value,c);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(n,f),o=i(v,o,x),null===u?d=v:u.sibling=v,u=v,f=g}if(y.done)return r(n,f),na&&Xn(n,x),d;if(null===f){for(;!y.done;x++,y=l.next())null!==(y=h(n,y.value,c))&&(o=i(y,o,x),null===u?d=y:u.sibling=y,u=y);return na&&Xn(n,x),d}for(f=s(n,f);!y.done;x++,y=l.next())null!==(y=m(f,n,x,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?x:y.key),o=i(y,o,x),null===u?d=y:u.sibling=y,u=y);return e&&f.forEach(function(e){return t(n,e)}),na&&Xn(n,x),d}return function e(s,a,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){r(s,d.sibling),(a=n(d,i.props.children)).return=s,s=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&ya(c)===d.type){r(s,d.sibling),(a=n(d,i.props)).ref=xa(s,d,i),a.return=s,s=a;break e}r(s,d);break}t(s,d),d=d.sibling}i.type===N?((a=Lc(i.props.children,s.mode,l,i.key)).return=s,s=a):((l=Mc(i.type,i.key,i.props,null,s.mode,l)).ref=xa(s,a,i),l.return=s,s=l)}return o(s);case j:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){r(s,a.sibling),(a=n(a,i.children||[])).return=s,s=a;break e}r(s,a);break}t(s,a),a=a.sibling}(a=Fc(i,s.mode,l)).return=s,s=a}return o(s);case O:return e(s,a,(d=i._init)(i._payload),l)}if(te(i))return f(s,a,i,l);if(L(i))return x(s,a,i,l);ga(s,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(r(s,a.sibling),(a=n(a,i)).return=s,s=a):(r(s,a),(a=Ic(i,s.mode,l)).return=s,s=a),o(s)):r(s,a)}}var ba=va(!0),wa=va(!1),ja=kn(null),Na=null,ka=null,Sa=null;function Ca(){Sa=ka=Na=null}function Ea(e){var t=ja.current;Sn(ja),e._currentValue=t}function _a(e,t,r){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Pa(e,t){Na=e,Sa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(Sa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===Na)throw Error(a(308));ka=e,Na.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Aa=null;function Oa(e){null===Aa?Aa=[e]:Aa.push(e)}function Ra(e,t,r,s){var n=t.interleaved;return null===n?(r.next=r,Oa(t)):(r.next=n.next,n.next=r),t.interleaved=r,Ma(e,s)}function Ma(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var La=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,r){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&_l)){var n=s.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),s.pending=t,Ma(e,r)}return null===(n=s.interleaved)?(t.next=t,Oa(s)):(t.next=n.next,n.next=t),s.interleaved=t,Ma(e,r)}function $a(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var s=t.lanes;r|=s&=e.pendingLanes,t.lanes=r,yt(e,r)}}function Ba(e,t){var r=e.updateQueue,s=e.alternate;if(null!==s&&r===(s=s.updateQueue)){var n=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?n=a=i:a=a.next=i,r=r.next}while(null!==r);null===a?n=a=t:a=a.next=t}else n=a=t;return r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:s.shared,effects:s.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function za(e,t,r,s){var n=e.updateQueue;La=!1;var a=n.firstBaseUpdate,i=n.lastBaseUpdate,o=n.shared.pending;if(null!==o){n.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=n.baseState;for(i=0,d=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((s&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=r,f.tag){case 1:if("function"===typeof(m=f.payload)){u=m.call(p,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,u,h):m)||void 0===h)break e;u=I({},u,h);break e;case 2:La=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=n.effects)?n.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,i|=h;if(null===(o=o.next)){if(null===(o=n.shared.pending))break;o=(h=o).next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}if(null===d&&(l=u),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null!==(t=n.shared.interleaved)){n=t;do{i|=n.lane,n=n.next}while(n!==t)}else null===a&&(n.shared.lanes=0);Dl|=i,e.lanes=i,e.memoizedState=u}}function qa(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(null!==n){if(s.callback=null,s=r,"function"!==typeof n)throw Error(a(191,n));n.call(s)}}}var Va={},Ha=kn(Va),Wa=kn(Va),Ka=kn(Va);function Ja(e){if(e===Va)throw Error(a(174));return e}function Ga(e,t){switch(Cn(Ka,t),Cn(Wa,e),Cn(Ha,Va),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sn(Ha),Cn(Ha,t)}function Qa(){Sn(Ha),Sn(Wa),Sn(Ka)}function Ya(e){Ja(Ka.current);var t=Ja(Ha.current),r=le(t,e.type);t!==r&&(Cn(Wa,e),Cn(Ha,r))}function Xa(e){Wa.current===e&&(Sn(Ha),Sn(Wa))}var Za=kn(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var si=b.ReactCurrentDispatcher,ni=b.ReactCurrentBatchConfig,ai=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function pi(){throw Error(a(321))}function mi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!is(e[r],t[r]))return!1;return!0}function fi(e,t,r,s,n,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=null===e||null===e.memoizedState?Xi:Zi,e=r(s,n),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(a(301));i+=1,li=oi=null,t.updateQueue=null,si.current=eo,e=r(s,n)}while(di)}if(si.current=Yi,t=null!==oi&&null!==oi.next,ai=0,li=oi=ii=null,ci=!1,t)throw Error(a(300));return e}function xi(){var e=0!==ui;return ui=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function yi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function vi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=yi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var s=oi,n=s.baseQueue,i=r.pending;if(null!==i){if(null!==n){var o=n.next;n.next=i.next,i.next=o}s.baseQueue=n=i,r.pending=null}if(null!==n){i=n.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ai&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=s):c=c.next=h,ii.lanes|=u,Dl|=u}d=d.next}while(null!==d&&d!==i);null===c?o=s:c.next=l,is(s,t.memoizedState)||(vo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(null!==(e=r.interleaved)){n=e;do{i=n.lane,ii.lanes|=i,Dl|=i,n=n.next}while(n!==e)}else null===n&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wi(e){var t=yi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var s=r.dispatch,n=r.pending,i=t.memoizedState;if(null!==n){r.pending=null;var o=n=n.next;do{i=e(i,o.action),o=o.next}while(o!==n);is(i,t.memoizedState)||(vo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function ji(){}function Ni(e,t){var r=ii,s=yi(),n=t(),i=!is(s.memoizedState,n);if(i&&(s.memoizedState=n,vo=!0),s=s.queue,Li(Ci.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(r.flags|=2048,Ti(9,Si.bind(null,r,s,n,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&ai)||ki(r,t,n)}return n}function ki(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Si(e,t,r,s){t.value=r,t.getSnapshot=s,Ei(t)&&_i(e)}function Ci(e,t,r){return r(function(){Ei(t)&&_i(e)})}function Ei(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!is(e,r)}catch(s){return!0}}function _i(e){var t=Ma(e,1);null!==t&&rc(t,e,1,-1)}function Pi(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[t.memoizedState,e]}function Ti(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e),e}function Ai(){return yi().memoizedState}function Oi(e,t,r,s){var n=gi();ii.flags|=e,n.memoizedState=Ti(1|t,r,void 0,void 0===s?null:s)}function Ri(e,t,r,s){var n=yi();s=void 0===s?null:s;var a=void 0;if(null!==oi){var i=oi.memoizedState;if(a=i.destroy,null!==s&&mi(s,i.deps))return void(n.memoizedState=Ti(t,r,a,s))}ii.flags|=e,n.memoizedState=Ti(1|t,r,a,s)}function Mi(e,t){return Oi(8390656,8,e,t)}function Li(e,t){return Ri(2048,8,e,t)}function Di(e,t){return Ri(4,2,e,t)}function Ii(e,t){return Ri(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ui(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ri(4,4,Fi.bind(null,t,e),r)}function $i(){}function Bi(e,t){var r=yi();t=void 0===t?null:t;var s=r.memoizedState;return null!==s&&null!==t&&mi(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function zi(e,t){var r=yi();t=void 0===t?null:t;var s=r.memoizedState;return null!==s&&null!==t&&mi(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function qi(e,t,r){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=r):(is(r,t)||(r=ft(),ii.lanes|=r,Dl|=r,e.baseState=!0),t)}function Vi(e,t){var r=vt;vt=0!==r&&4>r?r:4,e(!0);var s=ni.transition;ni.transition={};try{e(!1),t()}finally{vt=r,ni.transition=s}}function Hi(){return yi().memoizedState}function Wi(e,t,r){var s=tc(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Ji(e))Gi(t,r);else if(null!==(r=Ra(e,t,r,s))){rc(r,e,s,ec()),Qi(r,t,s)}}function Ki(e,t,r){var s=tc(e),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ji(e))Gi(t,n);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,r);if(n.hasEagerState=!0,n.eagerState=o,is(o,i)){var l=t.interleaved;return null===l?(n.next=n,Oa(t)):(n.next=l.next,l.next=n),void(t.interleaved=n)}}catch(c){}null!==(r=Ra(e,t,n,s))&&(rc(r,e,s,n=ec()),Qi(r,t,s))}}function Ji(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Gi(e,t){di=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Qi(e,t,r){if(0!==(4194240&r)){var s=t.lanes;r|=s&=e.pendingLanes,t.lanes=r,yt(e,r)}}var Yi={readContext:Ta,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Xi={readContext:Ta,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:Mi,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Oi(4194308,4,Fi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Oi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oi(4,2,e,t)},useMemo:function(e,t){var r=gi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=gi();return t=void 0!==r?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Wi.bind(null,ii,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:Pi,useDebugValue:$i,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=Vi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=ii,n=gi();if(na){if(void 0===r)throw Error(a(407));r=r()}else{if(r=t(),null===Pl)throw Error(a(349));0!==(30&ai)||ki(s,t,r)}n.memoizedState=r;var i={value:r,getSnapshot:t};return n.queue=i,Mi(Ci.bind(null,s,i,e),[e]),s.flags|=2048,Ti(9,Si.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=gi(),t=Pl.identifierPrefix;if(na){var r=Yn;t=":"+t+"R"+(r=(Qn&~(1<<32-it(Qn)-1)).toString(32)+r),0<(r=ui++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Ta,useCallback:Bi,useContext:Ta,useEffect:Li,useImperativeHandle:Ui,useInsertionEffect:Di,useLayoutEffect:Ii,useMemo:zi,useReducer:bi,useRef:Ai,useState:function(){return bi(vi)},useDebugValue:$i,useDeferredValue:function(e){return qi(yi(),oi.memoizedState,e)},useTransition:function(){return[bi(vi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Ni,useId:Hi,unstable_isNewReconciler:!1},eo={readContext:Ta,useCallback:Bi,useContext:Ta,useEffect:Li,useImperativeHandle:Ui,useInsertionEffect:Di,useLayoutEffect:Ii,useMemo:zi,useReducer:wi,useRef:Ai,useState:function(){return wi(vi)},useDebugValue:$i,useDeferredValue:function(e){var t=yi();return null===oi?t.memoizedState=e:qi(t,oi.memoizedState,e)},useTransition:function(){return[wi(vi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Ni,useId:Hi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=I({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,s){r=null===(r=r(s,t=e.memoizedState))||void 0===r?t:I({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=ec(),n=tc(e),a=Fa(s,n);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Ua(e,a,n))&&(rc(t,e,n,s),$a(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=ec(),n=tc(e),a=Fa(s,n);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Ua(e,a,n))&&(rc(t,e,n,s),$a(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),s=tc(e),n=Fa(r,s);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=Ua(e,n,s))&&(rc(t,e,s,r),$a(t,e,s))}};function no(e,t,r,s,n,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!os(r,s)||!os(n,a))}function ao(e,t,r){var s=!1,n=En,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(n=On(t)?Tn:_n.current,a=(s=null!==(s=t.contextTypes)&&void 0!==s)?An(e,n):En),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,r,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,s){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Da(e);var a=t.contextType;"object"===typeof a&&null!==a?n.context=Ta(a):(a=On(t)?Tn:_n.current,n.context=An(e,a)),n.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ro(e,t,a,r),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&so.enqueueReplaceState(n,n.state,null),za(e,r,n,s),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var r="",s=t;do{r+=B(s),s=s.return}while(s);var n=r}catch(a){n="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:n,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,r){(r=Fa(-1,r)).tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Vl||(Vl=!0,Hl=s),uo(0,t)},r}function mo(e,t,r){(r=Fa(-1,r)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var n=t.value;r.payload=function(){return s(n)},r.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof s&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function fo(e,t,r){var s=e.pingCache;if(null===s){s=e.pingCache=new ho;var n=new Set;s.set(t,n)}else void 0===(n=s.get(t))&&(n=new Set,s.set(t,n));n.has(r)||(n.add(r),e=Sc.bind(null,e,t,r),t.then(e,e))}function xo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,r,s,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Fa(-1,1)).tag=2,Ua(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var yo=b.ReactCurrentOwner,vo=!1;function bo(e,t,r,s){t.child=null===e?wa(t,null,r,s):ba(t,e.child,r,s)}function wo(e,t,r,s,n){r=r.render;var a=t.ref;return Pa(t,n),s=fi(e,t,r,s,a,n),r=xi(),null===e||vo?(na&&r&&ea(t),t.flags|=1,bo(e,t,s,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Vo(e,t,n))}function jo(e,t,r,s,n){if(null===e){var a=r.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Mc(r.type,null,s,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,No(e,t,a,s,n))}if(a=e.child,0===(e.lanes&n)){var i=a.memoizedProps;if((r=null!==(r=r.compare)?r:os)(i,s)&&e.ref===t.ref)return Vo(e,t,n)}return t.flags|=1,(e=Rc(a,s)).ref=t.ref,e.return=t,t.child=e}function No(e,t,r,s,n){if(null!==e){var a=e.memoizedProps;if(os(a,s)&&e.ref===t.ref){if(vo=!1,t.pendingProps=s=a,0===(e.lanes&n))return t.lanes=e.lanes,Vo(e,t,n);0!==(131072&e.flags)&&(vo=!0)}}return Co(e,t,r,s,n)}function ko(e,t,r){var s=t.pendingProps,n=s.children,a=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(Rl,Ol),Ol|=r;else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cn(Rl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==a?a.baseLanes:r,Cn(Rl,Ol),Ol|=s}else null!==a?(s=a.baseLanes|r,t.memoizedState=null):s=r,Cn(Rl,Ol),Ol|=s;return bo(e,t,n,r),t.child}function So(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,r,s,n){var a=On(r)?Tn:_n.current;return a=An(t,a),Pa(t,n),r=fi(e,t,r,s,a,n),s=xi(),null===e||vo?(na&&s&&ea(t),t.flags|=1,bo(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Vo(e,t,n))}function Eo(e,t,r,s,n){if(On(r)){var a=!0;Dn(t)}else a=!1;if(Pa(t,n),null===t.stateNode)qo(e,t),ao(t,r,s),oo(t,r,s,n),s=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=Ta(c):c=An(t,c=On(r)?Tn:_n.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==s||l!==c)&&io(t,i,s,c),La=!1;var h=t.memoizedState;i.state=h,za(t,s,i,n),l=t.memoizedState,o!==s||h!==l||Pn.current||La?("function"===typeof d&&(ro(t,r,d,s),l=t.memoizedState),(o=La||no(t,r,o,s,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),i.props=s,i.state=l,i.context=c,s=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Ia(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=r.contextType)&&null!==l?l=Ta(l):l=An(t,l=On(r)?Tn:_n.current);var p=r.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,s,l),La=!1,h=t.memoizedState,i.state=h,za(t,s,i,n);var m=t.memoizedState;o!==u||h!==m||Pn.current||La?("function"===typeof p&&(ro(t,r,p,s),m=t.memoizedState),(c=La||no(t,r,c,s,h,m,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(s,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(s,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),i.props=s,i.state=m,i.context=l,s=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return _o(e,t,r,s,a,n)}function _o(e,t,r,s,n,a){So(e,t);var i=0!==(128&t.flags);if(!s&&!i)return n&&In(t,r,!1),Vo(e,t,a);s=t.stateNode,yo.current=t;var o=i&&"function"!==typeof r.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&i?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,o,a)):bo(e,t,o,a),t.memoizedState=s.state,n&&In(t,r,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Mn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mn(0,t.context,!1),Ga(e,t.containerInfo)}function To(e,t,r,s,n){return pa(),ma(n),t.flags|=256,bo(e,t,r,s),t.child}var Ao,Oo,Ro,Mo,Lo={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Io(e,t,r){var s,n=t.pendingProps,i=Za.current,o=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&i)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Cn(Za,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=n.children,e=n.fallback,o?(n=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&n)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,n,0,null),e=Lc(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(r),t.memoizedState=Lo,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(s=i.dehydrated))return function(e,t,r,s,n,i,o){if(r)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,s=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=s.fallback,n=t.mode,s=Dc({mode:"visible",children:s.children},n,0,null),(i=Lc(i,n,o,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,0!==(1&t.mode)&&ba(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Lo,i);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===n.data){if(s=n.nextSibling&&n.nextSibling.dataset)var l=s.dgst;return s=l,Uo(e,t,o,s=co(i=Error(a(419)),s,void 0))}if(l=0!==(o&e.childLanes),vo||l){if(null!==(s=Pl)){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(s.suspendedLanes|o))?0:n)&&n!==i.retryLane&&(i.retryLane=n,Ma(e,n),rc(s,e,n,-1))}return fc(),Uo(e,t,o,s=co(Error(a(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,sa=cn(n.nextSibling),ra=t,na=!0,aa=null,null!==e&&(Kn[Jn++]=Qn,Kn[Jn++]=Yn,Kn[Jn++]=Gn,Qn=e.id,Yn=e.overflow,Gn=t),t=Fo(t,s.children),t.flags|=4096,t)}(e,t,l,n,s,i,r);if(o){o=n.fallback,l=t.mode,s=(i=e.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&l)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=c,t.deletions=null):(n=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==s?o=Rc(s,o):(o=Lc(o,l,r,null)).flags|=2,o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Lo,n}return e=(o=e.child).sibling,n=Rc(o,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Fo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,r,s){return null!==s&&ma(s),ba(t,e.child,null,r),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $o(e,t,r){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),_a(e.return,t,r)}function Bo(e,t,r,s,n){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=n)}function zo(e,t,r){var s=t.pendingProps,n=s.revealOrder,a=s.tail;if(bo(e,t,s.children,r),0!==(2&(s=Za.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$o(e,r,t);else if(19===e.tag)$o(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Cn(Za,s),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(n=r),r=r.sibling;null===(r=n)?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Bo(t,!1,n,r,a);break;case"backwards":for(r=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===ei(e)){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Bo(t,!0,r,null,a);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=Rc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Rc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ho(e,t){if(!na)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;null!==r;)null!==r.alternate&&(s=r),r=r.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,s=0;if(t)for(var n=e.child;null!==n;)r|=n.lanes|n.childLanes,s|=14680064&n.subtreeFlags,s|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Ko(e,t,r){var s=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return On(t.type)&&Rn(),Wo(t),null;case 3:return s=t.stateNode,Qa(),Sn(Pn),Sn(_n),ri(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),Oo(e,t),Wo(t),null;case 5:Xa(t);var n=Ja(Ka.current);if(r=t.type,null!==e&&null!=t.stateNode)Ro(e,t,r,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(a(166));return Wo(t),null}if(e=Ja(Ha.current),ua(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[hn]=t,s[pn]=i,e=0!==(1&t.mode),r){case"dialog":Fs("cancel",s),Fs("close",s);break;case"iframe":case"object":case"embed":Fs("load",s);break;case"video":case"audio":for(n=0;n<Ms.length;n++)Fs(Ms[n],s);break;case"source":Fs("error",s);break;case"img":case"image":case"link":Fs("error",s),Fs("load",s);break;case"details":Fs("toggle",s);break;case"input":Q(s,i),Fs("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Fs("invalid",s);break;case"textarea":ne(s,i),Fs("invalid",s)}for(var l in ye(r,i),n=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==i.suppressHydrationWarning&&Ys(s.textContent,c,e),n=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Ys(s.textContent,c,e),n=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fs("scroll",s)}switch(r){case"input":W(s),Z(s,i,!0);break;case"textarea":W(s),ie(s);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(s.onclick=Xs)}s=n,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),"select"===r&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[hn]=t,e[pn]=s,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(r,s),r){case"dialog":Fs("cancel",e),Fs("close",e),n=s;break;case"iframe":case"object":case"embed":Fs("load",e),n=s;break;case"video":case"audio":for(n=0;n<Ms.length;n++)Fs(Ms[n],e);n=s;break;case"source":Fs("error",e),n=s;break;case"img":case"image":case"link":Fs("error",e),Fs("load",e),n=s;break;case"details":Fs("toggle",e),n=s;break;case"input":Q(e,s),n=G(e,s),Fs("invalid",e);break;case"option":default:n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=I({},s,{value:void 0}),Fs("invalid",e);break;case"textarea":ne(e,s),n=se(e,s),Fs("invalid",e)}for(i in ye(r,n),c=n)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?xe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==r||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Fs("scroll",e):null!=d&&v(e,i,d,l))}switch(r){case"input":W(e),Z(e,s,!1);break;case"textarea":W(e),ie(e);break;case"option":null!=s.value&&e.setAttribute("value",""+V(s.value));break;case"select":e.multiple=!!s.multiple,null!=(i=s.value)?re(e,!!s.multiple,i,!1):null!=s.defaultValue&&re(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=Xs)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Mo(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(a(166));if(r=Ja(Ka.current),Ja(Ha.current),ua(t)){if(s=t.stateNode,r=t.memoizedProps,s[hn]=t,(i=s.nodeValue!==r)&&null!==(e=ra))switch(e.tag){case 3:Ys(s.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ys(s.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(s=(9===r.nodeType?r:r.ownerDocument).createTextNode(s))[hn]=t,t.stateNode=s}return Wo(t),null;case 13:if(Sn(Za),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(na&&null!==sa&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,i=!1;else if(i=ua(t),null!==s&&null!==s.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[hn]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Za.current)?0===Ml&&(Ml=3):fc())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Qa(),Oo(e,t),null===e&&Bs(t.stateNode.containerInfo),Wo(t),null;case 10:return Ea(t.type._context),Wo(t),null;case 19:if(Sn(Za),null===(i=t.memoizedState))return Wo(t),null;if(s=0!==(128&t.flags),null===(l=i.rendering))if(s)Ho(i,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Ho(i,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;null!==r;)e=s,(i=r).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Cn(Za,1&Za.current|2),t.child}e=e.sibling}null!==i.tail&&Ye()>zl&&(t.flags|=128,s=!0,Ho(i,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ei(l))){if(t.flags|=128,s=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Ho(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!na)return Wo(t),null}else 2*Ye()-i.renderingStartTime>zl&&1073741824!==r&&(t.flags|=128,s=!0,Ho(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=i.last)?r.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,r=Za.current,Cn(Za,s?1&r|2:1&r),t):(Wo(t),null);case 22:case 23:return uc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Jo(e,t){switch(ta(t),t.tag){case 1:return On(t.type)&&Rn(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qa(),Sn(Pn),Sn(_n),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xa(t),null;case 13:if(Sn(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sn(Za),null;case 4:return Qa(),null;case 10:return Ea(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ao=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Oo=function(){},Ro=function(e,t,r,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,Ja(Ha.current);var a,i=null;switch(r){case"input":n=G(e,n),s=G(e,s),i=[];break;case"select":n=I({},n,{value:void 0}),s=I({},s,{value:void 0}),i=[];break;case"textarea":n=se(e,n),s=se(e,s),i=[];break;default:"function"!==typeof n.onClick&&"function"===typeof s.onClick&&(e.onclick=Xs)}for(d in ye(r,s),r=null,n)if(!s.hasOwnProperty(d)&&n.hasOwnProperty(d)&&null!=n[d])if("style"===d){var l=n[d];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=null!=n?n[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fs("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Mo=function(e,t,r,s){r!==s&&(t.flags|=4)};var Go=!1,Qo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(s){kc(e,t,s)}else r.current=null}function el(e,t,r){try{r()}catch(s){kc(e,t,s)}}var tl=!1;function rl(e,t,r){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var n=s=s.next;do{if((n.tag&e)===e){var a=n.destroy;n.destroy=void 0,void 0!==a&&el(t,r,a)}n=n.next}while(n!==s)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function nl(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hn],delete t[pn],delete t[fn],delete t[xn],delete t[gn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Xs));else if(4!==s&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==s&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function hl(e,t,r){for(r=r.child;null!==r;)pl(e,t,r),r=r.sibling}function pl(e,t,r){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(nt,r)}catch(o){}switch(r.tag){case 5:Qo||Zo(r,t);case 6:var s=dl,n=ul;dl=null,hl(e,t,r),ul=n,null!==(dl=s)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?ln(e.parentNode,r):1===e.nodeType&&ln(e,r),zt(e)):ln(dl,r.stateNode));break;case 4:s=dl,n=ul,dl=r.stateNode.containerInfo,ul=!0,hl(e,t,r),dl=s,ul=n;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(s=r.updateQueue)&&null!==(s=s.lastEffect))){n=s=s.next;do{var a=n,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(r,t,i),n=n.next}while(n!==s)}hl(e,t,r);break;case 1:if(!Qo&&(Zo(r,t),"function"===typeof(s=r.stateNode).componentWillUnmount))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){kc(r,t,o)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Qo=(s=Qo)||null!==r.memoizedState,hl(e,t,r),Qo=s):hl(e,t,r);break;default:hl(e,t,r)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Yo),t.forEach(function(t){var s=_c.bind(null,e,t);r.has(t)||(r.add(t),t.then(s,s))})}}function fl(e,t){var r=t.deletions;if(null!==r)for(var s=0;s<r.length;s++){var n=r[s];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));pl(i,o,n),dl=null,ul=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(d){kc(n,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xl(t,e),t=t.sibling}function xl(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&s){try{rl(3,e,e.return),sl(3,e)}catch(x){kc(e,e.return,x)}try{rl(5,e,e.return)}catch(x){kc(e,e.return,x)}}break;case 1:fl(t,e),gl(e),512&s&&null!==r&&Zo(r,r.return);break;case 5:if(fl(t,e),gl(e),512&s&&null!==r&&Zo(r,r.return),32&e.flags){var n=e.stateNode;try{he(n,"")}catch(x){kc(e,e.return,x)}}if(4&s&&null!=(n=e.stateNode)){var i=e.memoizedProps,o=null!==r?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Y(n,i),ve(l,o);var d=ve(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?xe(n,h):"dangerouslySetInnerHTML"===u?ue(n,h):"children"===u?he(n,h):v(n,u,h,d)}switch(l){case"input":X(n,i);break;case"textarea":ae(n,i);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?re(n,!!i.multiple,m,!1):p!==!!i.multiple&&(null!=i.defaultValue?re(n,!!i.multiple,i.defaultValue,!0):re(n,!!i.multiple,i.multiple?[]:"",!1))}n[pn]=i}catch(x){kc(e,e.return,x)}}break;case 6:if(fl(t,e),gl(e),4&s){if(null===e.stateNode)throw Error(a(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(x){kc(e,e.return,x)}}break;case 3:if(fl(t,e),gl(e),4&s&&null!==r&&r.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(x){kc(e,e.return,x)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(n=e.child).flags&&(i=null!==n.memoizedState,n.stateNode.isHidden=i,!i||null!==n.alternate&&null!==n.alternate.memoizedState||(Bl=Ye())),4&s&&ml(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Qo=(d=Qo)||u,fl(t,e),Qo=d):fl(t,e),gl(e),8192&s){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xo=e,u=e.child;null!==u;){for(h=Xo=u;null!==Xo;){switch(m=(p=Xo).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:Zo(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){s=p,r=p.return;try{t=s,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(x){kc(s,r,x)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==m?(m.return=p,Xo=m):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{n=h.stateNode,d?"function"===typeof(i=n.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(x){kc(e,e.return,x)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){kc(e,e.return,x)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),gl(e),4&s&&ml(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(il(r)){var s=r;break e}r=r.return}throw Error(a(160))}switch(s.tag){case 5:var n=s.stateNode;32&s.flags&&(he(n,""),s.flags&=-33),cl(e,ol(e),n);break;case 3:case 4:var i=s.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(a(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,r){Xo=e,vl(e,t,r)}function vl(e,t,r){for(var s=0!==(1&e.mode);null!==Xo;){var n=Xo,a=n.child;if(22===n.tag&&s){var i=null!==n.memoizedState||Go;if(!i){var o=n.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Go;var c=Qo;if(Go=i,(Qo=l)&&!c)for(Xo=n;null!==Xo;)l=(i=Xo).child,22===i.tag&&null!==i.memoizedState?jl(n):null!==l?(l.return=i,Xo=l):jl(n);for(;null!==a;)Xo=a,vl(a,t,r),a=a.sibling;Xo=n,Go=o,Qo=c}bl(e)}else 0!==(8772&n.subtreeFlags)&&null!==a?(a.return=n,Xo=a):bl(e)}}function bl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Qo)if(null===r)s.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&qa(t,i,s);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}qa(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Qo||512&t.flags&&nl(t)}catch(p){kc(t,t.return,p)}}if(t===e){Xo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Xo=r;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Xo=r;break}Xo=t.return}}function jl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{sl(4,t)}catch(l){kc(t,r,l)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var n=t.return;try{s.componentDidMount()}catch(l){kc(t,n,l)}}var a=t.return;try{nl(t)}catch(l){kc(t,a,l)}break;case 5:var i=t.return;try{nl(t)}catch(l){kc(t,i,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var Nl,kl=Math.ceil,Sl=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,El=b.ReactCurrentBatchConfig,_l=0,Pl=null,Tl=null,Al=0,Ol=0,Rl=kn(0),Ml=0,Ll=null,Dl=0,Il=0,Fl=0,Ul=null,$l=null,Bl=0,zl=1/0,ql=null,Vl=!1,Hl=null,Wl=null,Kl=!1,Jl=null,Gl=0,Ql=0,Yl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&_l)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&_l)&&0!==Al?Al&-Al:null!==fa.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rc(e,t,r,s){if(50<Ql)throw Ql=0,Yl=null,Error(a(185));gt(e,r,s),0!==(2&_l)&&e===Pl||(e===Pl&&(0===(2&_l)&&(Il|=r),4===Ml&&oc(e,Al)),sc(e,s),1===r&&0===_l&&0===(1&t.mode)&&(zl=Ye()+500,Un&&zn()))}function sc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),o=1<<i,l=n[i];-1===l?0!==(o&r)&&0===(o&s)||(n[i]=pt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var s=ht(e,e===Pl?Al:0);if(0===s)null!==r&&Je(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=r&&Je(r),1===t)0===e.tag?function(e){Un=!0,Bn(e)}(lc.bind(null,e)):Bn(lc.bind(null,e)),an(function(){0===(6&_l)&&zn()}),r=null;else{switch(bt(s)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=st}r=Pc(r,nc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nc(e,t){if(Xl=-1,Zl=0,0!==(6&_l))throw Error(a(327));var r=e.callbackNode;if(jc()&&e.callbackNode!==r)return null;var s=ht(e,e===Pl?Al:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=xc(e,s);else{t=s;var n=_l;_l|=2;var i=mc();for(Pl===e&&Al===t||(ql=null,zl=Ye()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Ca(),Sl.current=i,_l=n,null!==Tl?t=0:(Pl=null,Al=0,t=Ml)}if(0!==t){if(2===t&&(0!==(n=mt(e))&&(s=n,t=ac(e,n))),1===t)throw r=Ll,hc(e,0),oc(e,s),sc(e,Ye()),r;if(6===t)oc(e,s);else{if(n=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var s=0;s<r.length;s++){var n=r[s],a=n.getSnapshot;n=n.value;try{if(!is(a(),n))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=xc(e,s))&&(0!==(i=mt(e))&&(s=i,t=ac(e,i))),1===t))throw r=Ll,hc(e,0),oc(e,s),sc(e,Ye()),r;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,$l,ql);break;case 3:if(oc(e,s),(130023424&s)===s&&10<(t=Bl+500-Ye())){if(0!==ht(e,0))break;if(((n=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=rn(wc.bind(null,e,$l,ql),t);break}wc(e,$l,ql);break;case 4:if(oc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,n=-1;0<s;){var o=31-it(s);i=1<<o,(o=t[o])>n&&(n=o),s&=~i}if(s=n,10<(s=(120>(s=Ye()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*kl(s/1960))-s)){e.timeoutHandle=rn(wc.bind(null,e,$l,ql),s);break}wc(e,$l,ql);break;default:throw Error(a(329))}}}return sc(e,Ye()),e.callbackNode===r?nc.bind(null,e):null}function ac(e,t){var r=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=$l,$l=r,null!==t&&ic(t)),e}function ic(e){null===$l?$l=e:$l.push.apply($l,e)}function oc(e,t){for(t&=~Fl,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),s=1<<r;e[r]=-1,t&=~s}}function lc(e){if(0!==(6&_l))throw Error(a(327));jc();var t=ht(e,0);if(0===(1&t))return sc(e,Ye()),null;var r=xc(e,t);if(0!==e.tag&&2===r){var s=mt(e);0!==s&&(t=s,r=ac(e,s))}if(1===r)throw r=Ll,hc(e,0),oc(e,t),sc(e,Ye()),r;if(6===r)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,$l,ql),sc(e,Ye()),null}function cc(e,t){var r=_l;_l|=1;try{return e(t)}finally{0===(_l=r)&&(zl=Ye()+500,Un&&zn())}}function dc(e){null!==Jl&&0===Jl.tag&&0===(6&_l)&&jc();var t=_l;_l|=1;var r=El.transition,s=vt;try{if(El.transition=null,vt=1,e)return e()}finally{vt=s,El.transition=r,0===(6&(_l=t))&&zn()}}function uc(){Ol=Rl.current,Sn(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,sn(r)),null!==Tl)for(r=Tl.return;null!==r;){var s=r;switch(ta(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&Rn();break;case 3:Qa(),Sn(Pn),Sn(_n),ri();break;case 5:Xa(s);break;case 4:Qa();break;case 13:case 19:Sn(Za);break;case 10:Ea(s.type._context);break;case 22:case 23:uc()}r=r.return}if(Pl=e,Tl=e=Rc(e.current,null),Al=Ol=t,Ml=0,Ll=null,Fl=Il=Dl=0,$l=Ul=null,null!==Aa){for(t=0;t<Aa.length;t++)if(null!==(s=(r=Aa[t]).interleaved)){r.interleaved=null;var n=s.next,a=r.pending;if(null!==a){var i=a.next;a.next=n,s.next=i}r.pending=s}Aa=null}return e}function pc(e,t){for(;;){var r=Tl;try{if(Ca(),si.current=Yi,ci){for(var s=ii.memoizedState;null!==s;){var n=s.queue;null!==n&&(n.pending=null),s=s.next}ci=!1}if(ai=0,li=oi=ii=null,di=!1,ui=0,Cl.current=null,null===r||null===r.return){Ml=1,Ll=t,Tl=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=xo(o);if(null!==m){m.flags&=-257,go(m,o,l,0,t),1&m.mode&&fo(i,d,t),c=d;var f=(t=m).updateQueue;if(null===f){var x=new Set;x.add(c),t.updateQueue=x}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(a(426))}else if(na&&1&l.mode){var g=xo(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,l,0,t),ma(lo(c,l));break e}}i=c=lo(c,l),4!==Ml&&(Ml=2),null===Ul?Ul=[i]:Ul.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,po(0,c,t));break e;case 1:l=c;var y=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Wl||!Wl.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,mo(i,l,t));break e}}i=i.return}while(null!==i)}bc(r)}catch(b){t=b,Tl===r&&null!==r&&(Tl=r=r.return);continue}break}}function mc(){var e=Sl.current;return Sl.current=Yi,null===e?Yi:e}function fc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Pl||0===(268435455&Dl)&&0===(268435455&Il)||oc(Pl,Al)}function xc(e,t){var r=_l;_l|=2;var s=mc();for(Pl===e&&Al===t||(ql=null,hc(e,t));;)try{gc();break}catch(n){pc(e,n)}if(Ca(),_l=r,Sl.current=s,null!==Tl)throw Error(a(261));return Pl=null,Al=0,Ml}function gc(){for(;null!==Tl;)vc(Tl)}function yc(){for(;null!==Tl&&!Ge();)vc(Tl)}function vc(e){var t=Nl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,Cl.current=null}function bc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ko(r,t,Ol)))return void(Tl=r)}else{if(null!==(r=Jo(r,t)))return r.flags&=32767,void(Tl=r);if(null===e)return Ml=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Ml&&(Ml=5)}function wc(e,t,r){var s=vt,n=El.transition;try{El.transition=null,vt=1,function(e,t,r,s){do{jc()}while(null!==Jl);if(0!==(6&_l))throw Error(a(327));r=e.finishedWork;var n=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-it(r),a=1<<n;t[n]=0,s[n]=-1,e[n]=-1,r&=~a}}(e,i),e===Pl&&(Tl=Pl=null,Al=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Kl||(Kl=!0,Pc(tt,function(){return jc(),null})),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=El.transition,El.transition=null;var o=vt;vt=1;var l=_l;_l|=4,Cl.current=null,function(e,t){if(Zs=Vt,hs(e=us())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(s&&0!==s.rangeCount){r=s.anchorNode;var n=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch(w){r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==r||0!==n&&3!==h.nodeType||(l=o+n),h!==i||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===r&&++d===n&&(l=o),p===i&&++u===s&&(c=o),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(en={focusedElem:e,selectionRange:r},Vt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var x=f.memoizedProps,g=f.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:to(t.type,x),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}f=tl,tl=!1}(e,r),xl(r,e),ps(en),Vt=!!Zs,en=Zs=null,e.current=r,yl(r,e,n),Qe(),_l=l,vt=o,El.transition=i}else e.current=r;if(Kl&&(Kl=!1,Jl=e,Gl=n),i=e.pendingLanes,0===i&&(Wl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),sc(e,Ye()),null!==t)for(s=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(Vl)throw Vl=!1,e=Hl,Hl=null,e;0!==(1&Gl)&&0!==e.tag&&jc(),i=e.pendingLanes,0!==(1&i)?e===Yl?Ql++:(Ql=0,Yl=e):Ql=0,zn()}(e,t,r,s)}finally{El.transition=n,vt=s}return null}function jc(){if(null!==Jl){var e=bt(Gl),t=El.transition,r=vt;try{if(El.transition=null,vt=16>e?16:e,null===Jl)var s=!1;else{if(e=Jl,Jl=null,Gl=0,0!==(6&_l))throw Error(a(331));var n=_l;for(_l|=4,Xo=e.current;null!==Xo;){var i=Xo,o=i.child;if(0!==(16&Xo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Xo=d;null!==Xo;){var u=Xo;switch(u.tag){case 0:case 11:case 15:rl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Xo=h;else for(;null!==Xo;){var p=(u=Xo).sibling,m=u.return;if(al(u),u===d){Xo=null;break}if(null!==p){p.return=m,Xo=p;break}Xo=m}}}var f=i.alternate;if(null!==f){var x=f.child;if(null!==x){f.child=null;do{var g=x.sibling;x.sibling=null,x=g}while(null!==x)}}Xo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(i=Xo).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Xo=y;break e}Xo=i.return}}var v=e.current;for(Xo=v;null!==Xo;){var b=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Xo=b;else e:for(o=v;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(j){kc(l,l.return,j)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(_l=n,zn(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(nt,e)}catch(j){}s=!0}return s}finally{vt=r,El.transition=t}}return!1}function Nc(e,t,r){e=Ua(e,t=po(0,t=lo(r,t),1),1),t=ec(),null!==e&&(gt(e,1,t),sc(e,t))}function kc(e,t,r){if(3===e.tag)Nc(e,e,r);else for(;null!==t;){if(3===t.tag){Nc(t,e,r);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Wl||!Wl.has(s))){t=Ua(t,e=mo(t,e=lo(r,e),1),1),e=ec(),null!==t&&(gt(t,1,e),sc(t,e));break}}t=t.return}}function Sc(e,t,r){var s=e.pingCache;null!==s&&s.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Pl===e&&(Al&r)===r&&(4===Ml||3===Ml&&(130023424&Al)===Al&&500>Ye()-Bl?hc(e,0):Fl|=r),sc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Ma(e,t))&&(gt(e,t,r),sc(e,r))}function Ec(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Cc(e,r)}function _c(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;null!==n&&(r=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(a(314))}null!==s&&s.delete(t),Cc(e,r)}function Pc(e,t){return Ke(e,t)}function Tc(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,r,s){return new Tc(e,t,r,s)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var r=e.alternate;return null===r?((r=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Mc(e,t,r,s,n,i){var o=2;if(s=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Lc(r.children,n,i,t);case k:o=8,n|=8;break;case S:return(e=Ac(12,r,t,2|n)).elementType=S,e.lanes=i,e;case P:return(e=Ac(13,r,t,n)).elementType=P,e.lanes=i,e;case T:return(e=Ac(19,r,t,n)).elementType=T,e.lanes=i,e;case R:return Dc(r,n,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case E:o=9;break e;case _:o=11;break e;case A:o=14;break e;case O:o=16,s=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(o,r,t,n)).elementType=e,t.type=s,t.lanes=i,t}function Lc(e,t,r,s){return(e=Ac(7,e,s,t)).lanes=r,e}function Dc(e,t,r,s){return(e=Ac(22,e,s,t)).elementType=R,e.lanes=r,e.stateNode={isHidden:!1},e}function Ic(e,t,r){return(e=Ac(6,e,null,t)).lanes=r,e}function Fc(e,t,r){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,r,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xt(0),this.expirationTimes=xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function $c(e,t,r,s,n,a,i,o,l){return e=new Uc(e,t,r,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Bc(e){if(!e)return En;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(On(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var r=e.type;if(On(r))return Ln(e,r,t)}return t}function zc(e,t,r,s,n,a,i,o,l){return(e=$c(r,s,!0,e,0,a,0,o,l)).context=Bc(null),r=e.current,(a=Fa(s=ec(),n=tc(r))).callback=void 0!==t&&null!==t?t:null,Ua(r,a,n),e.current.lanes=n,gt(e,n,s),sc(e,s),e}function qc(e,t,r,s){var n=t.current,a=ec(),i=tc(n);return r=Bc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Fa(a,i)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=Ua(n,t,i))&&(rc(e,n,i,a),$a(e,n,i)),i}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Nl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pn.current)vo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return vo=!1,function(e,t,r){switch(t.tag){case 3:Po(t),pa();break;case 5:Ya(t);break;case 1:On(t.type)&&Dn(t);break;case 4:Ga(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;Cn(ja,s._currentValue),s._currentValue=n;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Cn(Za,1&Za.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Io(e,t,r):(Cn(Za,1&Za.current),null!==(e=Vo(e,t,r))?e.sibling:null);Cn(Za,1&Za.current);break;case 19:if(s=0!==(r&t.childLanes),0!==(128&e.flags)){if(s)return zo(e,t,r);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Cn(Za,Za.current),s)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,r)}return Vo(e,t,r)}(e,t,r);vo=0!==(131072&e.flags)}else vo=!1,na&&0!==(1048576&t.flags)&&Zn(t,Wn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;qo(e,t),e=t.pendingProps;var n=An(t,_n.current);Pa(t,r),n=fi(null,t,s,e,n,r);var i=xi();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,On(s)?(i=!0,Dn(t)):i=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Da(t),n.updater=so,t.stateNode=n,n._reactInternals=t,oo(t,s,e,r),t=_o(null,t,s,!0,i,r)):(t.tag=0,na&&i&&ea(t),bo(null,t,n,r),t=t.child),t;case 16:s=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,s=(n=s._init)(s._payload),t.type=s,n=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===A)return 14}return 2}(s),e=to(s,e),n){case 0:t=Co(null,t,s,e,r);break e;case 1:t=Eo(null,t,s,e,r);break e;case 11:t=wo(null,t,s,e,r);break e;case 14:t=jo(null,t,s,to(s.type,e),r);break e}throw Error(a(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,Co(e,t,s,n=t.elementType===s?n:to(s,n),r);case 1:return s=t.type,n=t.pendingProps,Eo(e,t,s,n=t.elementType===s?n:to(s,n),r);case 3:e:{if(Po(t),null===e)throw Error(a(387));s=t.pendingProps,n=(i=t.memoizedState).element,Ia(e,t),za(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=To(e,t,s,r,n=lo(Error(a(423)),t));break e}if(s!==n){t=To(e,t,s,r,n=lo(Error(a(424)),t));break e}for(sa=cn(t.stateNode.containerInfo.firstChild),ra=t,na=!0,aa=null,r=wa(t,null,s,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(pa(),s===n){t=Vo(e,t,r);break e}bo(e,t,s,r)}t=t.child}return t;case 5:return Ya(t),null===e&&ca(t),s=t.type,n=t.pendingProps,i=null!==e?e.memoizedProps:null,o=n.children,tn(s,n)?o=null:null!==i&&tn(s,i)&&(t.flags|=32),So(e,t),bo(e,t,o,r),t.child;case 6:return null===e&&ca(t),null;case 13:return Io(e,t,r);case 4:return Ga(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=ba(t,null,s,r):bo(e,t,s,r),t.child;case 11:return s=t.type,n=t.pendingProps,wo(e,t,s,n=t.elementType===s?n:to(s,n),r);case 7:return bo(e,t,t.pendingProps,r),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,i=t.memoizedProps,o=n.value,Cn(ja,s._currentValue),s._currentValue=o,null!==i)if(is(i.value,o)){if(i.children===n.children&&!Pn.current){t=Vo(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===i.tag){(c=Fa(-1,r&-r)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),_a(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),_a(o,r,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,Pa(t,r),s=s(n=Ta(n)),t.flags|=1,bo(e,t,s,r),t.child;case 14:return n=to(s=t.type,t.pendingProps),jo(e,t,s,n=to(s.type,n),r);case 15:return No(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:to(s,n),qo(e,t),t.tag=1,On(s)?(e=!0,Dn(t)):e=!1,Pa(t,r),ao(t,s,n),oo(t,s,n,r),_o(null,t,s,!0,e,r);case 19:return zo(e,t,r);case 22:return ko(e,t,r)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,r,s,n){var a=r._reactRootContainer;if(a){var i=a;if("function"===typeof n){var o=n;n=function(){var e=Vc(i);o.call(e)}}qc(t,i,e,n)}else i=function(e,t,r,s,n){if(n){if("function"===typeof s){var a=s;s=function(){var e=Vc(i);a.call(e)}}var i=zc(t,s,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[mn]=i.current,Bs(8===e.nodeType?e.parentNode:e),dc(),i}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof s){var o=s;s=function(){var e=Vc(l);o.call(e)}}var l=$c(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[mn]=l.current,Bs(8===e.nodeType?e.parentNode:e),dc(function(){qc(t,l,r,s)}),l}(r,t,e,n,s);return Vc(i)}Gc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},Gc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){qc(null,e,null,null)}),t[mn]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Rt.length&&0!==t&&t<Rt[r].priority;r++);Rt.splice(r,0,e),0===r&&It(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(yt(t,1|r),sc(t,Ye()),0===(6&_l)&&(zl=Ye()+500,zn()))}break;case 13:dc(function(){var t=Ma(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Wc(e,1)}},jt=function(e){if(13===e.tag){var t=Ma(e,134217728);if(null!==t)rc(t,e,134217728,ec());Wc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),r=Ma(e,t);if(null!==r)rc(r,e,t,ec());Wc(e,t)}},kt=function(){return vt},St=function(e,t){var r=vt;try{return vt=e,t()}finally{vt=r}},je=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var n=wn(s);if(!n)throw Error(a(90));K(s),X(s,n)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},_e=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[vn,bn,wn,Ce,Ee,cc]},td={findFiberByHostInstance:yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{nt=sd.inject(rd),at=sd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(a(200));return function(e,t,r){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==s?null:""+s,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Qc(e))throw Error(a(299));var r=!1,s="",n=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=$c(e,1,!1,null,0,r,0,s,n),e[mn]=t.current,Bs(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Yc(t))throw Error(a(200));return Zc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Qc(e))throw Error(a(405));var s=null!=r&&r.hydratedSources||null,n=!1,i="",o=Kc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=zc(t,null,e,1,null!=r?r:null,n,0,i,o),e[mn]=t.current,Bs(e),s)for(e=0;e<s.length;e++)n=(n=(r=s[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new Gc(t)},t.render=function(e,t,r){if(!Yc(t))throw Error(a(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[mn]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Yc(r))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,r,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(374));class a extends n.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:r,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="";"plain"===s?n="pl":"phrase"===s?n="ph":"websearch"===s&&(n="w");const a=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}t.default=a},745:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const s=r(400);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${s.version}`}},829:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(736));t.default=class{constructor(e,t){let{headers:r={},schema:s,fetch:n}=t;this.url=e,this.headers=r,this.schema=s,this.fetch=n}select(e){let{head:t=!1,count:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t?"HEAD":"GET";let a=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new n.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[`resolution=${r?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),a||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new n.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new n.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},853:(e,t,r)=>{"use strict";e.exports=r(234)},950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)},980:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const n=s(r(210));t.PostgrestClient=n.default;const a=s(r(829));t.PostgrestQueryBuilder=a.default;const i=s(r(736));t.PostgrestFilterBuilder=i.default;const o=s(r(374));t.PostgrestTransformBuilder=o.default;const l=s(r(286));t.PostgrestBuilder=l.default;const c=s(r(611));t.PostgrestError=c.default,t.default={PostgrestClient:n.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}},986:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=986,e.exports=t}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,r),a.exports}r.m=e,r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,s)=>(r.f[s](e,t),t),[])),r.u=e=>"static/js/"+e+".45ef1ebf.chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="react-pedal:";r.l=(s,n,a,i)=>{if(e[s])e[s].push(n);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+a){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+a),o.src=s),e[s]=[n];var h=(t,r)=>{o.onerror=o.onload=null,clearTimeout(p);var n=e[s];if(delete e[s],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach(e=>e(r)),t)return t(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.f.j=(t,s)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var a=new Promise((r,s)=>n=e[t]=[r,s]);s.push(n[2]=a);var i=r.p+r.u(t),o=new Error;r.l(i,s=>{if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var a=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,n[1](o)}},"chunk-"+t,t)}};var t=(t,s)=>{var n,a,i=s[0],o=s[1],l=s[2],c=0;if(i.some(t=>0!==e[t])){for(n in o)r.o(o,n)&&(r.m[n]=o[n]);if(l)l(r)}for(t&&t(s);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0},s=self.webpackChunkreact_pedal=self.webpackChunkreact_pedal||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),(()=>{"use strict";var e={};r.r(e),r.d(e,{hasBrowserEnv:()=>_d,hasStandardBrowserEnv:()=>Td,hasStandardBrowserWebWorkerEnv:()=>Ad,navigator:()=>Pd,origin:()=>Od});var t=r(43),s=r(391);const n="undefined"===typeof window||"Deno"in window;function a(){}function i(e,t,r){return y(e)?"function"===typeof t?{...r,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function o(e,t,r){return y(e)?[{...t,queryKey:e},r]:[e||{},t]}function l(e,t){const{type:r="all",exact:s,fetchStatus:n,predicate:a,queryKey:i,stale:o}=e;if(y(i))if(s){if(t.queryHash!==d(i,t.options))return!1}else if(!h(t.queryKey,i))return!1;if("all"!==r){const e=t.isActive();if("active"===r&&!e)return!1;if("inactive"===r&&e)return!1}return("boolean"!==typeof o||t.isStale()===o)&&(("undefined"===typeof n||n===t.state.fetchStatus)&&!(a&&!a(t)))}function c(e,t){const{exact:r,fetching:s,predicate:n,mutationKey:a}=e;if(y(a)){if(!t.options.mutationKey)return!1;if(r){if(u(t.options.mutationKey)!==u(a))return!1}else if(!h(t.options.mutationKey,a))return!1}return("boolean"!==typeof s||"loading"===t.state.status===s)&&!(n&&!n(t))}function d(e,t){return((null==t?void 0:t.queryKeyHashFn)||u)(e)}function u(e){return JSON.stringify(e,(e,t)=>x(t)?Object.keys(t).sort().reduce((e,r)=>(e[r]=t[r],e),{}):t)}function h(e,t){return p(e,t)}function p(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&!Object.keys(t).some(r=>!p(e[r],t[r])))}function m(e,t){if(e===t)return e;const r=f(e)&&f(t);if(r||x(e)&&x(t)){const s=r?e.length:Object.keys(e).length,n=r?t:Object.keys(t),a=n.length,i=r?[]:{};let o=0;for(let l=0;l<a;l++){const s=r?l:n[l];i[s]=m(e[s],t[s]),i[s]===e[s]&&o++}return s===a&&o===s?e:i}return t}function f(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function x(e){if(!g(e))return!1;const t=e.constructor;if("undefined"===typeof t)return!0;const r=t.prototype;return!!g(r)&&!!r.hasOwnProperty("isPrototypeOf")}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e){return Array.isArray(e)}function v(e){return new Promise(t=>{setTimeout(t,e)})}function b(e){v(0).then(e)}function w(e,t,r){return null!=r.isDataEqual&&r.isDataEqual(e,t)?e:"function"===typeof r.structuralSharing?r.structuralSharing(e,t):!1!==r.structuralSharing?m(e,t):t}const j=console;const N=function(){let e=[],t=0,r=e=>{e()},s=e=>{e()};const n=s=>{t?e.push(s):b(()=>{r(s)})},a=()=>{const t=e;e=[],t.length&&b(()=>{s(()=>{t.forEach(e=>{r(e)})})})};return{batch:e=>{let r;t++;try{r=e()}finally{t--,t||a()}return r},batchCalls:e=>function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];n(()=>{e(...r)})},schedule:n,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{s=e}}}();class k{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const t={listener:e};return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const S=new class extends k{constructor(){super(),this.setup=e=>{if(!n&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(e=>{"boolean"===typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(e=>{let{listener:t}=e;t()})}isFocused(){return"boolean"===typeof this.focused?this.focused:"undefined"===typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}},C=["online","offline"];const E=new class extends k{constructor(){super(),this.setup=e=>{if(!n&&window.addEventListener){const t=()=>e();return C.forEach(e=>{window.addEventListener(e,t,!1)}),()=>{C.forEach(e=>{window.removeEventListener(e,t)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(e=>{"boolean"===typeof e?this.setOnline(e):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(e=>{let{listener:t}=e;t()})}isOnline(){return"boolean"===typeof this.online?this.online:"undefined"===typeof navigator||"undefined"===typeof navigator.onLine||navigator.onLine}};function _(e){return Math.min(1e3*2**e,3e4)}function P(e){return"online"!==(null!=e?e:"online")||E.isOnline()}class T{constructor(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}}function A(e){return e instanceof T}function O(e){let t,r,s,n=!1,a=0,i=!1;const o=new Promise((e,t)=>{r=e,s=t}),l=()=>!S.isFocused()||"always"!==e.networkMode&&!E.isOnline(),c=s=>{i||(i=!0,null==e.onSuccess||e.onSuccess(s),null==t||t(),r(s))},d=r=>{i||(i=!0,null==e.onError||e.onError(r),null==t||t(),s(r))},u=()=>new Promise(r=>{t=e=>{const t=i||!l();return t&&r(e),t},null==e.onPause||e.onPause()}).then(()=>{t=void 0,i||null==e.onContinue||e.onContinue()}),h=()=>{if(i)return;let t;try{t=e.fn()}catch(r){t=Promise.reject(r)}Promise.resolve(t).then(c).catch(t=>{var r,s;if(i)return;const o=null!=(r=e.retry)?r:3,c=null!=(s=e.retryDelay)?s:_,p="function"===typeof c?c(a,t):c,m=!0===o||"number"===typeof o&&a<o||"function"===typeof o&&o(a,t);!n&&m?(a++,null==e.onFail||e.onFail(a,t),v(p).then(()=>{if(l())return u()}).then(()=>{n?d(t):h()})):d(t)})};return P(e.networkMode)?h():u().then(h),{promise:o,cancel:t=>{i||(d(new T(t)),null==e.abort||e.abort())},continue:()=>(null==t?void 0:t())?o:Promise.resolve(),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1}}}class R{destroy(){this.clearGcTimeout()}scheduleGc(){var e;this.clearGcTimeout(),"number"===typeof(e=this.cacheTime)&&e>=0&&e!==1/0&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,null!=e?e:n?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class M extends R{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||j,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||function(e){const t="function"===typeof e.initialData?e.initialData():e.initialData,r="undefined"!==typeof t,s=r?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?null!=s?s:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.cache.remove(this)}setData(e,t){const r=w(this.state.data,e,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),r}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;const r=this.promise;return null==(t=this.retryer)||t.cancel(e),r?r.then(a).catch(a):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>!1!==e.options.enabled)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.state.isInvalidated||!this.state.dataUpdatedAt||!function(e,t){return Math.max(e+(t||0)-Date.now(),0)}(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var r,s;if("idle"!==this.state.fetchStatus)if(this.state.dataUpdatedAt&&null!=t&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var n;return null==(n=this.retryer)||n.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const a=function(){if("function"===typeof AbortController)return new AbortController}(),i={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},o=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>{if(a)return this.abortSignalConsumed=!0,a.signal}})};o(i);const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(i)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'")};var c;(o(l),null==(r=this.options.behavior)||r.onFetch(l),this.revertState=this.state,"idle"===this.state.fetchStatus||this.state.fetchMeta!==(null==(s=l.fetchOptions)?void 0:s.meta))&&this.dispatch({type:"fetch",meta:null==(c=l.fetchOptions)?void 0:c.meta});const d=e=>{var t,r,s,n;(A(e)&&e.silent||this.dispatch({type:"error",error:e}),A(e))||(null==(t=(r=this.cache.config).onError)||t.call(r,e,this),null==(s=(n=this.cache.config).onSettled)||s.call(n,this.state.data,e,this));this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=O({fn:l.fetchFn,abort:null==a?void 0:a.abort.bind(a),onSuccess:e=>{var t,r,s,n;"undefined"!==typeof e?(this.setData(e),null==(t=(r=this.cache.config).onSuccess)||t.call(r,e,this),null==(s=(n=this.cache.config).onSettled)||s.call(n,e,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1):d(new Error(this.queryHash+" data is undefined"))},onError:d,onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){this.state=(t=>{var r,s;switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null!=(r=e.meta)?r:null,fetchStatus:P(this.options.networkMode)?"fetching":"paused",...!t.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!=(s=e.dataUpdatedAt)?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return A(n)&&n.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),N.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}class L extends k{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,t,r){var s;const n=t.queryKey,a=null!=(s=t.queryHash)?s:d(n,t);let i=this.get(a);return i||(i=new M({cache:this,logger:e.getLogger(),queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(t=>t!==e),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){N.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){const[r]=o(e,t);return"undefined"===typeof r.exact&&(r.exact=!0),this.queries.find(e=>l(r,e))}findAll(e,t){const[r]=o(e,t);return Object.keys(r).length>0?this.queries.filter(e=>l(r,e)):this.queries}notify(e){N.batch(()=>{this.listeners.forEach(t=>{let{listener:r}=t;r(e)})})}onFocus(){N.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){N.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class D extends R{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||j,this.observers=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(t=>t!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,t;return null!=(e=null==(t=this.retryer)?void 0:t.continue())?e:this.execute()}async execute(){const e=()=>{var e;return this.retryer=O({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},t="loading"===this.state.status;try{var r,s,n,a,i,o,l,c;if(!t){var d,u,h,p;this.dispatch({type:"loading",variables:this.options.variables}),await(null==(d=(u=this.mutationCache.config).onMutate)?void 0:d.call(u,this.state.variables,this));const e=await(null==(h=(p=this.options).onMutate)?void 0:h.call(p,this.state.variables));e!==this.state.context&&this.dispatch({type:"loading",context:e,variables:this.state.variables})}const m=await e();return await(null==(r=(s=this.mutationCache.config).onSuccess)?void 0:r.call(s,m,this.state.variables,this.state.context,this)),await(null==(n=(a=this.options).onSuccess)?void 0:n.call(a,m,this.state.variables,this.state.context)),await(null==(i=(o=this.mutationCache.config).onSettled)?void 0:i.call(o,m,null,this.state.variables,this.state.context,this)),await(null==(l=(c=this.options).onSettled)?void 0:l.call(c,m,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:m}),m}catch(j){try{var m,f,x,g,y,v,b,w;throw await(null==(m=(f=this.mutationCache.config).onError)?void 0:m.call(f,j,this.state.variables,this.state.context,this)),await(null==(x=(g=this.options).onError)?void 0:x.call(g,j,this.state.variables,this.state.context)),await(null==(y=(v=this.mutationCache.config).onSettled)?void 0:y.call(v,void 0,j,this.state.variables,this.state.context,this)),await(null==(b=(w=this.options).onSettled)?void 0:b.call(w,void 0,j,this.state.variables,this.state.context)),j}finally{this.dispatch({type:"error",error:j})}}}dispatch(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"loading":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!P(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...t,...e.state}}})(this.state),N.batch(()=>{this.observers.forEach(t=>{t.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}class I extends k{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,t,r){const s=new D({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:r,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0});return this.add(s),s}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(t=>t!==e),this.notify({type:"removed",mutation:e})}clear(){N.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return"undefined"===typeof e.exact&&(e.exact=!0),this.mutations.find(t=>c(e,t))}findAll(e){return this.mutations.filter(t=>c(e,t))}notify(e){N.batch(()=>{this.listeners.forEach(t=>{let{listener:r}=t;r(e)})})}resumePausedMutations(){var e;return this.resuming=(null!=(e=this.resuming)?e:Promise.resolve()).then(()=>{const e=this.mutations.filter(e=>e.state.isPaused);return N.batch(()=>e.reduce((e,t)=>e.then(()=>t.continue().catch(a)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function F(){return{onFetch:e=>{e.fetchFn=()=>{var t,r,s,n,a,i;const o=null==(t=e.fetchOptions)||null==(r=t.meta)?void 0:r.refetchPage,l=null==(s=e.fetchOptions)||null==(n=s.meta)?void 0:n.fetchMore,c=null==l?void 0:l.pageParam,d="forward"===(null==l?void 0:l.direction),u="backward"===(null==l?void 0:l.direction),h=(null==(a=e.state.data)?void 0:a.pages)||[],p=(null==(i=e.state.data)?void 0:i.pageParams)||[];let m=p,f=!1;const x=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),g=(e,t,r,s)=>(m=s?[t,...m]:[...m,t],s?[r,...e]:[...e,r]),y=(t,r,s,n)=>{if(f)return Promise.reject("Cancelled");if("undefined"===typeof s&&!r&&t.length)return Promise.resolve(t);const a={queryKey:e.queryKey,pageParam:s,meta:e.options.meta};var i;i=a,Object.defineProperty(i,"signal",{enumerable:!0,get:()=>{var t,r;return null!=(t=e.signal)&&t.aborted?f=!0:null==(r=e.signal)||r.addEventListener("abort",()=>{f=!0}),e.signal}});const o=x(a);return Promise.resolve(o).then(e=>g(t,s,e,n))};let v;if(h.length)if(d){const t="undefined"!==typeof c,r=t?c:U(e.options,h);v=y(h,t,r)}else if(u){const t="undefined"!==typeof c,r=t?c:$(e.options,h);v=y(h,t,r,!0)}else{m=[];const t="undefined"===typeof e.options.getNextPageParam;v=!o||!h[0]||o(h[0],0,h)?y([],t,p[0]):Promise.resolve(g([],p[0],h[0]));for(let r=1;r<h.length;r++)v=v.then(s=>{if(!o||!h[r]||o(h[r],r,h)){const n=t?p[r]:U(e.options,s);return y(s,t,n)}return Promise.resolve(g(s,p[r],h[r]))})}else v=y([]);return v.then(e=>({pages:e,pageParams:m}))}}}}function U(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function $(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}const B=t.createContext(void 0),z=t.createContext(!1);function q(e,t){return e||(t&&"undefined"!==typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=B),window.ReactQueryClientContext):B)}const V=e=>{let{client:r,children:s,context:n,contextSharing:a=!1}=e;t.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]);const i=q(n,a);return t.createElement(z.Provider,{value:!n&&a},t.createElement(i.Provider,{value:r},s))},H=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),W=(0,t.createContext)({}),K=(0,t.createContext)(null),J="undefined"!==typeof document,G=J?t.useLayoutEffect:t.useEffect,Q=(0,t.createContext)({strict:!1}),Y=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),X="data-"+Y("framerAppearId");function Z(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function ee(e){return"string"===typeof e||Array.isArray(e)}function te(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const re=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],se=["initial",...re];function ne(e){return te(e.animate)||se.some(t=>ee(e[t]))}function ae(e){return Boolean(ne(e)||e.variants)}function ie(e){const{initial:r,animate:s}=function(e,t){if(ne(e)){const{initial:t,animate:r}=e;return{initial:!1===t||ee(t)?t:void 0,animate:ee(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(W));return(0,t.useMemo)(()=>({initial:r,animate:s}),[oe(r),oe(s)])}function oe(e){return Array.isArray(e)?e.join(" "):e}const le={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ce={};for(const r in le)ce[r]={isEnabled:e=>le[r].some(t=>!!e[t])};const de=(0,t.createContext)({}),ue=(0,t.createContext)({}),he=Symbol.for("motionComponentSymbol");function pe(e){let{preloadedFeatures:r,createVisualElement:s,useRender:n,useVisualState:a,Component:i}=e;r&&function(e){for(const t in e)ce[t]={...ce[t],...e[t]}}(r);const o=(0,t.forwardRef)(function(e,o){let l;const c={...(0,t.useContext)(H),...e,layoutId:me(e)},{isStatic:d}=c,u=ie(e),h=a(e,d);if(!d&&J){u.visualElement=function(e,r,s,n){const{visualElement:a}=(0,t.useContext)(W),i=(0,t.useContext)(Q),o=(0,t.useContext)(K),l=(0,t.useContext)(H).reducedMotion,c=(0,t.useRef)();n=n||i.renderer,!c.current&&n&&(c.current=n(e,{visualState:r,parent:a,props:s,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const d=c.current;(0,t.useInsertionEffect)(()=>{d&&d.update(s,o)});const u=(0,t.useRef)(Boolean(s[X]&&!window.HandoffComplete));return G(()=>{d&&(d.render(),u.current&&d.animationState&&d.animationState.animateChanges())}),(0,t.useEffect)(()=>{d&&(d.updateFeatures(),!u.current&&d.animationState&&d.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),d}(i,h,c,s);const e=(0,t.useContext)(ue),n=(0,t.useContext)(Q).strict;u.visualElement&&(l=u.visualElement.loadFeatures(c,n,r,e))}return t.createElement(W.Provider,{value:u},l&&u.visualElement?t.createElement(l,{visualElement:u.visualElement,...c}):null,n(i,e,function(e,r,s){return(0,t.useCallback)(t=>{t&&e.mount&&e.mount(t),r&&(t?r.mount(t):r.unmount()),s&&("function"===typeof s?s(t):Z(s)&&(s.current=t))},[r])}(h,u.visualElement,o),h,d,u.visualElement))});return o[he]=i,o}function me(e){let{layoutId:r}=e;const s=(0,t.useContext)(de).id;return s&&void 0!==r?s+"-"+r:r}function fe(e){function t(t){return pe(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const r=new Map;return new Proxy(t,{get:(e,s)=>(r.has(s)||r.set(s,t(s)),r.get(s))})}const xe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ge(e){return"string"===typeof e&&!e.includes("-")&&!!(xe.indexOf(e)>-1||/[A-Z]/.test(e))}const ye={};const ve=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],be=new Set(ve);function we(e,t){let{layout:r,layoutId:s}=t;return be.has(e)||e.startsWith("origin")||(r||void 0!==s)&&(!!ye[e]||"opacity"===e)}const je=e=>Boolean(e&&e.getVelocity),Ne={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ke=ve.length;const Se=e=>t=>"string"===typeof t&&t.startsWith(e),Ce=Se("--"),Ee=Se("var(--"),_e=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Pe=(e,t,r)=>Math.min(Math.max(r,e),t),Te={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Ae={...Te,transform:e=>Pe(0,1,e)},Oe={...Te,default:1},Re=e=>Math.round(1e5*e)/1e5,Me=/(-)?([\d]*\.?[\d])+/g,Le=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,De=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ie(e){return"string"===typeof e}const Fe=e=>({test:t=>Ie(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Ue=Fe("deg"),$e=Fe("%"),Be=Fe("px"),ze=Fe("vh"),qe=Fe("vw"),Ve={...$e,parse:e=>$e.parse(e)/100,transform:e=>$e.transform(100*e)},He={...Te,transform:Math.round},We={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,size:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,rotate:Ue,rotateX:Ue,rotateY:Ue,rotateZ:Ue,scale:Oe,scaleX:Oe,scaleY:Oe,scaleZ:Oe,skew:Ue,skewX:Ue,skewY:Ue,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:Ae,originX:Ve,originY:Ve,originZ:Be,zIndex:He,fillOpacity:Ae,strokeOpacity:Ae,numOctaves:He};function Ke(e,t,r,s){const{style:n,vars:a,transform:i,transformOrigin:o}=e;let l=!1,c=!1,d=!0;for(const u in t){const e=t[u];if(Ce(u)){a[u]=e;continue}const r=We[u],s=_e(e,r);if(be.has(u)){if(l=!0,i[u]=s,!d)continue;e!==(r.default||0)&&(d=!1)}else u.startsWith("origin")?(c=!0,o[u]=s):n[u]=s}if(t.transform||(l||s?n.transform=function(e,t,r,s){let{enableHardwareAcceleration:n=!0,allowTransformNone:a=!0}=t,i="";for(let o=0;o<ke;o++){const t=ve[o];void 0!==e[t]&&(i+=`${Ne[t]||t}(${e[t]}) `)}return n&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,r?"":i):a&&r&&(i="none"),i}(e.transform,r,d,s):n.transform&&(n.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:r=0}=o;n.transformOrigin=`${e} ${t} ${r}`}}const Je=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ge(e,t,r){for(const s in t)je(t[s])||we(s,r)||(e[s]=t[s])}function Qe(e,r,s){const n={};return Ge(n,e.style||{},e),Object.assign(n,function(e,r,s){let{transformTemplate:n}=e;return(0,t.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Ke(e,r,{enableHardwareAcceleration:!s},n),Object.assign({},e.vars,e.style)},[r])}(e,r,s)),e.transformValues?e.transformValues(n):n}function Ye(e,t,r){const s={},n=Qe(e,t,r);return e.drag&&!1!==e.dragListener&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=n,s}const Xe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ze(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Xe.has(e)}let et=e=>!Ze(e);try{(tt=require("@emotion/is-prop-valid").default)&&(et=e=>e.startsWith("on")?!Ze(e):tt(e))}catch(zh){}var tt;function rt(e,t,r){return"string"===typeof e?e:Be.transform(t+r*e)}const st={offset:"stroke-dashoffset",array:"stroke-dasharray"},nt={offset:"strokeDashoffset",array:"strokeDasharray"};function at(e,t,r,s,n){let{attrX:a,attrY:i,attrScale:o,originX:l,originY:c,pathLength:d,pathSpacing:u=1,pathOffset:h=0,...p}=t;if(Ke(e,p,r,n),s)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:m,style:f,dimensions:x}=e;m.transform&&(x&&(f.transform=m.transform),delete m.transform),x&&(void 0!==l||void 0!==c||f.transform)&&(f.transformOrigin=function(e,t,r){return`${rt(t,e.x,e.width)} ${rt(r,e.y,e.height)}`}(x,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==a&&(m.x=a),void 0!==i&&(m.y=i),void 0!==o&&(m.scale=o),void 0!==d&&function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const a=n?st:nt;e[a.offset]=Be.transform(-s);const i=Be.transform(t),o=Be.transform(r);e[a.array]=`${i} ${o}`}(m,d,u,h,!1)}const it=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),ot=e=>"string"===typeof e&&"svg"===e.toLowerCase();function lt(e,r,s,n){const a=(0,t.useMemo)(()=>{const t={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return at(t,r,{enableHardwareAcceleration:!1},ot(n),e.transformTemplate),{...t.attrs,style:{...t.style}}},[r]);if(e.style){const t={};Ge(t,e.style,e),a.style={...t,...a.style}}return a}function ct(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(r,s,n,a,i)=>{let{latestValues:o}=a;const l=(ge(r)?lt:Ye)(s,o,i,r),c=function(e,t,r){const s={};for(const n in e)"values"===n&&"object"===typeof e.values||(et(n)||!0===r&&Ze(n)||!t&&!Ze(n)||e.draggable&&n.startsWith("onDrag"))&&(s[n]=e[n]);return s}(s,"string"===typeof r,e),d={...c,...l,ref:n},{children:u}=s,h=(0,t.useMemo)(()=>je(u)?u.get():u,[u]);return(0,t.createElement)(r,{...d,children:h})}}function dt(e,t,r,s){let{style:n,vars:a}=t;Object.assign(e.style,n,s&&s.getProjectionStyles(r));for(const i in a)e.style.setProperty(i,a[i])}const ut=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ht(e,t,r,s){dt(e,t,void 0,s);for(const n in t.attrs)e.setAttribute(ut.has(n)?n:Y(n),t.attrs[n])}function pt(e,t){const{style:r}=e,s={};for(const n in r)(je(r[n])||t.style&&je(t.style[n])||we(n,e))&&(s[n]=r[n]);return s}function mt(e,t){const r=pt(e,t);for(const s in e)if(je(e[s])||je(t[s])){r[-1!==ve.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return r}function ft(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==r?r:e.custom,s,n)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==r?r:e.custom,s,n)),t}function xt(e){const r=(0,t.useRef)(null);return null===r.current&&(r.current=e()),r.current}const gt=e=>Array.isArray(e),yt=e=>gt(e)?e[e.length-1]||0:e;function vt(e){const t=je(e)?e.get():e;return r=t,Boolean(r&&"object"===typeof r&&r.mix&&r.toValue)?t.toValue():t;var r}const bt=e=>(r,s)=>{const n=(0,t.useContext)(W),a=(0,t.useContext)(K),i=()=>function(e,t,r,s){let{scrapeMotionValuesFromProps:n,createRenderState:a,onMount:i}=e;const o={latestValues:wt(t,r,s,n),renderState:a()};return i&&(o.mount=e=>i(t,e,o)),o}(e,r,n,a);return s?i():xt(i)};function wt(e,t,r,s){const n={},a=s(e,{});for(const h in a)n[h]=vt(a[h]);let{initial:i,animate:o}=e;const l=ne(e),c=ae(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!r&&!1===r.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!==typeof u&&!te(u)){(Array.isArray(u)?u:[u]).forEach(t=>{const r=ft(e,t);if(!r)return;const{transitionEnd:s,transition:a,...i}=r;for(const e in i){let t=i[e];if(Array.isArray(t)){t=t[d?t.length-1:0]}null!==t&&(n[e]=t)}for(const e in s)n[e]=s[e]})}return n}const jt=e=>e;class Nt{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const kt=["prepare","read","update","preRender","render","postRender"];const{schedule:St,cancel:Ct,state:Et,steps:_t}=function(e,t){let r=!1,s=!0;const n={delta:0,timestamp:0,isProcessing:!1},a=kt.reduce((e,t)=>(e[t]=function(e){let t=new Nt,r=new Nt,s=0,n=!1,a=!1;const i=new WeakSet,o={schedule:function(e){const a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&n,o=a?t:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),o.add(e)&&a&&n&&(s=t.order.length),e},cancel:e=>{r.remove(e),i.delete(e)},process:l=>{if(n)a=!0;else{if(n=!0,[t,r]=[r,t],r.clear(),s=t.order.length,s)for(let r=0;r<s;r++){const s=t.order[r];s(l),i.has(s)&&(o.schedule(s),e())}n=!1,a&&(a=!1,o.process(l))}}};return o}(()=>r=!0),e),{}),i=e=>a[e].process(n),o=()=>{const a=performance.now();r=!1,n.delta=s?1e3/60:Math.max(Math.min(a-n.timestamp,40),1),n.timestamp=a,n.isProcessing=!0,kt.forEach(i),n.isProcessing=!1,r&&t&&(s=!1,e(o))},l=kt.reduce((t,i)=>{const l=a[i];return t[i]=function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r||(r=!0,s=!0,n.isProcessing||e(o)),l.schedule(t,a,i)},t},{});return{schedule:l,cancel:e=>kt.forEach(t=>a[t].cancel(e)),state:n,steps:a}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:jt,!0),Pt={useVisualState:bt({scrapeMotionValuesFromProps:mt,createRenderState:it,onMount:(e,t,r)=>{let{renderState:s,latestValues:n}=r;St.read(()=>{try{s.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){s.dimensions={x:0,y:0,width:0,height:0}}}),St.render(()=>{at(s,n,{enableHardwareAcceleration:!1},ot(t.tagName),e.transformTemplate),ht(t,s)})}})},Tt={useVisualState:bt({scrapeMotionValuesFromProps:pt,createRenderState:Je})};function At(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r)}const Ot=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function Rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}function Mt(e,t,r,s){return At(e,t,(e=>t=>Ot(t)&&e(t,Rt(t)))(r),s)}const Lt=(e,t)=>r=>t(e(r)),Dt=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(Lt)};function It(e){let t=null;return()=>{const r=()=>{t=null};return null===t&&(t=e,r)}}const Ft=It("dragHorizontal"),Ut=It("dragVertical");function $t(e){let t=!1;if("y"===e)t=Ut();else if("x"===e)t=Ft();else{const e=Ft(),r=Ut();e&&r?t=()=>{e(),r()}:(e&&e(),r&&r())}return t}function Bt(){const e=$t(!0);return!e||(e(),!1)}class zt{constructor(e){this.isMounted=!1,this.node=e}update(){}}function qt(e,t){const r="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End");return Mt(e.current,r,(r,n)=>{if("touch"===r.pointerType||Bt())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[s]&&St.update(()=>a[s](r,n))},{passive:!e.getProps()[s]})}const Vt=(e,t)=>!!t&&(e===t||Vt(e,t.parentElement));function Ht(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,Rt(r))}const Wt=new WeakMap,Kt=new WeakMap,Jt=e=>{const t=Wt.get(e.target);t&&t(e)},Gt=e=>{e.forEach(Jt)};function Qt(e,t,r){const s=function(e){let{root:t,...r}=e;const s=t||document;Kt.has(s)||Kt.set(s,{});const n=Kt.get(s),a=JSON.stringify(r);return n[a]||(n[a]=new IntersectionObserver(Gt,{root:t,...r})),n[a]}(t);return Wt.set(e,r),s.observe(e),()=>{Wt.delete(e),s.unobserve(e)}}const Yt={some:0,all:1};const Xt={inView:{Feature:class extends zt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:n}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:"number"===typeof s?s:Yt[s]};return Qt(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,n&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:r,onViewportLeave:s}=this.node.getProps(),a=t?r:s;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,r=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:r={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==r[e]}(e,t));r&&this.startObserver()}unmount(){}}},tap:{Feature:class extends zt{constructor(){super(...arguments),this.removeStartListeners=jt,this.removeEndListeners=jt,this.removeAccessibleListeners=jt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Mt(window,"pointerup",(e,t)=>{if(!this.checkPressEnd())return;const{onTap:r,onTapCancel:s,globalTapTarget:n}=this.node.getProps();St.update(()=>{n||Vt(this.node.current,e.target)?r&&r(e,t):s&&s(e,t)})},{passive:!(r.onTap||r.onPointerUp)}),n=Mt(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Dt(s,n),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=At(this.node.current,"keydown",e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=At(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&Ht("up",(e,t)=>{const{onTap:r}=this.node.getProps();r&&St.update(()=>r(e,t))})}),Ht("down",(e,t)=>{this.startPress(e,t)})}),t=At(this.node.current,"blur",()=>{this.isPressing&&Ht("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=Dt(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&St.update(()=>r(e,t))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Bt()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&St.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=Mt(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=At(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Dt(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends zt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Dt(At(this.node.current,"focus",()=>this.onFocus()),At(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends zt{mount(){this.unmount=Dt(qt(this.node,!0),qt(this.node,!1))}unmount(){}}}};function Zt(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(t[s]!==e[s])return!1;return!0}function er(e,t,r){const s=e.getProps();return ft(s,t,void 0!==r?r:s.custom,function(e){const t={};return e.values.forEach((e,r)=>t[r]=e.get()),t}(e),function(e){const t={};return e.values.forEach((e,r)=>t[r]=e.getVelocity()),t}(e))}let tr=jt,rr=jt;const sr=e=>1e3*e,nr=e=>e/1e3,ar=!1,ir=e=>Array.isArray(e)&&"number"===typeof e[0];function or(e){return Boolean(!e||"string"===typeof e&&cr[e]||ir(e)||Array.isArray(e)&&e.every(or))}const lr=e=>{let[t,r,s,n]=e;return`cubic-bezier(${t}, ${r}, ${s}, ${n})`},cr={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:lr([0,.65,.55,1]),circOut:lr([.55,0,1,.45]),backIn:lr([.31,.01,.66,-.59]),backOut:lr([.33,1.53,.69,.99])};function dr(e){if(e)return ir(e)?lr(e):Array.isArray(e)?e.map(dr):cr[e]}const ur=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function hr(e,t,r,s){if(e===t&&r===s)return jt;const n=t=>function(e,t,r,s,n){let a,i,o=0;do{i=t+(r-t)/2,a=ur(i,s,n)-e,a>0?r=i:t=i}while(Math.abs(a)>1e-7&&++o<12);return i}(t,0,1,e,r);return e=>0===e||1===e?e:ur(n(e),t,s)}const pr=hr(.42,0,1,1),mr=hr(0,0,.58,1),fr=hr(.42,0,.58,1),xr=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,gr=e=>t=>1-e(1-t),yr=e=>1-Math.sin(Math.acos(e)),vr=gr(yr),br=xr(yr),wr=hr(.33,1.53,.69,.99),jr=gr(wr),Nr=xr(jr),kr={linear:jt,easeIn:pr,easeInOut:fr,easeOut:mr,circIn:yr,circInOut:br,circOut:vr,backIn:jr,backInOut:Nr,backOut:wr,anticipate:e=>(e*=2)<1?.5*jr(e):.5*(2-Math.pow(2,-10*(e-1)))},Sr=e=>{if(Array.isArray(e)){rr(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,r,s,n]=e;return hr(t,r,s,n)}return"string"===typeof e?(rr(void 0!==kr[e],`Invalid easing type '${e}'`),kr[e]):e},Cr=(e,t)=>r=>Boolean(Ie(r)&&De.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),Er=(e,t,r)=>s=>{if(!Ie(s))return s;const[n,a,i,o]=s.match(Me);return{[e]:parseFloat(n),[t]:parseFloat(a),[r]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},_r={...Te,transform:e=>Math.round((e=>Pe(0,255,e))(e))},Pr={test:Cr("rgb","red"),parse:Er("red","green","blue"),transform:e=>{let{red:t,green:r,blue:s,alpha:n=1}=e;return"rgba("+_r.transform(t)+", "+_r.transform(r)+", "+_r.transform(s)+", "+Re(Ae.transform(n))+")"}};const Tr={test:Cr("#"),parse:function(e){let t="",r="",s="",n="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),s=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),s=e.substring(3,4),n=e.substring(4,5),t+=t,r+=r,s+=s,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:n?parseInt(n,16)/255:1}},transform:Pr.transform},Ar={test:Cr("hsl","hue"),parse:Er("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:r,lightness:s,alpha:n=1}=e;return"hsla("+Math.round(t)+", "+$e.transform(Re(r))+", "+$e.transform(Re(s))+", "+Re(Ae.transform(n))+")"}},Or={test:e=>Pr.test(e)||Tr.test(e)||Ar.test(e),parse:e=>Pr.test(e)?Pr.parse(e):Ar.test(e)?Ar.parse(e):Tr.parse(e),transform:e=>Ie(e)?e:e.hasOwnProperty("red")?Pr.transform(e):Ar.transform(e)},Rr=(e,t,r)=>-r*e+r*t+e;function Mr(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}const Lr=(e,t,r)=>{const s=e*e;return Math.sqrt(Math.max(0,r*(t*t-s)+s))},Dr=[Tr,Pr,Ar];function Ir(e){const t=(r=e,Dr.find(e=>e.test(r)));var r;rr(Boolean(t),`'${e}' is not an animatable color. Use the equivalent color code instead.`);let s=t.parse(e);return t===Ar&&(s=function(e){let{hue:t,saturation:r,lightness:s,alpha:n}=e;t/=360,r/=100,s/=100;let a=0,i=0,o=0;if(r){const e=s<.5?s*(1+r):s+r-s*r,n=2*s-e;a=Mr(n,e,t+1/3),i=Mr(n,e,t),o=Mr(n,e,t-1/3)}else a=i=o=s;return{red:Math.round(255*a),green:Math.round(255*i),blue:Math.round(255*o),alpha:n}}(s)),s}const Fr=(e,t)=>{const r=Ir(e),s=Ir(t),n={...r};return e=>(n.red=Lr(r.red,s.red,e),n.green=Lr(r.green,s.green,e),n.blue=Lr(r.blue,s.blue,e),n.alpha=Rr(r.alpha,s.alpha,e),Pr.transform(n))};const Ur={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:jt},$r={regex:Le,countKey:"Colors",token:"${c}",parse:Or.parse},Br={regex:Me,countKey:"Numbers",token:"${n}",parse:Te.parse};function zr(e,t){let{regex:r,countKey:s,token:n,parse:a}=t;const i=e.tokenised.match(r);i&&(e["num"+s]=i.length,e.tokenised=e.tokenised.replace(r,n),e.values.push(...i.map(a)))}function qr(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&zr(r,Ur),zr(r,$r),zr(r,Br),r}function Vr(e){return qr(e).values}function Hr(e){const{values:t,numColors:r,numVars:s,tokenised:n}=qr(e),a=t.length;return e=>{let t=n;for(let n=0;n<a;n++)t=n<s?t.replace(Ur.token,e[n]):n<s+r?t.replace($r.token,Or.transform(e[n])):t.replace(Br.token,Re(e[n]));return t}}const Wr=e=>"number"===typeof e?0:e;const Kr={test:function(e){var t,r;return isNaN(e)&&Ie(e)&&((null===(t=e.match(Me))||void 0===t?void 0:t.length)||0)+((null===(r=e.match(Le))||void 0===r?void 0:r.length)||0)>0},parse:Vr,createTransformer:Hr,getAnimatableNone:function(e){const t=Vr(e);return Hr(e)(t.map(Wr))}},Jr=(e,t)=>r=>`${r>0?t:e}`;function Gr(e,t){return"number"===typeof e?r=>Rr(e,t,r):Or.test(e)?Fr(e,t):e.startsWith("var(")?Jr(e,t):Xr(e,t)}const Qr=(e,t)=>{const r=[...e],s=r.length,n=e.map((e,r)=>Gr(e,t[r]));return e=>{for(let t=0;t<s;t++)r[t]=n[t](e);return r}},Yr=(e,t)=>{const r={...e,...t},s={};for(const n in r)void 0!==e[n]&&void 0!==t[n]&&(s[n]=Gr(e[n],t[n]));return e=>{for(const t in s)r[t]=s[t](e);return r}},Xr=(e,t)=>{const r=Kr.createTransformer(t),s=qr(e),n=qr(t);return s.numVars===n.numVars&&s.numColors===n.numColors&&s.numNumbers>=n.numNumbers?Dt(Qr(s.values,n.values),r):(tr(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),Jr(e,t))},Zr=(e,t,r)=>{const s=t-e;return 0===s?1:(r-e)/s},es=(e,t)=>r=>Rr(e,t,r);function ts(e,t,r){const s=[],n=r||("number"===typeof(a=e[0])?es:"string"===typeof a?Or.test(a)?Fr:Xr:Array.isArray(a)?Qr:"object"===typeof a?Yr:es);var a;const i=e.length-1;for(let o=0;o<i;o++){let r=n(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||jt:t;r=Dt(e,r)}s.push(r)}return s}function rs(e,t){let{clamp:r=!0,ease:s,mixer:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.length;if(rr(a===t.length,"Both input and output ranges must be the same length"),1===a)return()=>t[0];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=ts(t,s,n),o=i.length,l=t=>{let r=0;if(o>1)for(;r<e.length-2&&!(t<e[r+1]);r++);const s=Zr(e[r],e[r+1],t);return i[r](s)};return r?t=>l(Pe(e[0],e[a-1],t)):l}function ss(e){const t=[0];return function(e,t){const r=e[e.length-1];for(let s=1;s<=t;s++){const n=Zr(0,t,s);e.push(Rr(r,1,n))}}(t,e.length-1),t}function ns(e){let{duration:t=300,keyframes:r,times:s,ease:n="easeInOut"}=e;const a=(e=>Array.isArray(e)&&"number"!==typeof e[0])(n)?n.map(Sr):Sr(n),i={done:!1,value:r[0]},o=function(e,t){return e.map(e=>e*t)}(s&&s.length===r.length?s:ss(r),t),l=rs(o,r,{ease:Array.isArray(a)?a:(c=r,d=a,c.map(()=>d||fr).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}function as(e,t){return t?e*(1e3/t):0}function is(e,t,r){const s=Math.max(t-5,0);return as(r-e(s),t-s)}const os=.001;function ls(e){let t,r,{duration:s=800,bounce:n=.25,velocity:a=0,mass:i=1}=e;tr(s<=sr(10),"Spring duration must be 10 seconds or less");let o=1-n;o=Pe(.05,1,o),s=Pe(.01,10,nr(s)),o<1?(t=e=>{const t=e*o,r=t*s,n=t-a,i=ds(e,o),l=Math.exp(-r);return os-n/i*l},r=e=>{const r=e*o*s,n=r*a+a,i=Math.pow(o,2)*Math.pow(e,2)*s,l=Math.exp(-r),c=ds(Math.pow(e,2),o);return(-t(e)+os>0?-1:1)*((n-i)*l)/c}):(t=e=>Math.exp(-e*s)*((e-a)*s+1)-.001,r=e=>Math.exp(-e*s)*(s*s*(a-e)));const l=function(e,t,r){let s=r;for(let n=1;n<cs;n++)s-=e(s)/t(s);return s}(t,r,5/s);if(s=sr(s),isNaN(l))return{stiffness:100,damping:10,duration:s};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:s}}}const cs=12;function ds(e,t){return e*Math.sqrt(1-t*t)}const us=["duration","bounce"],hs=["stiffness","damping","mass"];function ps(e,t){return t.some(t=>void 0!==e[t])}function ms(e){let{keyframes:t,restDelta:r,restSpeed:s,...n}=e;const a=t[0],i=t[t.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:p}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!ps(e,hs)&&ps(e,us)){const r=ls(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}({...n,velocity:-nr(n.velocity||0)}),m=h||0,f=c/(2*Math.sqrt(l*d)),x=i-a,g=nr(Math.sqrt(l/d)),y=Math.abs(x)<5;let v;if(s||(s=y?.01:2),r||(r=y?.005:.5),f<1){const e=ds(g,f);v=t=>{const r=Math.exp(-f*g*t);return i-r*((m+f*g*x)/e*Math.sin(e*t)+x*Math.cos(e*t))}}else if(1===f)v=e=>i-Math.exp(-g*e)*(x+(m+g*x)*e);else{const e=g*Math.sqrt(f*f-1);v=t=>{const r=Math.exp(-f*g*t),s=Math.min(e*t,300);return i-r*((m+f*g*x)*Math.sinh(s)+e*x*Math.cosh(s))/e}}return{calculatedDuration:p&&u||null,next:e=>{const t=v(e);if(p)o.done=e>=u;else{let n=m;0!==e&&(n=f<1?is(v,e,t):0);const a=Math.abs(n)<=s,l=Math.abs(i-t)<=r;o.done=a&&l}return o.value=o.done?i:t,o}}}function fs(e){let{keyframes:t,velocity:r=0,power:s=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const h=t[0],p={done:!1,value:h},m=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let f=s*r;const x=h+f,g=void 0===o?x:o(x);g!==x&&(f=g-h);const y=e=>-f*Math.exp(-e/n),v=e=>g+y(e),b=e=>{const t=y(e),r=v(e);p.done=Math.abs(t)<=d,p.value=p.done?g:r};let w,j;const N=e=>{var t;(t=p.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(w=e,j=ms({keyframes:[p.value,m(p.value)],velocity:is(v,e,p.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return j||void 0!==w||(t=!0,b(e),N(e)),void 0!==w&&e>w?j.next(e-w):(!t&&b(e),p)}}}const xs=e=>{const t=t=>{let{timestamp:r}=t;return e(r)};return{start:()=>St.update(t,!0),stop:()=>Ct(t),now:()=>Et.isProcessing?Et.timestamp:performance.now()}};function gs(e){let t=0;let r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}const ys={decay:fs,inertia:fs,tween:ns,keyframes:ns,spring:ms};function vs(e){let t,r,{autoplay:s=!0,delay:n=0,driver:a=xs,keyframes:i,type:o="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:d="loop",onPlay:u,onStop:h,onComplete:p,onUpdate:m,...f}=e,x=1,g=!1;const y=()=>{r=new Promise(e=>{t=e})};let v;y();const b=ys[o]||ns;let w;b!==ns&&"number"!==typeof i[0]&&(w=rs([0,100],i,{clamp:!1}),i=[0,100]);const j=b({...f,keyframes:i});let N;"mirror"===d&&(N=b({...f,keyframes:[...i].reverse(),velocity:-(f.velocity||0)}));let k="idle",S=null,C=null,E=null;null===j.calculatedDuration&&l&&(j.calculatedDuration=gs(j));const{calculatedDuration:_}=j;let P=1/0,T=1/0;null!==_&&(P=_+c,T=P*(l+1)-c);let A=0;const O=e=>{if(null===C)return;x>0&&(C=Math.min(C,e)),x<0&&(C=Math.min(e-T/x,C)),A=null!==S?S:Math.round(e-C)*x;const t=A-n*(x>=0?1:-1),r=x>=0?t<0:t>T;A=Math.max(t,0),"finished"===k&&null===S&&(A=T);let s=A,a=j;if(l){const e=Math.min(A,T)/P;let t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,t=Math.min(t,l+1);Boolean(t%2)&&("reverse"===d?(r=1-r,c&&(r-=c/P)):"mirror"===d&&(a=N)),s=Pe(0,1,r)*P}const o=r?{done:!1,value:i[0]}:a.next(s);w&&(o.value=w(o.value));let{done:u}=o;r||null===_||(u=x>=0?A>=T:A<=0);const h=null===S&&("finished"===k||"running"===k&&u);return m&&m(o.value),h&&L(),o},R=()=>{v&&v.stop(),v=void 0},M=()=>{k="idle",R(),t(),y(),C=E=null},L=()=>{k="finished",p&&p(),R(),t()},D=()=>{if(g)return;v||(v=a(O));const e=v.now();u&&u(),null!==S?C=e-S:C&&"finished"!==k||(C=e),"finished"===k&&y(),E=C,S=null,k="running",v.start()};s&&D();const I={then:(e,t)=>r.then(e,t),get time(){return nr(A)},set time(e){e=sr(e),A=e,null===S&&v&&0!==x?C=v.now()-e/x:S=e},get duration(){const e=null===j.calculatedDuration?gs(j):j.calculatedDuration;return nr(e)},get speed(){return x},set speed(e){e!==x&&v&&(x=e,I.time=nr(A))},get state(){return k},play:D,pause:()=>{k="paused",S=A},stop:()=>{g=!0,"idle"!==k&&(k="idle",h&&h(),M())},cancel:()=>{null!==E&&O(E),M()},complete:()=>{k="finished"},sample:e=>(C=0,O(e))};return I}const bs=function(e){let t;return()=>(void 0===t&&(t=e()),t)}(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ws=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function js(e,t,r){let{onUpdate:s,onComplete:n,...a}=r;if(!(bs()&&ws.has(t)&&!a.repeatDelay&&"mirror"!==a.repeatType&&0!==a.damping&&"inertia"!==a.type))return!1;let i,o,l=!1,c=!1;const d=()=>{o=new Promise(e=>{i=e})};d();let{keyframes:u,duration:h=300,ease:p,times:m}=a;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!or(t.ease))(t,a)){const e=vs({...a,repeat:0,delay:0});let t={done:!1,value:u[0]};const r=[];let s=0;for(;!t.done&&s<2e4;)t=e.sample(s),r.push(t.value),s+=10;m=void 0,u=r,h=s-10,p="linear"}const f=function(e,t,r){let{delay:s=0,duration:n,repeat:a=0,repeatType:i="loop",ease:o,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:r};l&&(c.offset=l);const d=dr(o);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:s,duration:n,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"})}(e.owner.current,t,u,{...a,duration:h,ease:p,times:m}),x=()=>{c=!1,f.cancel()},g=()=>{c=!0,St.update(x),i(),d()};f.onfinish=()=>{c||(e.set(function(e,t){let{repeat:r,repeatType:s="loop"}=t;return e[r&&"loop"!==s&&r%2===1?0:e.length-1]}(u,a)),n&&n(),g())};return{then:(e,t)=>o.then(e,t),attachTimeline:e=>(f.timeline=e,f.onfinish=null,jt),get time(){return nr(f.currentTime||0)},set time(e){f.currentTime=sr(e)},get speed(){return f.playbackRate},set speed(e){f.playbackRate=e},get duration(){return nr(h)},play:()=>{l||(f.play(),Ct(x))},pause:()=>f.pause(),stop:()=>{if(l=!0,"idle"===f.playState)return;const{currentTime:t}=f;if(t){const r=vs({...a,autoplay:!1});e.setWithVelocity(r.sample(t-10).value,r.sample(t).value,10)}g()},complete:()=>{c||f.finish()},cancel:g}}const Ns={type:"spring",stiffness:500,damping:25,restSpeed:10},ks={type:"keyframes",duration:.8},Ss={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Cs=(e,t)=>{let{keyframes:r}=t;return r.length>2?ks:be.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===r[1]?2*Math.sqrt(550):30,restSpeed:10}:Ns:Ss},Es=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Kr.test(t)&&"0"!==t||t.startsWith("url("))),_s=new Set(["brightness","contrast","saturate","opacity"]);function Ps(e){const[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[s]=r.match(Me)||[];if(!s)return e;const n=r.replace(s,"");let a=_s.has(t)?1:0;return s!==r&&(a*=100),t+"("+a+n+")"}const Ts=/([a-z-]*)\(.*?\)/g,As={...Kr,getAnimatableNone:e=>{const t=e.match(Ts);return t?t.map(Ps).join(" "):e}},Os={...We,color:Or,backgroundColor:Or,outlineColor:Or,fill:Or,stroke:Or,borderColor:Or,borderTopColor:Or,borderRightColor:Or,borderBottomColor:Or,borderLeftColor:Or,filter:As,WebkitFilter:As},Rs=e=>Os[e];function Ms(e,t){let r=Rs(e);return r!==As&&(r=Kr),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Ls=e=>/^0[^.\s]+$/.test(e);function Ds(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||Ls(e):void 0}function Is(e,t){return e[t]||e.default||e}const Fs=!1,Us=function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n=>{const a=Is(s,e)||{},i=a.delay||s.delay||0;let{elapsed:o=0}=s;o-=sr(i);const l=function(e,t,r,s){const n=Es(t,r);let a;a=Array.isArray(r)?[...r]:[null,r];const i=void 0!==s.from?s.from:e.get();let o;const l=[];for(let c=0;c<a.length;c++)null===a[c]&&(a[c]=0===c?i:a[c-1]),Ds(a[c])&&l.push(c),"string"===typeof a[c]&&"none"!==a[c]&&"0"!==a[c]&&(o=a[c]);if(n&&l.length&&o)for(let c=0;c<l.length;c++)a[l[c]]=Ms(t,o);return a}(t,e,r,a),c=l[0],d=l[l.length-1],u=Es(e,c),h=Es(e,d);tr(u===h,`You are trying to animate ${e} from "${c}" to "${d}". ${c} is not an animatable value - to enable this animation set ${c} to a value animatable to ${d} via the \`style\` property.`);let p={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...a,delay:-o,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{n(),a.onComplete&&a.onComplete()}};if(function(e){let{when:t,delay:r,delayChildren:s,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}=e;return!!Object.keys(u).length}(a)||(p={...p,...Cs(e,p)}),p.duration&&(p.duration=sr(p.duration)),p.repeatDelay&&(p.repeatDelay=sr(p.repeatDelay)),!u||!h||ar||!1===a.type||Fs)return function(e){let{keyframes:t,delay:r,onUpdate:s,onComplete:n}=e;const a=()=>(s&&s(t[t.length-1]),n&&n(),{time:0,speed:1,duration:0,play:jt,pause:jt,stop:jt,then:e=>(e(),Promise.resolve()),cancel:jt,complete:jt});return r?vs({keyframes:[0,1],duration:0,delay:r,onComplete:a}):a()}(ar?{...p,delay:0}:p);if(!s.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const r=js(t,e,p);if(r)return r}return vs(p)}};function $s(e){return Boolean(je(e)&&e.add)}const Bs=e=>/^\-?\d*\.?\d+$/.test(e);function zs(e,t){-1===e.indexOf(t)&&e.push(t)}function qs(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class Vs{constructor(){this.subscriptions=[]}add(e){return zs(this.subscriptions,e),()=>qs(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(1===s)this.subscriptions[0](e,t,r);else for(let n=0;n<s;n++){const s=this.subscriptions[n];s&&s(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Hs={current:void 0};class Ws{constructor(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prev=t.current,t.current=e;const{delta:s,timestamp:n}=Et;t.lastUpdated!==n&&(t.timeDelta=s,t.lastUpdated=n,St.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.events.change&&t.events.change.notify(t.current),t.events.velocityChange&&t.events.velocityChange.notify(t.getVelocity()),r&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.scheduleVelocityCheck=()=>St.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(s=this.current,!isNaN(parseFloat(s))),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Vs);const r=this.events[e].add(t);return"change"===e?()=>{r(),St.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Hs.current&&Hs.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?as(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ks(e,t){return new Ws(e,t)}const Js=e=>t=>t.test(e),Gs=[Te,Be,$e,Ue,qe,ze,{test:e=>"auto"===e,parse:e=>e}],Qs=e=>Gs.find(Js(e)),Ys=[...Gs,Or,Kr],Xs=e=>Ys.find(Js(e));function Zs(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Ks(r))}function en(e,t){const r=er(e,t);let{transitionEnd:s={},transition:n={},...a}=r?e.makeTargetAnimatable(r,!1):{};a={...a,...s};for(const i in a){Zs(e,i,yt(a[i]))}}function tn(e,t){if(!t)return;return(t[e]||t.default||t).from}function rn(e,t){let{protectedKeys:r,needsAnimating:s}=e;const n=r.hasOwnProperty(t)&&!0!==s[t];return s[t]=!1,n}function sn(e,t){const r=e.get();if(!Array.isArray(t))return r!==t;for(let s=0;s<t.length;s++)if(t[s]!==r)return!0}function nn(e,t){let{delay:r=0,transitionOverride:s,type:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");s&&(a=s);const c=[],d=n&&e.animationState&&e.animationState.getState()[n];for(const u in o){const t=e.getValue(u),s=o[u];if(!t||void 0===s||d&&rn(d,u))continue;const n={delay:r,elapsed:0,...Is(a||{},u)};if(window.HandoffAppearAnimations){const r=e.getProps()[X];if(r){const e=window.HandoffAppearAnimations(r,u,t,St);null!==e&&(n.elapsed=e,n.isHandoff=!0)}}let i=!n.isHandoff&&!sn(t,s);if("spring"===n.type&&(t.getVelocity()||n.velocity)&&(i=!1),t.animation&&(i=!1),i)continue;t.start(Us(u,t,s,e.shouldReduceMotion&&be.has(u)?{type:!1}:n));const h=t.animation;$s(l)&&(l.add(u),h.then(()=>l.remove(u))),c.push(h)}return i&&Promise.all(c).then(()=>{i&&en(e,i)}),c}function an(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=er(e,t,r.custom);let{transition:n=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(n=r.transitionOverride);const a=s?()=>Promise.all(nn(e,s,r)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:a=0,staggerChildren:i,staggerDirection:o}=n;return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0;const i=[],o=(e.variantChildren.size-1)*s,l=1===n?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*s}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*s};return Array.from(e.variantChildren).sort(on).forEach((e,s)=>{e.notify("AnimationStart",t),i.push(an(e,t,{...a,delay:r+l(s)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(i)}(e,t,a+s,i,o,r)}:()=>Promise.resolve(),{when:o}=n;if(o){const[e,t]="beforeChildren"===o?[a,i]:[i,a];return e().then(()=>t())}return Promise.all([a(),i(r.delay)])}function on(e,t){return e.sortNodePosition(t)}const ln=[...re].reverse(),cn=re.length;function dn(e){return t=>Promise.all(t.map(t=>{let{animation:r,options:s}=t;return function(e,t){let r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const n=t.map(t=>an(e,t,s));r=Promise.all(n)}else if("string"===typeof t)r=an(e,t,s);else{const n="function"===typeof t?er(e,t,s.custom):t;r=Promise.all(nn(e,n,s))}return r.then(()=>e.notify("AnimationComplete",t))}(e,r,s)}))}function un(e){let t=dn(e);const r={animate:pn(!0),whileInView:pn(),whileHover:pn(),whileTap:pn(),whileDrag:pn(),whileFocus:pn(),exit:pn()};let s=!0;const n=(t,r)=>{const s=er(e,r);if(s){const{transition:e,transitionEnd:r,...n}=s;t={...t,...n,...r}}return t};function a(a,i){const o=e.getProps(),l=e.getVariantContext(!0)||{},c=[],d=new Set;let u={},h=1/0;for(let t=0;t<cn;t++){const p=ln[t],m=r[p],f=void 0!==o[p]?o[p]:l[p],x=ee(f),g=p===i?m.isActive:null;!1===g&&(h=t);let y=f===l[p]&&f!==o[p]&&x;if(y&&s&&e.manuallyAnimateOnMount&&(y=!1),m.protectedKeys={...u},!m.isActive&&null===g||!f&&!m.prevProp||te(f)||"boolean"===typeof f)continue;let v=hn(m.prevProp,f)||p===i&&m.isActive&&!y&&x||t>h&&x,b=!1;const w=Array.isArray(f)?f:[f];let j=w.reduce(n,{});!1===g&&(j={});const{prevResolvedValues:N={}}=m,k={...N,...j},S=e=>{v=!0,d.has(e)&&(b=!0,d.delete(e)),m.needsAnimating[e]=!0};for(const e in k){const t=j[e],r=N[e];if(u.hasOwnProperty(e))continue;let s=!1;s=gt(t)&&gt(r)?!Zt(t,r):t!==r,s?void 0!==t?S(e):d.add(e):void 0!==t&&d.has(e)?S(e):m.protectedKeys[e]=!0}m.prevProp=f,m.prevResolvedValues=j,m.isActive&&(u={...u,...j}),s&&e.blockInitialAnimation&&(v=!1),!v||y&&!b||c.push(...w.map(e=>({animation:e,options:{type:p,...a}})))}if(d.size){const t={};d.forEach(r=>{const s=e.getBaseTarget(r);void 0!==s&&(t[r]=s)}),c.push({animation:t})}let p=Boolean(c.length);return!s||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(p=!1),s=!1,p?t(c):Promise.resolve()}return{animateChanges:a,setActive:function(t,s,n){var i;if(r[t].isActive===s)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach(e=>{var r;return null===(r=e.animationState)||void 0===r?void 0:r.setActive(t,s)}),r[t].isActive=s;const o=a(n,t);for(const e in r)r[e].protectedKeys={};return o},setAnimateFunction:function(r){t=r(e)},getState:()=>r}}function hn(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Zt(t,e)}function pn(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let mn=0;const fn={animation:{Feature:class extends zt{constructor(e){super(e),e.animationState||(e.animationState=un(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),te(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends zt{constructor(){super(...arguments),this.id=mn++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const n=this.node.animationState.setActive("exit",!e,{custom:null!==r&&void 0!==r?r:this.node.getProps().custom});t&&!e&&n.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},xn=(e,t)=>Math.abs(e-t);class gn{constructor(e,t){let{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=bn(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=function(e,t){const r=xn(e.x,t.x),s=xn(e.y,t.y);return Math.sqrt(r**2+s**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!r)return;const{point:s}=e,{timestamp:n}=Et;this.history.push({...s,timestamp:n});const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=yn(t,this.transformPagePoint),St.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:r,onSessionEnd:s,resumeAnimation:n}=this.handlers;if(this.dragSnapToOrigin&&n&&n(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=bn("pointercancel"===e.type?this.lastMoveEventInfo:yn(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,a),s&&s(e,a)},!Ot(e))return;this.dragSnapToOrigin=n,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const a=yn(Rt(e),this.transformPagePoint),{point:i}=a,{timestamp:o}=Et;this.history=[{...i,timestamp:o}];const{onSessionStart:l}=t;l&&l(e,bn(a,this.history)),this.removeListeners=Dt(Mt(this.contextWindow,"pointermove",this.handlePointerMove),Mt(this.contextWindow,"pointerup",this.handlePointerUp),Mt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ct(this.updatePoint)}}function yn(e,t){return t?{point:t(e.point)}:e}function vn(e,t){return{x:e.x-t.x,y:e.y-t.y}}function bn(e,t){let{point:r}=e;return{point:r,delta:vn(r,jn(t)),offset:vn(r,wn(t)),velocity:Nn(t,.1)}}function wn(e){return e[0]}function jn(e){return e[e.length-1]}function Nn(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,s=null;const n=jn(e);for(;r>=0&&(s=e[r],!(n.timestamp-s.timestamp>sr(t)));)r--;if(!s)return{x:0,y:0};const a=nr(n.timestamp-s.timestamp);if(0===a)return{x:0,y:0};const i={x:(n.x-s.x)/a,y:(n.y-s.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function kn(e){return e.max-e.min}function Sn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=r}function Cn(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=s,e.originPoint=Rr(t.min,t.max,e.origin),e.scale=kn(r)/kn(t),(Sn(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Rr(r.min,r.max,e.origin)-e.originPoint,(Sn(e.translate)||isNaN(e.translate))&&(e.translate=0)}function En(e,t,r,s){Cn(e.x,t.x,r.x,s?s.originX:void 0),Cn(e.y,t.y,r.y,s?s.originY:void 0)}function _n(e,t,r){e.min=r.min+t.min,e.max=e.min+kn(t)}function Pn(e,t,r){e.min=t.min-r.min,e.max=e.min+kn(t)}function Tn(e,t,r){Pn(e.x,t.x,r.x),Pn(e.y,t.y,r.y)}function An(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function On(e,t){let r=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,s]=[s,r]),{min:r,max:s}}const Rn=.35;function Mn(e,t,r){return{min:Ln(e,t),max:Ln(e,r)}}function Ln(e,t){return"number"===typeof e?e:e[t]||0}const Dn=()=>({x:{min:0,max:0},y:{min:0,max:0}});function In(e){return[e("x"),e("y")]}function Fn(e){let{top:t,left:r,right:s,bottom:n}=e;return{x:{min:r,max:s},y:{min:t,max:n}}}function Un(e){return void 0===e||1===e}function $n(e){let{scale:t,scaleX:r,scaleY:s}=e;return!Un(t)||!Un(r)||!Un(s)}function Bn(e){return $n(e)||zn(e)||e.z||e.rotate||e.rotateX||e.rotateY}function zn(e){return qn(e.x)||qn(e.y)}function qn(e){return e&&"0%"!==e}function Vn(e,t,r){return r+t*(e-r)}function Hn(e,t,r,s,n){return void 0!==n&&(e=Vn(e,n,s)),Vn(e,r,s)+t}function Wn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;e.min=Hn(e.min,t,r,s,n),e.max=Hn(e.max,t,r,s,n)}function Kn(e,t){let{x:r,y:s}=t;Wn(e.x,r.translate,r.scale,r.originPoint),Wn(e.y,s.translate,s.scale,s.originPoint)}function Jn(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Gn(e,t){e.min=e.min+t,e.max=e.max+t}function Qn(e,t,r){let[s,n,a]=r;const i=void 0!==t[a]?t[a]:.5,o=Rr(e.min,e.max,i);Wn(e,t[s],t[n],o,t.scale)}const Yn=["x","scaleX","originX"],Xn=["y","scaleY","originY"];function Zn(e,t){Qn(e.x,t,Yn),Qn(e.y,t,Xn)}function ea(e,t){return Fn(function(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}(e.getBoundingClientRect(),t))}const ta=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},ra=new WeakMap;class sa{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new gn(e,{onSessionStart:e=>{const{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Rt(e,"page").point)},onStart:(e,t)=>{const{drag:r,dragPropagation:s,onDragStart:n}=this.getProps();if(r&&!s&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=$t(r),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),In(e=>{let t=this.getAxisMotionValue(e).get()||0;if($e.test(t)){const{projection:r}=this.visualElement;if(r&&r.layout){const s=r.layout.layoutBox[e];if(s){t=kn(s)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),n&&St.update(()=>n(e,t),!1,!0);const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:r,dragDirectionLock:s,onDirectionLock:n,onDrag:a}=this.getProps();if(!r&&!this.openGlobalLock)return;const{offset:i}=t;if(s&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=null;Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x");return r}(i),void(null!==this.currentDirection&&n&&n(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>In(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,contextWindow:ta(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:n}=this.getProps();n&&St.update(()=>n(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!na(e,s,this.currentDirection))return;const n=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=function(e,t,r){let{min:s,max:n}=t;return void 0!==s&&e<s?e=r?Rr(s,e,r.min):Math.max(e,s):void 0!==n&&e>n&&(e=r?Rr(n,e,r.max):Math.min(e,n)),e}(a,this.constraints[e],this.elastic[e])),n.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,n=this.constraints;t&&Z(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!s)&&function(e,t){let{top:r,left:s,bottom:n,right:a}=t;return{x:An(e.x,s,a),y:An(e.y,r,n)}}(s.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn;return!1===e?e=0:!0===e&&(e=Rn),{x:Mn(e,"left","right"),y:Mn(e,"top","bottom")}}(r),n!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&In(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(s.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Z(e))return!1;const r=e.current;rr(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const n=function(e,t,r){const s=ea(e,r),{scroll:n}=t;return n&&(Gn(s.x,n.offset.x),Gn(s.y,n.offset.y)),s}(r,s.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:On(e.x,t.x),y:On(e.y,t.y)}}(s.layout.layoutBox,n);if(t){const e=t(function(e){let{x:t,y:r}=e;return{top:r.min,right:t.max,bottom:r.max,left:t.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=Fn(e))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:n,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=In(i=>{if(!na(i,t,this.currentDirection))return;let l=o&&o[i]||{};a&&(l={min:0,max:0});const c=s?200:1e6,d=s?40:1e7,u={type:"inertia",velocity:r?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...n,...l};return this.startAxisValueAnimation(i,u)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Us(e,r,0,t))}stopAnimation(){In(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){In(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){In(t=>{const{drag:r}=this.getProps();if(!na(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,n=this.getAxisMotionValue(t);if(s&&s.layout){const{min:r,max:a}=s.layout.layoutBox[t];n.set(e[t]-Rr(r,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Z(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};In(e=>{const t=this.getAxisMotionValue(e);if(t){const r=t.get();s[e]=function(e,t){let r=.5;const s=kn(e),n=kn(t);return n>s?r=Zr(t.min,t.max-s,e.min):s>n&&(r=Zr(e.min,e.max-n,t.min)),Pe(0,1,r)}({min:r,max:r},this.constraints[e])}});const{transformTemplate:n}=this.visualElement.getProps();this.visualElement.current.style.transform=n?n({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),In(t=>{if(!na(t,e,null))return;const r=this.getAxisMotionValue(t),{min:n,max:a}=this.constraints[t];r.set(Rr(n,a,s[t]))})}addListeners(){if(!this.visualElement.current)return;ra.set(this.visualElement,this);const e=Mt(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Z(e)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),t();const n=At(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:r}=e;this.isDragging&&r&&(In(e=>{const r=this.getAxisMotionValue(e);r&&(this.originPoint[e]+=t[e].translate,r.set(r.get()+t[e].translate))}),this.visualElement.render())});return()=>{n(),e(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:n=!1,dragElastic:a=Rn,dragMomentum:i=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:n,dragElastic:a,dragMomentum:i}}}function na(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}const aa=e=>(t,r)=>{e&&St.update(()=>e(t,r))};const ia={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function oa(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const la={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Be.test(e))return e;e=parseFloat(e)}return`${oa(e,t.target.x)}% ${oa(e,t.target.y)}%`}},ca={correct:(e,t)=>{let{treeScale:r,projectionDelta:s}=t;const n=e,a=Kr.parse(e);if(a.length>5)return n;const i=Kr.createTransformer(e),o="number"!==typeof a[0]?1:0,l=s.x.scale*r.x,c=s.y.scale*r.y;a[0+o]/=l,a[1+o]/=c;const d=Rr(l,c,.5);return"number"===typeof a[2+o]&&(a[2+o]/=d),"number"===typeof a[3+o]&&(a[3+o]/=d),i(a)}};class da extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:n}=e;var a;a=ha,Object.assign(ye,a),n&&(t.group&&t.group.add(n),r&&r.register&&s&&r.register(n),n.root.didUpdate(),n.addEventListener("animationComplete",()=>{this.safeToRemove()}),n.setOptions({...n.options,onExitComplete:()=>this.safeToRemove()})),ia.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:n}=this.props,a=r.projection;return a?(a.isPresent=n,s||e.layoutDependency!==t||void 0===t?a.willUpdate():this.safeToRemove(),e.isPresent!==n&&(n?a.promote():a.relegate()||St.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ua(e){const[r,s]=function(){const e=(0,t.useContext)(K);if(null===e)return[!0,null];const{isPresent:r,onExitComplete:s,register:n}=e,a=(0,t.useId)();return(0,t.useEffect)(()=>n(a),[]),!r&&s?[!1,()=>s&&s(a)]:[!0]}(),n=(0,t.useContext)(de);return t.createElement(da,{...e,layoutGroup:n,switchLayoutGroup:(0,t.useContext)(ue),isPresent:r,safeToRemove:s})}const ha={borderRadius:{...la,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:la,borderTopRightRadius:la,borderBottomLeftRadius:la,borderBottomRightRadius:la,boxShadow:ca},pa=["TopLeft","TopRight","BottomLeft","BottomRight"],ma=pa.length,fa=e=>"string"===typeof e?parseFloat(e):e,xa=e=>"number"===typeof e||Be.test(e);function ga(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const ya=ba(0,.5,vr),va=ba(.5,.95,jt);function ba(e,t,r){return s=>s<e?0:s>t?1:r(Zr(e,t,s))}function wa(e,t){e.min=t.min,e.max=t.max}function ja(e,t){wa(e.x,t.x),wa(e.y,t.y)}function Na(e,t,r,s,n){return e=Vn(e-=t,1/r,s),void 0!==n&&(e=Vn(e,1/n,s)),e}function ka(e,t,r,s,n){let[a,i,o]=r;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,n=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;$e.test(t)&&(t=parseFloat(t),t=Rr(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let o=Rr(a.min,a.max,s);e===a&&(o-=t),e.min=Na(e.min,t,r,o,n),e.max=Na(e.max,t,r,o,n)}(e,t[a],t[i],t[o],t.scale,s,n)}const Sa=["x","scaleX","originX"],Ca=["y","scaleY","originY"];function Ea(e,t,r,s){ka(e.x,t,Sa,r?r.x:void 0,s?s.x:void 0),ka(e.y,t,Ca,r?r.y:void 0,s?s.y:void 0)}function _a(e){return 0===e.translate&&1===e.scale}function Pa(e){return _a(e.x)&&_a(e.y)}function Ta(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Aa(e){return kn(e.x)/kn(e.y)}class Oa{constructor(){this.members=[]}add(e){zs(this.members,e),e.scheduleRender()}remove(e){if(qs(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let r;for(let s=t;s>=0;s--){const e=this.members[s];if(!1!==e.isPresent){r=e;break}}return!!r&&(this.promote(r),!0)}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;!1===s&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ra(e,t,r){let s="";const n=e.x.translate/t.x,a=e.y.translate/t.y;if((n||a)&&(s=`translate3d(${n}px, ${a}px, 0) `),1===t.x&&1===t.y||(s+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:e,rotateX:t,rotateY:n}=r;e&&(s+=`rotate(${e}deg) `),t&&(s+=`rotateX(${t}deg) `),n&&(s+=`rotateY(${n}deg) `)}const i=e.x.scale*t.x,o=e.y.scale*t.y;return 1===i&&1===o||(s+=`scale(${i}, ${o})`),s||"none"}const Ma=(e,t)=>e.depth-t.depth;class La{constructor(){this.children=[],this.isDirty=!1}add(e){zs(this.children,e),this.isDirty=!0}remove(e){qs(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Ma),this.isDirty=!1,this.children.forEach(e)}}const Da=["","X","Y","Z"],Ia={visibility:"hidden"};let Fa=0;const Ua={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function $a(e){let{attachResizeListener:t,defaultParent:r,measureScroll:s,checkIsScrollRoot:n,resetTransform:a}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===r||void 0===r?void 0:r();this.id=Fa++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var e;this.projectionUpdateScheduled=!1,Ua.totalNodes=Ua.resolvedTargetDeltas=Ua.recalculatedProjection=0,this.nodes.forEach(qa),this.nodes.forEach(Qa),this.nodes.forEach(Ya),this.nodes.forEach(Va),e=Ua,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let r=0;r<this.path.length;r++)this.path[r].shouldResetTransform=!0;this.root===this&&(this.nodes=new La)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Vs),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var r=arguments.length,s=new Array(r>1?r-1:0),n=1;n<r;n++)s[n-1]=arguments[n];t&&t.notify(...s)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var s;this.isSVG=(s=e)instanceof SVGElement&&"svg"!==s.tagName,this.instance=e;const{layoutId:n,layout:a,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(a||n)&&(this.isLayoutDirty=!0),t){let r;const s=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,r&&r(),r=function(e,t){const r=performance.now(),s=n=>{let{timestamp:a}=n;const i=a-r;i>=t&&(Ct(s),e(i-t))};return St.read(s,!0),()=>Ct(s)}(s,250),ia.hasAnimatedSinceResize&&(ia.hasAnimatedSinceResize=!1,this.nodes.forEach(Ga))})}n&&this.root.registerSharedNode(n,this),!1!==this.options.animate&&i&&(n||a)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:r,hasRelativeTargetChanged:s,layout:n}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const a=this.options.transition||i.getDefaultTransition()||si,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=i.getProps(),c=!this.targetLayout||!Ta(this.targetLayout,n)||s,d=!r&&s;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||d||r&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,d);const e={...Is(a,"layout"),onPlay:o,onComplete:l};(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else r||Ga(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ct(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Xa),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let n=0;n<this.path.length;n++){const e=this.path[n];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;const s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Wa);this.isUpdating||this.nodes.forEach(Ka),this.isUpdating=!1,this.nodes.forEach(Ja),this.nodes.forEach(Ba),this.nodes.forEach(za),this.clearAllSnapshots();const e=performance.now();Et.delta=Pe(0,1e3/60,e-Et.timestamp),Et.timestamp=e,Et.isProcessing=!0,_t.update.process(Et),_t.preRender.process(Et),_t.render.process(Et),Et.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Ha),this.sharedNodes.forEach(Za)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,St.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){St.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++){this.path[r].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:n(this.instance),offset:s(this.instance)})}resetTransform(){if(!a)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!Pa(this.projectionDelta),r=this.getTransformTemplate(),s=r?r(this.latestValues,""):void 0,n=s!==this.prevTransformTemplateValue;e&&(t||Bn(this.latestValues)||n)&&(a(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let r=this.removeElementScroll(t);var s;return e&&(r=this.removeTransform(r)),ii((s=r).x),ii(s.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:r}=this.root;return r&&(Gn(t.x,r.offset.x),Gn(t.y,r.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};ja(t,e);for(let r=0;r<this.path.length;r++){const s=this.path[r],{scroll:n,options:a}=s;if(s!==this.root&&n&&a.layoutScroll){if(n.isRoot){ja(t,e);const{scroll:r}=this.root;r&&(Gn(t.x,-r.offset.x),Gn(t.y,-r.offset.y))}Gn(t.x,n.offset.x),Gn(t.y,n.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r={x:{min:0,max:0},y:{min:0,max:0}};ja(r,e);for(let s=0;s<this.path.length;s++){const e=this.path[s];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Zn(r,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Bn(e.latestValues)&&Zn(r,e.latestValues)}return Bn(this.latestValues)&&Zn(r,this.latestValues),r}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};ja(t,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];if(!e.instance)continue;if(!Bn(e.latestValues))continue;$n(e.latestValues)&&e.updateSnapshot();const s=Dn();ja(s,e.measurePageBox()),Ea(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,s)}return Bn(this.latestValues)&&Ea(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Et.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);const s=Boolean(this.resumingFrom)||this!==r;if(!(e||s&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:n,layoutId:a}=this.options;if(this.layout&&(n||a)){if(this.resolvedRelativeTargetAt=Et.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Tn(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),ja(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,l=this.relativeParent.target,_n(i.x,o.x,l.x),_n(i.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):ja(this.target,this.layout.layoutBox),Kn(this.target,this.targetDelta)):ja(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Tn(this.relativeTargetOrigin,this.target,e.target),ja(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ua.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!$n(this.parent.latestValues)&&!zn(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),r=Boolean(this.resumingFrom)||this!==t;let s=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(s=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(s=!1),this.resolvedRelativeTargetAt===Et.timestamp&&(s=!1),s)return;const{layout:n,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!n&&!a)return;ja(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=r.length;if(!n)return;let a,i;t.x=t.y=1;for(let o=0;o<n;o++){a=r[o],i=a.projectionDelta;const n=a.instance;n&&n.style&&"contents"===n.style.display||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Zn(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Kn(e,i)),s&&Bn(a.latestValues)&&Zn(e,a.latestValues))}t.x=Jn(t.x),t.y=Jn(t.y)}(this.layoutCorrected,this.treeScale,this.path,r),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.projectionTransform;En(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=Ra(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===i&&this.treeScale.y===o||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Ua.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.snapshot,s=r?r.latestValues:{},n={...this.latestValues},a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(ri));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const r=t/1e3;var l,h,p,m,f,x;ei(a.x,e.x,r),ei(a.y,e.y,r),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Tn(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,m=this.relativeTargetOrigin,f=i,x=r,ti(p.x,m.x,f.x,x),ti(p.y,m.y,f.y,x),u&&(l=this.relativeTarget,h=u,l.x.min===h.x.min&&l.x.max===h.x.max&&l.y.min===h.y.min&&l.y.max===h.y.max)&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),ja(u,this.relativeTarget)),o&&(this.animationValues=n,function(e,t,r,s,n,a){n?(e.opacity=Rr(0,void 0!==r.opacity?r.opacity:1,ya(s)),e.opacityExit=Rr(void 0!==t.opacity?t.opacity:1,0,va(s))):a&&(e.opacity=Rr(void 0!==t.opacity?t.opacity:1,void 0!==r.opacity?r.opacity:1,s));for(let i=0;i<ma;i++){const n=`border${pa[i]}Radius`;let a=ga(t,n),o=ga(r,n);void 0===a&&void 0===o||(a||(a=0),o||(o=0),0===a||0===o||xa(a)===xa(o)?(e[n]=Math.max(Rr(fa(a),fa(o),s),0),($e.test(o)||$e.test(a))&&(e[n]+="%")):e[n]=o)}(t.rotate||r.rotate)&&(e.rotate=Rr(t.rotate||0,r.rotate||0,s))}(n,s,this.latestValues,r,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ct(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=St.update(()=>{ia.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,r){const s=je(e)?e:Ks(e);return s.start(Us("",s,t,r)),s.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:r,layout:s,latestValues:n}=e;if(t&&r&&s){if(this!==e&&this.layout&&s&&oi(this.options.animationType,this.layout.layoutBox,s.layoutBox)){r=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=kn(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;const s=kn(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+s}ja(t,r),Zn(t,n),En(this.projectionDeltaWithTransform,this.layoutCorrected,t,n)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Oa);this.sharedNodes.get(e).add(t);const r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this.getStack();s&&s.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:r}=e;if((r.rotate||r.rotateX||r.rotateY||r.rotateZ)&&(t=!0),!t)return;const s={};for(let n=0;n<Da.length;n++){const t="rotate"+Da[n];r[t]&&(s[t]=r[t],e.setStaticValue(t,0))}e.render();for(const n in s)e.setStaticValue(n,s[n]);e.scheduleRender()}getProjectionStyles(e){var t,r;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ia;const s={visibility:""},n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=vt(null===e||void 0===e?void 0:e.pointerEvents)||"",s.transform=n?n(this.latestValues,""):"none",s;const a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=vt(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Bn(this.latestValues)&&(t.transform=n?n({},""):"none",this.hasProjected=!1),t}const i=a.animationValues||a.latestValues;this.applyTransformsToTarget(),s.transform=Ra(this.projectionDeltaWithTransform,this.treeScale,i),n&&(s.transform=n(i,s.transform));const{x:o,y:l}=this.projectionDelta;s.transformOrigin=`${100*o.origin}% ${100*l.origin}% 0`,a.animationValues?s.opacity=a===this?null!==(r=null!==(t=i.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:s.opacity=a===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const c in ye){if(void 0===i[c])continue;const{correct:e,applyTo:t}=ye[c],r="none"===s.transform?i[c]:e(i[c],a);if(t){const e=t.length;for(let n=0;n<e;n++)s[t[n]]=r}else s[c]=r}return this.options.layoutId&&(s.pointerEvents=a===this?vt(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),s}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(Wa),this.root.sharedNodes.clear()}}}function Ba(e){e.updateLayout()}function za(e){var t;const r=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=e.layout,{animationType:n}=e.options,a=r.source!==e.layout.source;"size"===n?In(e=>{const s=a?r.measuredBox[e]:r.layoutBox[e],n=kn(s);s.min=t[e].min,s.max=s.min+n}):oi(n,r.layoutBox,t)&&In(s=>{const n=a?r.measuredBox[s]:r.layoutBox[s],i=kn(t[s]);n.max=n.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[s].max=e.relativeTarget[s].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};En(i,t,r.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?En(o,e.applyTransform(s,!0),r.measuredBox):En(o,t,r.layoutBox);const l=!Pa(i);let c=!1;if(!e.resumeFrom){const s=e.getClosestProjectingParent();if(s&&!s.resumeFrom){const{snapshot:n,layout:a}=s;if(n&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};Tn(i,r.layoutBox,n.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};Tn(o,t,a.layoutBox),Ta(i,o)||(c=!0),s.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=s)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function qa(e){Ua.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Va(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Ha(e){e.clearSnapshot()}function Wa(e){e.clearMeasurements()}function Ka(e){e.isLayoutDirty=!1}function Ja(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ga(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Qa(e){e.resolveTargetDelta()}function Ya(e){e.calcProjection()}function Xa(e){e.resetRotation()}function Za(e){e.removeLeadSnapshot()}function ei(e,t,r){e.translate=Rr(t.translate,0,r),e.scale=Rr(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function ti(e,t,r,s){e.min=Rr(t.min,r.min,s),e.max=Rr(t.max,r.max,s)}function ri(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const si={duration:.45,ease:[.4,0,.1,1]},ni=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),ai=ni("applewebkit/")&&!ni("chrome/")?Math.round:jt;function ii(e){e.min=ai(e.min),e.max=ai(e.max)}function oi(e,t,r){return"position"===e||"preserve-aspect"===e&&!Sn(Aa(t),Aa(r),.2)}const li=$a({attachResizeListener:(e,t)=>At(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ci={current:void 0},di=$a({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ci.current){const e=new li({});e.mount(window),e.setOptions({layoutScroll:!0}),ci.current=e}return ci.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),ui={pan:{Feature:class extends zt{constructor(){super(...arguments),this.removePointerDownListener=jt}onPointerDown(e){this.session=new gn(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ta(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:aa(e),onStart:aa(t),onMove:r,onEnd:(e,t)=>{delete this.session,s&&St.update(()=>s(e,t))}}}mount(){this.removePointerDownListener=Mt(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends zt{constructor(e){super(e),this.removeGroupControls=jt,this.removeListeners=jt,this.controls=new sa(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||jt}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:di,MeasureLayout:ua}},hi=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function pi(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;rr(r<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);const[s,n]=function(e){const t=hi.exec(e);if(!t)return[,];const[,r,s]=t;return[r,s]}(e);if(!s)return;const a=window.getComputedStyle(t).getPropertyValue(s);if(a){const e=a.trim();return Bs(e)?parseFloat(e):e}return Ee(n)?pi(n,t,r+1):n}const mi=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),fi=e=>mi.has(e),xi=e=>e===Te||e===Be,gi=(e,t)=>parseFloat(e.split(", ")[t]),yi=(e,t)=>(r,s)=>{let{transform:n}=s;if("none"===n||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/);if(a)return gi(a[1],t);{const t=n.match(/^matrix\((.+)\)$/);return t?gi(t[1],e):0}},vi=new Set(["x","y","z"]),bi=ve.filter(e=>!vi.has(e));const wi={width:(e,t)=>{let{x:r}=e,{paddingLeft:s="0",paddingRight:n="0"}=t;return r.max-r.min-parseFloat(s)-parseFloat(n)},height:(e,t)=>{let{y:r}=e,{paddingTop:s="0",paddingBottom:n="0"}=t;return r.max-r.min-parseFloat(s)-parseFloat(n)},top:(e,t)=>{let{top:r}=t;return parseFloat(r)},left:(e,t)=>{let{left:r}=t;return parseFloat(r)},bottom:(e,t)=>{let{y:r}=e,{top:s}=t;return parseFloat(s)+(r.max-r.min)},right:(e,t)=>{let{x:r}=e,{left:s}=t;return parseFloat(s)+(r.max-r.min)},x:yi(4,13),y:yi(5,14)};wi.translateX=wi.x,wi.translateY=wi.y;const ji=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t={...t},s={...s};const n=Object.keys(t).filter(fi);let a=[],i=!1;const o=[];if(n.forEach(n=>{const l=e.getValue(n);if(!e.hasValue(n))return;let c=r[n],d=Qs(c);const u=t[n];let h;if(gt(u)){const e=u.length,t=null===u[0]?1:0;c=u[t],d=Qs(c);for(let r=t;r<e&&null!==u[r];r++)h?rr(Qs(u[r])===h,"All keyframes must be of the same type"):(h=Qs(u[r]),rr(h===d||xi(d)&&xi(h),"Keyframes must be of the same dimension as the current value"))}else h=Qs(u);if(d!==h)if(xi(d)&&xi(h)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof u?t[n]=parseFloat(u):Array.isArray(u)&&h===Be&&(t[n]=u.map(parseFloat))}else(null===d||void 0===d?void 0:d.transform)&&(null===h||void 0===h?void 0:h.transform)&&(0===c||0===u)?0===c?l.set(h.transform(c)):t[n]=d.transform(u):(i||(a=function(e){const t=[];return bi.forEach(r=>{const s=e.getValue(r);void 0!==s&&(t.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}(e),i=!0),o.push(n),s[n]=void 0!==s[n]?s[n]:t[n],l.jump(u))}),o.length){const r=o.indexOf("height")>=0?window.pageYOffset:null,n=((e,t,r)=>{const s=t.measureViewportBox(),n=t.current,a=getComputedStyle(n),{display:i}=a,o={};"none"===i&&t.setStaticValue("display",e.display||"block"),r.forEach(e=>{o[e]=wi[e](s,a)}),t.render();const l=t.measureViewportBox();return r.forEach(r=>{const s=t.getValue(r);s&&s.jump(o[r]),e[r]=wi[r](l,a)}),e})(t,e,o);return a.length&&a.forEach(t=>{let[r,s]=t;e.getValue(r).set(s)}),e.render(),J&&null!==r&&window.scrollTo({top:r}),{target:n,transitionEnd:s}}return{target:t,transitionEnd:s}};function Ni(e,t,r,s){return(e=>Object.keys(e).some(fi))(t)?ji(e,t,r,s):{target:t,transitionEnd:s}}const ki=(e,t,r,s)=>{const n=function(e,t,r){let{...s}=t;const n=e.current;if(!(n instanceof Element))return{target:s,transitionEnd:r};r&&(r={...r}),e.values.forEach(e=>{const t=e.get();if(!Ee(t))return;const r=pi(t,n);r&&e.set(r)});for(const a in s){const e=s[a];if(!Ee(e))continue;const t=pi(e,n);t&&(s[a]=t,r||(r={}),void 0===r[a]&&(r[a]=e))}return{target:s,transitionEnd:r}}(e,t,s);return Ni(e,t=n.target,r,s=n.transitionEnd)},Si={current:null},Ci={current:!1};const Ei=new WeakMap,_i=Object.keys(ce),Pi=_i.length,Ti=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Ai=se.length;class Oi{constructor(e){let{parent:t,props:r,presenceContext:s,reducedMotionConfig:n,visualState:a}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>St.render(this.render,!1,!0);const{latestValues:o,renderState:l}=a;this.latestValues=o,this.baseTarget={...o},this.initialValues=r.initial?{...o}:{},this.renderState=l,this.parent=t,this.props=r,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=i,this.isControllingVariants=ne(r),this.isVariantNode=ae(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(r,{});for(const u in d){const e=d[u];void 0!==o[u]&&je(e)&&(e.set(o[u],!1),$s(c)&&c.add(u))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,Ei.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Ci.current||function(){if(Ci.current=!0,J)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Si.current=e.matches;e.addListener(t),t()}else Si.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Si.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ei.delete(this.current),this.projection&&this.projection.unmount(),Ct(this.notifyUpdate),Ct(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=be.has(e),s=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&St.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),n=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),n()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,r,s){let n,a,{children:i,...o}=e;for(let l=0;l<Pi;l++){const e=_i[l],{isEnabled:t,Feature:r,ProjectionNode:s,MeasureLayout:i}=ce[e];s&&(n=s),t(o)&&(!this.features[e]&&r&&(this.features[e]=new r(this)),i&&(a=i))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&n){this.projection=new n(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:r,dragConstraints:a,layoutScroll:i,layoutRoot:l}=o;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(r)||a&&Z(a),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:s,layoutScroll:i,layoutRoot:l})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Ti.length;r++){const t=Ti[r];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const s=e["on"+t];s&&(this.propEventSubscriptions[t]=this.on(t,s))}this.prevMotionValues=function(e,t,r){const{willChange:s}=t;for(const n in t){const a=t[n],i=r[n];if(je(a))e.addValue(n,a),$s(s)&&s.add(n);else if(je(i))e.addValue(n,Ks(a,{owner:e})),$s(s)&&s.remove(n);else if(i!==a)if(e.hasValue(n)){const t=e.getValue(n);!t.hasAnimated&&t.set(a)}else{const t=e.getStaticValue(n);e.addValue(n,Ks(void 0!==t?t:a,{owner:e}))}}for(const n in r)void 0===t[n]&&e.removeValue(n);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<Ai;t++){const r=se[t],s=this.props[r];(ee(s)||!1===s)&&(e[r]=s)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=Ks(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,s="string"===typeof r||"object"===typeof r?null===(t=ft(this.props,r))||void 0===t?void 0:t[e]:void 0;if(r&&void 0!==s)return s;const n=this.getBaseTargetFromProps(this.props,e);return void 0===n||je(n)?void 0!==this.initialValues[e]&&void 0===s?void 0:this.baseTarget[e]:n}on(e,t){return this.events[e]||(this.events[e]=new Vs),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];this.events[e].notify(...r)}}}class Ri extends Oi{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:r,style:s}=t;delete r[e],delete s[e]}makeTargetAnimatableFromInstance(e,t,r){let{transition:s,transitionEnd:n,...a}=e,{transformValues:i}=t,o=function(e,t,r){const s={};for(const n in e){const e=tn(n,t);if(void 0!==e)s[n]=e;else{const e=r.getValue(n);e&&(s[n]=e.get())}}return s}(a,s||{},this);if(i&&(n&&(n=i(n)),a&&(a=i(a)),o&&(o=i(o))),r){!function(e,t,r){var s,n;const a=Object.keys(t).filter(t=>!e.hasValue(t)),i=a.length;if(i)for(let o=0;o<i;o++){const i=a[o],l=t[i];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(n=null!==(s=r[i])&&void 0!==s?s:e.readValue(i))&&void 0!==n?n:t[i]),void 0!==c&&null!==c&&("string"===typeof c&&(Bs(c)||Ls(c))?c=parseFloat(c):!Xs(c)&&Kr.test(l)&&(c=Ms(i,l)),e.addValue(i,Ks(c,{owner:e})),void 0===r[i]&&(r[i]=c),null!==c&&e.setBaseTarget(i,c))}}(this,a,o);const e=ki(this,a,o,n);n=e.transitionEnd,a=e.target}return{transition:s,transitionEnd:n,...a}}}class Mi extends Ri{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(be.has(t)){const e=Rs(t);return e&&e.default||0}{const s=(r=e,window.getComputedStyle(r)),n=(Ce(t)?s.getPropertyValue(t):s[t])||0;return"string"===typeof n?n.trim():n}var r}measureInstanceViewportBox(e,t){let{transformPagePoint:r}=t;return ea(e,r)}build(e,t,r,s){Ke(e,t,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,t){return pt(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;je(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}renderInstance(e,t,r,s){dt(e,t,r,s)}}class Li extends Ri{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(be.has(t)){const e=Rs(t);return e&&e.default||0}return t=ut.has(t)?t:Y(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t){return mt(e,t)}build(e,t,r,s){at(e,t,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,r,s){ht(e,t,0,s)}mount(e){this.isSVGTag=ot(e.tagName),super.mount(e)}}const Di=(e,t)=>ge(e)?new Li(t,{enableHardwareAcceleration:!1}):new Mi(t,{enableHardwareAcceleration:!0}),Ii={...fn,...Xt,...ui,...{layout:{ProjectionNode:di,MeasureLayout:ua}}},Fi=fe((e,t)=>function(e,t,r,s){let{forwardMotionProps:n=!1}=t;return{...ge(e)?Pt:Tt,preloadedFeatures:r,useRender:ct(n),createVisualElement:s,Component:e}}(e,t,Ii,Di));const Ui=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},$i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},Bi=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var zi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qi=(0,t.forwardRef)((e,r)=>{let{color:s="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:c,...d}=e;return(0,t.createElement)("svg",{ref:r,...zi,width:n,height:n,stroke:s,strokeWidth:i?24*Number(a)/Number(n):a,className:$i("lucide",o),...!l&&!Bi(d)&&{"aria-hidden":"true"},...d},[...c.map(e=>{let[r,s]=e;return(0,t.createElement)(r,s)}),...Array.isArray(l)?l:[l]])}),Vi=(e,r)=>{const s=(0,t.forwardRef)((s,n)=>{let{className:a,...i}=s;return(0,t.createElement)(qi,{ref:n,iconNode:r,className:$i(`lucide-${o=Ui(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...i});var o});return s.displayName=Ui(e),s},Hi=Vi("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Wi=Vi("compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ki=Vi("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ji=Vi("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Gi=Vi("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]),Qi=Vi("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var Yi=r(240),Xi=r(579);const Zi=(0,t.createContext)(void 0),eo=()=>{const e=(0,t.useContext)(Zi);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},to=e=>{let{children:r}=e;const[s,n]=(0,t.useState)(null),[a,i]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{try{const e=await Yi.auth.getCurrentUser();n(e)}catch(e){console.error("Error initializing auth:",e)}finally{i(!1)}})();const{data:{subscription:e}}=Yi.auth.onAuthStateChange(e=>{var t,r,s;(n(e),i(!1),localStorage.setItem("isAuthenticated",e?"true":"false"),e)?localStorage.setItem("user",JSON.stringify({id:e.id,email:e.email,username:(null===(t=e.user_metadata)||void 0===t?void 0:t.username)||(null===(r=e.email)||void 0===r?void 0:r.split("@")[0]),full_name:(null===(s=e.user_metadata)||void 0===s?void 0:s.full_name)||""})):localStorage.removeItem("user")});return()=>{null===e||void 0===e||e.unsubscribe()}},[]);const o={user:s,loading:a,signIn:async(e,t)=>{i(!0);try{const r=await Yi.auth.signIn(e,t);return r.success?{success:!0}:{success:!1,error:r.error||"Sign in failed"}}catch(r){return{success:!1,error:r.message}}finally{i(!1)}},signUp:async(e,t,r)=>{i(!0);try{const s=await Yi.auth.signUp(e,t,r);return s.success?{success:!0}:{success:!1,error:s.error||"Sign up failed"}}catch(s){return{success:!1,error:s.message}}finally{i(!1)}},signOut:async()=>{i(!0);try{await Yi.auth.signOut()}catch(e){console.error("Error signing out:",e)}finally{i(!1)}},isAuthenticated:!!s};return(0,Xi.jsx)(Zi.Provider,{value:o,children:r})},ro=(0,t.createContext)(void 0),so=()=>{const e=(0,t.useContext)(ro);if(!e)throw new Error("usePosts must be used within a PostProvider");return e},no=e=>{let{children:r}=e;const[s,n]=(0,t.useState)([]),a=(0,t.useMemo)(()=>{const e=Date.now();return s.filter(t=>!(t.isWiym&&t.expiresAt&&t.expiresAt<e))},[s]),i=()=>{const e=Date.now();n(t=>t.filter(t=>!(t.isWiym&&t.expiresAt&&t.expiresAt<e)))};return(0,t.useEffect)(()=>{const e=setInterval(i,3e5);return()=>clearInterval(e)},[]),(0,Xi.jsx)(ro.Provider,{value:{posts:a,addPost:e=>{n(t=>[e,...t])},setPosts:e=>{n("function"===typeof e?t=>e(t):e)},cleanupExpiredPosts:i,toggleBookmark:e=>{n(t=>t.map(t=>{if(t.id!==e)return t;const r={...t,bookmarked:!t.bookmarked};try{window.dispatchEvent(new CustomEvent("realtime:bookmark",{detail:{postId:e,bookmarked:r.bookmarked,ts:Date.now()}}))}catch{}return r}))}},children:r})},ao=(0,t.createContext)(void 0),io=e=>{let{children:r}=e;const[s,n]=(0,t.useState)([]),[a,i]=(0,t.useState)(!1),{user:o}=eo(),l=async()=>{if(o){i(!0);try{const e=await Yi.notifications.getNotifications();e.success&&e.data&&n(e.data)}catch(e){console.error("Error fetching notifications:",e)}finally{i(!1)}}};(0,t.useEffect)(()=>{o?l():n([])},[o]);const c=s.filter(e=>!e.read).length,d={notifications:s,unreadCount:c,loading:a,markAsRead:async e=>{try{(await Yi.notifications.markAsRead(e)).success&&n(t=>t.map(t=>t.id===e?{...t,read:!0}:t))}catch(t){console.error("Error marking notification as read:",t)}},refreshNotifications:l};return(0,Xi.jsx)(ao.Provider,{value:d,children:r})},oo=(0,t.createContext)(void 0),lo=e=>{let{children:r}=e;const[s,n]=(0,t.useState)([]),[a,i]=(0,t.useState)(null),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),{user:u}=eo(),h=async()=>{if(u&&a){d(!0);try{const e=await Yi.messages.getMessages(a);e.success&&e.data&&l(e.data)}catch(e){console.error("Error fetching messages:",e)}finally{d(!1)}}};(0,t.useEffect)(()=>{if(u&&a){h();const e=Yi.messages.subscribeToMessages(a,e=>{l(t=>[...t,e])});return()=>{e.unsubscribe()}}},[u,a]);const p={conversations:s,activeConversation:a,messages:o,loading:c,sendMessage:async(e,t,r)=>{if(u)try{const s=r||t||"default-conversation",n=await Yi.messages.sendMessage(s,e);n.success&&n.data&&l(e=>[...e,n.data])}catch(s){console.error("Error sending message:",s)}},setActiveConversation:i,refreshMessages:h};return(0,Xi.jsx)(oo.Provider,{value:p,children:r})},co=(0,t.createContext)(void 0),uo=e=>{let{children:r}=e;const[s,n]=(0,t.useState)(null),[a,i]=(0,t.useState)(!0);(0,t.useEffect)(()=>{const e=localStorage.getItem("user");if(e)try{const t=JSON.parse(e);n(t)}catch(t){console.error("Error parsing saved user data:",t),localStorage.removeItem("user")}i(!1)},[]);const o={user:s,isAuthenticated:!!s,login:e=>{n(e),localStorage.setItem("user",JSON.stringify(e))},logout:()=>{n(null),localStorage.removeItem("user"),localStorage.removeItem("authToken")},updateUser:e=>{if(s){const t={...s,...e};n(t),localStorage.setItem("user",JSON.stringify(t))}},isLoading:a};return(0,Xi.jsx)(co.Provider,{value:o,children:r})},ho=()=>{const e=(0,t.useContext)(co);if(void 0===e)throw new Error("useUser must be used within a UserProvider");return e},po=(0,t.createContext)(void 0),mo=e=>{let{children:r}=e;const[s,n]=(0,t.useState)(!1),[a,i]=(0,t.useState)("#ff6b35");(0,t.useEffect)(()=>{const e=localStorage.getItem("theme"),t=localStorage.getItem("primaryColor");"dark"===e&&(n(!0),document.documentElement.classList.add("dark")),t&&i(t)},[]);const o={isDarkMode:s,toggleTheme:()=>{const e=!s;n(e),e?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},primaryColor:a,setPrimaryColor:e=>{i(e),localStorage.setItem("primaryColor",e),document.documentElement.style.setProperty("--primary-orange",e)}};return(0,Xi.jsx)(po.Provider,{value:o,children:r})},fo=()=>{const e=(0,t.useContext)(po);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e},xo=Vi("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),go=Vi("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),yo=Vi("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),vo=Vi("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),bo=Vi("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),wo=Vi("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),jo=Vi("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),No=Vi("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ko=Vi("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),So=Vi("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Co=Vi("flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Eo=Vi("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),_o=Vi("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Po=Vi("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const To=new class{constructor(){this.facts=[{id:"auto_1",text:"From 2024, all new EU cars must have autonomous emergency braking and driver monitoring systems - expected to save 25,000+ lives by 2038.",category:"automotive",source:"EU General Safety Regulation 2024"},{id:"auto_2",text:"Modern Formula 1 cars can generate up to 1000 HP and accelerate 0-60 mph in 2.6 seconds.",category:"automotive"},{id:"auto_3",text:"The first car was invented in 1885 by Karl Benz, reaching a top speed of 10 mph.",category:"automotive"},{id:"auto_4",text:"Cars now communicate with each other using V2X (Vehicle-to-Everything) technology powered by 5G networks.",category:"automotive",source:"Automotive World 2024"},{id:"auto_5",text:"Amazon started selling cars directly on their US platform in 2024, beginning with Hyundai vehicles.",category:"automotive",source:"Automotive Industry 2024"},{id:"ev_1",text:"The global EV market hit $500+ billion in 2024, doubling from $250 billion in 2020.",category:"electric",source:"Fortune Business Insights 2024"},{id:"ev_2",text:"There are now over 40 million electric vehicles on roads worldwide, up from just 200,000 in 2012.",category:"electric"},{id:"ev_3",text:"Norway leads the world with 82.7% of all new vehicle registrations being electric (57.3% battery + 25.4% plug-in hybrid).",category:"electric",source:"PwC Electric Vehicle Report 2024"},{id:"ev_4",text:"New hydrogen fuel cell cars have 5x the range of traditional EVs and can recharge in minutes instead of hours.",category:"electric"},{id:"ev_5",text:"China produces almost all global EV batteries and has 8x more public charging stations than any other country.",category:"electric"},{id:"moto_1",text:"Adventure motorcycling has more than doubled in the last 10 years and is now the fastest-growing motorcycle segment.",category:"motorcycle",source:"BMW North America 2024"},{id:"moto_2",text:"Modern adventure bikes can replace off-road, touring, commuting, and sport bikes in a single package.",category:"motorcycle"},{id:"moto_3",text:"MotoGP bikes can lean at angles up to 64 degrees while cornering at speeds over 200 mph.",category:"motorcycle"},{id:"moto_4",text:"The fastest production motorcycle is the Kawasaki Ninja H2R at 249 mph.",category:"motorcycle"},{id:"moto_5",text:"Motorcyclists can now reach Mount Everest Base Camp, crossing the highest Himalayan peaks on specialized adventure bikes.",category:"adventure",source:"Adventure Travel 2024"},{id:"cycle_1",text:"Professional cyclists can sustain 400+ watts of power for hours during races like the Tour de France.",category:"cycling"},{id:"cycle_2",text:"The Tour de France covers approximately 2,200 miles over 21 stages through diverse terrains.",category:"cycling"},{id:"cycle_3",text:"Cycling at 12-14 mph burns about 480 calories per hour, making it an excellent fitness activity.",category:"cycling"},{id:"cycle_4",text:"The fastest recorded bicycle speed is 183.9 mph, achieved with motor-pacing assistance.",category:"cycling"},{id:"travel_1",text:"The longest road in the world is the Pan-American Highway at 19,000 miles, connecting Alaska to Argentina.",category:"travel"},{id:"travel_2",text:"Colombia is ranked as the world's #1 motorcycle touring destination, followed by Peru and Tibet.",category:"adventure",source:"MotoDreamer 2024"},{id:"travel_3",text:"The Dakar Rally covers 5,000+ miles through deserts using modified trucks, motorcycles, and ATVs.",category:"adventure"},{id:"travel_4",text:"Alaska's Dalton Highway (414 miles) is one of the most dangerous roads, used by ice road truckers.",category:"travel"},{id:"travel_5",text:"The highest drivable road is in Ladakh, India at 18,380 feet elevation.",category:"travel"},{id:"travel_6",text:"Michigan's Upper Peninsula offers some of the world's best motorcycle \"color rides\" from spring through fall.",category:"adventure",source:"Global Adventure Travel 2024"},{id:"extreme_1",text:"Land Rover Defenders can wade through 35.4 inches of water and climb 45-degree slopes.",category:"automotive"},{id:"extreme_2",text:'The N\xfcrburgring Nordschleife in Germany has 154 turns over 12.9 miles - called "The Green Hell".',category:"automotive"},{id:"extreme_3",text:"Rally cars can jump 130+ feet and land safely due to specialized suspension systems.",category:"automotive"},{id:"extreme_4",text:"The longest motorcycle journey was 457,000 miles by Emilio Scotto across 214 countries.",category:"adventure"},{id:"extreme_5",text:"Isle of Man TT motorcycle racers average 135+ mph on public roads with 200+ corners.",category:"motorcycle"}]}getRandomFact(){const e=Math.floor(Math.random()*this.facts.length);return this.facts[e]}getRandomFactByCategory(e){const t=this.facts.filter(t=>t.category===e);if(0===t.length)return this.getRandomFact();return t[Math.floor(Math.random()*t.length)]}getRandomFacts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return[...this.facts].sort(()=>.5-Math.random()).slice(0,e)}getFactsByCategories(e){return this.facts.filter(t=>e.includes(t.category))}getAllFacts(){return this.facts}addFact(e){const t={...e,id:`custom_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};this.facts.push(t)}async fetchLatestFacts(){return await new Promise(e=>setTimeout(e,500)),this.getRandomFacts(10)}};function Ao(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{immediate:s=!0,cache:n=!1,cacheKey:a}=r,[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),h=(0,t.useCallback)(async()=>{c(!0),u(null);try{const t=await e();if(t.success)o(t.data),n&&a&&t.data&&localStorage.setItem(`api_cache_${a}`,JSON.stringify({data:t.data,timestamp:Date.now()}));else if(u(t.error||"An error occurred"),n&&a){const e=localStorage.getItem(`api_cache_${a}`);if(e){const{data:t}=JSON.parse(e);o(t),u("Using cached data (offline)")}}}catch(t){if(u(t.message||"Network error"),n&&a){const e=localStorage.getItem(`api_cache_${a}`);if(e){const{data:t}=JSON.parse(e);o(t),u("Using cached data (offline)")}}}finally{c(!1)}},[e,n,a]);return(0,t.useEffect)(()=>{s&&h()},[h,s]),{data:i,loading:l,error:d,execute:h,refetch:h}}function Oo(e){const[r,s]=(0,t.useState)(!1),[n,a]=(0,t.useState)(null);return{mutate:(0,t.useCallback)(async t=>{s(!0),a(null);try{const r=await e(t);return r.success?{success:!0,data:r.data||void 0}:(a(r.error||"An error occurred"),{success:!1,error:r.error||"An error occurred"})}catch(r){const e=r.message||"Network error";return a(e),{success:!1,error:e}}finally{s(!1)}},[e]),loading:r,error:n}}const Ro=Vi("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Mo=Vi("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Lo=Vi("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Do=Vi("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Io=Vi("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Fo=e=>{var r,s;let{onBack:n}=e;const{user:a}=eo(),{addPost:i}=so(),{data:o,loading:l,error:c,refetch:d}=Ao(()=>Yi.events.getEvents(),{immediate:!0,cache:!0,cacheKey:"events_list"}),{mutate:u,loading:h}=Oo(Yi.events.createEvent),{mutate:p,loading:m}=Oo(e=>{let{eventId:t,verificationAnswers:r}=e;return Yi.events.joinEvent(t,r)}),[f,x]=(0,t.useState)([]),[g,y]=(0,t.useState)([]),[v,b]=(0,t.useState)(""),[w,j]=(0,t.useState)("all"),[N,k]=(0,t.useState)(!0),S=f,C=x,[E,_]=(0,t.useState)(!1),[P,T]=(0,t.useState)(""),[A,O]=(0,t.useState)(""),[R,M]=(0,t.useState)(""),[L,D]=(0,t.useState)(""),[I,F]=(0,t.useState)(""),[U,$]=(0,t.useState)(""),[B,z]=(0,t.useState)(""),[q,V]=(0,t.useState)(null),[H,W]=(0,t.useState)(null),[K,J]=(0,t.useState)(!1),[G,Q]=(0,t.useState)(["Are you an active rider?","Do you have proper safety gear?"]),[Y,X]=(0,t.useState)(!1),[Z,ee]=(0,t.useState)(!1),[te,re]=(0,t.useState)(null),[se,ne]=(0,t.useState)([]),[ae,ie]=(0,t.useState)(!1),[oe,le]=(0,t.useState)(!1),[ce,de]=(0,t.useState)(null);(0,t.useEffect)(()=>{k(!1)},[]),(0,t.useEffect)(()=>{let e=S;if(v&&(e=e.filter(e=>e.title.toLowerCase().includes(v.toLowerCase())||e.description.toLowerCase().includes(v.toLowerCase())||e.location.toLowerCase().includes(v.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(v.toLowerCase())))),"all"!==w)switch(w){case"attending":e=e.filter(e=>e.isAttending);break;case"nearby":e=e.filter(e=>(e.distance||0)<25);break;case"today":const t=(new Date).toISOString().split("T")[0];e=e.filter(e=>e.startDate===t)}y(e)},[S,v,w]);const ue=(e,t,r)=>{var s;const n=S.find(t=>t.id===e),a=null===n||void 0===n||null===(s=n.verificationAnswers)||void 0===s?void 0:s.find(e=>e.userId===t);if(!n||!a)return;C(s=>s.map(s=>{var n;return s.id===e?{...s,verificationAnswers:null===(n=s.verificationAnswers)||void 0===n?void 0:n.map(e=>e.userId===t?{...e,status:r}:e),attendees:"approved"===r?s.attendees+1:s.attendees}:s}));const i={id:Date.now(),type:"event",title:"approved"===r?"Event Application Approved!":"Event Application Rejected",message:"approved"===r?`You've been approved to join "${n.title}". See you there!`:`Your application for "${n.title}" was not approved this time.`,time:"Just now",read:!1,eventId:e,eventTitle:n.title,organizerName:n.organizer.name,organizerAvatar:n.organizer.avatar},o=JSON.parse(localStorage.getItem("eventNotifications")||"[]");o.unshift(i),localStorage.setItem("eventNotifications",JSON.stringify(o)),console.log("Created notification:",i),console.log("Updated notifications in localStorage:",o),alert(`User ${"approved"===r?"approved":"rejected"} successfully! They will be notified.`),window.dispatchEvent(new CustomEvent("notificationUpdate"))},he=e=>{const[t,r]=e.split(":"),s=new Date;return s.setHours(parseInt(t),parseInt(r)),s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})};return N?(0,Xi.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Xi.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-app-primary-accent"})}):(0,Xi.jsx)("div",{className:"min-h-screen bg-app-background",children:(0,Xi.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("button",{onClick:n,className:"p-2 hover:bg-app-card-surface rounded-full transition-colors",children:(0,Xi.jsx)(Ro,{className:"w-5 h-5 text-app-text-muted"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h1",{className:"text-2xl font-bold text-app-text-primary",children:"Events"}),(0,Xi.jsxs)("p",{className:"text-sm text-app-text-muted",children:[g.length," events nearby"]})]})]}),(0,Xi.jsxs)("button",{onClick:()=>{const e=S.filter(e=>{var t;return e.organizer.name===((null===a||void 0===a||null===(t=a.user_metadata)||void 0===t?void 0:t.full_name)||(null===a||void 0===a?void 0:a.email)||"Your Name")&&e.requireVerification&&e.verificationAnswers&&e.verificationAnswers.length>0});e.length>0?(de(e[0]),le(!0)):alert("No verification requests found for your events.")},className:"bg-app-primary-accent text-white px-4 py-2 rounded-xl font-medium hover:bg-app-primary-accent/90 transition-colors flex items-center gap-2",children:[(0,Xi.jsx)(Mo,{className:"w-4 h-4"}),"Verify Q/A"]})]}),(0,Xi.jsxs)("div",{className:"relative mb-6",children:[(0,Xi.jsx)(Lo,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 text-app-text-muted"}),(0,Xi.jsx)("input",{type:"text",placeholder:"Search events...",value:v,onChange:e=>b(e.target.value),className:"w-full bg-app-card-surface border-0 rounded-xl pl-12 pr-4 py-3 text-app-text-primary placeholder-app-text-muted focus:outline-none focus:ring-2 focus:ring-app-primary-accent/20"})]}),(0,Xi.jsx)("div",{className:"flex gap-2 mb-6 overflow-x-auto",children:["All","Attending","Nearby","Today"].map(e=>(0,Xi.jsx)("button",{onClick:()=>j(e.toLowerCase()),className:"px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all "+(w===e.toLowerCase()?"bg-app-primary-accent text-white shadow-lg":"bg-app-card-surface text-app-text-muted hover:bg-app-primary-accent/10 hover:text-app-text-primary"),children:e},e))}),(0,Xi.jsx)("div",{className:"space-y-4",children:0===g.length?(0,Xi.jsxs)("div",{className:"text-center py-16",children:[(0,Xi.jsx)(wo,{className:"w-16 h-16 text-app-text-muted mx-auto mb-4 opacity-50"}),(0,Xi.jsx)("h3",{className:"text-lg font-medium text-app-text-primary mb-2",children:"No Events Found"}),(0,Xi.jsx)("p",{className:"text-app-text-muted text-sm",children:v||"all"!==w?"Try adjusting your search or filters":"No events nearby at the moment"})]}):g.map(e=>{return(0,Xi.jsxs)("div",{className:"bg-app-card-surface rounded-2xl p-6 hover:shadow-lg transition-all duration-200 border border-app-borders/50 hover:border-app-primary-accent/30",children:[(0,Xi.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-app-primary-accent to-orange-600 rounded-xl flex items-center justify-center text-white font-bold text-lg",children:e.organizer.name.split(" ").map(e=>e[0]).join("").substring(0,2)}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h3",{className:"font-bold text-app-text-primary text-lg leading-tight",children:e.title}),(0,Xi.jsxs)("p",{className:"text-sm text-app-text-muted flex items-center gap-1",children:["by ",e.organizer.name,e.organizer.verified&&(0,Xi.jsx)("span",{className:"text-app-primary-accent text-xs",children:"\u2713"})]})]})]}),(0,Xi.jsxs)("div",{className:"text-right bg-app-primary-accent/10 rounded-lg px-3 py-2",children:[(0,Xi.jsx)("div",{className:"text-sm font-bold text-app-primary-accent",children:(t=e.startDate,r=e.startTime,new Date(`${t}T${r}`).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}))}),(0,Xi.jsx)("div",{className:"text-xs text-app-primary-accent/70",children:he(e.startTime)})]})]}),(0,Xi.jsx)("p",{className:"text-app-text-muted mb-4 text-sm leading-relaxed",children:e.description}),(0,Xi.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,Xi.jsx)("div",{className:"w-8 h-8 bg-app-background rounded-lg flex items-center justify-center",children:(0,Xi.jsx)(Ji,{className:"w-4 h-4 text-app-primary-accent"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("div",{className:"text-app-text-primary font-medium",children:e.location}),e.distance&&(0,Xi.jsxs)("div",{className:"text-xs text-app-primary-accent",children:[e.distance,"km away"]})]})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,Xi.jsx)("div",{className:"w-8 h-8 bg-app-background rounded-lg flex items-center justify-center",children:(0,Xi.jsx)(yo,{className:"w-4 h-4 text-app-primary-accent"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsxs)("div",{className:"text-app-text-primary font-medium",children:[e.attendees,e.maxAttendees&&`/${e.maxAttendees}`]}),(0,Xi.jsx)("div",{className:"text-xs text-app-text-muted",children:"attending"})]})]}),e.endTime&&(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,Xi.jsx)("div",{className:"w-8 h-8 bg-app-background rounded-lg flex items-center justify-center",children:(0,Xi.jsx)(Do,{className:"w-4 h-4 text-app-primary-accent"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsxs)("div",{className:"text-app-text-primary font-medium",children:[he(e.startTime)," - ",he(e.endTime)]}),(0,Xi.jsx)("div",{className:"text-xs text-app-text-muted",children:"duration"})]})]})]}),(0,Xi.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:e.tags.map(e=>(0,Xi.jsxs)("span",{className:"px-3 py-1 bg-app-primary-accent/10 text-app-primary-accent text-xs font-medium rounded-full border border-app-primary-accent/20",children:["#",e]},e))}),e.requireVerification&&(0,Xi.jsxs)("div",{className:"flex items-center gap-2 mb-4 p-3 bg-orange-500/10 rounded-xl border border-orange-500/20",children:[(0,Xi.jsx)(Io,{className:"w-4 h-4 text-orange-500"}),(0,Xi.jsx)("span",{className:"text-sm text-orange-500 font-medium",children:"Verification Required"})]}),(0,Xi.jsx)("button",{onClick:()=>(e=>{const t=S.find(t=>t.id===e);var r;null!==t&&void 0!==t&&t.requireVerification&&!t.isAttending?(re(t),ne(new Array((null===(r=t.verificationQuestions)||void 0===r?void 0:r.length)||0).fill("")),ee(!0)):C(t=>t.map(t=>t.id===e?{...t,isAttending:!t.isAttending,attendees:t.isAttending?t.attendees-1:t.attendees+1}:t))})(e.id),className:"w-full py-3 rounded-xl font-semibold transition-all "+(e.isAttending?"bg-app-background text-app-text-primary hover:bg-app-primary-accent/10 border border-app-borders hover:border-app-primary-accent/30":"bg-app-primary-accent text-white shadow-lg hover:shadow-xl hover:bg-app-primary-accent/90"),children:e.isAttending?"\u2713 Attending":e.requireVerification?"Apply to Join":"Join Event"})]},e.id);var t,r})}),(0,Xi.jsx)("button",{onClick:()=>_(!0),className:"fixed bottom-24 right-6 w-14 h-14 bg-app-primary-accent text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center z-50",children:(0,Xi.jsx)(Ki,{className:"w-6 h-6"})}),Z&&te&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Xi.jsx)("div",{className:"bg-app-background rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:(0,Xi.jsxs)("div",{className:"p-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsx)("h2",{className:"text-xl font-bold text-app-text-primary",children:"Verification Required"}),(0,Xi.jsx)("button",{onClick:()=>{ee(!1),re(null),ne([])},className:"p-2 hover:bg-app-card-surface rounded-full transition-colors",children:(0,Xi.jsx)(bo,{className:"w-5 h-5 text-app-text-muted"})})]}),(0,Xi.jsxs)("div",{className:"mb-6",children:[(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary mb-2",children:te.title}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted mb-4",children:"The event organizer requires verification before you can join. Please answer the following questions:"})]}),(0,Xi.jsx)("div",{className:"space-y-4",children:null===(r=te.verificationQuestions)||void 0===r?void 0:r.map((e,t)=>(0,Xi.jsxs)("div",{children:[(0,Xi.jsxs)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:[t+1,". ",e]}),(0,Xi.jsx)("textarea",{value:se[t]||"",onChange:e=>{const r=[...se];r[t]=e.target.value,ne(r)},placeholder:"Your answer...",rows:3,className:"w-full px-4 py-3 bg-app-card-surface border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none resize-none"})]},t))}),(0,Xi.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,Xi.jsx)("button",{onClick:()=>{ee(!1),re(null),ne([])},className:"flex-1 px-4 py-3 bg-app-card-surface text-app-text-primary rounded-xl hover:bg-app-background transition-colors",children:"Cancel"}),(0,Xi.jsx)("button",{onClick:()=>{var e,t;if(!te||!a)return;if(se.some(e=>!e.trim()))return void alert("Please answer all verification questions");ie(!0);const r={userId:a.id||"user-1",userName:(null===(e=a.user_metadata)||void 0===e?void 0:e.full_name)||a.email||"User",userAvatar:(null===(t=a.user_metadata)||void 0===t?void 0:t.avatar_url)||"https://ui-avatars.com/api/?name=User&background=FF6B00&color=fff",answers:se,submittedAt:(new Date).toISOString(),status:"pending"};C(e=>e.map(e=>e.id===te.id?{...e,verificationAnswers:[...e.verificationAnswers||[],r]}:e)),setTimeout(()=>{ie(!1),ee(!1),re(null),ne([]),alert("Verification submitted! The event organizer will review your answers.")},1e3)},disabled:ae||se.some(e=>!e.trim()),className:"flex-1 px-4 py-3 bg-app-primary-accent text-white rounded-xl hover:bg-app-primary-accent/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ae?"Submitting...":"Submit Application"})]})]})})}),oe&&ce&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Xi.jsx)("div",{className:"bg-app-background rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,Xi.jsxs)("div",{className:"p-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsx)("h2",{className:"text-xl font-bold text-app-text-primary",children:"Verification Requests"}),(0,Xi.jsx)("button",{onClick:()=>{le(!1),de(null)},className:"p-2 hover:bg-app-card-surface rounded-full transition-colors",children:(0,Xi.jsx)(bo,{className:"w-5 h-5 text-app-text-muted"})})]}),(0,Xi.jsxs)("div",{className:"mb-6",children:[(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary mb-2",children:ce.title}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:"Review and approve/reject user applications for your event."})]}),(0,Xi.jsxs)("div",{className:"space-y-4",children:[null===(s=ce.verificationAnswers)||void 0===s?void 0:s.map((e,t)=>{var r;return(0,Xi.jsxs)("div",{className:"bg-app-card-surface rounded-xl p-4 border border-app-borders",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("img",{src:e.userAvatar,alt:e.userName,className:"w-10 h-10 rounded-full"}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-app-text-primary",children:e.userName}),(0,Xi.jsxs)("p",{className:"text-xs text-app-text-muted",children:["Applied ",new Date(e.submittedAt).toLocaleDateString()]})]})]}),(0,Xi.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("approved"===e.status?"bg-green-500/20 text-green-400":"rejected"===e.status?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,Xi.jsx)("div",{className:"space-y-3",children:null===(r=ce.verificationQuestions)||void 0===r?void 0:r.map((t,r)=>(0,Xi.jsxs)("div",{children:[(0,Xi.jsxs)("p",{className:"text-sm font-medium text-app-text-primary mb-1",children:[r+1,". ",t]}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted bg-app-background rounded-lg p-3",children:e.answers[r]||"No answer provided"})]},r))}),"pending"===e.status&&(0,Xi.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,Xi.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),ue(ce.id,e.userId,"rejected")},className:"flex-1 px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors font-medium",children:"Reject"}),(0,Xi.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),ue(ce.id,e.userId,"approved")},className:"flex-1 px-4 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors font-medium",children:"Approve"})]})]},t)}),(!ce.verificationAnswers||0===ce.verificationAnswers.length)&&(0,Xi.jsxs)("div",{className:"text-center py-8",children:[(0,Xi.jsx)(Io,{className:"w-12 h-12 text-app-text-muted mx-auto mb-4 opacity-50"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"No verification requests yet."})]})]})]})})}),E&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Xi.jsx)("div",{className:"bg-app-background rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:(0,Xi.jsxs)("div",{className:"p-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsx)("h2",{className:"text-xl font-bold text-app-text-primary",children:"Create Event"}),(0,Xi.jsx)("button",{onClick:()=>_(!1),className:"p-2 hover:bg-app-card-surface rounded-full transition-colors",children:(0,Xi.jsx)(bo,{className:"w-5 h-5 text-app-text-muted"})})]}),(0,Xi.jsxs)("div",{className:"space-y-4",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Event Title *"}),(0,Xi.jsx)("input",{type:"text",value:P,onChange:e=>T(e.target.value),placeholder:"Enter event title",className:"w-full px-4 py-3 bg-app-card-surface border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Description *"}),(0,Xi.jsx)("textarea",{value:A,onChange:e=>O(e.target.value),placeholder:"Describe your event",rows:3,className:"w-full px-4 py-3 bg-app-card-surface border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none resize-none"})]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Start Date *"}),(0,Xi.jsx)("input",{type:"date",value:R,onChange:e=>M(e.target.value),className:"w-full px-4 py-3 bg-app-card-surface border border-app-borders rounded-xl text-app-text-primary focus:border-app-primary-accent focus:outline-none"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Start Time *"}),(0,Xi.jsx)("input",{type:"time",value:L,onChange:e=>D(e.target.value),className:"w-full px-4 py-3 bg-app-card-surface border border-app-borders rounded-xl text-app-text-primary focus:border-app-primary-accent focus:outline-none"})]})]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"End Date"}),(0,Xi.jsx)("input",{type:"date",value:I,onChange:e=>F(e.target.value),className:"w-full px-4 py-3 bg-app-card-surface border border-app-borders rounded-xl text-app-text-primary focus:border-app-primary-accent focus:outline-none"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"End Time"}),(0,Xi.jsx)("input",{type:"time",value:U,onChange:e=>$(e.target.value),className:"w-full px-4 py-3 bg-app-card-surface border border-app-borders rounded-xl text-app-text-primary focus:border-app-primary-accent focus:outline-none"})]})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Location"}),(0,Xi.jsxs)("div",{className:"flex gap-2",children:[(0,Xi.jsx)("input",{type:"text",value:B,onChange:e=>z(e.target.value),placeholder:"Event location",className:"flex-1 px-4 py-3 bg-app-card-surface border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none"}),(0,Xi.jsxs)("button",{type:"button",onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{V(e.coords.latitude),W(e.coords.longitude),z(`${e.coords.latitude.toFixed(5)}, ${e.coords.longitude.toFixed(5)}`)},e=>{console.error("Error getting location:",e),alert("Unable to get your location. Please enter manually.")}):alert("Geolocation is not supported by this browser.")},className:"px-4 py-3 bg-app-primary-accent text-white rounded-xl hover:bg-app-primary-accent/90 transition-colors flex items-center gap-2",children:[(0,Xi.jsx)(Ji,{className:"w-4 h-4"}),"GPS"]})]})]}),(0,Xi.jsxs)("div",{className:"flex items-center justify-between p-4 bg-app-card-surface rounded-xl",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("p",{className:"text-sm font-medium text-app-text-primary",children:"Verify Users"}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted",children:"Require interested users to verify their legitimacy"})]}),(0,Xi.jsx)("button",{onClick:()=>J(!K),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(K?"bg-app-primary-accent":"bg-app-text-muted/30"),children:(0,Xi.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(K?"translate-x-6":"translate-x-1")})})]}),K&&(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Verification Questions"}),(0,Xi.jsxs)("div",{className:"space-y-2",children:[G.map((e,t)=>(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)("input",{type:"text",value:e,onChange:e=>{const r=[...G];r[t]=e.target.value,Q(r)},placeholder:`Question ${t+1}`,className:"flex-1 px-4 py-3 bg-app-card-surface border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none"}),G.length>1&&(0,Xi.jsx)("button",{onClick:()=>{Q(e=>e.filter((e,r)=>r!==t))},className:"p-3 rounded-xl border border-app-borders hover:border-red-500 hover:text-red-400 text-app-text-muted transition-colors",children:(0,Xi.jsx)(bo,{className:"w-4 h-4"})})]},t)),G.length<5&&(0,Xi.jsx)("button",{onClick:()=>Q(e=>[...e,""]),className:"px-4 py-3 rounded-xl border border-app-borders text-app-text-muted hover:border-app-primary-accent hover:text-app-primary-accent transition-colors",children:"Add question"})]})]})]}),(0,Xi.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,Xi.jsx)("button",{onClick:()=>_(!1),className:"flex-1 px-4 py-3 bg-app-card-surface text-app-text-primary rounded-xl hover:bg-app-background transition-colors",children:"Cancel"}),(0,Xi.jsx)("button",{onClick:async()=>{if(P.trim()&&A.trim()&&R&&L){X(!0);try{var e,t,r,s,n,o;const l={id:Date.now(),title:P,description:A,startDate:R,startTime:L,endDate:I,endTime:U,location:B,latitude:q,longitude:H,organizer:{name:(null===a||void 0===a||null===(e=a.user_metadata)||void 0===e?void 0:e.full_name)||(null===a||void 0===a?void 0:a.email)||"Your Name",avatar:(null===a||void 0===a||null===(t=a.user_metadata)||void 0===t?void 0:t.avatar_url)||"https://ui-avatars.com/api/?name=User&background=FF6B00&color=fff",verified:!1},attendees:1,maxAttendees:void 0,tags:["event"],distance:0,isAttending:!0,requireVerification:K,verificationQuestions:K?G.filter(e=>e.trim()):[],verificationAnswers:[]};C(e=>[l,...e]);const c={id:Date.now()+1,author:{name:(null===a||void 0===a||null===(r=a.user_metadata)||void 0===r?void 0:r.full_name)||(null===a||void 0===a?void 0:a.email)||"Your Name",username:`@${(null===a||void 0===a||null===(s=a.user_metadata)||void 0===s?void 0:s.username)||(null===a||void 0===a||null===(n=a.email)||void 0===n?void 0:n.split("@")[0])||"username"}`,avatar:(null===a||void 0===a||null===(o=a.user_metadata)||void 0===o?void 0:o.avatar_url)||"https://ui-avatars.com/api/?name=User&background=FF6B00&color=fff",verified:!1,level:1},content:`\ud83c\udf89 New Event: ${P}\n\n${A}`,timestamp:"now",location:B,upvotes:1,downvotes:0,userVote:1,pedalPoints:15,comments:[],shares:0,views:0,bookmarked:!1,tags:["#Event","#Community"],event:{title:P,description:A,startDate:R,startTime:L,endDate:I,endTime:U,location:B,latitude:q,longitude:H,requireVerification:K,interestedUsers:[],notInterestedUsers:[],verificationQuestions:K?G.filter(e=>e.trim()):[],verificationAnswers:[]}};i(c),T(""),O(""),M(""),D(""),F(""),$(""),z(""),V(null),W(null),J(!1),Q(["Are you an active rider?","Do you have proper safety gear?"]),_(!1)}catch(l){console.error("Error creating event:",l),alert("Failed to create event. Please try again.")}finally{X(!1)}}else alert("Event title, description, start date and time are required")},disabled:Y||!P.trim()||!A.trim()||!R||!L,className:"flex-1 px-4 py-3 bg-app-primary-accent text-white rounded-xl hover:bg-app-primary-accent/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:Y?"Creating...":"Create Event"})]})]})})})]})})},Uo=e=>{let{post:r,user:s,onAddComment:n,onClose:a}=e;const[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)({}),h=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){const e=new FileReader;e.onload=e=>{var t;if(null!==(t=e.target)&&void 0!==t&&t.result){const t=e.target.result,a=n.type.startsWith("image/")?"image":"video";r&&s?u(e=>({...e,[s]:{type:a,url:t}})):c({type:a,url:t})}},e.readAsDataURL(n)}},p=function(){let e=arguments.length>1?arguments[1]:void 0;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&e?u(t=>({...t,[e]:null})):c(null)},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e.trim()||l||t&&d[t]){const s=t?d[t]:l;n(r.id,t,e.trim(),s||void 0),t?(u(e=>({...e,[t]:null})),o(null)):c(null)}},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=t>=6;return(0,Xi.jsx)("div",{className:""+(t>0?"ml-4 mt-3":""),children:(0,Xi.jsxs)("div",{className:"flex gap-3",children:[(0,Xi.jsx)("img",{src:e.author.avatar,alt:e.author.name,className:(0===t?"w-8 h-8":"w-6 h-6")+" rounded-full flex-shrink-0"}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsxs)("div",{className:"bg-app-card-surface rounded-lg px-3 py-2",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Xi.jsx)("span",{className:"font-medium text-app-text-primary "+(0===t?"text-sm":"text-xs"),children:e.author.name}),e.author.verified&&(0,Xi.jsx)("div",{className:(0===t?"w-3 h-3":"w-2.5 h-2.5")+" bg-app-primary-accent rounded-full flex items-center justify-center"}),(0,Xi.jsx)("span",{className:"text-xs text-app-text-muted",children:e.author.username}),(0,Xi.jsx)("span",{className:"text-xs text-app-text-muted",children:"\u2022"}),(0,Xi.jsx)("span",{className:"text-xs text-app-text-muted",children:e.timestamp})]}),(0,Xi.jsx)("p",{className:`text-app-text-primary ${0===t?"text-sm":"text-xs"} leading-relaxed`,children:e.content}),e.media&&(0,Xi.jsx)("div",{className:"mt-2",children:"image"===e.media.type?(0,Xi.jsx)("img",{src:e.media.url,alt:"Comment media",className:"max-w-xs rounded-lg"}):(0,Xi.jsx)("video",{src:e.media.url,controls:!0,className:"max-w-xs rounded-lg"})})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-4 mt-1 ml-3",children:[(0,Xi.jsx)("button",{className:"text-xs text-app-text-muted hover:text-app-primary-accent transition-colors",children:"Like"}),!r&&(0,Xi.jsx)("button",{className:"text-xs text-app-text-muted hover:text-app-primary-accent transition-colors",onClick:()=>o(i===e.id?null:e.id),children:"Reply"})]}),i===e.id&&(0,Xi.jsx)("div",{className:"mt-3 ml-3",children:(0,Xi.jsxs)("div",{className:"flex gap-2",children:[(0,Xi.jsx)("img",{src:(null===s||void 0===s?void 0:s.avatar)||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",alt:"Your avatar",className:"w-6 h-6 rounded-full flex-shrink-0"}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("textarea",{placeholder:`Reply to ${e.author.name}...`,className:"w-full bg-app-background text-app-text-primary placeholder-app-text-muted rounded-lg px-3 py-2 text-xs border border-app-borders focus:border-app-primary-accent focus:outline-none resize-none",rows:2,id:`reply-textarea-${e.id}`,onKeyPress:t=>{if("Enter"===t.key&&!t.shiftKey){t.preventDefault();const r=t.currentTarget.value.trim();(r||d[e.id])&&(m(r,e.id),t.currentTarget.value="")}}}),d[e.id]&&(0,Xi.jsx)("div",{className:"mt-2",children:(0,Xi.jsxs)("div",{className:"relative inline-block",children:["image"===d[e.id].type?(0,Xi.jsx)("img",{src:d[e.id].url,alt:"Reply media",className:"w-20 h-20 object-cover rounded-lg"}):(0,Xi.jsx)("video",{src:d[e.id].url,className:"w-20 h-20 object-cover rounded-lg",controls:!0}),(0,Xi.jsx)("button",{onClick:()=>p(!0,e.id),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs hover:bg-red-600",children:"\xd7"})]})}),(0,Xi.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,Xi.jsxs)("div",{className:"flex gap-2",children:[(0,Xi.jsx)("input",{type:"file",accept:"image/*,video/*",onChange:t=>h(t,!0,e.id),className:"hidden",id:`reply-media-${e.id}`}),(0,Xi.jsx)("button",{onClick:()=>{var t;return null===(t=document.getElementById(`reply-media-${e.id}`))||void 0===t?void 0:t.click()},className:"text-xs text-app-text-muted hover:text-app-primary-accent transition-colors flex items-center gap-1",children:(0,Xi.jsx)(xo,{className:"w-3 h-3"})})]}),(0,Xi.jsxs)("div",{className:"flex gap-2",children:[(0,Xi.jsx)("button",{onClick:()=>o(null),className:"text-xs text-app-text-muted hover:text-red-400 transition-colors",children:"Cancel"}),(0,Xi.jsx)("button",{onClick:()=>{const t=document.getElementById(`reply-textarea-${e.id}`),r=(null===t||void 0===t?void 0:t.value.trim())||"";(r||d[e.id])&&(m(r,e.id),t&&(t.value=""))},className:"bg-app-primary-accent hover:bg-orange-600 text-white px-2 py-1 rounded-full text-xs font-medium transition-colors",children:"Reply"})]})]})]})]})}),e.replies&&e.replies.length>0&&(0,Xi.jsx)("div",{className:"mt-2",children:e.replies.map(e=>f(e,t+1))})]})]})},e.id)};return(0,Xi.jsxs)("div",{className:"border-t border-app-borders bg-app-background/50",children:[(0,Xi.jsx)("div",{className:"p-4",children:(0,Xi.jsxs)("div",{className:"flex gap-3",children:[(0,Xi.jsx)("img",{src:(null===s||void 0===s?void 0:s.avatar)||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",alt:"Your avatar",className:"w-8 h-8 rounded-full flex-shrink-0"}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("textarea",{placeholder:"Write a comment...",className:"w-full bg-app-card-surface text-app-text-primary placeholder-app-text-muted rounded-lg px-3 py-2 text-sm border border-app-borders focus:border-app-primary-accent focus:outline-none resize-none",rows:2,onKeyPress:e=>{if("Enter"===e.key&&!e.shiftKey){e.preventDefault();const t=e.currentTarget.value.trim();(t||l)&&(m(t),e.currentTarget.value="")}}}),l&&(0,Xi.jsx)("div",{className:"mt-2",children:(0,Xi.jsxs)("div",{className:"relative inline-block",children:["image"===l.type?(0,Xi.jsx)("img",{src:l.url,alt:"Comment media",className:"w-24 h-24 object-cover rounded-lg"}):(0,Xi.jsx)("video",{src:l.url,className:"w-24 h-24 object-cover rounded-lg",controls:!0}),(0,Xi.jsx)("button",{onClick:()=>p(),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:"\xd7"})]})}),(0,Xi.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,Xi.jsxs)("div",{className:"flex gap-3",children:[(0,Xi.jsx)("input",{type:"file",accept:"image/*,video/*",onChange:e=>h(e),className:"hidden",id:"comment-media-upload"}),(0,Xi.jsx)("button",{onClick:()=>{var e;return null===(e=document.getElementById("comment-media-upload"))||void 0===e?void 0:e.click()},className:"text-xs text-app-text-muted hover:text-app-primary-accent transition-colors flex items-center gap-1",children:(0,Xi.jsx)(xo,{className:"w-3 h-3"})})]}),(0,Xi.jsx)("button",{onClick:e=>{var t,r;const s=null===(t=e.currentTarget.parentElement)||void 0===t||null===(r=t.parentElement)||void 0===r?void 0:r.querySelector("textarea"),n=(null===s||void 0===s?void 0:s.value.trim())||"";(n||l)&&(m(n),s.value="")},className:"bg-app-primary-accent hover:bg-orange-600 text-white px-3 py-1 rounded-full text-xs font-medium transition-colors",children:"Comment"})]})]})]})}),r.comments&&r.comments.length>0&&(0,Xi.jsx)("div",{className:"px-4 pb-4",children:(0,Xi.jsx)("div",{className:"space-y-3",children:r.comments.map(e=>f(e,0))})}),(0,Xi.jsx)("div",{className:"px-4 pb-3",children:(0,Xi.jsx)("button",{onClick:a,className:"text-xs text-app-text-muted hover:text-app-primary-accent transition-colors",children:"Hide comments"})})]})},$o=()=>{var e,s,n;const{user:a}=eo(),{posts:i,addPost:o,setPosts:l,toggleBookmark:c}=so(),{data:d,loading:u,error:h,refetch:p}=Ao(()=>Promise.resolve().then(r.bind(r,240)).then(e=>e.posts.getFeed(20,0)),{immediate:!0,cache:!0,cacheKey:"home_feed"}),[m,f]=(0,t.useState)(null),[x,g]=(0,t.useState)(null),[y,v]=(0,t.useState)(!1),[b,w]=(0,t.useState)(0),[j,N]=(0,t.useState)(!1),[k,S]=(0,t.useState)(!0),[C,E]=(0,t.useState)(1),[_,P]=(0,t.useState)(!1),[T,A]=(0,t.useState)([]),[O,R]=(0,t.useState)(0),[M,L]=(0,t.useState)([]),[D,I]=(0,t.useState)([]),[F,U]=(0,t.useState)(!1),[$,B]=(0,t.useState)(null),[z,q]=(0,t.useState)(new Set),[V,H]=(0,t.useState)(new Set),[W,K]=(0,t.useState)(""),[J,G]=(0,t.useState)([]),[Q,Y]=(0,t.useState)(null),[X,Z]=(0,t.useState)([]),[ee,te]=(0,t.useState)(!1),[re,se]=(0,t.useState)(null),[ne,ae]=(0,t.useState)(new Set),[ie,oe]=(0,t.useState)(0),le=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e&&0!==e.length&&(A(e),R(Math.max(0,Math.min(t,e.length-1))),P(!0))},[]),ce=(0,t.useCallback)(()=>P(!1),[]),de=(0,t.useCallback)(()=>{R(e=>(e+1)%(T.length||1))},[T.length]),ue=(0,t.useCallback)(()=>{R(e=>(e-1+(T.length||1))%(T.length||1))},[T.length]);(0,t.useEffect)(()=>{if(!_)return;const e=e=>{"Escape"===e.key&&ce(),"ArrowRight"===e.key&&de(),"ArrowLeft"===e.key&&ue()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[_,ce,de,ue]),(0,t.useEffect)(()=>{(async()=>{U(!0);try{const e=To.getRandomFacts(15);I(e)}catch(e){console.error("Error loading facts:",e),I([To.getRandomFact()])}finally{U(!1)}})()},[]),(0,t.useEffect)(()=>{if(0===D.length)return;const e=setInterval(()=>{w(e=>{const t=(e+1)%D.length;if(0===t&&D.length>0){const e=To.getRandomFacts(15);I(e)}return t})},1e4);return()=>clearInterval(e)},[D.length]);const[he,pe]=(0,t.useState)(!1),[me,fe]=(0,t.useState)(!1),[xe,ge]=(0,t.useState)(""),[ye,ve]=(0,t.useState)(""),[be,we]=(0,t.useState)([]),[je,Ne]=(0,t.useState)(-1),[ke,Se]=(0,t.useState)(!1),Ce=(0,t.useRef)(null),Ee=(0,t.useRef)(0),[_e,Pe]=(0,t.useState)(!1),[Te,Ae]=(0,t.useState)(null),Oe=(0,t.useRef)(null),Re=(0,t.useRef)(null);(0,t.useEffect)(()=>{const e=setTimeout(()=>ve(xe),200);return()=>clearTimeout(e)},[xe]),(0,t.useEffect)(()=>{const e=(ye||"").trim(),t=e.match(/^@?(\w{1,20})$/);if(!e||!t)return we([]),Se(!1),void Ne(-1);if(Date.now()<Ee.current)return;const s=t[1].toLowerCase();let n=!0;return(async()=>{try{const{default:e}=await Promise.resolve().then(r.bind(r,161)),t=await e.searchUsers(s,10);if(!n)return;const a=(t||[]).map(e=>e.username);we(a),Se(a.length>0),Ne(a.length>0?0:-1)}catch(e){if(console.warn("User search failed:",e),!n)return;we([]),Se(!1),Ne(-1)}})(),()=>{n=!1}},[ye]);const Me=e=>{e.trim()&&!X.includes(e.trim())&&Z(t=>[...t,e.trim()])},Le=()=>{Te&&(Te.getTracks().forEach(e=>e.stop()),Ae(null)),Pe(!1)};(0,t.useEffect)(()=>(_e?(async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1});Ae(e),Oe.current&&(Oe.current.srcObject=e)}catch(e){console.error("Error accessing camera:",e),alert("Could not access camera. Please check permissions.")}})():Le(),()=>{Te&&Te.getTracks().forEach(e=>e.stop())}),[_e]);const De=(e,t,r,s)=>{l(n=>n.map(n=>{var i,o,l,c;if(n.id!==e)return n;const d=a?{name:(null===(i=a.user_metadata)||void 0===i?void 0:i.full_name)||a.email||"Your Name",username:`@${(null===(o=a.user_metadata)||void 0===o?void 0:o.username)||(null===(l=a.email)||void 0===l?void 0:l.split("@")[0])||"username"}`,avatar:(null===(c=a.user_metadata)||void 0===c?void 0:c.avatar_url)||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",verified:"verified"in a&&a.verified,level:"level"in a?a.level:1}:{name:"Guest",username:"@guest",avatar:"",verified:!1,level:1},u={id:Date.now(),author:d,content:r,timestamp:"now",replies:[],...s&&{media:s}};let h=n.pedalPoints||0;h+=2;let p=n.comments||[];if(t){const e=r=>r.map(r=>r.id===t?{...r,replies:r.replies?[...r.replies,u]:[u]}:{...r,replies:r.replies?e(r.replies):[]});p=e(p)}else p=[...p,u];return{...n,comments:p,pedalPoints:h}}))},Ie=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>e+1+Ie(t.replies||[]),0)},Fe=(e,t)=>{l(r=>r.map(r=>{var s;if(r.id!==e)return r;let n=r.upvotes,a=r.downvotes,i=null!==(s=r.userVote)&&void 0!==s?s:0,o=r.pedalPoints||0;return i===t?(1===t?n-=1:a-=1,i=0,o-=1):(1===t?(n+=1,-1===i&&(a-=1),o+=1):(a+=1,1===i&&(n-=1),o-=1),i=t),{...r,upvotes:n,downvotes:a,userVote:i,pedalPoints:o}}))},Ue=(0,t.useCallback)(async()=>{if(!j&&k){N(!0);try{E(e=>e+1)}catch(e){console.error("Error loading more posts:",e)}N(!1)}},[j,k]);(0,t.useEffect)(()=>{const e=e=>{const t=e.target;if(t&&t instanceof HTMLElement&&t.classList.contains("overflow-y-auto")){const{scrollTop:e,scrollHeight:r,clientHeight:s}=t;return void(e+s>=r-1e3&&Ue())}t!==document.documentElement&&t!==document&&t||window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight-1e3&&Ue()};return window.addEventListener("scroll",e,!0),document.addEventListener("scroll",e,!0),()=>{window.removeEventListener("scroll",e,!0),document.removeEventListener("scroll",e,!0)}},[Ue]);const $e=(0,t.useCallback)(e=>{const t=e.split(/(#[A-Za-z0-9_]+)/g);return(0,Xi.jsx)(Xi.Fragment,{children:t.map((e,t)=>/^#[A-Za-z0-9_]+$/.test(e)?(0,Xi.jsx)("button",{className:"text-app-primary-accent hover:underline inline",onClick:()=>{g(e);try{const e=document.querySelector("#community-feed-title");null===e||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"})}catch{}},children:e},t):(0,Xi.jsx)("span",{children:e},t))})},[]);(0,t.useEffect)(()=>{const e=()=>oe(e=>e+1);return window.addEventListener("realtime:follow",e),window.addEventListener("realtime:unfollow",e),window.addEventListener("realtime:follow_accept",e),()=>{window.removeEventListener("realtime:follow",e),window.removeEventListener("realtime:unfollow",e),window.removeEventListener("realtime:follow_accept",e)}},[]);const Be=(0,t.useMemo)(()=>{const e=i.filter(e=>!z.has(e.id)&&!V.has(e.author.username)),t=null===a||void 0===a?void 0:a.id,r=t?new Set([]):new Set,s=e.filter(e=>{var s;const n=null===(s=e.author)||void 0===s?void 0:s.id;return!n||(!(!t||n!==t)||r.has(n))});if(!x)return s;const n=x.toLowerCase();return s.filter(e=>{const t=(e.tags||[]).some(e=>e.toLowerCase()===n),r=(e.content||"").toLowerCase().includes(n);return t||r})},[i,x,z,V,null===a||void 0===a?void 0:a.id,ie]),ze=e=>{q(t=>new Set(t).add(e)),B(null)},qe=e=>{H(t=>new Set(t).add(e)),B(null)},Ve=e=>{console.log("Reported post",e),B(null)},He=e=>{l(t=>t.filter(t=>t.id!==e)),B(null)},We=(0,t.useCallback)((e,t)=>{const r=(null===a||void 0===a?void 0:a.id)||"user-1";l(s=>s.map(s=>{if(s.id!==e||!s.poll)return s;const n=s.poll,a=(Array.isArray(n.votes)?[...n.votes]:[]).filter(e=>e.userId!==r);return a.push({optionIndex:t,userId:r}),{...s,poll:{...n,votes:a}}}))},[null===a||void 0===a?void 0:a.id,l]);return(0,t.useEffect)(()=>{const e=e=>{B(null)};return null!==$&&document.addEventListener("click",e,{capture:!0}),()=>document.removeEventListener("click",e,{capture:!0})},[$]),(0,t.useEffect)(()=>{const e=()=>{v(!0)};return window.addEventListener("showEvents",e),()=>window.removeEventListener("showEvents",e)},[]),y?(0,Xi.jsx)(Fo,{onBack:()=>v(!1)}):(0,Xi.jsx)("div",{className:"min-h-screen bg-app-background",onScroll:e=>{const t=e.currentTarget,{scrollTop:r,scrollHeight:s,clientHeight:n}=t;r+n>=s-1e3&&Ue()},children:(0,Xi.jsx)("div",{className:"pb-20 md:pb-0",children:(0,Xi.jsx)("div",{className:"flex gap-4 max-w-7xl mx-auto px-4",children:(0,Xi.jsxs)("div",{className:"flex-1 max-w-2xl",children:[(0,Xi.jsx)("div",{className:"p-4 border-b border-app-borders",children:(0,Xi.jsx)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-gradient-to-r from-app-primary-accent/10 to-orange-500/10 rounded-xl p-4 border border-app-primary-accent/20",children:(0,Xi.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Xi.jsx)("div",{className:"w-10 h-10 bg-app-primary-accent/20 rounded-full flex items-center justify-center flex-shrink-0",children:(0,Xi.jsx)(go,{className:"w-5 h-5 text-app-primary-accent"})}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("h3",{className:"text-sm font-semibold text-app-text-primary mb-1",children:"Did You Know?"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted leading-relaxed",children:F?(0,Xi.jsxs)("span",{className:"flex items-center gap-2",children:[(0,Xi.jsx)("div",{className:"w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),"Loading facts..."]}):D.length>0?(0,Xi.jsxs)(Xi.Fragment,{children:[null===(e=D[b])||void 0===e?void 0:e.text,(null===(s=D[b])||void 0===s?void 0:s.source)&&(0,Xi.jsxs)("span",{className:"block text-xs text-orange-400 mt-1",children:["Source: ",D[b].source]})]}):"Loading automotive facts..."})]})]})},b)}),(0,Xi.jsx)("div",{className:"py-4",children:(0,Xi.jsx)("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-4 md:p-6",children:(0,Xi.jsxs)("div",{className:"flex items-start gap-3 md:gap-4",children:[(0,Xi.jsx)("img",{src:(null===a||void 0===a||null===(n=a.user_metadata)||void 0===n?void 0:n.avatar_url)||"https://ui-avatars.com/api/?name=User&background=FF6B00&color=fff",alt:"Your avatar",className:"w-10 h-10 md:w-12 md:h-12 rounded-full flex-shrink-0"}),(0,Xi.jsxs)("div",{className:"flex-1 min-w-0 overflow-visible",children:[(0,Xi.jsx)("textarea",{placeholder:"What's in your mind today?",className:"w-full bg-transparent text-white placeholder-gray-400 resize-none border-none outline-none text-base md:text-lg min-h-[80px] md:min-h-[100px]",rows:3,value:W,onChange:e=>K(e.target.value)}),(0,Xi.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-700 overflow-visible",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-0.5 md:gap-1",children:[(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=e.target.files;t&&Array.from(t).forEach(e=>{const t=new FileReader;t.onload=e=>{var t;null!==(t=e.target)&&void 0!==t&&t.result&&G(t=>[...t,e.target.result])},t.readAsDataURL(e)})},className:"hidden",id:"wiym-image-upload"}),(0,Xi.jsx)("button",{className:"flex items-center justify-center text-gray-400 hover:text-orange-500 transition-colors p-1 rounded-lg hover:bg-gray-700/50 flex-shrink-0",title:"Add Photo",onClick:()=>{var e;return null===(e=document.getElementById("wiym-image-upload"))||void 0===e?void 0:e.click()},children:(0,Xi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Xi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),(0,Xi.jsx)("button",{className:"flex items-center justify-center text-gray-400 hover:text-orange-500 transition-colors p-1 rounded-lg hover:bg-gray-700/50 flex-shrink-0",title:"Live Camera",onClick:()=>Pe(!_e),children:(0,Xi.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Xi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,Xi.jsxs)("button",{className:"flex items-center justify-center text-gray-400 hover:text-orange-500 transition-colors p-1 rounded-lg hover:bg-gray-700/50 flex-shrink-0",title:"Tag Friends",onClick:()=>fe(!me),children:[(0,Xi.jsx)(yo,{className:"w-5 h-5"}),(0,Xi.jsx)(vo,{className:"w-3 h-3 ml-0.5"})]})]}),(0,Xi.jsx)("button",{className:"bg-orange-500 hover:bg-orange-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-3 md:px-4 py-1.5 md:py-2 rounded-full font-medium transition-colors text-sm flex-shrink-0",onClick:async()=>{if(W.trim()||0!==J.length||Q){pe(!0);try{var e,t,r,s,n,i,l,c,d,u;const h={id:Date.now(),author:{name:(null===a||void 0===a||null===(e=a.user_metadata)||void 0===e?void 0:e.full_name)||(null===a||void 0===a||null===(t=a.user_metadata)||void 0===t?void 0:t.name)||(null===a||void 0===a||null===(r=a.email)||void 0===r?void 0:r.split("@")[0])||"Anonymous",username:`@${(null===a||void 0===a||null===(s=a.user_metadata)||void 0===s?void 0:s.username)||(null===a||void 0===a||null===(n=a.user_metadata)||void 0===n?void 0:n.preferred_username)||(null===a||void 0===a||null===(i=a.email)||void 0===i?void 0:i.split("@")[0])||"user"}`,avatar:(null===a||void 0===a||null===(l=a.user_metadata)||void 0===l?void 0:l.avatar_url)||(null===a||void 0===a||null===(c=a.user_metadata)||void 0===c?void 0:c.picture)||"https://ui-avatars.com/api/?name="+encodeURIComponent((null===a||void 0===a||null===(d=a.user_metadata)||void 0===d?void 0:d.full_name)||(null===a||void 0===a||null===(u=a.email)||void 0===u?void 0:u.split("@")[0])||"User")+"&background=FF6B00&color=fff",verified:!(!a||!("verified"in a))&&a.verified,level:a&&"level"in a?a.level:1},content:W.trim(),image:J[0]||void 0,video:Q||void 0,timestamp:"now",upvotes:1,downvotes:0,userVote:1,pedalPoints:10,comments:[],shares:0,views:0,bookmarked:!1,tags:["#WIYM"],isWiym:!0,expiresAt:Date.now()+864e5};o(h),K(""),G([]),Y(null),Z([]),fe(!1)}catch(h){console.error("Error creating WIYM post:",h)}finally{pe(!1)}}},disabled:he||!W.trim()&&0===J.length&&!Q,children:he?"Posting...":"Post"})]}),me&&(0,Xi.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[(0,Xi.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:X.map((e,t)=>(0,Xi.jsxs)("span",{className:"bg-orange-500/20 text-orange-400 px-2 py-1 rounded-full text-xs flex items-center gap-1",children:["@",e,(0,Xi.jsx)("button",{onClick:()=>(e=>{Z(t=>t.filter(t=>t!==e))})(e),className:"hover:text-orange-300",children:"\xd7"})]},t))}),(0,Xi.jsx)("input",{ref:Ce,type:"text",value:xe,onChange:e=>{const t=e.target.value.startsWith("@")?e.target.value:"@"+e.target.value;ge(t)},onFocus:()=>{be.length>0&&Se(!0)},onKeyDown:e=>{if(ke&&be.length>0)if("ArrowDown"===e.key)e.preventDefault(),Ne(e=>Math.min(e+1,be.length-1));else if("ArrowUp"===e.key)e.preventDefault(),Ne(e=>Math.max(e-1,0));else if("Enter"===e.key){e.preventDefault();const r=be[je]||be[0];var t;if(r)Me(r),ge(""),Se(!1),null===(t=Ce.current)||void 0===t||t.blur(),Ee.current=Date.now()+300}else"Escape"===e.key&&Se(!1);else if("Enter"===e.key){const e=xe.replace(/^@/,"").trim();e&&(Me(e),ge(""))}},onBlur:()=>{setTimeout(()=>Se(!1),120)},placeholder:"Tag people...",className:"w-full bg-gray-700 text-white placeholder-gray-400 rounded-lg px-3 py-2 text-sm border border-gray-600 focus:border-orange-500 focus:outline-none"}),ke&&be.length>0&&(0,Xi.jsx)("ul",{className:"relative z-10 mt-1 bg-gray-800 border border-gray-700 rounded-lg shadow-lg max-h-52 overflow-auto",children:be.map((e,t)=>(0,Xi.jsxs)("li",{className:"px-3 py-2 text-sm cursor-pointer text-white hover:bg-orange-500/20 "+(t===je?"bg-orange-500/30":""),onMouseDown:t=>{var r;t.preventDefault(),Me(e),ge(""),Se(!1),null===(r=Ce.current)||void 0===r||r.blur(),Ee.current=Date.now()+300},onMouseEnter:()=>Ne(t),children:["@",e]},e))})]}),_e&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,Xi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Xi.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Xi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Take Photo"}),(0,Xi.jsx)("button",{onClick:Le,className:"text-gray-400 hover:text-white",children:(0,Xi.jsx)(bo,{className:"w-6 h-6"})})]}),(0,Xi.jsx)("div",{className:"relative mb-4",children:(0,Xi.jsx)("video",{ref:Oe,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full rounded-lg bg-black",style:{aspectRatio:"4/3"}})}),(0,Xi.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,Xi.jsx)("button",{onClick:()=>{if(Oe.current&&Re.current){const e=Oe.current,t=Re.current,r=t.getContext("2d");if(t.width=e.videoWidth,t.height=e.videoHeight,r){r.drawImage(e,0,0);const s=t.toDataURL("image/jpeg",.8);G(e=>[...e,s]),Le()}}},className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Capture"}),(0,Xi.jsx)("button",{onClick:Le,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Cancel"})]}),(0,Xi.jsx)("canvas",{ref:Re,style:{display:"none"}})]})}),J.length>0&&(0,Xi.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-700",children:(0,Xi.jsx)("div",{className:"flex flex-wrap gap-2",children:J.map((e,t)=>(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)("img",{src:e,alt:`Preview ${t+1}`,className:"w-16 h-16 object-cover rounded-lg"}),(0,Xi.jsx)("button",{onClick:()=>(e=>{G(t=>t.filter((t,r)=>r!==e))})(t),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:"\xd7"})]},t))})}),Q&&(0,Xi.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-700",children:(0,Xi.jsxs)("div",{className:"relative inline-block",children:[(0,Xi.jsx)("video",{src:Q,className:"w-32 h-24 object-cover rounded-lg",controls:!0}),(0,Xi.jsx)("button",{onClick:()=>Y(null),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:"\xd7"})]})})]})]})})}),(0,Xi.jsx)("div",{className:"py-4 flex gap-4",children:(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)(yo,{className:"w-5 h-5 text-app-primary-accent"}),(0,Xi.jsx)("h2",{className:"text-xl font-bold text-app-text-primary",children:"Feed"})]}),(0,Xi.jsxs)("button",{onClick:()=>{console.log("Events button clicked"),v(!0)},className:"bg-app-primary-accent hover:bg-app-primary-accent/90 text-white rounded-lg px-3 py-2 text-sm font-medium transition-colors flex items-center gap-2",children:[(0,Xi.jsx)(wo,{className:"w-4 h-4"}),"Events"]})]}),x&&(0,Xi.jsxs)("div",{className:"mb-3 flex items-center gap-2",children:[(0,Xi.jsx)("span",{className:"text-sm text-app-text-muted",children:"Filtering by"}),(0,Xi.jsx)("span",{className:"px-2 py-1 bg-app-primary-accent/10 text-app-primary-accent border border-app-primary-accent/20 rounded-full text-xs font-medium",children:x}),(0,Xi.jsx)("button",{onClick:()=>g(null),className:"text-xs text-app-text-muted hover:text-app-primary-accent",children:"Clear"})]}),(0,Xi.jsx)("div",{className:"space-y-4",children:Be.map((e,t)=>{var r,s,n,i;return(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-app-card-surface rounded-xl border overflow-hidden "+(e.isWiym?"border-orange-500/30 bg-gradient-to-r from-orange-500/5 to-transparent":"border-app-borders"),children:[(0,Xi.jsx)("div",{className:"p-4 pb-3",children:(0,Xi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"relative",children:(0,Xi.jsx)("img",{src:e.author.avatar,alt:e.author.name,className:"w-10 h-10 rounded-full"})}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary text-sm",children:e.author.name}),e.author.verified&&(0,Xi.jsx)("div",{className:"w-4 h-4 bg-app-primary-accent rounded-full flex items-center justify-center",children:(0,Xi.jsx)("span",{className:"text-white text-xs",children:"\u2713"})})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-xs text-app-text-muted",children:[(0,Xi.jsx)("span",{children:e.author.username}),(0,Xi.jsx)("span",{children:"\u2022"}),e.isWiym&&(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)("span",{className:"bg-orange-500/20 text-orange-400 px-2 py-0.5 rounded-full text-xs font-medium",children:"WIYM Post"}),(0,Xi.jsx)("span",{children:"\u2022"}),(0,Xi.jsx)("span",{className:"text-orange-400",children:e.expiresAt&&e.expiresAt>Date.now()?`${Math.ceil((e.expiresAt-Date.now())/36e5)}h left`:"Expired"}),(0,Xi.jsx)("span",{children:"\u2022"})]}),(0,Xi.jsx)("span",{children:e.timestamp}),e.location&&(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)("span",{children:"\u2022"}),(0,Xi.jsx)("div",{className:"flex items-center gap-1",children:(0,Xi.jsx)("span",{children:e.location})})]})]})]})]}),(0,Xi.jsxs)("div",{className:"relative","data-post-menu":!0,children:[(0,Xi.jsx)("button",{className:"p-2 hover:bg-app-background rounded-full transition-colors","aria-haspopup":"menu","aria-expanded":$===e.id,onClick:()=>B(t=>t===e.id?null:e.id),children:(0,Xi.jsx)(jo,{className:"w-4 h-4 text-app-text-muted"})}),$===e.id&&(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)("div",{className:"hidden sm:block absolute right-0 mt-2 w-56 bg-gray-800 border border-gray-700 rounded-xl shadow-xl z-50 overflow-hidden",children:a&&(null===(r=a.user_metadata)||void 0===r?void 0:r.username)===e.author.username?(0,Xi.jsx)(Xi.Fragment,{children:(0,Xi.jsx)("button",{className:"w-full text-left px-4 py-3 text-sm text-red-400 hover:bg-gray-700/60",onClick:()=>He(e.id),children:"Delete"})}):(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)("button",{className:"w-full text-left px-4 py-3 text-sm text-red-400 hover:bg-gray-700/60",onClick:()=>Ve(e.id),children:"Report"}),(0,Xi.jsxs)("button",{className:"w-full text-left px-4 py-3 text-sm text-white hover:bg-gray-700/60 border-t border-gray-700",onClick:()=>qe(e.author.username),children:["Unfollow ",e.author.username]}),(0,Xi.jsx)("button",{className:"w-full text-left px-4 py-3 text-sm text-white hover:bg-gray-700/60 border-t border-gray-700",onClick:()=>ze(e.id),children:"Hide"})]})}),(0,Xi.jsx)("div",{className:"sm:hidden fixed inset-x-0 bottom-0 z-[9999]",children:(0,Xi.jsxs)("div",{className:"mx-auto w-full max-w-screen-sm rounded-t-2xl bg-gray-800 border-t border-gray-700 shadow-2xl",children:[(0,Xi.jsx)("div",{className:"py-2 flex justify-center",children:(0,Xi.jsx)("div",{className:"w-12 h-1.5 rounded-full bg-gray-600"})}),a&&(null===(s=a.user_metadata)||void 0===s?void 0:s.username)===e.author.username?(0,Xi.jsx)(Xi.Fragment,{children:(0,Xi.jsx)("button",{className:"w-full text-left px-5 py-4 text-base text-red-400 hover:bg-gray-700/60",onClick:()=>He(e.id),children:"Delete"})}):(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)("button",{className:"w-full text-left px-5 py-4 text-base text-red-400 hover:bg-gray-700/60",onClick:()=>Ve(e.id),children:"Report"}),(0,Xi.jsxs)("button",{className:"w-full text-left px-5 py-4 text-base text-white hover:bg-gray-700/60 border-t border-gray-700",onClick:()=>qe(e.author.username),children:["Unfollow ",e.author.username]}),(0,Xi.jsx)("button",{className:"w-full text-left px-5 py-4 text-base text-white hover:bg-gray-700/60 border-t border-gray-700",onClick:()=>ze(e.id),children:"Hide"})]}),(0,Xi.jsx)("button",{className:"w-full text-center px-5 py-4 text-base text-white hover:bg-gray-700/60 border-t border-gray-700",onClick:()=>B(null),children:"Cancel"})]})})]})]})]})}),(0,Xi.jsxs)("div",{className:"px-4 pb-3",children:[(0,Xi.jsx)("p",{className:"text-app-text-primary leading-relaxed",children:$e(e.content)}),e.tags&&(0,Xi.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:e.tags.map(e=>(0,Xi.jsx)("button",{onClick:()=>g(e),className:"px-2 py-1 bg-app-primary-accent/10 text-app-primary-accent border border-app-primary-accent/20 rounded-full text-xs font-medium hover:bg-app-primary-accent/20 transition-colors",children:e},e))})]}),(()=>{if(e.video)return(0,Xi.jsx)("div",{className:"relative",children:(0,Xi.jsx)("video",{src:e.video,className:"w-full h-80 object-cover",controls:!0})});const t=e.images,r=e.image||(null===t||void 0===t?void 0:t[0]);if(!r)return null;if(t&&t.length>1){const e=t.slice(0,4);return(0,Xi.jsx)("div",{className:"grid grid-cols-2 gap-1",children:e.map((r,s)=>(0,Xi.jsx)("img",{src:r,alt:`Post image ${s+1}`,className:`w-full ${e.length>2?"h-40":"h-80"} object-cover cursor-pointer`,onClick:()=>le(t,s)},s))})}return(0,Xi.jsx)("div",{className:"relative",children:(0,Xi.jsx)("img",{src:r,alt:"Post content",className:"w-full h-80 object-cover cursor-pointer",onClick:()=>le(t||[r],0)})})})(),e.poll&&(0,Xi.jsxs)("div",{className:"p-4 pt-3",children:[(0,Xi.jsx)("div",{className:"space-y-2",children:(()=>{const t=e.poll;return((null===t||void 0===t?void 0:t.options)||[]).slice(0,4).map((r,s)=>{var n,i;return(0,Xi.jsxs)("label",{className:"flex items-center justify-between gap-3 px-3 py-2 rounded-lg border border-app-borders hover:border-app-primary-accent/50 transition-colors cursor-pointer",onClick:()=>We(e.id,s),children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)("input",{type:"radio",name:`poll-${e.id}`,className:"accent-app-primary-accent",checked:!!Array.isArray(null===t||void 0===t?void 0:t.votes)&&t.votes.some(e=>e.userId===((null===a||void 0===a?void 0:a.id)||"user-1")&&e.optionIndex===s),onChange:()=>We(e.id,s)}),(0,Xi.jsx)("span",{className:"text-app-text-primary",children:r})]}),Array.isArray(null===t||void 0===t?void 0:t.votes)&&(0,Xi.jsxs)("span",{className:"text-xs text-app-text-muted",children:[null!==(n=null===t||void 0===t||null===(i=t.votes)||void 0===i?void 0:i.filter(e=>e.optionIndex===s).length)&&void 0!==n?n:0," votes"]})]},s)})})()}),(0,Xi.jsxs)("div",{className:"mt-2 text-xs text-app-text-muted",children:["Duration: ",null===(n=e.poll)||void 0===n?void 0:n.duration]})]}),(0,Xi.jsx)("div",{className:"p-4",children:(0,Xi.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-3",children:(0,Xi.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 md:gap-4 w-full",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-1 sm:gap-1.5",children:[(0,Xi.jsxs)("button",{onClick:()=>Fe(e.id,1),className:"flex items-center gap-1 px-1.5 py-1 sm:px-2 sm:py-1.5 rounded-full transition-colors "+(1===e.userVote?"bg-orange-500 text-white":"text-app-text-muted hover:bg-orange-500/70 hover:text-white"),title:"Upvote","aria-label":"Upvote",children:[(0,Xi.jsx)(No,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"}),(0,Xi.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:e.upvotes})]}),(0,Xi.jsxs)("button",{onClick:()=>{console.log("Downvote clicked for post:",e.id,"Current userVote:",e.userVote,"Current downvotes:",e.downvotes),Fe(e.id,-1)},className:"flex items-center gap-1 px-1.5 py-1 sm:px-2 sm:py-1.5 rounded-full transition-colors "+(-1===e.userVote?"bg-red-500/20 text-red-400 border border-red-400/30":"text-app-text-muted hover:bg-red-500/10 hover:text-red-400"),title:"Downvote","aria-label":"Downvote",children:[(0,Xi.jsx)(vo,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"}),(0,Xi.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:e.downvotes})]})]}),(0,Xi.jsxs)("button",{className:"flex items-center gap-1 sm:gap-2 text-app-text-muted hover:text-app-primary-accent transition-colors",onClick:()=>se(re===e.id?null:e.id),"aria-label":"Comments",children:[(0,Xi.jsx)(ko,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"}),(0,Xi.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:Ie(e.comments)})]}),(0,Xi.jsxs)("button",{className:"flex items-center gap-1 sm:gap-2 text-app-text-muted hover:text-app-primary-accent transition-colors",onClick:()=>(async e=>{try{const n="undefined"!==typeof window?window.location.href:"",a={title:"Check this out on Pedal",text:"Found this interesting post on Pedal",url:n};let i=!1;if("undefined"!==typeof navigator&&navigator.share)try{await navigator.share(a),i=!0}catch(s){s&&"AbortError"!==s.name&&console.warn("Web Share failed, falling back to clipboard:",s)}var t,r;if(!i)if(null!==(t=navigator)&&void 0!==t&&null!==(r=t.clipboard)&&void 0!==r&&r.writeText)await navigator.clipboard.writeText(n),"undefined"!==typeof window&&window.alert("Link copied to clipboard!"),i=!0;else if("undefined"!==typeof document){const e=document.createElement("input");e.value=n,document.body.appendChild(e),e.select();try{document.execCommand("copy"),"undefined"!==typeof window&&window.alert("Link copied to clipboard!"),i=!0}finally{document.body.removeChild(e)}}i&&l(t=>t.map(t=>t.id!==e?t:{...t,shares:(t.shares||0)+1}))}catch(n){console.error("Error sharing post:",n)}})(e.id),"aria-label":"Share",children:[(0,Xi.jsx)(So,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6"}),(0,Xi.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:(i=e.shares,i>=1e3?(i/1e3).toFixed(1)+"k":i.toString())})]}),(0,Xi.jsx)("div",{className:"flex-grow"}),(0,Xi.jsxs)("span",{className:"flex items-center gap-1 text-xs sm:text-sm text-orange-400 font-bold mr-1 sm:mr-2","aria-label":"Pedal Points",children:[(0,Xi.jsx)(Co,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,Xi.jsx)("span",{className:"text-xs sm:text-sm",children:e.pedalPoints})]}),(0,Xi.jsx)("button",{onClick:()=>c(e.id),className:`transition-colors ${e.bookmarked?"text-app-primary-accent":"text-app-text-muted hover:text-app-primary-accent"} flex items-center gap-1 p-1`,"aria-label":e.bookmarked?"Unsave Post":"Save Post",children:(0,Xi.jsx)(Eo,{className:"w-5 h-5 sm:w-6 sm:h-6 "+(e.bookmarked?"fill-current":"")})})]})})}),re===e.id&&(0,Xi.jsx)(Uo,{post:e,user:a,onAddComment:De,onClose:()=>se(null)})]},e.id)})})]})}),_&&(0,Xi.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center",children:[(0,Xi.jsx)("button",{"aria-label":"Close",onClick:ce,className:"absolute top-4 right-4 p-2 rounded-full bg-black/60 hover:bg-black/80 text-white",children:(0,Xi.jsx)(bo,{className:"w-6 h-6"})}),T.length>1&&(0,Xi.jsx)("button",{onClick:ue,"aria-label":"Previous image",className:"absolute left-4 p-3 rounded-full bg-black/60 hover:bg-black/80 text-white",children:(0,Xi.jsx)(_o,{className:"w-6 h-6"})}),(0,Xi.jsx)("div",{className:"max-w-5xl max-h-[85vh] px-6",children:(0,Xi.jsx)("img",{src:T[O],alt:`Image ${O+1}`,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-xl"})}),T.length>1&&(0,Xi.jsx)("button",{onClick:de,"aria-label":"Next image",className:"absolute right-4 p-3 rounded-full bg-black/60 hover:bg-black/80 text-white",children:(0,Xi.jsx)(Po,{className:"w-6 h-6"})})]})]})})})})},Bo=Vi("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),zo=Vi("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),qo=Vi("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Vo=Vi("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),Ho=Vi("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Wo=Vi("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),Ko=Vi("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Jo=Vi("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Go="pedal_user_settings_v1";function Qo(){try{const e=localStorage.getItem(Go);return e?JSON.parse(e):{}}catch{return{}}}const Yo={get(e){if(!e)return{};return Qo()[e]||{}},set(e,t){if(!e)return{};const r=Qo(),s={...r[e]||{},...t};return r[e]=s,function(e){localStorage.setItem(Go,JSON.stringify(e))}(r),window.dispatchEvent(new CustomEvent("realtime:user_settings",{detail:{userId:e,settings:s,ts:Date.now()}})),s},isPrivate(e){return!!this.get(e).isPrivate}},Xo=Yo,Zo=()=>{const{isDarkMode:e,toggleTheme:r}=fo(),{user:s,logout:n}=ho(),[a,i]=(0,t.useState)({pushNotifications:!1,emailNotifications:!1,smsNotifications:!1,rideReminders:!1,communityUpdates:!1,messageNotifications:!1,likeNotifications:!1}),[o,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)({isPrivate:!1,profileVisibility:"public",locationSharing:!1,activityTracking:!1,dataCollection:!1,showOnlineStatus:!1,allowTagging:!1}),[u,h]=(0,t.useState)(!0);t.useEffect(()=>{(async()=>{const e=(null===s||void 0===s?void 0:s.id)||(null===s||void 0===s?void 0:s.username)||"";if(e)try{l(!0);const t=JSON.parse(localStorage.getItem("notificationSettings")||"{}");i(e=>({...e,...t})),l(!1),h(!0);const r=JSON.parse(localStorage.getItem("privacySettings")||"{}");d(t=>({...t,isPrivate:Yo.isPrivate(e),...r})),h(!1),x(!0);const s=JSON.parse(localStorage.getItem("userPreferences")||"{}");m(e=>({...e,...s})),x(!1),b(!0),b(!1)}catch(t){console.error("Failed to load settings:",t),l(!1),h(!1),x(!1),b(!1)}})();const e=(null===s||void 0===s?void 0:s.id)||(null===s||void 0===s?void 0:s.username)||"",t=t=>{const r=(null===t||void 0===t?void 0:t.detail)||{};(null===r||void 0===r?void 0:r.userId)===e&&d(e=>{var t;return{...e,isPrivate:!(null===(t=r.settings)||void 0===t||!t.isPrivate)}})};return window.addEventListener("realtime:user_settings",t),()=>window.removeEventListener("realtime:user_settings",t)},[s]);const[p,m]=(0,t.useState)({language:"English",autoDownloadMaps:!1,dataUsage:"wifi-only",soundEffects:!1,hapticFeedback:!1}),[f,x]=(0,t.useState)(!0),[g,y]=(0,t.useState)({available:!1,version:"",notes:""}),[v,b]=(0,t.useState)(!0),w=async(e,t)=>{const r={...a,[e]:t};i(r);try{localStorage.setItem("notificationSettings",JSON.stringify(r))}catch(s){console.error("Failed to save notification settings:",s),i(r=>({...r,[e]:!t}))}},j=async(e,t)=>{const r={...c,[e]:t};d(r);try{localStorage.setItem("privacySettings",JSON.stringify(r))}catch(s){console.error("Failed to save privacy settings:",s),d(r=>({...r,[e]:"isPrivate"===e||"boolean"===typeof t?!t:r[e]}))}},N=async(e,t)=>{const r={...p,[e]:t};m(r);try{localStorage.setItem("userPreferences",JSON.stringify(r))}catch(s){console.error("Failed to save preferences:",s),m(r=>({...r,[e]:"boolean"===typeof t?!t:r[e]}))}},k=(e,t,r)=>(0,Xi.jsx)("select",{value:e,onChange:e=>r(e.target.value),className:"px-3 py-2 bg-app-background border border-app-borders rounded-lg text-app-text-primary focus:outline-none focus:border-app-primary-accent transition-colors",children:t.map(e=>(0,Xi.jsx)("option",{value:e.value,children:e.label},e.value))}),S=[{title:"Updates",icon:Bo,items:[{label:g.available?`New update available (${g.version})`:"Your app is up to date",description:g.available?g.notes:"You are on the latest version.",action:()=>{alert("Starting update..."),y(e=>({...e,available:!1}))},showArrow:!0}]},{title:"Account",icon:Qi,items:[{label:"Edit Profile",description:"Update your personal information",action:()=>console.log("Edit Profile"),showArrow:!0},{label:"Change Password",description:"Update your account security",action:()=>console.log("Change Password"),showArrow:!0},{label:"Account Verification",description:"Verify your identity",action:()=>console.log("Verification"),showArrow:!0},{label:"Connected Accounts",description:"Manage linked social accounts",action:()=>console.log("Connected Accounts"),showArrow:!0}]},{title:"Notifications",icon:zo,items:[{label:"Push Notifications",description:"Receive notifications on your device",type:"toggle",value:a.pushNotifications,onChange:e=>w("pushNotifications",e)},{label:"Message Notifications",description:"Get notified of new messages",type:"toggle",value:a.messageNotifications,onChange:e=>w("messageNotifications",e)},{label:"Like Notifications",description:"Get notified when someone likes your posts",type:"toggle",value:a.likeNotifications,onChange:e=>w("likeNotifications",e)},{label:"Ride Reminders",description:"Reminders for upcoming rides",type:"toggle",value:a.rideReminders,onChange:e=>w("rideReminders",e)},{label:"Community Updates",description:"Updates from groups and events",type:"toggle",value:a.communityUpdates,onChange:e=>w("communityUpdates",e)}]},{title:"Privacy & Security",icon:qo,items:[{label:"Private Account",description:"Only approved followers can see your posts",type:"toggle",value:c.isPrivate,onChange:e=>{const t=(null===s||void 0===s?void 0:s.id)||(null===s||void 0===s?void 0:s.username)||"";t&&(Yo.set(t,{isPrivate:e}),d(t=>({...t,isPrivate:e})))}},{label:"Profile Visibility",description:"Who can see your profile",type:"select",value:c.profileVisibility,options:[{value:"public",label:"Public"},{value:"friends",label:"Friends Only"},{value:"private",label:"Private"}],onChange:e=>j("profileVisibility",e)},{label:"Location Sharing",description:"Share your location with others",type:"toggle",value:c.locationSharing,onChange:e=>j("locationSharing",e)},{label:"Show Online Status",description:"Let others see when you're online",type:"toggle",value:c.showOnlineStatus,onChange:e=>j("showOnlineStatus",e)},{label:"Allow Tagging",description:"Let others tag you in posts",type:"toggle",value:c.allowTagging,onChange:e=>j("allowTagging",e)},{label:"Data Collection",description:"Allow analytics and usage data",type:"toggle",value:c.dataCollection,onChange:e=>j("dataCollection",e)}]},{title:"Appearance",icon:Vo,items:[{label:"Theme",description:e?"Dark mode is enabled":"Light mode is enabled",type:"custom",render:()=>(0,Xi.jsx)("button",{onClick:r,className:"flex items-center gap-2 px-3 py-2 bg-app-background border border-app-borders rounded-lg hover:border-app-primary-accent transition-colors",children:e?(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)(Ho,{className:"w-4 h-4 text-app-text-muted"}),(0,Xi.jsx)("span",{className:"text-sm text-app-text-primary",children:"Light"})]}):(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)(Wo,{className:"w-4 h-4 text-app-text-muted"}),(0,Xi.jsx)("span",{className:"text-sm text-app-text-primary",children:"Dark"})]})})},{label:"Language",description:"App language and region",type:"select",value:p.language,options:[{value:"English",label:"English"},{value:"Hindi",label:"\u0939\u093f\u0902\u0926\u0940"},{value:"Spanish",label:"Espa\xf1ol"},{value:"French",label:"Fran\xe7ais"}],onChange:e=>N("language",e)},{label:"Sound Effects",description:"Play sounds for interactions",type:"toggle",value:p.soundEffects,onChange:e=>N("soundEffects",e)},{label:"Haptic Feedback",description:"Vibration for touch interactions",type:"toggle",value:p.hapticFeedback,onChange:e=>N("hapticFeedback",e)}]},{title:"Data & Storage",icon:Ko,items:[{label:"Data Usage",description:"Control when to use mobile data",type:"select",value:p.dataUsage,options:[{value:"always",label:"Always"},{value:"wifi-only",label:"Wi-Fi Only"},{value:"never",label:"Never"}],onChange:e=>N("dataUsage",e)},{label:"Auto-Download Maps",description:"Automatically download maps for offline use",type:"toggle",value:p.autoDownloadMaps,onChange:e=>N("autoDownloadMaps",e)},{label:"Clear Cache",description:"Free up storage space",action:()=>console.log("Clear Cache"),showArrow:!0},{label:"Manage Downloads",description:"View and manage offline content",action:()=>console.log("Manage Downloads"),showArrow:!0}]},{title:"Support & About",icon:Jo,items:[{label:"Help Center",description:"Get help and support",action:()=>console.log("Help"),showArrow:!0},{label:"Contact Support",description:"Reach out to our team",action:()=>console.log("Contact"),showArrow:!0},{label:"Report a Problem",description:"Report bugs or issues",action:()=>console.log("Report"),showArrow:!0},{label:"Rate the App",description:"Leave a review on the app store",action:()=>console.log("Rate"),showArrow:!0}]}];return(0,Xi.jsxs)("div",{className:"min-h-screen bg-app-background pb-24",children:[(0,Xi.jsx)("div",{className:"bg-app-card-surface border-b border-app-borders p-6",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Xi.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-app-primary-accent to-primary-600 rounded-xl flex items-center justify-center"}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h1",{className:"text-2xl font-bold text-app-text-primary",children:"Settings"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"Manage your account and preferences"})]})]})}),g.available&&(0,Xi.jsx)("div",{className:"p-4",children:(0,Xi.jsxs)("div",{className:"bg-gradient-to-r from-orange-500/20 to-orange-500/10 border border-orange-500/40 rounded-xl p-4 flex items-start gap-3",children:[(0,Xi.jsx)("div",{className:"mt-0.5",children:(0,Xi.jsx)(Bo,{className:"w-5 h-5 text-orange-400"})}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsxs)("h3",{className:"text-app-text-primary font-semibold",children:["New update available ",g.version]}),(0,Xi.jsx)("p",{className:"text-app-text-muted text-sm",children:g.notes})]}),(0,Xi.jsxs)("div",{className:"flex gap-2",children:[(0,Xi.jsx)("button",{onClick:()=>y(e=>({...e,available:!1})),className:"px-3 py-2 text-sm border border-app-borders rounded-lg text-app-text-primary hover:bg-app-background",children:"Later"}),(0,Xi.jsx)("button",{onClick:()=>{alert("Starting update..."),y(e=>({...e,available:!1}))},className:"px-3 py-2 text-sm bg-app-primary-accent text-white rounded-lg hover:bg-app-primary-accent/90",children:"Update now"})]})]})}),(0,Xi.jsx)("div",{className:"p-4 space-y-4",children:S.map((e,t)=>{const r=e.icon;return(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-app-card-surface rounded-xl border border-app-borders overflow-hidden",children:[(0,Xi.jsx)("div",{className:"p-4 border-b border-app-borders",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)(r,{className:"w-5 h-5 text-app-primary-accent"}),(0,Xi.jsx)("h2",{className:"text-lg font-semibold text-app-text-primary",children:e.title})]})}),(0,Xi.jsx)("div",{className:"divide-y divide-app-borders",children:e.items.map((e,t)=>{return(0,Xi.jsx)("div",{className:"p-4",children:(0,Xi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("h3",{className:"font-medium text-app-text-primary mb-1",children:e.label}),e.description&&(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:e.description})]}),(0,Xi.jsxs)("div",{className:"ml-4 flex-shrink-0",children:["toggle"===e.type&&(r=e.value,s=e.onChange,(0,Xi.jsx)("button",{onClick:()=>s(!r),className:"w-12 h-6 rounded-full transition-colors relative "+(r?"bg-app-primary-accent":"bg-app-borders"),children:(0,Xi.jsx)("div",{className:"w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform shadow-sm "+(r?"translate-x-6":"translate-x-0.5")})})),"select"===e.type&&k(e.value,e.options,e.onChange),"custom"===e.type&&e.render(),!("type"in e)&&"action"in e&&(0,Xi.jsx)("button",{onClick:e.action,className:"flex items-center gap-2 text-app-text-muted hover:text-app-primary-accent transition-colors",children:e.showArrow&&(0,Xi.jsx)(Po,{className:"w-4 h-4"})})]})]})},t);var r,s})})]},e.title)})})]})};var el=r(161);function tl(){const e=(0,t.useRef)(!1);return G(()=>(e.current=!0,()=>{e.current=!1}),[]),e}class rl extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function sl(e){let{children:r,isPresent:s}=e;const n=(0,t.useId)(),a=(0,t.useRef)(null),i=(0,t.useRef)({width:0,height:0,top:0,left:0});return(0,t.useInsertionEffect)(()=>{const{width:e,height:t,top:r,left:o}=i.current;if(s||!a.current||!e||!t)return;a.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            top: ${r}px !important;\n            left: ${o}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}},[s]),t.createElement(rl,{isPresent:s,childRef:a,sizeRef:i},t.cloneElement(r,{ref:a}))}const nl=e=>{let{children:r,initial:s,isPresent:n,onExitComplete:a,custom:i,presenceAffectsLayout:o,mode:l}=e;const c=xt(al),d=(0,t.useId)(),u=(0,t.useMemo)(()=>({id:d,initial:s,isPresent:n,custom:i,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;a&&a()},register:e=>(c.set(e,!1),()=>c.delete(e))}),o?void 0:[n]);return(0,t.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[n]),t.useEffect(()=>{!n&&!c.size&&a&&a()},[n]),"popLayout"===l&&(r=t.createElement(sl,{isPresent:n},r)),t.createElement(K.Provider,{value:u},r)};function al(){return new Map}const il=e=>e.key||"";const ol=e=>{let{children:r,custom:s,initial:n=!0,onExitComplete:a,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:l="sync"}=e;rr(!i,"Replace exitBeforeEnter with mode='wait'");const c=(0,t.useContext)(de).forceRender||function(){const e=tl(),[r,s]=(0,t.useState)(0),n=(0,t.useCallback)(()=>{e.current&&s(r+1)},[r]);return[(0,t.useCallback)(()=>St.postRender(n),[n]),r]}()[0],d=tl(),u=function(e){const r=[];return t.Children.forEach(e,e=>{(0,t.isValidElement)(e)&&r.push(e)}),r}(r);let h=u;const p=(0,t.useRef)(new Map).current,m=(0,t.useRef)(h),f=(0,t.useRef)(new Map).current,x=(0,t.useRef)(!0);var g;if(G(()=>{x.current=!1,function(e,t){e.forEach(e=>{const r=il(e);t.set(r,e)})}(u,f),m.current=h}),g=()=>{x.current=!0,f.clear(),p.clear()},(0,t.useEffect)(()=>()=>g(),[]),x.current)return t.createElement(t.Fragment,null,h.map(e=>t.createElement(nl,{key:il(e),isPresent:!0,initial:!!n&&void 0,presenceAffectsLayout:o,mode:l},e)));h=[...h];const y=m.current.map(il),v=u.map(il),b=y.length;for(let t=0;t<b;t++){const e=y[t];-1!==v.indexOf(e)||p.has(e)||p.set(e,void 0)}return"wait"===l&&p.size&&(h=[]),p.forEach((e,r)=>{if(-1!==v.indexOf(r))return;const n=f.get(r);if(!n)return;const i=y.indexOf(r);let x=e;if(!x){const e=()=>{p.delete(r);const e=Array.from(f.keys()).filter(e=>!v.includes(e));if(e.forEach(e=>f.delete(e)),m.current=u.filter(t=>{const s=il(t);return s===r||e.includes(s)}),!p.size){if(!1===d.current)return;c(),a&&a()}};x=t.createElement(nl,{key:il(n),isPresent:!1,onExitComplete:e,custom:s,presenceAffectsLayout:o,mode:l},n),p.set(r,x)}h.splice(i,0,x)}),h=h.map(e=>{const r=e.key;return p.has(r)?e:t.createElement(nl,{key:il(e),isPresent:!0,presenceAffectsLayout:o,mode:l},e)}),t.createElement(t.Fragment,null,p.size?h:h.map(e=>(0,t.cloneElement)(e)))},ll=Vi("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),cl=Vi("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),dl=Vi("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),ul=Vi("thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),hl=Vi("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),pl=Vi("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ml=Vi("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),fl=()=>{const[e,s]=(0,t.useState)(!1),[n,a]=(0,t.useState)("destination"),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!1),[h,p]=(0,t.useState)({budgetTips:"",environment:"",bestTime:"",transportation:"",highlights:"",tips:"",rating:5}),[m,f]=(0,t.useState)(null),[x,g]=(0,t.useState)([{id:"1",destination:"Leh Ladakh",budgetTips:"Stay in guesthouses, carry your own food, rent bikes locally",environment:"High altitude desert, stunning landscapes, cold nights",bestTime:"June to September for best weather",transportation:"Fly to Leh or ride via Manali/Srinagar highways",highlights:"Pangong Lake, Nubra Valley, Khardung La Pass",tips:"Acclimatize properly, carry warm clothes, check permits",rating:5,author:"RiderAlex",date:"2024-01-15"}]),y=e=>{c(e),e?a("share"):(a("info"),v())},v=async()=>{u(!0);try{const e=(await r.e(672).then(r.bind(r,672))).default,t=await e.getDestinationInfo(i);f(t)}catch(e){console.error("Error fetching destination info:",e),alert("Unable to fetch destination information. Please check your internet connection and try again.")}finally{u(!1)}},b=()=>{s(!1),a("destination"),o(""),c(null),f(null),p({budgetTips:"",environment:"",bestTime:"",transportation:"",highlights:"",tips:"",rating:5})};return(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsxs)(Fi.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},onClick:()=>s(!0),className:"w-full px-6 py-4 mt-8 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white rounded-xl font-medium transition-all duration-200 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl transform hover:scale-105",children:[(0,Xi.jsx)(Ji,{className:"w-5 h-5"}),"Know about Destination",(0,Xi.jsx)(ll,{className:"w-5 h-5"})]}),x.length>0&&(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-8",children:[(0,Xi.jsxs)("h3",{className:"text-xl font-bold text-app-text-primary mb-4 flex items-center gap-2",children:[(0,Xi.jsx)(yo,{className:"w-5 h-5 text-orange-500"}),"Community Experiences"]}),(0,Xi.jsx)("div",{className:"space-y-4",children:x.map(e=>(0,Xi.jsxs)("div",{className:"bg-app-card-surface border border-app-borders rounded-xl p-4",children:[(0,Xi.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-semibold text-app-text-primary",children:e.destination}),(0,Xi.jsxs)("p",{className:"text-sm text-app-text-muted",children:["by ",e.author," \u2022 ",e.date]})]}),(0,Xi.jsx)("div",{className:"flex items-center gap-1",children:[...Array(5)].map((t,r)=>(0,Xi.jsx)(cl,{className:"w-4 h-4 "+(r<e.rating?"text-yellow-400 fill-current":"text-gray-600")},r))})]}),(0,Xi.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Xi.jsxs)("p",{children:[(0,Xi.jsx)("span",{className:"font-medium text-orange-500",children:"Budget Tips:"})," ",e.budgetTips]}),(0,Xi.jsxs)("p",{children:[(0,Xi.jsx)("span",{className:"font-medium text-orange-500",children:"Environment:"})," ",e.environment]}),(0,Xi.jsxs)("p",{children:[(0,Xi.jsx)("span",{className:"font-medium text-orange-500",children:"Best Time:"})," ",e.bestTime]})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-4 mt-3 pt-3 border-t border-app-borders",children:[(0,Xi.jsxs)("button",{className:"flex items-center gap-1 text-app-text-muted hover:text-orange-500 transition-colors",children:[(0,Xi.jsx)(dl,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{className:"text-sm",children:"12"})]}),(0,Xi.jsxs)("button",{className:"flex items-center gap-1 text-app-text-muted hover:text-orange-500 transition-colors",children:[(0,Xi.jsx)(ko,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{className:"text-sm",children:"5"})]})]})]},e.id))})]}),(0,Xi.jsx)(ol,{children:e&&(0,Xi.jsx)(Fi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:b,children:(0,Xi.jsxs)(Fi.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-app-card-surface rounded-2xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto border border-app-borders",onClick:e=>e.stopPropagation(),children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsxs)("h2",{className:"text-xl font-bold text-app-text-primary",children:["destination"===n&&"Tell us your destination","visited"===n&&"Have you visited this place?","share"===n&&"Share your experience","info"===n&&`About ${i}`]}),(0,Xi.jsx)("button",{onClick:b,className:"p-2 hover:bg-app-borders rounded-full transition-colors",children:(0,Xi.jsx)(bo,{className:"w-5 h-5 text-app-text-muted"})})]}),"destination"===n&&(0,Xi.jsxs)("div",{className:"space-y-4",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Destination Name"}),(0,Xi.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),placeholder:"e.g., Leh Ladakh, Goa, Manali...",className:"w-full px-4 py-3 bg-app-background border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:outline-none focus:border-orange-500 transition-colors"})]}),(0,Xi.jsx)("button",{onClick:()=>{i.trim()&&a("visited")},disabled:!i.trim(),className:"w-full py-3 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-xl font-medium transition-colors",children:"Continue"})]}),"visited"===n&&(0,Xi.jsxs)("div",{className:"space-y-6",children:[(0,Xi.jsxs)("p",{className:"text-app-text-primary text-center",children:["Have you visited ",(0,Xi.jsx)("span",{className:"font-semibold text-orange-500",children:i})," before?"]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Xi.jsx)("button",{onClick:()=>y(!0),className:"py-4 bg-green-500 hover:bg-green-600 text-white rounded-xl font-medium transition-colors",children:"Yes, I have"}),(0,Xi.jsx)("button",{onClick:()=>y(!1),className:"py-4 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium transition-colors",children:"No, I haven't"})]})]}),"share"===n&&(0,Xi.jsxs)("div",{className:"space-y-4",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"How to go there on a low budget?"}),(0,Xi.jsx)("textarea",{value:h.budgetTips,onChange:e=>p(t=>({...t,budgetTips:e.target.value})),placeholder:"Share budget-friendly travel tips...",className:"w-full px-4 py-3 bg-app-background border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:outline-none focus:border-orange-500 transition-colors h-20 resize-none"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"How is the environment?"}),(0,Xi.jsx)("textarea",{value:h.environment,onChange:e=>p(t=>({...t,environment:e.target.value})),placeholder:"Describe the climate, scenery, atmosphere...",className:"w-full px-4 py-3 bg-app-background border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:outline-none focus:border-orange-500 transition-colors h-20 resize-none"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Best time to visit?"}),(0,Xi.jsx)("input",{type:"text",value:h.bestTime,onChange:e=>p(t=>({...t,bestTime:e.target.value})),placeholder:"e.g., October to March",className:"w-full px-4 py-3 bg-app-background border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:outline-none focus:border-orange-500 transition-colors"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Transportation tips?"}),(0,Xi.jsx)("textarea",{value:h.transportation,onChange:e=>p(t=>({...t,transportation:e.target.value})),placeholder:"How to reach, local transport options...",className:"w-full px-4 py-3 bg-app-background border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:outline-none focus:border-orange-500 transition-colors h-20 resize-none"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Rate your experience"}),(0,Xi.jsx)("div",{className:"flex items-center gap-2",children:[1,2,3,4,5].map(e=>(0,Xi.jsx)("button",{onClick:()=>p(t=>({...t,rating:e})),className:"p-1",children:(0,Xi.jsx)(cl,{className:"w-6 h-6 "+(e<=h.rating?"text-yellow-400 fill-current":"text-gray-600")})},e))})]}),(0,Xi.jsx)("button",{onClick:async()=>{const e={id:Date.now().toString(),destination:i,...h,author:"CurrentUser",date:(new Date).toISOString().split("T")[0]};g(t=>[e,...t]),p({budgetTips:"",environment:"",bestTime:"",transportation:"",highlights:"",tips:"",rating:5}),s(!1),a("destination"),o(""),c(null)},className:"w-full py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-medium transition-colors",children:"Share Experience"})]}),"info"===n&&(0,Xi.jsx)("div",{className:"space-y-6",children:d?(0,Xi.jsxs)("div",{className:"text-center py-8",children:[(0,Xi.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto mb-4"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"Fetching comprehensive destination information..."})]}):m&&(0,Xi.jsxs)("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2",children:[(0,Xi.jsxs)("div",{className:"bg-app-background rounded-xl p-4 border border-app-borders",children:[(0,Xi.jsx)("h3",{className:"font-bold text-app-text-primary mb-3 text-lg",children:"\ud83d\udccd Overview"}),(0,Xi.jsx)("p",{className:"text-app-text-muted mb-3",children:m.description}),(0,Xi.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("span",{className:"font-medium text-orange-500",children:"Coordinates:"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:m.geography.coordinates})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("span",{className:"font-medium text-orange-500",children:"Altitude:"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:m.geography.altitude})]})]})]}),(0,Xi.jsxs)("div",{className:"bg-app-background rounded-xl p-4 border border-app-borders",children:[(0,Xi.jsxs)("h3",{className:"font-bold text-app-text-primary mb-3 flex items-center gap-2",children:[(0,Xi.jsx)(ul,{className:"w-5 h-5 text-orange-500"}),"Weather & Forecast"]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)("div",{className:"text-3xl font-bold text-app-text-primary",children:m.weather.temperature}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:m.weather.condition})]}),(0,Xi.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("span",{className:"text-orange-500",children:"Humidity:"})," ",m.weather.humidity]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("span",{className:"text-orange-500",children:"Wind:"})," ",m.weather.windSpeed]})]})]}),(0,Xi.jsx)("div",{className:"grid grid-cols-5 gap-2",children:m.weather.forecast.map((e,t)=>(0,Xi.jsxs)("div",{className:"text-center text-xs bg-app-card-surface rounded-lg p-2",children:[(0,Xi.jsx)("div",{className:"font-medium text-app-text-primary",children:e.day}),(0,Xi.jsx)("div",{className:"text-orange-500",children:e.temp}),(0,Xi.jsx)("div",{className:"text-app-text-muted",children:e.condition})]},t))})]}),(0,Xi.jsxs)("div",{className:"bg-app-background rounded-xl p-4 border border-app-borders",children:[(0,Xi.jsxs)("h3",{className:"font-bold text-app-text-primary mb-3 flex items-center gap-2",children:[(0,Xi.jsx)(hl,{className:"w-5 h-5 text-orange-500"}),"How to Reach & Transportation"]}),(0,Xi.jsxs)("div",{className:"space-y-3",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-orange-500 mb-1",children:"\u2708\ufe0f By Air"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:m.transportation.howToReach.byAir})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-orange-500 mb-1",children:"\ud83d\ude97 By Road"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:m.transportation.howToReach.byRoad})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-orange-500 mb-1",children:"\ud83d\ude82 By Train"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:m.transportation.howToReach.byTrain})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-orange-500 mb-1",children:"Local Transport"}),(0,Xi.jsx)("div",{className:"flex flex-wrap gap-2",children:m.transportation.localTransport.map((e,t)=>(0,Xi.jsx)("span",{className:"px-2 py-1 bg-orange-500/20 text-orange-500 rounded-full text-xs",children:e},t))})]})]})]}),(0,Xi.jsxs)("div",{className:"bg-app-background rounded-xl p-4 border border-app-borders",children:[(0,Xi.jsxs)("h3",{className:"font-bold text-app-text-primary mb-3 flex items-center gap-2",children:[(0,Xi.jsx)(Do,{className:"w-5 h-5 text-orange-500"}),"When to Visit"]}),(0,Xi.jsxs)("div",{className:"space-y-3",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-green-500 mb-1",children:"\ud83c\udf1f Peak Season"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:m.bestTimeToVisit.peak})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-blue-500 mb-1",children:"\ud83d\udcb0 Off-Peak Season"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:m.bestTimeToVisit.offPeak})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-red-500 mb-1",children:"\u274c Avoid"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:m.bestTimeToVisit.avoid})]})]})]}),(0,Xi.jsxs)("div",{className:"bg-app-background rounded-xl p-4 border border-app-borders",children:[(0,Xi.jsxs)("h3",{className:"font-bold text-app-text-primary mb-3 flex items-center gap-2",children:[(0,Xi.jsx)(pl,{className:"w-5 h-5 text-orange-500"}),"What to Do"]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-orange-500 mb-2",children:"\ud83c\udfd4\ufe0f Adventure Activities"}),(0,Xi.jsx)("div",{className:"grid grid-cols-2 gap-1",children:m.thingsToDo.adventure.map((e,t)=>(0,Xi.jsxs)("div",{className:"text-sm text-app-text-muted flex items-center gap-2",children:[(0,Xi.jsx)("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full"}),e]},t))})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-orange-500 mb-2",children:"\ud83c\udfdb\ufe0f Cultural Experiences"}),(0,Xi.jsx)("div",{className:"grid grid-cols-2 gap-1",children:m.thingsToDo.cultural.map((e,t)=>(0,Xi.jsxs)("div",{className:"text-sm text-app-text-muted flex items-center gap-2",children:[(0,Xi.jsx)("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full"}),e]},t))})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-orange-500 mb-2",children:"\ud83c\udf3f Nature & Photography"}),(0,Xi.jsx)("div",{className:"grid grid-cols-2 gap-1",children:m.thingsToDo.nature.map((e,t)=>(0,Xi.jsxs)("div",{className:"text-sm text-app-text-muted flex items-center gap-2",children:[(0,Xi.jsx)("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full"}),e]},t))})]})]})]}),(0,Xi.jsxs)("div",{className:"bg-app-background rounded-xl p-4 border border-app-borders",children:[(0,Xi.jsxs)("h3",{className:"font-bold text-app-text-primary mb-3 flex items-center gap-2",children:[(0,Xi.jsx)(Ji,{className:"w-5 h-5 text-orange-500"}),"Where to Go Nearby"]}),(0,Xi.jsx)("div",{className:"space-y-3",children:m.nearbyPlaces.map((e,t)=>(0,Xi.jsxs)("div",{className:"bg-app-card-surface rounded-lg p-3 border border-app-borders",children:[(0,Xi.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,Xi.jsx)("h4",{className:"font-medium text-app-text-primary",children:e.name}),(0,Xi.jsx)("div",{className:"text-xs text-orange-500",children:e.distance})]}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted mb-1",children:e.description}),(0,Xi.jsxs)("div",{className:"text-xs text-app-text-muted",children:["\ud83d\udd50 ",e.travelTime]})]},t))})]}),(0,Xi.jsxs)("div",{className:"bg-app-background rounded-xl p-4 border border-app-borders",children:[(0,Xi.jsxs)("h3",{className:"font-bold text-app-text-primary mb-3 flex items-center gap-2",children:[(0,Xi.jsx)(ml,{className:"w-5 h-5 text-orange-500"}),"Cost Breakdown & Budget Planning"]}),(0,Xi.jsxs)("div",{className:"bg-blue-500/10 rounded-lg p-3 mb-4",children:[(0,Xi.jsx)("div",{className:"text-sm text-app-text-muted mb-1",children:m.costBreakdown.exchangeRate}),(0,Xi.jsx)("div",{className:"text-sm text-app-text-muted",children:m.costBreakdown.seasonalNote})]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[(0,Xi.jsxs)("div",{className:"bg-green-500/10 rounded-lg p-3 text-center",children:[(0,Xi.jsx)("div",{className:"font-medium text-green-500 text-sm",children:"Budget"}),(0,Xi.jsx)("div",{className:"text-app-text-primary font-bold",children:m.costBreakdown.dailyBudget.budget})]}),(0,Xi.jsxs)("div",{className:"bg-orange-500/10 rounded-lg p-3 text-center",children:[(0,Xi.jsx)("div",{className:"font-medium text-orange-500 text-sm",children:"Mid-Range"}),(0,Xi.jsx)("div",{className:"text-app-text-primary font-bold",children:m.costBreakdown.dailyBudget.midRange})]}),(0,Xi.jsxs)("div",{className:"bg-purple-500/10 rounded-lg p-3 text-center",children:[(0,Xi.jsx)("div",{className:"font-medium text-purple-500 text-sm",children:"Luxury"}),(0,Xi.jsx)("div",{className:"text-app-text-primary font-bold",children:m.costBreakdown.dailyBudget.luxury})]})]}),(0,Xi.jsxs)("div",{className:"space-y-4 mb-4",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("div",{className:"font-medium text-orange-500 mb-2",children:"\ud83c\udfe8 Accommodation"}),(0,Xi.jsxs)("div",{className:"text-sm space-y-1",children:[(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Budget: ",m.costBreakdown.breakdown.accommodation.budget]}),(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Mid-Range: ",m.costBreakdown.breakdown.accommodation.midRange]}),(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Luxury: ",m.costBreakdown.breakdown.accommodation.luxury]})]})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("div",{className:"font-medium text-orange-500 mb-2",children:"\ud83c\udf7d\ufe0f Food"}),(0,Xi.jsxs)("div",{className:"text-sm space-y-1",children:[(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Street Food: ",m.costBreakdown.breakdown.food.streetFood]}),(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Restaurants: ",m.costBreakdown.breakdown.food.restaurants]}),(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Fine Dining: ",m.costBreakdown.breakdown.food.fineDining]})]})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("div",{className:"font-medium text-orange-500 mb-2",children:"\ud83d\ude97 Transportation"}),(0,Xi.jsxs)("div",{className:"text-sm space-y-1",children:[(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Local: ",m.costBreakdown.breakdown.transportation.local]}),(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Taxi: ",m.costBreakdown.breakdown.transportation.taxi]}),(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Auto: ",m.costBreakdown.breakdown.transportation.autoRickshaw]}),(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Intercity: ",m.costBreakdown.breakdown.transportation.intercity]})]})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("div",{className:"font-medium text-orange-500 mb-2",children:"\ud83c\udfaf Activities"}),(0,Xi.jsxs)("div",{className:"text-sm space-y-1",children:[(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Free: ",m.costBreakdown.breakdown.activities.free]}),(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Paid: ",m.costBreakdown.breakdown.activities.paid]}),(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Premium: ",m.costBreakdown.breakdown.activities.premium]}),(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Guide: ",m.costBreakdown.breakdown.activities.guide]})]})]})]}),(0,Xi.jsxs)("div",{className:"bg-orange-500/20 rounded-lg p-3 mb-3",children:[(0,Xi.jsx)("div",{className:"font-bold text-orange-500 mb-2",children:"\ud83d\udcc5 Weekly Estimates"}),(0,Xi.jsxs)("div",{className:"text-sm space-y-1",children:[(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Budget: ",m.costBreakdown.weeklyEstimate.budget]}),(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Mid-Range: ",m.costBreakdown.weeklyEstimate.midRange]}),(0,Xi.jsxs)("div",{className:"text-app-text-muted",children:["Luxury: ",m.costBreakdown.weeklyEstimate.luxury]})]})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-orange-500 mb-2",children:"\ud83d\udca1 Budget Tips"}),m.costBreakdown.budgetTips.map((e,t)=>(0,Xi.jsxs)("div",{className:"text-sm text-app-text-muted flex items-start gap-2 mb-1",children:[(0,Xi.jsx)("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full mt-2"}),e]},t))]})]}),(0,Xi.jsxs)("div",{className:"bg-app-background rounded-xl p-4 border border-app-borders",children:[(0,Xi.jsxs)("h3",{className:"font-bold text-app-text-primary mb-3 flex items-center gap-2",children:[(0,Xi.jsx)(yo,{className:"w-5 h-5 text-orange-500"}),"Culture & Local Information"]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-orange-500 mb-1",children:"\ud83d\udde3\ufe0f Languages"}),(0,Xi.jsx)("div",{className:"flex flex-wrap gap-2",children:m.culture.language.map((e,t)=>(0,Xi.jsx)("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-500 rounded-full text-xs",children:e},t))})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-orange-500 mb-1",children:"\ud83c\udf89 Festivals"}),(0,Xi.jsx)("div",{className:"flex flex-wrap gap-2",children:m.culture.festivals.map((e,t)=>(0,Xi.jsx)("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-500 rounded-full text-xs",children:e},t))})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-orange-500 mb-1",children:"\ud83c\udf7d\ufe0f Local Cuisine"}),(0,Xi.jsx)("div",{className:"flex flex-wrap gap-2",children:m.culture.cuisine.map((e,t)=>(0,Xi.jsx)("span",{className:"px-2 py-1 bg-green-500/20 text-green-500 rounded-full text-xs",children:e},t))})]})]})]}),(0,Xi.jsxs)("div",{className:"bg-app-background rounded-xl p-4 border border-app-borders",children:[(0,Xi.jsxs)("h3",{className:"font-bold text-app-text-primary mb-3 flex items-center gap-2",children:[(0,Xi.jsx)(dl,{className:"w-5 h-5 text-orange-500"}),"Safety & Travel Requirements"]}),(0,Xi.jsxs)("div",{className:"space-y-3",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-green-500 mb-1",children:"\u2705 Safety Information"}),m.safety.generalSafety.map((e,t)=>(0,Xi.jsxs)("div",{className:"text-sm text-app-text-muted flex items-start gap-2 mb-1",children:[(0,Xi.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2"}),e]},t))]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-blue-500 mb-1",children:"\ud83d\udccb Documents Required"}),m.travelRequirements.documents.map((e,t)=>(0,Xi.jsxs)("div",{className:"text-sm text-app-text-muted flex items-start gap-2 mb-1",children:[(0,Xi.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2"}),e]},t))]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-red-500 mb-1",children:"\ud83d\udea8 Emergency Contacts"}),(0,Xi.jsx)("div",{className:"grid grid-cols-2 gap-2",children:m.safety.emergencyContacts.map((e,t)=>(0,Xi.jsx)("div",{className:"text-sm text-app-text-muted bg-red-500/10 rounded px-2 py-1",children:e},t))})]})]})]}),(0,Xi.jsxs)("div",{className:"bg-app-background rounded-xl p-4 border border-app-borders",children:[(0,Xi.jsxs)("h3",{className:"font-bold text-app-text-primary mb-3 flex items-center gap-2",children:[(0,Xi.jsx)(pl,{className:"w-5 h-5 text-orange-500"}),"Photography & Connectivity"]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-orange-500 mb-1",children:"\ud83d\udcf8 Best Photography Spots"}),(0,Xi.jsx)("div",{className:"flex flex-wrap gap-2",children:m.photography.bestSpots.map((e,t)=>(0,Xi.jsx)("span",{className:"px-2 py-1 bg-orange-500/20 text-orange-500 rounded-full text-xs",children:e},t))})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-blue-500 mb-1",children:"\ud83d\udcf6 Connectivity"}),(0,Xi.jsxs)("div",{className:"text-sm space-y-1",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("span",{className:"text-orange-500",children:"Internet:"})," ",m.connectivity.internetSpeed]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("span",{className:"text-orange-500",children:"WiFi:"})," ",m.connectivity.wifiAvailability]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("span",{className:"text-orange-500",children:"Charging:"})," ",m.connectivity.chargingPoints]})]})]})]})]})]})})]})})})]})},xl=()=>{const[e,r]=(0,t.useState)(""),s=t.useRef(null),[n,a]=(0,t.useState)(!1),[i,o]=(0,t.useState)([]);return(0,t.useEffect)(()=>{const t=e.trim();if(t.length<2)return o([]),void a(!1);let r=!1;a(!0);const s=setTimeout(async()=>{try{let s=[];try{s=await el.default.searchUsers(t,5)}catch(e){}r||(o(s),a(!1))}catch{r||a(!1)}},300);return()=>{r=!0,clearTimeout(s)}},[e]),(0,Xi.jsx)("div",{className:"min-h-screen bg-app-background",children:(0,Xi.jsx)("div",{className:"pb-20 md:pb-0",children:(0,Xi.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,Xi.jsx)("h1",{className:"text-3xl font-bold mb-2 text-app-text-primary",children:"Explore"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"Discover stories, people, and trending content"})]}),(0,Xi.jsx)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-12",children:(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)(Lo,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-app-text-muted"}),(0,Xi.jsx)("input",{type:"text",placeholder:"Search users, stories, trending...",value:e,onChange:e=>r(e.target.value),ref:s,className:"w-full pl-12 pr-11 py-4 bg-app-card-surface border border-app-borders rounded-2xl text-app-text-primary placeholder-app-text-muted focus:outline-none focus:border-app-primary-accent transition-colors text-lg"}),e&&(0,Xi.jsx)("button",{"aria-label":"Clear search",onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 rounded-full hover:bg-app-borders/50",children:(0,Xi.jsx)(bo,{className:"w-4 h-4 text-app-text-muted"})}),e.trim().length>=2&&(0,Xi.jsxs)("div",{className:"absolute z-20 mt-2 w-full bg-app-card-surface border border-app-borders rounded-xl shadow-lg overflow-hidden",children:[n&&(0,Xi.jsx)("div",{className:"px-4 py-3 text-sm text-app-text-muted",children:"Searching\u2026"}),!n&&(0,Xi.jsxs)("div",{className:"max-h-80 overflow-y-auto",children:[i.length>0&&(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("div",{className:"px-4 py-2 text-xs uppercase tracking-wide text-app-text-muted",children:"Users"}),i.map((e,t)=>(0,Xi.jsxs)("div",{className:"px-4 py-3 flex items-center gap-3 hover:bg-black/20 cursor-pointer",onClick:()=>{window.dispatchEvent(new CustomEvent("nav:followers",{detail:{q:e.username}}))},children:[(0,Xi.jsx)("div",{className:"w-8 h-8 rounded-full bg-app-borders flex items-center justify-center",children:(0,Xi.jsx)(yo,{className:"w-4 h-4 text-app-text-muted"})}),(0,Xi.jsx)("div",{className:"text-app-text-primary",children:e.username})]},t))]}),0===i.length&&(0,Xi.jsx)("div",{className:"px-4 py-3 text-sm text-app-text-muted",children:"No results"})]})]})]})}),(0,Xi.jsx)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-12 mt-16",children:(0,Xi.jsx)(fl,{})}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col items-center justify-center text-center py-20",children:[(0,Xi.jsx)("div",{className:"w-20 h-20 bg-orange-500 rounded-full flex items-center justify-center mb-8",children:(0,Xi.jsx)(Lo,{className:"w-10 h-10 text-white"})}),(0,Xi.jsx)("h3",{className:"text-2xl font-semibold text-app-text-primary mb-4",children:"Ready to Explore"}),(0,Xi.jsx)("p",{className:"text-app-text-muted mb-8 max-w-md mx-auto leading-relaxed",children:"Use the search bar above to discover users, stories, and trending content. Share your daily routine to get started!"}),(0,Xi.jsx)("button",{onClick:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.focus()},className:"px-8 py-4 bg-orange-500 hover:bg-orange-600 text-white rounded-full font-medium transition-colors text-lg",children:"Start Searching"})]})]})})})},gl=Vi("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),yl=Vi("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),vl=Vi("chart-no-axes-column-increasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),bl="pedal_follow_graph_v1",wl="pedal_follow_requests_v1";function jl(){try{const e=localStorage.getItem(bl);return e?JSON.parse(e):[]}catch{return[]}}function Nl(e){localStorage.setItem(bl,JSON.stringify(e))}function kl(){try{const e=localStorage.getItem(wl);return e?JSON.parse(e):[]}catch{return[]}}function Sl(e){localStorage.setItem(wl,JSON.stringify(e))}const Cl=new class{listFollowing(e){return jl().filter(t=>t.followerId===e).map(e=>e.followingId)}listFollowers(e){return jl().filter(t=>t.followingId===e).map(e=>e.followerId)}isFollowing(e,t){return jl().some(r=>r.followerId===e&&r.followingId===t)}follow(e,t){if(e===t)return;const r=jl();r.some(r=>r.followerId===e&&r.followingId===t)||(r.push({followerId:e,followingId:t,createdAt:Date.now()}),Nl(r),window.dispatchEvent(new CustomEvent("realtime:follow",{detail:{followerId:e,followingId:t,ts:Date.now()}})))}unfollow(e,t){Nl(jl().filter(r=>!(r.followerId===e&&r.followingId===t))),window.dispatchEvent(new CustomEvent("realtime:unfollow",{detail:{followerId:e,followingId:t,ts:Date.now()}}))}requestFollow(e,t){if(e===t)return;if(this.isFollowing(e,t))return;const r=kl();r.some(r=>r.followerId===e&&r.followingId===t)||(r.push({followerId:e,followingId:t,createdAt:Date.now()}),Sl(r),window.dispatchEvent(new CustomEvent("realtime:follow_request",{detail:{followerId:e,followingId:t,ts:Date.now()}})))}acceptRequest(e,t){let r=kl();r.some(r=>r.followerId===e&&r.followingId===t)&&(r=r.filter(r=>!(r.followerId===e&&r.followingId===t)),Sl(r),this.follow(e,t),window.dispatchEvent(new CustomEvent("realtime:follow_accept",{detail:{followerId:e,followingId:t,ts:Date.now()}})))}declineRequest(e,t){let r=kl();const s=r.length;r=r.filter(r=>!(r.followerId===e&&r.followingId===t)),r.length!==s&&(Sl(r),window.dispatchEvent(new CustomEvent("realtime:follow_decline",{detail:{followerId:e,followingId:t,ts:Date.now()}})))}listIncomingRequests(e){return kl().filter(t=>t.followingId===e)}listSentRequests(e){return kl().filter(t=>t.followerId===e)}},El=Cl;class _l{constructor(){this.posts=[],this.users=[],this.notifications=[],this.messages=[],this.conversations=[],this.logs=[],this.liveStats={activeUsers:0,todayRides:0,newPosts:0,onlineNow:0,totalUsers:0,totalPosts:0,totalLikes:0,totalComments:0},this.initializeData(),this.startLiveStatsUpdater()}static getInstance(){return _l.instance||(_l.instance=new _l),_l.instance}initializeData(){this.loadFromStorage(),0===this.posts.length&&this.initializeSampleData()}loadFromStorage(){try{const e=localStorage.getItem("pedal_posts"),t=localStorage.getItem("pedal_users"),r=localStorage.getItem("pedal_notifications"),s=localStorage.getItem("pedal_messages"),n=localStorage.getItem("pedal_logs");e&&(this.posts=JSON.parse(e)),t&&(this.users=JSON.parse(t)),r&&(this.notifications=JSON.parse(r)),s&&(this.messages=JSON.parse(s)),n&&(this.logs=JSON.parse(n))}catch(e){console.error("Error loading data from storage:",e),this.log("error","system","Failed to load data from localStorage",void 0,e)}}saveToStorage(){try{localStorage.setItem("pedal_posts",JSON.stringify(this.posts)),localStorage.setItem("pedal_users",JSON.stringify(this.users)),localStorage.setItem("pedal_notifications",JSON.stringify(this.notifications)),localStorage.setItem("pedal_messages",JSON.stringify(this.messages)),localStorage.setItem("pedal_logs",JSON.stringify(this.logs.slice(-1e3)))}catch(e){console.error("Error saving data to storage:",e)}}initializeSampleData(){this.users=[{id:"user-1",username:"alexracing",fullName:"Alex Rodriguez",email:"alex@example.com",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",bio:"Motorcycle enthusiast and adventure rider",location:"California, USA",joinDate:"2023-01-15",followers:1250,following:890,posts:156,likes:2340,isOnline:!0,lastSeen:(new Date).toISOString()},{id:"user-2",username:"sarahrides",fullName:"Sarah Chen",email:"sarah@example.com",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face",bio:"Weekend warrior and track day enthusiast",location:"New York, USA",joinDate:"2023-03-22",followers:890,following:654,posts:89,likes:1560,isOnline:!1,lastSeen:new Date(Date.now()-18e5).toISOString()}],this.posts=[{id:"post-1",authorId:"user-1",author:{id:"user-1",name:"Alex Rodriguez",username:"alexracing",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face"},content:"Just completed an epic 500km ride through the Himalayas! The views were absolutely breathtaking. \ud83c\udfd4\ufe0f\ud83c\udfcd\ufe0f",images:["https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?w=600&h=400&fit=crop"],location:"Himalayas, India",timestamp:new Date(Date.now()-72e5).toISOString(),likes:124,comments:[],shares:8,upvotes:89,downvotes:3,tags:["#HimalayanRide","#Adventure","#MotorcycleLife"],isLiked:!1,isBookmarked:!1,isUpvoted:!1,isDownvoted:!1}],this.updateLiveStats(),this.saveToStorage()}startLiveStatsUpdater(){setInterval(()=>{this.updateLiveStats()},5e3)}updateLiveStats(){const e=Date.now(),t=this.users.filter(t=>t.isOnline||e-new Date(t.lastSeen).getTime()<3e5);this.liveStats={activeUsers:Math.floor(500*Math.random())+2e3,todayRides:Math.floor(100*Math.random())+800,newPosts:Math.floor(50*Math.random())+150,onlineNow:t.length+Math.floor(200*Math.random())+500,totalUsers:this.users.length+Math.floor(1e3*Math.random())+1e4,totalPosts:this.posts.length+Math.floor(500*Math.random())+5e3,totalLikes:this.posts.reduce((e,t)=>e+t.likes,0)+Math.floor(1e3*Math.random())+25e3,totalComments:this.posts.reduce((e,t)=>e+t.comments.length,0)+Math.floor(200*Math.random())+3e3}}log(e,t,r,s,n){const a={id:`log-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:(new Date).toISOString(),level:e,category:t,message:r,userId:s,details:n};this.logs.push(a),console.log(`[${e.toUpperCase()}] ${t}: ${r}`,n),this.logs.length>1e3&&(this.logs=this.logs.slice(-1e3)),this.saveToStorage()}createPost(e){const t={...e,id:`post-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:(new Date).toISOString(),likes:0,comments:[],shares:0,upvotes:0,downvotes:0,isLiked:!1,isBookmarked:!1,isUpvoted:!1,isDownvoted:!1};return this.posts.unshift(t),this.log("info","post",`New post created by ${e.author.username}`,e.authorId),this.saveToStorage(),t}getPosts(){return[...this.posts]}getPost(e){return this.posts.find(t=>t.id===e)}likePost(e,t){const r=this.posts.find(t=>t.id===e);return!!r&&(r.isLiked=!r.isLiked,r.likes+=r.isLiked?1:-1,this.log("info","post",`Post ${r.isLiked?"liked":"unliked"} by user`,t),this.saveToStorage(),r.isLiked)}upvotePost(e,t){const r=this.posts.find(t=>t.id===e);return!!r&&(r.isDownvoted&&(r.downvotes--,r.isDownvoted=!1),r.isUpvoted=!r.isUpvoted,r.upvotes+=r.isUpvoted?1:-1,this.log("info","post",`Post ${r.isUpvoted?"upvoted":"un-upvoted"} by user`,t),this.saveToStorage(),r.isUpvoted)}downvotePost(e,t){const r=this.posts.find(t=>t.id===e);return!!r&&(r.isUpvoted&&(r.upvotes--,r.isUpvoted=!1),r.isDownvoted=!r.isDownvoted,r.downvotes+=r.isDownvoted?1:-1,this.log("info","post",`Post ${r.isDownvoted?"downvoted":"un-downvoted"} by user`,t),this.saveToStorage(),r.isDownvoted)}bookmarkPost(e,t){const r=this.posts.find(t=>t.id===e);return!!r&&(r.isBookmarked=!r.isBookmarked,this.log("info","post",`Post ${r.isBookmarked?"bookmarked":"unbookmarked"} by user`,t),this.saveToStorage(),r.isBookmarked)}sharePost(e,t){const r=this.posts.find(t=>t.id===e);return!!r&&(r.shares++,this.log("info","post","Post shared by user",t),this.saveToStorage(),!0)}addComment(e,t){const r=this.posts.find(t=>t.id===e);if(!r)return null;const s={...t,id:`comment-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:(new Date).toISOString(),likes:0,upvotes:0,downvotes:0,replies:[],isLiked:!1,isUpvoted:!1,isDownvoted:!1};return r.comments.push(s),this.log("info","post",`Comment added to post by ${t.author.username}`,t.authorId),this.saveToStorage(),s}addReply(e,t,r){const s=this.posts.find(t=>t.id===e);if(!s)return null;const n=s.comments.find(e=>e.id===t);if(!n)return null;const a={id:r.id,postId:e,authorId:r.author.username,author:r.author,content:r.content,timestamp:r.timestamp,likes:0,upvotes:0,downvotes:0,replies:[],isLiked:!1,isUpvoted:!1,isDownvoted:!1};return n.replies.push(a),this.log("info","post",`Reply added to comment by ${r.author.username}`),this.saveToStorage(),a}upvoteComment(e,t,r){const s=this.posts.find(t=>t.id===e);if(!s)return!1;const n=s.comments.find(e=>e.id===t);return!!n&&(n.isDownvoted&&(n.isDownvoted=!1,n.downvotes=Math.max(0,n.downvotes-1)),n.isUpvoted=!n.isUpvoted,n.upvotes+=n.isUpvoted?1:-1,n.upvotes=Math.max(0,n.upvotes),this.log("info","post",`Comment ${n.isUpvoted?"upvoted":"un-upvoted"} by user`,r),this.saveToStorage(),n.isUpvoted)}downvoteComment(e,t,r){const s=this.posts.find(t=>t.id===e);if(!s)return!1;const n=s.comments.find(e=>e.id===t);return!!n&&(n.isUpvoted&&(n.isUpvoted=!1,n.upvotes=Math.max(0,n.upvotes-1)),n.isDownvoted=!n.isDownvoted,n.downvotes+=n.isDownvoted?1:-1,n.downvotes=Math.max(0,n.downvotes),this.log("info","post",`Comment ${n.isDownvoted?"downvoted":"un-downvoted"} by user`,r),this.saveToStorage(),n.isDownvoted)}upvoteReply(e,t,r,s){const n=this.posts.find(t=>t.id===e);if(!n)return!1;const a=n.comments.find(e=>e.id===t);if(!a)return!1;const i=a.replies.find(e=>e.id===r);return!!i&&(i.isDownvoted&&(i.isDownvoted=!1,i.downvotes=Math.max(0,i.downvotes-1)),i.isUpvoted=!i.isUpvoted,i.upvotes+=i.isUpvoted?1:-1,i.upvotes=Math.max(0,i.upvotes),this.log("info","post",`Reply ${i.isUpvoted?"upvoted":"un-upvoted"} by user`,s),this.saveToStorage(),i.isUpvoted)}downvoteReply(e,t,r,s){const n=this.posts.find(t=>t.id===e);if(!n)return!1;const a=n.comments.find(e=>e.id===t);if(!a)return!1;const i=a.replies.find(e=>e.id===r);return!!i&&(i.isUpvoted&&(i.isUpvoted=!1,i.upvotes=Math.max(0,i.upvotes-1)),i.isDownvoted=!i.isDownvoted,i.downvotes+=i.isDownvoted?1:-1,i.downvotes=Math.max(0,i.downvotes),this.log("info","post",`Reply ${i.isDownvoted?"downvoted":"un-downvoted"} by user`,s),this.saveToStorage(),i.isDownvoted)}getUsers(){return[...this.users]}getUser(e){return this.users.find(t=>t.id===e)}updateUserOnlineStatus(e,t){const r=this.users.find(t=>t.id===e);r&&(r.isOnline=t,r.lastSeen=(new Date).toISOString(),this.saveToStorage())}followUser(e,t){try{if(!e||!t||e===t)return!1;if(El.isFollowing(e,t))return!1;El.follow(e,t);const r=this.users.find(t=>t.id===e),s=this.users.find(e=>e.id===t);return r&&(r.following=Math.max(0,(r.following||0)+1)),s&&(s.followers=Math.max(0,(s.followers||0)+1)),r&&s&&this.addNotification({type:"follow",fromUserId:r.id,fromUser:{name:r.fullName||r.username,username:r.username,avatar:r.avatar},toUserId:s.id,message:`${r.fullName||r.username} started following you`}),this.log("info","user","User followed",e,{followingId:t}),this.saveToStorage(),!0}catch(r){return this.log("error","user","Failed to follow user",e,{followingId:t,error:r}),!1}}unfollowUser(e,t){try{if(!e||!t)return!1;if(!El.isFollowing(e,t))return!1;El.unfollow(e,t);const r=this.users.find(t=>t.id===e),s=this.users.find(e=>e.id===t);return r&&(r.following=Math.max(0,(r.following||0)-1)),s&&(s.followers=Math.max(0,(s.followers||0)-1)),this.log("info","user","User unfollowed",e,{followingId:t}),this.saveToStorage(),!0}catch(r){return this.log("error","user","Failed to unfollow user",e,{followingId:t,error:r}),!1}}getNotifications(e){return this.notifications.filter(t=>t.toUserId===e)}addNotification(e){const t={...e,id:`notif-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:(new Date).toISOString(),isRead:!1};return this.notifications.unshift(t),this.saveToStorage(),t}markNotificationAsRead(e){const t=this.notifications.find(t=>t.id===e);return!!t&&(t.isRead=!0,this.saveToStorage(),!0)}getLiveStats(){return{...this.liveStats}}getLogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this.logs.slice(-e).reverse()}clearLogs(){this.logs=[],this.saveToStorage(),this.log("info","system","System logs cleared")}}_l.instance=void 0;const Pl=_l.getInstance(),Tl=()=>{const{user:e}=ho(),[r,s]=(0,t.useState)(!1),n=(0,t.useCallback)(async t=>{const r=(null===e||void 0===e?void 0:e.id)||"user-1";return Pl.likePost(t,r),Pl.getPosts()},[null===e||void 0===e?void 0:e.id]),a=(0,t.useCallback)(async t=>{const r=(null===e||void 0===e?void 0:e.id)||"user-1";return Pl.upvotePost(t,r),Pl.getPosts()},[null===e||void 0===e?void 0:e.id]),i=(0,t.useCallback)(async t=>{const r=(null===e||void 0===e?void 0:e.id)||"user-1";return Pl.downvotePost(t,r),Pl.getPosts()},[null===e||void 0===e?void 0:e.id]),o=(0,t.useCallback)(async t=>{const r=(null===e||void 0===e?void 0:e.id)||"user-1";return Pl.bookmarkPost(t,r),Pl.getPosts()},[null===e||void 0===e?void 0:e.id]),l=(0,t.useCallback)(async t=>{const r=(null===e||void 0===e?void 0:e.id)||"user-1";if(Pl.sharePost(t,r),navigator.share)try{await navigator.share({title:"Check out this post on PEDAL",text:"Interesting post from the PEDAL community",url:window.location.href})}catch(s){}else try{await navigator.clipboard.writeText(window.location.href),m("Link copied to clipboard!","success")}catch(s){m("Failed to copy link","error")}return Pl.getPosts()},[null===e||void 0===e?void 0:e.id]),c=(0,t.useCallback)(async(t,r)=>{if(!r.trim())return null;const s=(null===e||void 0===e?void 0:e.id)||"user-1",n={postId:t,authorId:s,author:{id:s,name:(null===e||void 0===e?void 0:e.fullName)||"User",username:(null===e||void 0===e?void 0:e.username)||"user",avatar:(null===e||void 0===e?void 0:e.avatar)||"https://ui-avatars.com/api/?name=User&background=FF6B00&color=fff"},content:r.trim()};return Pl.addComment(t,n)},[e]),d=(0,t.useCallback)((t,r)=>{Pl.log("info","user",`Navigation to ${t}`,null===e||void 0===e?void 0:e.id,r)},[null===e||void 0===e?void 0:e.id]),u=(0,t.useCallback)(async(t,r)=>{s(!0),Pl.log("info","user",`Search performed: ${t}`,null===e||void 0===e?void 0:e.id,{query:t,filters:r});try{await new Promise(e=>setTimeout(e,500));const e=Pl.getPosts();return e.filter(e=>e.content.toLowerCase().includes(t.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(t.toLowerCase()))||e.author.name.toLowerCase().includes(t.toLowerCase()))}finally{s(!1)}},[null===e||void 0===e?void 0:e.id]),h=(0,t.useCallback)(async t=>{s(!0);try{const r=(null===e||void 0===e?void 0:e.id)||"user-1",s=Pl.createPost({authorId:r,author:{id:r,name:(null===e||void 0===e?void 0:e.fullName)||"User",username:(null===e||void 0===e?void 0:e.username)||"user",avatar:(null===e||void 0===e?void 0:e.avatar)||"https://ui-avatars.com/api/?name=User&background=FF6B00&color=fff"},content:t.content,images:t.images||[],location:t.location,tags:t.tags||[]});return m("Post created successfully!","success"),s}catch(r){throw m("Failed to create post","error"),r}finally{s(!1)}},[e]),p=(0,t.useCallback)(async t=>{const r=(null===e||void 0===e?void 0:e.id)||"user-1";Pl.log("info","user","Follow action",r,{targetUserId:t});return Pl.followUser(r,t)?(m("Followed successfully","success"),!0):(m("Failed to follow user","error"),!1)},[null===e||void 0===e?void 0:e.id]),m=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const r=document.createElement("div");r.className="fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg text-white transition-all duration-300 "+("success"===t?"bg-green-500":"error"===t?"bg-red-500":"bg-blue-500"),r.textContent=e,document.body.appendChild(r),setTimeout(()=>{r.style.transform="translateX(0)",r.style.opacity="1"},100),setTimeout(()=>{r.style.transform="translateX(100%)",r.style.opacity="0",setTimeout(()=>{document.body.removeChild(r)},300)},3e3)},[]),f=(0,t.useCallback)((t,r)=>{switch(Pl.log("info","user",`Menu action: ${t}`,null===e||void 0===e?void 0:e.id,r),t){case"logout":localStorage.removeItem("isAuthenticated"),localStorage.removeItem("user"),window.location.reload();break;case"theme-toggle":m("Theme toggled","info");break;case"clear-cache":localStorage.clear(),m("Cache cleared","success");break;default:m(`Action: ${t}`,"info")}},[null===e||void 0===e?void 0:e.id]),x=(0,t.useCallback)(async t=>{s(!0);try{const r=Array.from(t),s=[];for(const t of r){await new Promise(e=>setTimeout(e,1e3));const r=URL.createObjectURL(t);s.push(r),Pl.log("info","user",`File uploaded: ${t.name}`,null===e||void 0===e?void 0:e.id,{fileName:t.name,fileSize:t.size,fileType:t.type})}return m(`${r.length} file(s) attached. They will be posted when you tap Share.`,"info"),s}catch(r){throw m("Failed to upload files","error"),r}finally{s(!1)}},[null===e||void 0===e?void 0:e.id]),g=(0,t.useCallback)(async(t,r)=>{s(!0);try{return Pl.log("info","user",`Form submitted: ${t}`,null===e||void 0===e?void 0:e.id,r),await new Promise(e=>setTimeout(e,1e3)),m("Form submitted successfully!","success"),!0}catch(n){throw m("Failed to submit form","error"),n}finally{s(!1)}},[null===e||void 0===e?void 0:e.id]);return{handleLikePost:n,handleUpvotePost:a,handleDownvotePost:i,handleBookmarkPost:o,handleSharePost:l,handleAddComment:c,handleNavigation:d,handleSearch:u,handleCreatePost:h,handleFollowUser:p,showNotification:m,handleMenuAction:f,handleFileUpload:x,handleFormSubmit:g,isLoading:r}},Al=()=>{const{isDarkMode:e}=fo(),{user:r}=ho(),{handleCreatePost:s,handleFileUpload:n}=Tl(),{addPost:a}=so(),[i,o]=(0,t.useState)({content:"",media:[],tags:[],mentions:[],audience:"Public"}),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(!1),[h,p]=(0,t.useState)(""),[m,f]=(0,t.useState)("compose"),[x,g]=(0,t.useState)(!1),[y]=(0,t.useState)(280),[v,b]=(0,t.useState)(!1),[w,j]=(0,t.useState)(null),N=(0,t.useRef)(null),k=(0,t.useRef)(null),[S,C]=(0,t.useState)(!1),[E,_]=(0,t.useState)(""),[P,T]=(0,t.useState)([]),[A,O]=(0,t.useState)(null),[R,M]=(0,t.useState)(!1),[L,D]=(0,t.useState)(""),[I,F]=(0,t.useState)([]),[U,$]=(0,t.useState)([]),[B,z]=(0,t.useState)(!1),[q,V]=(0,t.useState)(["",""]),[H,W]=(0,t.useState)("1 day"),[K,J]=(0,t.useState)(!1),[G,Q]=(0,t.useState)(0),[Y,X]=(0,t.useState)(!1),[Z,ee]=(0,t.useState)(""),[te,re]=(0,t.useState)(""),[se,ne]=(0,t.useState)(""),[ae,ie]=(0,t.useState)(""),[oe,le]=(0,t.useState)(""),[ce,de]=(0,t.useState)(""),[ue,he]=(0,t.useState)(""),[pe,me]=(0,t.useState)(null),[fe,xe]=(0,t.useState)(null),[ge,ye]=(0,t.useState)(!1),[ve,be]=(0,t.useState)(["Are you an active rider?","Do you have proper safety gear?"]),we=(0,t.useCallback)(()=>{V(e=>e.length<4?[...e,""]:e)},[]),je=(0,t.useCallback)(e=>{V(t=>t.filter((t,r)=>r!==e))},[]),Ne=(0,t.useCallback)((e,t)=>{V(r=>r.map((r,s)=>s===e?t:r))},[]),ke=(0,t.useRef)(null),Se=(0,t.useRef)(null),Ce=(0,t.useRef)(null);(0,t.useEffect)(()=>{ke.current&&(ke.current.style.height="auto",ke.current.style.height=`${ke.current.scrollHeight}px`)},[i.content]);(0,t.useCallback)((e,t)=>{const r={id:`${Date.now()}-${Math.random()}`,type:"image",url:e,aspectRatio:1};o(e=>({...e,media:[...e.media,r]}))},[]),(0,t.useCallback)(e=>{console.error("Upload error:",e)},[]);const Ee=()=>{w&&(w.getTracks().forEach(e=>e.stop()),j(null)),b(!1)};(0,t.useEffect)(()=>(v?(async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1});j(e),N.current&&(N.current.srcObject=e)}catch(e){console.error("Error accessing camera:",e),alert("Could not access camera. Please check permissions.")}})():Ee(),()=>{w&&w.getTracks().forEach(e=>e.stop())}),[v]);const _e=e=>{O(e),o(t=>({...t,location:`${e.name}, ${e.address}`})),C(!1)},Pe=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{(async()=>{T([])})(e.coords.latitude,e.coords.longitude)},e=>{console.error("Error getting location:",e),T([])}):T([])},Te=async e=>{F([])},Ae=(0,t.useCallback)(async e=>{const t=Array.from(e);if(0!==t.length){u(!0);try{const e=[];for(const r of t)if(r.type.startsWith("image/")){const t=await new Promise(e=>{const t=new FileReader;t.onload=t=>{var r;return e(null===(r=t.target)||void 0===r?void 0:r.result)},t.readAsDataURL(r)}),s=new window.Image,n=await new Promise(e=>{s.onload=()=>e(s.width/s.height),s.src=t});e.push({id:`${Date.now()}-${Math.random()}`,type:"image",url:t,aspectRatio:n})}else if(r.type.startsWith("video/")){const t=await new Promise(e=>{const t=new FileReader;t.onload=t=>{var r;return e(null===(r=t.target)||void 0===r?void 0:r.result)},t.readAsDataURL(r)});e.push({id:`${Date.now()}-${Math.random()}`,type:"video",url:t})}o(t=>({...t,media:[...t.media,...e]}))}catch(r){p("Failed to upload media")}finally{u(!1)}}},[]),Oe=(0,t.useCallback)(e=>{o(t=>({...t,media:t.media.filter(t=>t.id!==e)}))},[]),Re=(0,t.useCallback)(e=>{e.preventDefault(),g(!0)},[]),Me=(0,t.useCallback)(e=>{e.preventDefault(),g(!1)},[]),Le=(0,t.useCallback)(async e=>{e.preventDefault(),g(!1);const t=Array.from(e.dataTransfer.files).filter(e=>e.type.startsWith("image/")||e.type.startsWith("video/"));t.length>0&&await Ae(t)},[Ae]),De=(0,t.useCallback)(async()=>{const e=i.content.trim().length>0,t=i.media.length>0,n=i.poll&&i.poll.options.filter(e=>e.trim()).length>=2,l=Y&&Z.trim()&&te.trim()&&se&&ae;if(e||t||n||l)if(!l||Z.trim()&&te.trim()&&se&&ae)if(i.content.length>y)p(`Post exceeds ${y} character limit`);else{c(!0),p("");try{var d,u;const e={id:Date.now(),author:{name:(null===r||void 0===r?void 0:r.fullName)||"Your Name",username:`@${(null===r||void 0===r?void 0:r.username)||"username"}`,avatar:(null===r||void 0===r?void 0:r.avatar)||"https://ui-avatars.com/api/?name=User&background=FF6B00&color=fff",verified:!1,level:1},content:i.content.trim(),image:null===(d=i.media.find(e=>"image"===e.type))||void 0===d?void 0:d.url,images:i.media.filter(e=>"image"===e.type).map(e=>e.url),video:null===(u=i.media.find(e=>"video"===e.type))||void 0===u?void 0:u.url,timestamp:"now",location:i.location,upvotes:1,downvotes:0,userVote:1,pedalPoints:10,comments:[],shares:0,views:0,bookmarked:!1,tags:i.tags,poll:(()=>{const e=q.map(e=>e.trim()).filter(Boolean);if(e.length>=2)return{options:e,duration:H,votes:[]}})(),event:Y&&Z.trim()&&te.trim()&&se&&ae?{title:Z,description:te,startDate:se,startTime:ae,endDate:oe,endTime:ce,location:ue,latitude:pe,longitude:fe,requireVerification:ge,interestedUsers:[],notInterestedUsers:[],verificationQuestions:ge?ve.filter(e=>e.trim()):[]}:void 0};a(e),await s({content:i.content.trim(),images:i.media.filter(e=>"image"===e.type).map(e=>e.url),location:i.location,tags:i.tags}),setTimeout(()=>{o({content:"",media:[],tags:[],mentions:[],audience:"Public"}),f("compose"),z(!1),V(["",""]),W("1 day"),X(!1),ee(""),re(""),ne(""),ie(""),le(""),de(""),he(""),me(null),xe(null),ye(!1),O(null),$([])},1500)}catch(h){p("Failed to create post. Please try again.")}finally{c(!1)}}else p("Event title, description, start date and time are required");else p("Add some content to your post")},[i,r,y,a,s,Y,Z,te,se,ae,oe,ce,ue,pe,fe,ge,ve]),Ie=e=>{let{media:t}=e;if(0===t.length)return null;return(0,Xi.jsx)("div",{className:"grid gap-2 rounded-xl overflow-hidden "+(r=t.length,1===r?"grid-cols-1":2===r?"grid-cols-2":"grid-cols-2 grid-rows-2"),children:t.slice(0,4).map((e,r)=>(0,Xi.jsxs)("div",{className:"relative group cursor-pointer "+(3===t.length&&0===r?"row-span-2":""),onClick:()=>{Q(r),J(!0)},children:["image"===e.type?(0,Xi.jsx)("img",{src:e.url,alt:"",className:"w-full h-full object-cover",style:{aspectRatio:1===t.length?e.aspectRatio:1}}):(0,Xi.jsx)("video",{src:e.url,className:"w-full h-full object-cover",muted:!0}),(0,Xi.jsx)("button",{onClick:t=>{t.stopPropagation(),Oe(e.id)},className:"absolute top-2 right-2 w-8 h-8 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,Xi.jsx)(bo,{className:"w-4 h-4 text-white"})}),3===r&&t.length>4&&(0,Xi.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,Xi.jsxs)("span",{className:"text-white text-xl font-bold",children:["+",t.length-4]})})]},e.id))});var r};return(0,Xi.jsx)("div",{className:"min-h-screen bg-app-background pb-28",children:(0,Xi.jsxs)("div",{className:"max-w-2xl mx-auto p-4",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsx)("h1",{className:"text-2xl font-bold text-app-text-primary",children:"Create Post"}),(0,Xi.jsx)("button",{onClick:()=>window.history.back(),className:"p-2 rounded-full hover:bg-app-surface transition-colors",children:(0,Xi.jsx)(bo,{className:"w-6 h-6 text-app-text-muted"})})]}),h&&(0,Xi.jsx)("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl",children:(0,Xi.jsx)("p",{className:"text-red-400",children:h})}),(0,Xi.jsxs)("div",{className:"bg-app-surface rounded-2xl border border-app-borders transition-all "+(x?"border-app-primary-accent border-2":""),onDragOver:Re,onDragLeave:Me,onDrop:Le,children:[(0,Xi.jsx)("div",{className:"p-4 border-b border-app-borders",children:(0,Xi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("img",{src:(null===r||void 0===r?void 0:r.avatar)||"https://ui-avatars.com/api/?name=User&background=FF6B00&color=fff",alt:"Your avatar",className:"w-12 h-12 rounded-full"}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("p",{className:"font-semibold text-app-text-primary",children:(null===r||void 0===r?void 0:r.fullName)||"Your Name"}),(0,Xi.jsxs)("select",{value:i.audience,onChange:e=>o(t=>({...t,audience:e.target.value})),className:"text-sm bg-app-background border border-app-borders rounded-lg px-2 py-1 text-app-text-muted",children:[(0,Xi.jsx)("option",{value:"Public",children:"Public"}),(0,Xi.jsx)("option",{value:"Friends",children:"Friends"}),(0,Xi.jsx)("option",{value:"Only me",children:"Only me"})]})]})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)("button",{onClick:()=>{C(!0),Pe()},className:"p-2 rounded-full hover:bg-app-primary-accent/10 transition-colors group",title:"Add Location",children:(0,Xi.jsx)(Ji,{className:"w-5 h-5 text-app-text-muted group-hover:text-app-primary-accent"})}),(0,Xi.jsx)("button",{onClick:()=>{M(!0),Te()},className:"p-2 rounded-full hover:bg-app-primary-accent/10 transition-colors group",title:"Tag People",children:(0,Xi.jsx)(yo,{className:"w-5 h-5 text-app-text-muted group-hover:text-app-primary-accent"})})]})]})}),(0,Xi.jsxs)("div",{className:"p-4",children:[(0,Xi.jsx)("textarea",{ref:ke,value:i.content,onChange:e=>{o(t=>({...t,content:e.target.value})),p("")},placeholder:"What's happening?",className:"w-full bg-transparent text-app-text-primary placeholder-app-text-muted text-xl resize-none border-none outline-none",rows:3,maxLength:y}),A&&(0,Xi.jsxs)("div",{className:"mt-3 flex items-center gap-2 p-3 bg-app-background rounded-lg border border-app-borders",children:[(0,Xi.jsx)(Ji,{className:"w-4 h-4 text-app-primary-accent"}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("p",{className:"text-sm font-medium text-app-text-primary",children:A.name}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted",children:A.address})]}),(0,Xi.jsx)("button",{onClick:()=>{O(null),o(e=>({...e,location:void 0}))},className:"p-1 rounded-full hover:bg-app-text-muted/20 transition-colors",children:(0,Xi.jsx)(bo,{className:"w-4 h-4 text-app-text-muted"})})]}),U.length>0&&(0,Xi.jsxs)("div",{className:"mt-3 p-3 bg-app-background rounded-lg border border-app-borders",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Xi.jsx)(yo,{className:"w-4 h-4 text-app-primary-accent"}),(0,Xi.jsx)("p",{className:"text-sm font-medium text-app-text-primary",children:"Tagged People"})]}),(0,Xi.jsx)("div",{className:"flex flex-wrap gap-2",children:U.map(e=>(0,Xi.jsxs)("div",{className:"flex items-center gap-2 bg-app-surface rounded-full px-3 py-1 border border-app-borders",children:[(0,Xi.jsx)("img",{src:e.avatar,alt:e.name,className:"w-5 h-5 rounded-full"}),(0,Xi.jsxs)("span",{className:"text-sm text-app-text-primary",children:["@",e.username]}),(0,Xi.jsx)("button",{onClick:()=>(e=>{const t=U.filter(t=>t.id!==e);$(t),o(e=>({...e,mentions:t.map(e=>e.username)}))})(e.id),className:"p-0.5 rounded-full hover:bg-app-text-muted/20 transition-colors",children:(0,Xi.jsx)(bo,{className:"w-3 h-3 text-app-text-muted"})})]},e.id))})]}),(0,Xi.jsx)("div",{className:"flex justify-end mt-2",children:(0,Xi.jsxs)("span",{className:"text-sm "+(i.content.length>.8*y?"text-red-400":"text-app-text-muted"),children:[i.content.length,"/",y]})})]}),i.media.length>0&&(0,Xi.jsx)("div",{className:"px-4 pb-4",children:(0,Xi.jsx)(Ie,{media:i.media})}),B&&(0,Xi.jsx)("div",{className:"px-4 pb-4",children:(0,Xi.jsxs)("div",{className:"border border-app-borders rounded-xl p-4 bg-app-background",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Xi.jsx)("p",{className:"text-sm font-medium text-app-text-primary",children:"Create a poll"}),(0,Xi.jsx)("button",{onClick:()=>z(!1),className:"p-2 rounded-lg hover:bg-app-surface text-app-text-muted","aria-label":"Close poll",children:(0,Xi.jsx)(bo,{className:"w-4 h-4"})})]}),(0,Xi.jsx)("div",{className:"space-y-2",children:q.map((e,t)=>(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)("input",{type:"text",value:e,onChange:e=>Ne(t,e.target.value),placeholder:`Option ${t+1}`,className:"flex-1 px-3 py-2 bg-app-background border border-app-borders rounded-lg text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none"}),q.length>2&&(0,Xi.jsx)("button",{type:"button",onClick:()=>je(t),className:"p-2 rounded-lg border border-app-borders hover:border-red-500 hover:text-red-400 text-app-text-muted","aria-label":"Remove option",children:(0,Xi.jsx)(bo,{className:"w-4 h-4"})})]},t))}),(0,Xi.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,Xi.jsx)("button",{type:"button",onClick:we,disabled:q.length>=4,className:"px-3 py-2 rounded-lg "+(q.length>=4?"bg-app-text-muted/20 text-app-text-muted cursor-not-allowed":"border border-app-borders text-app-text-muted hover:border-app-primary-accent hover:text-app-primary-accent"),children:"Add option"}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,Xi.jsx)("span",{className:"text-app-text-muted",children:"Duration"}),(0,Xi.jsxs)("select",{value:H,onChange:e=>W(e.target.value),className:"px-2 py-1 bg-app-background border border-app-borders rounded-lg text-app-text-primary focus:border-app-primary-accent focus:outline-none",children:[(0,Xi.jsx)("option",{children:"1 day"}),(0,Xi.jsx)("option",{children:"3 days"}),(0,Xi.jsx)("option",{children:"7 days"})]})]})]})]})}),Y&&(0,Xi.jsx)("div",{className:"px-4 pb-4",children:(0,Xi.jsxs)("div",{className:"border border-app-borders rounded-xl p-4 bg-app-background",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Xi.jsx)("p",{className:"text-sm font-medium text-app-text-primary",children:"Create an event"}),(0,Xi.jsx)("button",{onClick:()=>X(!1),className:"p-2 rounded-lg hover:bg-app-surface text-app-text-muted","aria-label":"Close event",children:(0,Xi.jsx)(bo,{className:"w-4 h-4"})})]}),(0,Xi.jsxs)("div",{className:"space-y-3",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-1",children:"Event Title"}),(0,Xi.jsx)("input",{type:"text",value:Z,onChange:e=>ee(e.target.value),placeholder:"Enter event title",className:"w-full px-3 py-2 bg-app-background border border-app-borders rounded-lg text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-1",children:"Description"}),(0,Xi.jsx)("textarea",{value:te,onChange:e=>re(e.target.value),placeholder:"Describe your event",rows:3,className:"w-full px-3 py-2 bg-app-background border border-app-borders rounded-lg text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none resize-none"})]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-1",children:"Start Date"}),(0,Xi.jsx)("input",{type:"date",value:se,onChange:e=>ne(e.target.value),className:"w-full px-3 py-2 bg-app-background border border-app-borders rounded-lg text-app-text-primary focus:border-app-primary-accent focus:outline-none"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-1",children:"Start Time"}),(0,Xi.jsx)("input",{type:"time",value:ae,onChange:e=>ie(e.target.value),className:"w-full px-3 py-2 bg-app-background border border-app-borders rounded-lg text-app-text-primary focus:border-app-primary-accent focus:outline-none"})]})]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-1",children:"End Date (Optional)"}),(0,Xi.jsx)("input",{type:"date",value:oe,onChange:e=>le(e.target.value),className:"w-full px-3 py-2 bg-app-background border border-app-borders rounded-lg text-app-text-primary focus:border-app-primary-accent focus:outline-none"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-1",children:"End Time (Optional)"}),(0,Xi.jsx)("input",{type:"time",value:ce,onChange:e=>de(e.target.value),className:"w-full px-3 py-2 bg-app-background border border-app-borders rounded-lg text-app-text-primary focus:border-app-primary-accent focus:outline-none"})]})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-1",children:"Location"}),(0,Xi.jsxs)("div",{className:"flex gap-2",children:[(0,Xi.jsx)("input",{type:"text",value:ue,onChange:e=>he(e.target.value),placeholder:"Event location",className:"flex-1 px-3 py-2 bg-app-background border border-app-borders rounded-lg text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none"}),(0,Xi.jsxs)("button",{type:"button",onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{me(e.coords.latitude),xe(e.coords.longitude),he(`${e.coords.latitude.toFixed(5)}, ${e.coords.longitude.toFixed(5)}`)},e=>{console.error("Error getting location:",e),alert("Unable to get your location. Please enter manually.")}):alert("Geolocation is not supported by this browser.")},className:"px-3 py-2 bg-app-primary-accent text-black rounded-lg hover:opacity-90 transition-opacity flex items-center gap-1",children:[(0,Xi.jsx)(Ji,{className:"w-4 h-4"}),"GPS"]})]})]}),(0,Xi.jsxs)("div",{className:"flex items-center justify-between p-3 bg-app-surface rounded-lg",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("p",{className:"text-sm font-medium text-app-text-primary",children:"Verify Users"}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted",children:"Require interested users to verify their legitimacy"})]}),(0,Xi.jsx)("button",{onClick:()=>ye(!ge),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(ge?"bg-app-primary-accent":"bg-app-text-muted/30"),children:(0,Xi.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(ge?"translate-x-6":"translate-x-1")})})]}),ge&&(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Verification Questions"}),(0,Xi.jsxs)("div",{className:"space-y-2",children:[ve.map((e,t)=>(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)("input",{type:"text",value:e,onChange:e=>{const r=[...ve];r[t]=e.target.value,be(r)},placeholder:`Question ${t+1}`,className:"flex-1 px-3 py-2 bg-app-background border border-app-borders rounded-lg text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none"}),ve.length>1&&(0,Xi.jsx)("button",{onClick:()=>{be(e=>e.filter((e,r)=>r!==t))},className:"p-2 rounded-lg border border-app-borders hover:border-red-500 hover:text-red-400 text-app-text-muted",children:(0,Xi.jsx)(bo,{className:"w-4 h-4"})})]},t)),ve.length<5&&(0,Xi.jsx)("button",{onClick:()=>be(e=>[...e,""]),className:"px-3 py-2 rounded-lg border border-app-borders text-app-text-muted hover:border-app-primary-accent hover:text-app-primary-accent",children:"Add question"})]})]})]})]})}),v&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,Xi.jsxs)("div",{className:"bg-app-surface rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Xi.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Xi.jsx)("h3",{className:"text-lg font-semibold text-app-text-primary",children:"Take Photo"}),(0,Xi.jsx)("button",{onClick:Ee,className:"text-app-text-muted hover:text-app-text-primary",children:(0,Xi.jsx)(bo,{className:"w-6 h-6"})})]}),(0,Xi.jsx)("div",{className:"relative mb-4",children:(0,Xi.jsx)("video",{ref:N,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full rounded-lg bg-black",style:{aspectRatio:"4/3"}})}),(0,Xi.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,Xi.jsx)("button",{onClick:()=>{if(N.current&&k.current){const e=N.current,t=k.current,r=t.getContext("2d");if(t.width=e.videoWidth,t.height=e.videoHeight,r){r.drawImage(e,0,0);const s=t.toDataURL("image/jpeg",.8),n={id:`${Date.now()}-${Math.random()}`,type:"image",url:s,aspectRatio:1};o(e=>({...e,media:[...e.media,n]})),Ee()}}},className:"bg-app-primary-accent hover:opacity-90 text-black px-6 py-2 rounded-lg font-medium transition-opacity",children:"Capture"}),(0,Xi.jsx)("button",{onClick:Ee,className:"bg-app-text-muted/20 hover:bg-app-text-muted/30 text-app-text-primary px-6 py-2 rounded-lg font-medium transition-colors",children:"Cancel"})]}),(0,Xi.jsx)("canvas",{ref:k,style:{display:"none"}})]})}),S&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,Xi.jsxs)("div",{className:"bg-app-surface rounded-lg max-w-md w-full mx-4 max-h-[80vh] overflow-hidden",children:[(0,Xi.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-app-borders",children:[(0,Xi.jsx)("h3",{className:"text-lg font-semibold text-app-text-primary",children:"Add Location"}),(0,Xi.jsx)("button",{onClick:()=>C(!1),className:"text-app-text-muted hover:text-app-text-primary",children:(0,Xi.jsx)(bo,{className:"w-6 h-6"})})]}),(0,Xi.jsx)("div",{className:"p-4 border-b border-app-borders",children:(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)("input",{type:"text",value:E,onChange:e=>_(e.target.value),placeholder:"Search for a location...",className:"w-full px-4 py-3 bg-app-background border border-app-borders rounded-lg text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none"}),(0,Xi.jsx)("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-app-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Xi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,Xi.jsx)("div",{className:"p-4 border-b border-app-borders",children:(0,Xi.jsxs)("button",{onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{const t=`${e.coords.latitude.toFixed(5)}, ${e.coords.longitude.toFixed(5)}`;_e({name:"Current Location",address:t})},e=>{console.error("Error getting location:",e),alert("Unable to get your location. Please check permissions.")})},className:"flex items-center gap-3 w-full p-3 rounded-lg hover:bg-app-background transition-colors",children:[(0,Xi.jsx)("div",{className:"w-10 h-10 bg-app-primary-accent/20 rounded-full flex items-center justify-center",children:(0,Xi.jsxs)("svg",{className:"w-5 h-5 text-app-primary-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Xi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Xi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,Xi.jsxs)("div",{className:"text-left",children:[(0,Xi.jsx)("p",{className:"font-medium text-app-text-primary",children:"Use Current Location"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:"Share your precise location"})]})]})}),(0,Xi.jsx)("div",{className:"overflow-y-auto max-h-64",children:P.filter(e=>""===E||e.name.toLowerCase().includes(E.toLowerCase())||e.address.toLowerCase().includes(E.toLowerCase())).map(e=>(0,Xi.jsxs)("button",{onClick:()=>_e({name:e.name,address:e.address}),className:"flex items-center gap-3 w-full p-4 hover:bg-app-background transition-colors border-b border-app-borders last:border-b-0",children:[(0,Xi.jsx)("div",{className:"w-10 h-10 bg-app-text-muted/20 rounded-full flex items-center justify-center",children:(0,Xi.jsx)(Ji,{className:"w-5 h-5 text-app-text-muted"})}),(0,Xi.jsxs)("div",{className:"text-left flex-1",children:[(0,Xi.jsx)("p",{className:"font-medium text-app-text-primary",children:e.name}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:e.address}),(0,Xi.jsx)("p",{className:"text-xs text-app-primary-accent",children:e.category})]})]},e.id))}),0===P.length&&(0,Xi.jsxs)("div",{className:"p-8 text-center",children:[(0,Xi.jsx)(Ji,{className:"w-12 h-12 text-app-text-muted mx-auto mb-3"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"Loading nearby places..."})]})]})}),R&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,Xi.jsxs)("div",{className:"bg-app-surface rounded-lg max-w-md w-full mx-4 max-h-[80vh] overflow-hidden",children:[(0,Xi.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-app-borders",children:[(0,Xi.jsx)("h3",{className:"text-lg font-semibold text-app-text-primary",children:"Tag People"}),(0,Xi.jsx)("button",{onClick:()=>M(!1),className:"text-app-text-muted hover:text-app-text-primary",children:(0,Xi.jsx)(bo,{className:"w-6 h-6"})})]}),(0,Xi.jsx)("div",{className:"p-4 border-b border-app-borders",children:(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)("input",{type:"text",value:L,onChange:e=>{D(e.target.value),Te(e.target.value)},placeholder:"Search people...",className:"w-full px-4 py-3 bg-app-background border border-app-borders rounded-lg text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none"}),(0,Xi.jsx)("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-app-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Xi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,Xi.jsx)("div",{className:"overflow-y-auto max-h-64",children:I.map(e=>{const t=U.find(t=>t.id===e.id);return(0,Xi.jsxs)("button",{onClick:()=>(e=>{if(!U.find(t=>t.id===e.id)){const t=[...U,e];$(t),o(e=>({...e,mentions:t.map(e=>e.username)}))}})(e),disabled:!!t,className:"flex items-center gap-3 w-full p-4 transition-colors border-b border-app-borders last:border-b-0 "+(t?"bg-app-primary-accent/10 cursor-not-allowed":"hover:bg-app-background"),children:[(0,Xi.jsx)("img",{src:e.avatar,alt:e.name,className:"w-10 h-10 rounded-full"}),(0,Xi.jsxs)("div",{className:"text-left flex-1",children:[(0,Xi.jsx)("p",{className:"font-medium text-app-text-primary",children:e.name}),(0,Xi.jsxs)("p",{className:"text-sm text-app-text-muted",children:["@",e.username]})]}),t&&(0,Xi.jsx)("div",{className:"w-6 h-6 bg-app-primary-accent rounded-full flex items-center justify-center",children:(0,Xi.jsx)("svg",{className:"w-4 h-4 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Xi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]},e.id)})}),0===I.length&&(0,Xi.jsxs)("div",{className:"p-8 text-center",children:[(0,Xi.jsx)(yo,{className:"w-12 h-12 text-app-text-muted mx-auto mb-3"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"No people found"})]})]})}),d&&(0,Xi.jsx)("div",{className:"px-4 pb-4",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-app-text-muted",children:[(0,Xi.jsx)(gl,{className:"w-4 h-4 animate-spin"}),(0,Xi.jsx)("span",{children:"Uploading media..."})]})}),x&&(0,Xi.jsx)("div",{className:"absolute inset-0 bg-app-primary-accent/10 border-2 border-dashed border-app-primary-accent rounded-2xl flex items-center justify-center",children:(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)(yl,{className:"w-12 h-12 mx-auto mb-2 text-app-primary-accent"}),(0,Xi.jsx)("p",{className:"text-app-primary-accent font-medium",children:"Drop your media here"})]})}),(0,Xi.jsx)("div",{className:"p-4 border-t border-app-borders",children:(0,Xi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Xi.jsx)("button",{onClick:()=>{var e;return null===(e=Se.current)||void 0===e?void 0:e.click()},className:"p-2 rounded-full hover:bg-app-primary-accent/10 transition-colors group",children:(0,Xi.jsx)(yl,{className:"w-5 h-5 text-app-text-muted group-hover:text-app-primary-accent"})}),(0,Xi.jsx)("button",{onClick:()=>{var e;return null===(e=Ce.current)||void 0===e?void 0:e.click()},className:"p-2 rounded-full hover:bg-app-primary-accent/10 transition-colors group",children:(0,Xi.jsx)("svg",{className:"w-5 h-5 text-app-text-muted group-hover:text-app-primary-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Xi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,Xi.jsx)("button",{onClick:()=>z(e=>!e),className:"p-2 rounded-full transition-colors group "+(B?"bg-app-primary-accent/10":"hover:bg-app-primary-accent/10"),children:(0,Xi.jsx)(vl,{className:"w-5 h-5 "+(B?"text-app-primary-accent":"text-app-text-muted group-hover:text-app-primary-accent")})}),(0,Xi.jsx)("button",{onClick:()=>b(!v),className:"p-2 rounded-full hover:bg-app-primary-accent/10 transition-colors group",title:"Live Camera",children:(0,Xi.jsx)(pl,{className:"w-5 h-5 text-app-text-muted group-hover:text-app-primary-accent"})})]}),(0,Xi.jsx)("button",{onClick:De,disabled:function(){const e=!!i.content.trim(),t=i.media.length>0,r=B&&q.map(e=>e.trim()).filter(Boolean).length>=2,s=Y&&Z.trim()&&te.trim();return l||d||!(e||t||r||s)}(),className:"px-6 py-2 rounded-full font-semibold transition-all "+(function(){const e=!!i.content.trim(),t=i.media.length>0,r=B&&q.map(e=>e.trim()).filter(Boolean).length>=2,s=Y&&Z.trim()&&te.trim();return l||d||!(e||t||r||s)}()?"bg-app-text-muted/20 text-app-text-muted cursor-not-allowed":"bg-app-primary-accent text-black hover:opacity-90"),children:l?"Posting...":"Post"})]})})]}),(0,Xi.jsx)("input",{ref:Se,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:e=>e.target.files&&Ae(e.target.files)}),(0,Xi.jsx)("input",{ref:Ce,type:"file",accept:"video/*",className:"hidden",onChange:e=>e.target.files&&Ae(e.target.files)})]})})},Ol=Vi("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),Rl=Vi("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),Ml=Vi("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Ll=()=>{const[e,r]=(0,t.useState)([]),[s,n]=(0,t.useState)("All"),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(new Set),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(null),[p,m]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{m(!0),r([])}catch(e){console.error("Failed to load news:",e)}finally{m(!1)}})()},[]);const f=e.filter(e=>{const t="All"===s||e.category===s,r=e.title.toLowerCase().includes(a.toLowerCase())||e.description.toLowerCase().includes(a.toLowerCase());return t&&r}),x=e=>{l(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},g=async e=>{const t=e.url&&"#"!==e.url?e.url:window.location.href;try{navigator.share?await navigator.share({title:e.title,text:e.description,url:t}):navigator.clipboard&&(await navigator.clipboard.writeText(t),h("Link copied to clipboard"),setTimeout(()=>h(null),1800))}catch(r){}};return(0,Xi.jsx)("div",{className:"min-h-screen bg-app-background",children:(0,Xi.jsx)("div",{className:"pb-20 md:pb-0",children:(0,Xi.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,Xi.jsxs)("div",{className:"mb-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Xi.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-app-primary-accent to-orange-500 rounded-xl flex items-center justify-center",children:(0,Xi.jsx)(Ol,{className:"w-6 h-6 text-white"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h1",{className:"text-2xl font-bold text-app-text-primary",children:"Latest Cycling News"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"Stay updated with the latest in cycling world"})]})]}),(0,Xi.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Xi.jsxs)("div",{className:"relative flex-1",children:[(0,Xi.jsx)(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-app-text-muted"}),(0,Xi.jsx)("input",{type:"text",placeholder:"Search news...",value:a,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-app-card-surface border border-app-borders rounded-lg text-app-text-primary placeholder-app-text-muted focus:outline-none focus:border-app-primary-accent transition-colors"})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)(Rl,{className:"w-4 h-4 text-app-text-muted"}),(0,Xi.jsx)("select",{value:s,onChange:e=>n(e.target.value),className:"px-3 py-2 bg-app-card-surface border border-app-borders rounded-lg text-app-text-primary focus:outline-none focus:border-app-primary-accent transition-colors",children:["All","Technology","Racing","Safety","Industry","Events"].map(e=>(0,Xi.jsx)("option",{value:e,children:e},e))})]})]})]}),(0,Xi.jsx)("div",{className:"space-y-6",children:f.map((e,t)=>(0,Xi.jsx)(Fi.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-app-card-surface rounded-xl border border-app-borders overflow-hidden hover:border-app-primary-accent/30 transition-colors",children:(0,Xi.jsxs)("div",{className:"md:flex",children:[(0,Xi.jsx)("div",{className:"md:w-1/3",children:(0,Xi.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-48 md:h-full object-cover"})}),(0,Xi.jsxs)("div",{className:"flex-1 p-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Xi.jsx)("span",{className:"px-2 py-1 bg-app-primary-accent/10 text-app-primary-accent border border-app-primary-accent/20 rounded-full text-xs font-medium",children:e.category}),(0,Xi.jsx)("span",{className:"text-xs font-medium text-app-primary-accent",children:e.source}),(0,Xi.jsxs)("span",{className:"text-xs text-app-text-muted flex items-center gap-1",children:[(0,Xi.jsx)(Do,{className:"w-3 h-3"}),e.publishedAt]}),(0,Xi.jsx)("span",{className:"text-xs text-app-text-muted",children:"\u2022"}),(0,Xi.jsx)("span",{className:"text-xs text-app-text-muted",children:e.readTime})]}),(0,Xi.jsx)("h2",{className:"text-xl font-bold text-app-text-primary mb-3 line-clamp-2",children:e.title}),(0,Xi.jsx)("p",{className:"text-app-text-muted mb-4 line-clamp-3 leading-relaxed",children:e.description}),(0,Xi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xi.jsxs)("button",{onClick:()=>(e=>{d(e)})(e),className:"flex items-center gap-2 text-app-primary-accent hover:text-app-primary-accent/80 transition-colors font-medium",children:[(0,Xi.jsx)(Ml,{className:"w-4 h-4"}),"Read full article"]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("button",{onClick:()=>x(e.id),className:"p-2 rounded-lg transition-colors "+(o.has(e.id)?"text-app-primary-accent bg-app-primary-accent/10":"text-app-text-muted hover:text-app-primary-accent hover:bg-app-primary-accent/10"),children:(0,Xi.jsx)(Eo,{className:"w-4 h-4 "+(o.has(e.id)?"fill-current":"")})}),(0,Xi.jsx)("button",{onClick:()=>g(e),className:"p-2 rounded-lg text-app-text-muted hover:text-app-primary-accent hover:bg-app-primary-accent/10 transition-colors",children:(0,Xi.jsx)(So,{className:"w-4 h-4"})})]})]})]})]})},e.id))}),(0,Xi.jsx)("div",{className:"text-center mt-8",children:(0,Xi.jsx)("button",{onClick:()=>{p||(m(!0),setTimeout(()=>{e.length;const t=[];r(e=>[...e,...t]),m(!1)},800))},disabled:p,className:"px-6 py-3 bg-app-primary-accent text-white rounded-lg hover:bg-app-primary-accent/90 transition-colors font-medium disabled:opacity-60",children:p?"Loading...":"Load More Articles"})}),(0,Xi.jsx)(Fi.div,{animate:{opacity:c?1:0,pointerEvents:c?"auto":"none"},className:"fixed inset-0 z-40",children:c&&(0,Xi.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>d(null),children:(0,Xi.jsxs)("div",{className:"bg-app-card-surface border border-app-borders rounded-2xl max-w-3xl w-full overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)("img",{src:c.image,alt:c.title,className:"w-full h-56 object-cover"}),(0,Xi.jsx)("button",{onClick:()=>d(null),className:"absolute top-3 right-3 p-2 rounded-lg bg-black/40 text-white hover:bg-black/60",children:(0,Xi.jsx)(bo,{className:"w-5 h-5"})})]}),(0,Xi.jsxs)("div",{className:"p-5 space-y-3",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-xs text-app-text-muted",children:[(0,Xi.jsx)("span",{className:"px-2 py-1 bg-app-primary-accent/10 text-app-primary-accent border border-app-primary-accent/20 rounded-full font-medium",children:c.category}),(0,Xi.jsx)("span",{className:"font-medium text-app-primary-accent",children:c.source}),(0,Xi.jsx)("span",{children:"\u2022"}),(0,Xi.jsx)("span",{children:c.publishedAt}),(0,Xi.jsx)("span",{children:"\u2022"}),(0,Xi.jsx)("span",{children:c.readTime})]}),(0,Xi.jsx)("h3",{className:"text-xl font-bold text-app-text-primary",children:c.title}),(0,Xi.jsx)("p",{className:"text-app-text-muted leading-relaxed",children:c.description}),(0,Xi.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsxs)("button",{onClick:()=>(e=>{const t=e.url&&"#"!==e.url?e.url:`https://news.example.com/article/${e.id}`;window.open(t,"_blank","noopener,noreferrer")})(c),className:"px-3 py-2 rounded-lg bg-app-primary-accent text-white text-sm flex items-center gap-2",children:[(0,Xi.jsx)(Ml,{className:"w-4 h-4"}),"Open in browser"]}),(0,Xi.jsxs)("button",{onClick:()=>g(c),className:"px-3 py-2 rounded-lg bg-app-primary-accent/10 text-app-primary-accent border border-app-primary-accent/20 text-sm flex items-center gap-2",children:[(0,Xi.jsx)(So,{className:"w-4 h-4"}),"Share"]})]}),(0,Xi.jsx)("button",{onClick:()=>x(c.id),className:"p-2 rounded-lg "+(o.has(c.id)?"text-app-primary-accent bg-app-primary-accent/10":"text-app-text-muted hover:text-app-primary-accent hover:bg-app-primary-accent/10"),children:(0,Xi.jsx)(Eo,{className:"w-5 h-5 "+(o.has(c.id)?"fill-current":"")})})]})]})]})})}),(0,Xi.jsx)(Fi.div,{animate:{y:u?0:50,opacity:u?1:0},className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-40",children:u&&(0,Xi.jsx)("div",{className:"px-4 py-2 rounded-lg bg-black/80 text-white text-sm border border-white/10",children:u})})]})})})},Dl=Vi("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),Il=Vi("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Fl=Vi("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Ul=Vi("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]),$l=Vi("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Bl=()=>{const{user:e}=eo(),{conversations:r,messages:s,sendMessage:n,loading:a}=(()=>{const e=(0,t.useContext)(oo);if(void 0===e)throw new Error("useMessages must be used within a MessageProvider");return e})(),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(""),[h,p]=(0,t.useState)(window.innerWidth<768);(0,t.useEffect)(()=>{const e=()=>p(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const m=async()=>{if(d.trim()&&l)try{await n(l,d.trim()),u("")}catch(e){console.error("Failed to send message:",e)}},f=r.find(e=>e.id===l),x=l&&s[l]||[],g=r.filter(e=>e.name.toLowerCase().includes(i.toLowerCase()));return(0,Xi.jsxs)("div",{className:"min-h-screen bg-[#1F1F1F] flex pb-24 md:pb-0",children:[(0,Xi.jsxs)("div",{className:(f&&h?"hidden":"flex")+" flex-col w-full md:w-80 lg:w-96 bg-[#2A2A2A] border-r border-gray-700",children:[(0,Xi.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Xi.jsx)("h1",{className:"text-xl font-bold text-[#EAEAEA]",children:"Messages"}),(0,Xi.jsx)("button",{className:"p-2 bg-[#FF6B00] text-white rounded-lg hover:bg-orange-600 transition-colors",children:(0,Xi.jsx)(Ki,{className:"w-5 h-5"})})]}),(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-[#A0A0A0]"}),(0,Xi.jsx)("input",{type:"text",placeholder:"Search conversations...",value:i,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-[#1F1F1F] border border-gray-700 rounded-lg text-[#EAEAEA] placeholder-[#A0A0A0] focus:outline-none focus:border-[#FF6B00] transition-colors"})]})]}),(0,Xi.jsx)("div",{className:"flex-1 overflow-y-auto",children:a?(0,Xi.jsx)("div",{className:"p-4 text-center text-[#A0A0A0]",children:"Loading conversations..."}):0===g.length?(0,Xi.jsx)("div",{className:"p-4 text-center text-[#A0A0A0]",children:i?"No conversations found":"No conversations yet"}):g.map(e=>(0,Xi.jsx)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onClick:()=>c(e.id),className:"p-4 hover:bg-[#1F1F1F] transition-colors cursor-pointer border-b border-gray-800 "+(l===e.id?"bg-[#FF6B00]/10 border-l-4 border-l-[#FF6B00]":""),children:(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)("img",{src:e.avatar||"https://i.pravatar.cc/100",alt:e.name,className:"w-12 h-12 rounded-full object-cover"}),(0,Xi.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-[#2A2A2A]"})]}),(0,Xi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Xi.jsx)("h3",{className:"font-semibold text-[#EAEAEA] truncate",children:e.name}),(0,Xi.jsx)("span",{className:"text-xs text-[#A0A0A0] flex-shrink-0",children:e.lastMessageAt?new Date(e.lastMessageAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),(0,Xi.jsx)("p",{className:"text-sm text-[#A0A0A0] truncate",children:e.lastMessage||"No messages yet"})]})]})},e.id))})]}),(0,Xi.jsx)("div",{className:(!f&&h?"hidden":"flex")+" flex-1 flex-col bg-[#1F1F1F] relative",children:f?(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-700 bg-[#2A2A2A]",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[h&&(0,Xi.jsx)("button",{onClick:()=>c(null),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors mr-2",children:(0,Xi.jsx)(Ro,{className:"w-5 h-5 text-[#EAEAEA]"})}),(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)("img",{src:f.avatar||"https://i.pravatar.cc/100",alt:f.name,className:"w-10 h-10 rounded-full object-cover"}),(0,Xi.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-[#2A2A2A]"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h3",{className:"font-semibold text-[#EAEAEA]",children:f.name}),(0,Xi.jsx)("p",{className:"text-xs text-[#A0A0A0]",children:"Online"})]})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:(0,Xi.jsx)(Dl,{className:"w-5 h-5 text-[#A0A0A0]"})}),(0,Xi.jsx)("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:(0,Xi.jsx)(Il,{className:"w-5 h-5 text-[#A0A0A0]"})}),(0,Xi.jsx)("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:(0,Xi.jsx)(Fl,{className:"w-5 h-5 text-[#A0A0A0]"})})]})]}),(0,Xi.jsx)("div",{className:"flex-1 p-4 overflow-y-auto space-y-4 pb-28 md:pb-6",children:0===x.length?(0,Xi.jsx)("div",{className:"text-center text-[#A0A0A0] text-sm",children:(0,Xi.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,Xi.jsx)("div",{className:"h-px bg-gray-700 flex-1"}),(0,Xi.jsx)("span",{children:"Start of conversation"}),(0,Xi.jsx)("div",{className:"h-px bg-gray-700 flex-1"})]})}):x.map(t=>(0,Xi.jsx)("div",{className:"flex "+(t.senderId===(null===e||void 0===e?void 0:e.id)?"justify-end":"justify-start"),children:(0,Xi.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-2xl "+(t.senderId===(null===e||void 0===e?void 0:e.id)?"bg-[#FF6B00] text-white":"bg-[#2A2A2A] text-[#EAEAEA]"),children:[(0,Xi.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:t.text}),(0,Xi.jsx)("div",{className:"flex items-center justify-end gap-1 mt-1 "+(t.senderId===(null===e||void 0===e?void 0:e.id)?"text-white/70":"text-[#A0A0A0]"),children:(0,Xi.jsx)("span",{className:"text-xs",children:new Date(t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})})]})},t.id))}),(0,Xi.jsx)("div",{className:"sticky bottom-0 z-20 p-3 md:p-4 border-t border-gray-700 bg-[#2A2A2A] pb-[env(safe-area-inset-bottom)] shadow-[0_-2px_8px_rgba(0,0,0,0.3)]",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:(0,Xi.jsx)(Ul,{className:"w-5 h-5 text-[#A0A0A0]"})}),(0,Xi.jsx)("div",{className:"flex-1 relative",children:(0,Xi.jsx)("input",{type:"text",placeholder:"Type a message...",value:d,onChange:e=>u(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m())},className:"w-full px-4 py-2 bg-[#1F1F1F] border border-gray-700 rounded-full text-[#EAEAEA] placeholder-[#A0A0A0] focus:outline-none focus:border-[#FF6B00] transition-colors"})}),(0,Xi.jsx)("button",{onClick:m,disabled:!d.trim(),className:"p-2 bg-[#FF6B00] text-white rounded-full hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,Xi.jsx)($l,{className:"w-5 h-5"})})]})})]}):(0,Xi.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)(ko,{className:"w-16 h-16 text-[#A0A0A0] mx-auto mb-4"}),(0,Xi.jsx)("h2",{className:"text-xl font-semibold text-[#EAEAEA] mb-2",children:"Select a conversation"}),(0,Xi.jsx)("p",{className:"text-[#A0A0A0]",children:"Choose a conversation from the sidebar to start messaging"})]})})})]})},zl=Vi("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),ql=Vi("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Vl=Vi("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Hl=Vi("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Wl=Vi("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),Kl=Vi("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),Jl=Vi("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),Gl=Vi("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),Ql=()=>{const[e,r]=(0,t.useState)("all"),[s,n]=(0,t.useState)(""),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)("grid"),[p,m]=(0,t.useState)("popular"),[f,x]=(0,t.useState)(null),[g,y]=(0,t.useState)(!1),[v,b]=(0,t.useState)("address"),[w,j]=(0,t.useState)(!1),[N,k]=(0,t.useState)({fullName:"",phone:"",email:"",line1:"",line2:"",city:"",state:"",pincode:""}),[S,C]=(0,t.useState)({method:"upi"}),E=[{id:"all",label:"All Products",icon:"\ud83d\udecd\ufe0f",count:156},{id:"accessories",label:"Accessories",icon:"\ud83d\udd27",count:45},{id:"merchandise",label:"Merchandise",icon:"\ud83d\udc55",count:32}],[_,P]=(0,t.useState)([]),[T,A]=(0,t.useState)(!0),[O,R]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{try{A(!0),P([])}catch(e){R("Failed to load products"),console.error("Error loading products:",e)}finally{A(!1)}})()},[]);const M=[..._.filter(t=>{const r="all"===e||t.category===e,n=t.name.toLowerCase().includes(s.toLowerCase())||t.description.toLowerCase().includes(s.toLowerCase())||t.brand.toLowerCase().includes(s.toLowerCase());return r&&n})].sort((e,t)=>{switch(p){case"price-low":return e.price-t.price;case"price-high":return t.price-e.price;case"rating":return t.rating-e.rating;default:return t.reviews-e.reviews}}),L=(e,t)=>{0!==t?l(r=>r.map(r=>r.id===e?{...r,quantity:t}:r)):(e=>{l(t=>t.filter(t=>t.id!==e))})(e)},D=()=>o.reduce((e,t)=>e+t.quantity,0),I=()=>o.reduce((e,t)=>e+t.price*t.quantity,0),F=()=>{const{fullName:e,phone:t,line1:r,city:s,state:n,pincode:a}=N;return!!e&&!!t&&!!r&&!!s&&!!n&&!!a},U=()=>"upi"===S.method?!!S.upi&&S.upi.includes("@"):"card"!==S.method||!!S.cardNumber&&S.cardNumber.replace(/\s/g,"").length>=12&&!!S.expiry&&!!S.cvv;return(0,Xi.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,Xi.jsx)(ol,{children:a&&(0,Xi.jsx)(Fi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 md:hidden",onClick:()=>i(!1),children:(0,Xi.jsx)(Fi.div,{initial:{x:-300},animate:{x:0},exit:{x:-300},className:"w-80 h-full bg-gray-800 border-r border-gray-700 overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,Xi.jsxs)("div",{className:"p-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsx)("h2",{className:"text-xl font-bold text-white",children:"Categories"}),(0,Xi.jsx)("button",{onClick:()=>i(!1),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:(0,Xi.jsx)(bo,{className:"w-5 h-5 text-gray-400"})})]}),(0,Xi.jsx)("div",{className:"space-y-2",children:E.map(t=>(0,Xi.jsxs)("button",{onClick:()=>{r(t.id),i(!1)},className:"w-full flex items-center justify-between p-3 rounded-xl transition-all "+(e===t.id?"bg-orange-500 text-white":"text-white hover:bg-gray-700"),children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("span",{className:"text-xl",children:t.icon}),(0,Xi.jsx)("span",{className:"font-medium",children:t.label})]}),(0,Xi.jsx)("span",{className:"text-sm "+(e===t.id?"text-white/80":"text-gray-400"),children:t.count})]},t.id))})]})})})}),(0,Xi.jsx)(ol,{children:g&&(0,Xi.jsx)(Fi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:()=>y(!1),children:(0,Xi.jsxs)(Fi.div,{initial:{y:40,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},className:"relative bg-gray-800 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden border border-gray-700",onClick:e=>e.stopPropagation(),children:[(0,Xi.jsxs)("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)(zl,{className:"w-5 h-5 text-orange-500"}),(0,Xi.jsx)("h3",{className:"text-white font-semibold",children:"Checkout"})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[(0,Xi.jsx)("span",{className:""+("address"===v?"text-orange-400":""),children:"Address"}),(0,Xi.jsx)("span",{children:"\u2192"}),(0,Xi.jsx)("span",{className:""+("payment"===v?"text-orange-400":""),children:"Payment"}),(0,Xi.jsx)("span",{children:"\u2192"}),(0,Xi.jsx)("span",{className:""+("review"===v?"text-orange-400":""),children:"Review"})]}),(0,Xi.jsx)("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-700 rounded-lg",children:(0,Xi.jsx)(bo,{className:"w-5 h-5 text-gray-400"})})]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-0",children:[(0,Xi.jsxs)("div",{className:"lg:col-span-2 p-6 space-y-6 overflow-y-auto max-h-[70vh] pb-24 lg:pb-6",children:["address"===v&&(0,Xi.jsxs)("div",{className:"space-y-4",children:[(0,Xi.jsxs)("h4",{className:"text-white font-semibold flex items-center gap-2",children:[(0,Xi.jsx)(Ji,{className:"w-4 h-4 text-orange-500"})," Delivery Address"]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"text-xs text-gray-400",children:"Full Name"}),(0,Xi.jsx)("input",{value:N.fullName,onChange:e=>k({...N,fullName:e.target.value}),className:"mt-1 w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white outline-none focus:border-orange-500"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"text-xs text-gray-400",children:"Phone"}),(0,Xi.jsx)("input",{value:N.phone,onChange:e=>k({...N,phone:e.target.value}),className:"mt-1 w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white outline-none focus:border-orange-500"})]}),(0,Xi.jsxs)("div",{className:"md:col-span-2",children:[(0,Xi.jsx)("label",{className:"text-xs text-gray-400",children:"Email"}),(0,Xi.jsx)("input",{value:N.email,onChange:e=>k({...N,email:e.target.value}),className:"mt-1 w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white outline-none focus:border-orange-500"})]}),(0,Xi.jsxs)("div",{className:"md:col-span-2",children:[(0,Xi.jsx)("label",{className:"text-xs text-gray-400",children:"Address Line 1"}),(0,Xi.jsx)("input",{value:N.line1,onChange:e=>k({...N,line1:e.target.value}),className:"mt-1 w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white outline-none focus:border-orange-500"})]}),(0,Xi.jsxs)("div",{className:"md:col-span-2",children:[(0,Xi.jsx)("label",{className:"text-xs text-gray-400",children:"Address Line 2"}),(0,Xi.jsx)("input",{value:N.line2,onChange:e=>k({...N,line2:e.target.value}),className:"mt-1 w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white outline-none focus:border-orange-500"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"text-xs text-gray-400",children:"City"}),(0,Xi.jsx)("input",{value:N.city,onChange:e=>k({...N,city:e.target.value}),className:"mt-1 w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white outline-none focus:border-orange-500"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"text-xs text-gray-400",children:"State"}),(0,Xi.jsx)("input",{value:N.state,onChange:e=>k({...N,state:e.target.value}),className:"mt-1 w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white outline-none focus:border-orange-500"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"text-xs text-gray-400",children:"Pincode"}),(0,Xi.jsx)("input",{value:N.pincode,onChange:e=>k({...N,pincode:e.target.value}),className:"mt-1 w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white outline-none focus:border-orange-500"})]})]}),(0,Xi.jsx)("div",{className:"flex justify-end",children:(0,Xi.jsx)("button",{disabled:!F(),onClick:()=>b("payment"),className:"px-4 py-2 bg-orange-500 text-white rounded-lg disabled:opacity-50",children:"Continue to Payment"})})]}),"payment"===v&&(0,Xi.jsxs)("div",{className:"space-y-4",children:[(0,Xi.jsxs)("h4",{className:"text-white font-semibold flex items-center gap-2",children:[(0,Xi.jsx)(ql,{className:"w-4 h-4 text-orange-500"})," Payment Method"]}),(0,Xi.jsxs)("div",{className:"flex gap-2",children:[(0,Xi.jsx)("button",{onClick:()=>C({method:"upi"}),className:"px-3 py-2 rounded-lg border "+("upi"===S.method?"border-orange-500 bg-orange-500/10 text-white":"border-gray-600 text-gray-300"),children:"UPI"}),(0,Xi.jsx)("button",{onClick:()=>C({method:"card"}),className:"px-3 py-2 rounded-lg border "+("card"===S.method?"border-orange-500 bg-orange-500/10 text-white":"border-gray-600 text-gray-300"),children:"Card"}),(0,Xi.jsx)("button",{onClick:()=>C({method:"cod"}),className:"px-3 py-2 rounded-lg border "+("cod"===S.method?"border-orange-500 bg-orange-500/10 text-white":"border-gray-600 text-gray-300"),children:"Cash on Delivery"})]}),"upi"===S.method&&(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"text-xs text-gray-400",children:"UPI ID"}),(0,Xi.jsx)("input",{value:S.upi||"",onChange:e=>C({...S,upi:e.target.value}),placeholder:"name@bank",className:"mt-1 w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white outline-none focus:border-orange-500"})]}),"card"===S.method&&(0,Xi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,Xi.jsxs)("div",{className:"md:col-span-2",children:[(0,Xi.jsx)("label",{className:"text-xs text-gray-400",children:"Card Number"}),(0,Xi.jsx)("input",{value:S.cardNumber||"",onChange:e=>C({...S,cardNumber:e.target.value}),placeholder:"1234 5678 9012 3456",className:"mt-1 w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white outline-none focus:border-orange-500"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"text-xs text-gray-400",children:"Expiry"}),(0,Xi.jsx)("input",{value:S.expiry||"",onChange:e=>C({...S,expiry:e.target.value}),placeholder:"MM/YY",className:"mt-1 w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white outline-none focus:border-orange-500"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"text-xs text-gray-400",children:"CVV"}),(0,Xi.jsx)("input",{value:S.cvv||"",onChange:e=>C({...S,cvv:e.target.value}),placeholder:"123",className:"mt-1 w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white outline-none focus:border-orange-500"})]})]}),(0,Xi.jsxs)("div",{className:"flex justify-between",children:[(0,Xi.jsx)("button",{onClick:()=>b("address"),className:"px-4 py-2 bg-gray-700 text-white rounded-lg",children:"Back"}),(0,Xi.jsx)("button",{disabled:!U(),onClick:()=>b("review"),className:"px-4 py-2 bg-orange-500 text-white rounded-lg disabled:opacity-50",children:"Review Order"})]})]}),"review"===v&&(0,Xi.jsxs)("div",{className:"space-y-4",children:[(0,Xi.jsxs)("h4",{className:"text-white font-semibold flex items-center gap-2",children:[(0,Xi.jsx)(Vl,{className:"w-4 h-4 text-orange-500"})," Review & Place Order"]}),(0,Xi.jsx)("div",{className:"bg-gray-700 rounded-xl p-4",children:(0,Xi.jsxs)("div",{className:"text-gray-300 text-sm",children:[(0,Xi.jsx)("div",{className:"font-semibold text-white mb-2",children:"Ship to:"}),(0,Xi.jsx)("div",{children:N.fullName}),(0,Xi.jsxs)("div",{children:[N.line1,N.line2?`, ${N.line2}`:""]}),(0,Xi.jsxs)("div",{children:[N.city,", ",N.state," ",N.pincode]}),(0,Xi.jsxs)("div",{className:"text-gray-400",children:[N.phone," ",N.email?`\u2022 ${N.email}`:""]})]})}),(0,Xi.jsx)("div",{className:"bg-gray-700 rounded-xl p-4",children:(0,Xi.jsxs)("div",{className:"text-gray-300 text-sm",children:[(0,Xi.jsx)("div",{className:"font-semibold text-white mb-2",children:"Payment:"}),(0,Xi.jsxs)("div",{className:"capitalize",children:[S.method,"upi"===S.method&&S.upi?`: ${S.upi}`:""]})]})}),(0,Xi.jsxs)("div",{className:"flex justify-between",children:[(0,Xi.jsx)("button",{onClick:()=>b("payment"),className:"px-4 py-2 bg-gray-700 text-white rounded-lg",children:"Back"}),(0,Xi.jsx)("button",{onClick:()=>{b("success"),l([])},className:"px-4 py-2 bg-orange-500 text-white rounded-lg",children:"Place Order"})]})]}),"success"===v&&(0,Xi.jsxs)("div",{className:"text-center py-16",children:[(0,Xi.jsx)(Vl,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),(0,Xi.jsx)("h4",{className:"text-white text-xl font-semibold mb-2",children:"Order Placed!"}),(0,Xi.jsx)("p",{className:"text-gray-300",children:"You will receive a confirmation email shortly."}),(0,Xi.jsx)("div",{className:"mt-6",children:(0,Xi.jsx)("button",{onClick:()=>{y(!1)},className:"px-4 py-2 bg-orange-500 text-white rounded-lg",children:"Close"})})]})]}),(0,Xi.jsxs)("div",{className:"hidden lg:block lg:border-l border-gray-700 p-6 bg-gray-850",children:[(0,Xi.jsx)("div",{className:"text-white font-semibold mb-4",children:"Order Summary"}),(0,Xi.jsxs)("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto pr-1",children:[0===o.length&&"success"!==v&&(0,Xi.jsx)("div",{className:"text-gray-400 text-sm",children:"Your cart is empty."}),o.map(e=>(0,Xi.jsxs)("div",{className:"flex gap-3 items-center bg-gray-700/60 rounded-lg p-3",children:[(0,Xi.jsx)("img",{src:e.image,alt:e.name,className:"w-12 h-12 rounded object-cover"}),(0,Xi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Xi.jsx)("div",{className:"text-white text-sm truncate",children:e.name}),(0,Xi.jsxs)("div",{className:"text-gray-400 text-xs",children:["Qty: ",e.quantity]})]}),(0,Xi.jsxs)("div",{className:"text-orange-400 font-semibold text-sm",children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id))]}),(0,Xi.jsxs)("div",{className:"border-t border-gray-700 mt-4 pt-4 space-y-2 text-sm",children:[(0,Xi.jsxs)("div",{className:"flex justify-between text-gray-300",children:[(0,Xi.jsx)("span",{children:"Items"}),(0,Xi.jsxs)("span",{children:["$",I().toFixed(2)]})]}),(0,Xi.jsxs)("div",{className:"flex justify-between text-gray-300",children:[(0,Xi.jsx)("span",{children:"Shipping"}),(0,Xi.jsx)("span",{children:"$0.00"})]}),(0,Xi.jsxs)("div",{className:"flex justify-between text-white font-semibold text-base",children:[(0,Xi.jsx)("span",{children:"Total"}),(0,Xi.jsxs)("span",{children:["$",I().toFixed(2)]})]})]})]})]}),(0,Xi.jsxs)("div",{className:"lg:hidden absolute bottom-0 left-0 right-0 bg-gray-900/95 border-t border-gray-700",children:[(0,Xi.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("div",{className:"text-xs text-gray-400",children:"Total"}),(0,Xi.jsxs)("div",{className:"text-white font-semibold",children:["$",I().toFixed(2)]})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)("button",{onClick:()=>j(e=>!e),className:"px-3 py-2 rounded-lg bg-gray-700 text-white text-sm",children:w?"Hide Summary":"View Summary"}),"success"!==v&&(0,Xi.jsx)("button",{onClick:()=>{"address"===v&&F()?b("payment"):"payment"===v&&U()&&b("review")},className:"px-4 py-2 rounded-lg bg-orange-500 text-white text-sm disabled:opacity-50",disabled:"address"===v&&!F()||"payment"===v&&!U(),children:"Continue"})]})]}),(0,Xi.jsx)(ol,{children:w&&(0,Xi.jsx)(Fi.div,{initial:{y:60,opacity:0},animate:{y:0,opacity:1},exit:{y:40,opacity:0},className:"max-h-60 overflow-y-auto border-t border-gray-700 bg-gray-850",children:(0,Xi.jsxs)("div",{className:"p-4 space-y-3",children:[0===o.length?(0,Xi.jsx)("div",{className:"text-gray-400 text-sm",children:"Your cart is empty."}):o.map(e=>(0,Xi.jsxs)("div",{className:"flex gap-3 items-center bg-gray-700/60 rounded-lg p-3",children:[(0,Xi.jsx)("img",{src:e.image,alt:e.name,className:"w-10 h-10 rounded object-cover"}),(0,Xi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Xi.jsx)("div",{className:"text-white text-sm truncate",children:e.name}),(0,Xi.jsxs)("div",{className:"text-gray-400 text-xs",children:["Qty: ",e.quantity]})]}),(0,Xi.jsxs)("div",{className:"text-orange-400 font-semibold text-sm",children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id)),(0,Xi.jsxs)("div",{className:"border-t border-gray-700 pt-3 space-y-2 text-sm",children:[(0,Xi.jsxs)("div",{className:"flex justify-between text-gray-300",children:[(0,Xi.jsx)("span",{children:"Items"}),(0,Xi.jsxs)("span",{children:["$",I().toFixed(2)]})]}),(0,Xi.jsxs)("div",{className:"flex justify-between text-gray-300",children:[(0,Xi.jsx)("span",{children:"Shipping"}),(0,Xi.jsx)("span",{children:"$0.00"})]}),(0,Xi.jsxs)("div",{className:"flex justify-between text-white font-semibold text-base",children:[(0,Xi.jsx)("span",{children:"Total"}),(0,Xi.jsxs)("span",{children:["$",I().toFixed(2)]})]})]})]})})})]})]})})}),(0,Xi.jsx)(ol,{children:c&&(0,Xi.jsx)(Fi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>d(!1),children:(0,Xi.jsx)(Fi.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-2xl max-w-md w-full max-h-[80vh] overflow-hidden border border-gray-700",onClick:e=>e.stopPropagation(),children:(0,Xi.jsxs)("div",{className:"p-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,Xi.jsx)(zl,{className:"w-6 h-6"}),"Cart (",D(),")"]}),(0,Xi.jsx)("button",{onClick:()=>d(!1),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:(0,Xi.jsx)(bo,{className:"w-5 h-5 text-gray-400"})})]}),0===o.length?(0,Xi.jsxs)("div",{className:"text-center py-8",children:[(0,Xi.jsx)(zl,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,Xi.jsx)("p",{className:"text-gray-400",children:"Your cart is empty"})]}):(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)("div",{className:"space-y-4 mb-6 max-h-60 overflow-y-auto",children:o.map(e=>(0,Xi.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-700 rounded-xl",children:[(0,Xi.jsx)("img",{src:e.image,alt:e.name,className:"w-12 h-12 object-cover rounded-lg"}),(0,Xi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Xi.jsx)("h3",{className:"font-medium text-white text-sm truncate",children:e.name}),(0,Xi.jsxs)("p",{className:"text-orange-500 font-bold",children:["$",e.price]})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)("button",{onClick:()=>L(e.id,e.quantity-1),className:"p-1 hover:bg-gray-600 rounded transition-colors",children:(0,Xi.jsx)(Hl,{className:"w-4 h-4 text-gray-300"})}),(0,Xi.jsx)("span",{className:"text-white font-medium min-w-[2rem] text-center",children:e.quantity}),(0,Xi.jsx)("button",{onClick:()=>L(e.id,e.quantity+1),className:"p-1 hover:bg-gray-600 rounded transition-colors",children:(0,Xi.jsx)(Ki,{className:"w-4 h-4 text-gray-300"})})]})]},e.id))}),(0,Xi.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,Xi.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Xi.jsx)("span",{className:"text-lg font-bold text-white",children:"Total:"}),(0,Xi.jsxs)("span",{className:"text-xl font-bold text-orange-500",children:["$",I().toFixed(2)]})]}),(0,Xi.jsx)("button",{className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 rounded-xl transition-colors",onClick:()=>{d(!1),y(!0),b("address")},children:"Checkout"})]})]})]})})})}),(0,Xi.jsxs)("div",{className:"pb-20 md:pb-0",children:[(0,Xi.jsx)("div",{className:"bg-gray-800 border-b border-gray-700 sticky top-0 z-40",children:(0,Xi.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Xi.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Xi.jsx)("button",{onClick:()=>i(!0),className:"md:hidden p-2 hover:bg-gray-700 rounded-lg transition-colors",children:(0,Xi.jsx)(Wl,{className:"w-6 h-6 text-white"})}),(0,Xi.jsx)("h1",{className:"text-2xl font-bold text-white",children:"PEDAL Store"})]}),(0,Xi.jsxs)("button",{onClick:()=>d(!0),className:"relative p-2 hover:bg-gray-700 rounded-lg transition-colors",children:[(0,Xi.jsx)(zl,{className:"w-6 h-6 text-white"}),D()>0&&(0,Xi.jsx)("span",{className:"absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:D()})]})]})})}),(0,Xi.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,Xi.jsxs)("div",{className:"flex gap-6",children:[(0,Xi.jsx)("div",{className:"hidden md:block w-64 flex-shrink-0",children:(0,Xi.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[(0,Xi.jsx)("h2",{className:"text-lg font-bold text-white mb-4",children:"Categories"}),(0,Xi.jsx)("div",{className:"space-y-2",children:E.map(t=>(0,Xi.jsxs)("button",{onClick:()=>r(t.id),className:"w-full flex items-center justify-between p-3 rounded-xl transition-all "+(e===t.id?"bg-orange-500 text-white":"text-white hover:bg-gray-700"),children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("span",{className:"text-xl",children:t.icon}),(0,Xi.jsx)("span",{className:"font-medium",children:t.label})]}),(0,Xi.jsx)("span",{className:"text-sm "+(e===t.id?"text-white/80":"text-gray-400"),children:t.count})]},t.id))})]})}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsxs)("div",{className:"mb-6",children:[(0,Xi.jsxs)("div",{className:"relative mb-4",children:[(0,Xi.jsx)(Lo,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400"}),(0,Xi.jsx)("input",{type:"text",value:s,onChange:e=>n(e.target.value),placeholder:"Search for products, brands, categories...",className:"w-full pl-12 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"})]}),(0,Xi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xi.jsx)("div",{className:"flex items-center gap-4",children:(0,Xi.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-orange-500",children:[(0,Xi.jsx)("option",{value:"popular",children:"Most Popular"}),(0,Xi.jsx)("option",{value:"price-low",children:"Price: Low to High"}),(0,Xi.jsx)("option",{value:"price-high",children:"Price: High to Low"}),(0,Xi.jsx)("option",{value:"rating",children:"Highest Rated"})]})}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)("button",{onClick:()=>h("grid"),className:"p-2 rounded-lg transition-colors "+("grid"===u?"bg-orange-500 text-white":"bg-gray-800 text-gray-400 hover:text-white"),children:(0,Xi.jsx)(Kl,{className:"w-5 h-5"})}),(0,Xi.jsx)("button",{onClick:()=>h("list"),className:"p-2 rounded-lg transition-colors "+("list"===u?"bg-orange-500 text-white":"bg-gray-800 text-gray-400 hover:text-white"),children:(0,Xi.jsx)(Jl,{className:"w-5 h-5"})})]})]})]}),(0,Xi.jsx)("div",{className:"grid gap-6 "+("grid"===u?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:M.map(e=>(0,Xi.jsxs)(Fi.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-800 rounded-2xl overflow-hidden border border-gray-700 hover:border-orange-500 transition-all group",children:[(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),e.discount&&(0,Xi.jsxs)("div",{className:"absolute top-3 left-3 bg-orange-500 text-white px-2 py-1 rounded-lg text-sm font-bold",children:["-",e.discount,"%"]}),!e.inStock&&(0,Xi.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,Xi.jsx)("span",{className:"text-white font-bold",children:"Out of Stock"})})]}),(0,Xi.jsxs)("div",{className:"p-4",children:[(0,Xi.jsxs)("div",{className:"mb-2",children:[(0,Xi.jsx)("span",{className:"text-orange-500 text-sm font-medium",children:e.brand}),(0,Xi.jsx)("h3",{className:"text-white font-bold text-lg",children:e.name})]}),(0,Xi.jsx)("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:e.description}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Xi.jsx)("div",{className:"flex items-center",children:[...Array(5)].map((t,r)=>(0,Xi.jsx)(cl,{className:"w-4 h-4 "+(r<Math.floor(e.rating)?"text-yellow-400 fill-current":"text-gray-600")},r))}),(0,Xi.jsxs)("span",{className:"text-gray-400 text-sm",children:["(",e.reviews,")"]})]}),(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsxs)("span",{className:"text-2xl font-bold text-white",children:["$",e.price]}),e.originalPrice&&(0,Xi.jsxs)("span",{className:"text-gray-400 line-through",children:["$",e.originalPrice]})]}),e.freeShipping&&(0,Xi.jsxs)("div",{className:"flex items-center gap-1 text-green-400 text-sm",children:[(0,Xi.jsx)(Gl,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{children:"Free Ship"})]})]}),(0,Xi.jsx)("button",{onClick:()=>(e=>{x(e.id),setTimeout(()=>x(null),1e3),l(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])})(e),disabled:!e.inStock,className:"w-full py-3 rounded-xl font-bold transition-all relative overflow-hidden "+(e.inStock?"bg-orange-500 hover:bg-orange-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"),children:f===e.id?(0,Xi.jsxs)(Fi.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center justify-center gap-2",children:[(0,Xi.jsx)(Vl,{className:"w-5 h-5"}),"Added!"]}):(0,Xi.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,Xi.jsx)(zl,{className:"w-5 h-5"}),"Add to Cart"]})})]})]},e.id))}),0===M.length&&(0,Xi.jsxs)("div",{className:"text-center py-12",children:[(0,Xi.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd0d"}),(0,Xi.jsx)("h3",{className:"text-xl font-bold mb-2 text-white",children:"No products found"}),(0,Xi.jsx)("p",{className:"text-gray-400",children:"Try adjusting your search or category filters"})]})]})]})})]})]})},Yl=Vi("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),Xl=Vi("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Zl=Vi("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ec=Vi("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),tc=()=>{const{user:e}=ho(),[r,s]=(0,t.useState)("posts"),[n,a]=(0,t.useState)(!1),i=0,o=0,l=0,c=0,[d,u]=(0,t.useState)([]),[h,p]=(0,t.useState)(!0),[m,f]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{try{p(!0),u([])}catch(e){f("Failed to load posts"),console.error("Error loading posts:",e)}finally{p(!1)}})()},[]);return(0,Xi.jsx)("div",{className:"min-h-screen bg-gray-900 text-white",children:(0,Xi.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,Xi.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 mb-8",children:(0,Xi.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6",children:[(0,Xi.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-600 flex items-center justify-center overflow-hidden",children:null!==e&&void 0!==e&&e.avatar?(0,Xi.jsx)("img",{src:e.avatar,alt:"Profile",className:"w-full h-full object-cover"}):(0,Xi.jsx)("div",{className:"w-full h-full bg-gray-600"})}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 mb-4",children:[(0,Xi.jsx)("h1",{className:"text-2xl font-bold",children:(null===e||void 0===e?void 0:e.fullName)||"Your Name"}),(0,Xi.jsx)("div",{className:"flex gap-2",children:(0,Xi.jsx)("button",{onClick:()=>{a(e=>!e)},className:"px-4 py-2 rounded-lg font-medium transition-colors "+(n?"bg-gray-700 text-white hover:bg-gray-600":"bg-orange-500 text-white hover:bg-orange-600"),children:n?(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)(Xl,{className:"w-4 h-4 inline mr-2"}),"Following"]}):(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)(Zl,{className:"w-4 h-4 inline mr-2"}),"Follow"]})})})]}),(0,Xi.jsxs)("div",{className:"flex gap-6 text-sm",children:[(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)("div",{className:"font-semibold text-white",children:i}),(0,Xi.jsx)("div",{className:"text-gray-400",children:"Posts"})]}),(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)("div",{className:"font-semibold text-white",children:o}),(0,Xi.jsx)("div",{className:"text-gray-400",children:"Followers"})]}),(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)("div",{className:"font-semibold text-white",children:l}),(0,Xi.jsx)("div",{className:"text-gray-400",children:"Following"})]}),(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)("div",{className:"font-semibold text-white",children:c}),(0,Xi.jsx)("div",{className:"text-gray-400",children:"Likes"})]})]})]})]})}),(0,Xi.jsx)("div",{className:"flex gap-1 mb-6 bg-gray-800 rounded-lg p-1",children:[{key:"posts",label:"Posts",icon:ec},{key:"achievements",label:"Achievements",icon:Yl},{key:"saved",label:"Saved",icon:Eo}].map(e=>(0,Xi.jsxs)("button",{onClick:()=>s(e.key),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-md font-medium transition-colors "+(r===e.key?"bg-orange-500 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"),children:[(0,Xi.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.key))}),(()=>{switch(r){case"posts":return(0,Xi.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>(0,Xi.jsxs)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[e.image&&(0,Xi.jsx)("img",{src:e.image,alt:"Post",className:"w-full h-48 object-cover"}),(0,Xi.jsx)("div",{className:"p-4",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-6 text-gray-400 text-sm",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Xi.jsx)(dl,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{children:e.likes})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Xi.jsx)(ko,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{children:e.comments})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Xi.jsx)(So,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{children:e.shares})]})]})})]},e.id))});case"achievements":return(0,Xi.jsxs)("div",{className:"text-center py-12",children:[(0,Xi.jsx)(Yl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Xi.jsx)("p",{className:"text-gray-400",children:"No achievements yet"})]});case"saved":return(0,Xi.jsxs)("div",{className:"text-center py-12",children:[(0,Xi.jsx)(Eo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Xi.jsx)("p",{className:"text-gray-400",children:"No saved posts yet"})]});default:return null}})()]})})},rc=Vi("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),sc=e=>{let{initialQuery:r=""}=e;const{user:s}=ho(),[n,a]=(0,t.useState)(r),[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)([]),[d,u]=(0,t.useState)(0);(0,t.useEffect)(()=>{a(r||"")},[r]);const h=(0,t.useMemo)(()=>s?El.listFollowing(s.id):[],[s,d]);(0,t.useEffect)(()=>{const e=setTimeout(()=>{(async e=>{const t=e.trim();if(t.length<1)c([]);else{o(!0);try{const e=await el.default.searchUsers(t,20);c(e.map(e=>({id:e.id||e._id||e.username,username:e.username,fullName:e.fullName,avatar:e.avatar})))}finally{o(!1)}}})(n)},250);return()=>clearTimeout(e)},[n]),(0,t.useEffect)(()=>{const e=()=>u(e=>e+1),t=()=>u(e=>e+1);return window.addEventListener("realtime:follow",e),window.addEventListener("realtime:unfollow",t),()=>{window.removeEventListener("realtime:follow",e),window.removeEventListener("realtime:unfollow",t)}},[]);return(0,Xi.jsx)("div",{className:"min-h-screen bg-gray-900 text-white",children:(0,Xi.jsxs)("div",{className:"max-w-4xl mx-auto p-4 md:p-6",children:[(0,Xi.jsxs)("div",{className:"mb-6",children:[(0,Xi.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Followers & Following"}),(0,Xi.jsx)("p",{className:"text-gray-400",children:"Search users, follow/unfollow, and manage your network."})]}),(0,Xi.jsxs)("div",{className:"mb-6 relative",children:[(0,Xi.jsx)(Lo,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,Xi.jsx)("input",{value:n,onChange:e=>a(e.target.value),placeholder:"Search users...",className:"w-full pl-12 pr-4 py-3 rounded-xl bg-gray-800 border border-gray-700 focus:outline-none focus:border-orange-500"})]}),s&&(0,Xi.jsxs)("div",{className:"mb-8",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Xi.jsx)(yo,{className:"w-5 h-5 text-orange-500"}),(0,Xi.jsxs)("h2",{className:"font-semibold",children:["You're following (",h.length,")"]})]}),0===h.length?(0,Xi.jsx)("div",{className:"text-gray-400 text-sm",children:"You are not following anyone yet."}):(0,Xi.jsx)("div",{className:"flex flex-wrap gap-2",children:h.map(e=>(0,Xi.jsx)("span",{className:"px-3 py-1 rounded-full bg-gray-800 border border-gray-700 text-sm",children:e},e))})]}),(0,Xi.jsx)("div",{className:"bg-gray-900",children:(0,Xi.jsxs)("div",{className:"rounded-xl border border-gray-800 overflow-hidden",children:[i&&(0,Xi.jsx)("div",{className:"px-4 py-3 text-gray-400",children:"Searching\u2026"}),!i&&0===l.length&&(0,Xi.jsx)("div",{className:"px-4 py-6 text-gray-400 text-sm",children:"No users. Try a different search."}),!i&&l.map(e=>{const t=s&&e.id===s.id,r=!!s&&El.isFollowing(s.id,e.id);return(0,Xi.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-800 first:border-t-0 bg-gray-900 hover:bg-gray-800/60",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3 min-w-0 cursor-pointer flex-1",onClick:()=>{window.dispatchEvent(new CustomEvent("nav:user",{detail:{id:e.id,username:e.username}}))},children:[(0,Xi.jsx)("img",{src:e.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(e.username)}&background=3f3f46&color=fff`,alt:e.username,className:"w-10 h-10 rounded-full"}),(0,Xi.jsxs)("div",{className:"truncate",children:[(0,Xi.jsx)("div",{className:"font-medium truncate",children:e.fullName||e.username}),(0,Xi.jsxs)("div",{className:"text-sm text-gray-400 truncate",children:["@",e.username]})]})]}),(0,Xi.jsx)("div",{children:!s||t?(0,Xi.jsx)("button",{disabled:!0,className:"px-3 py-1.5 rounded-lg bg-gray-700 text-gray-400 text-sm",children:t?"You":"Login"}):(0,Xi.jsx)("button",{onClick:()=>{return t=e.id,void(s&&(El.isFollowing(s.id,t)?El.unfollow(s.id,t):El.follow(s.id,t),u(e=>e+1)));var t},className:"px-3 py-1.5 rounded-lg text-sm flex items-center gap-2 "+(r?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-orange-600 hover:bg-orange-500 text-white"),children:r?(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)(rc,{className:"w-4 h-4"})," Unfollow"]}):(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)(Zl,{className:"w-4 h-4"})," Follow"]})})})]},e.id)})]})})]})})},nc="pedal_message_requests_v1",ac="pedal_message_edges_v1";function ic(){try{const e=localStorage.getItem(nc);return e?JSON.parse(e):[]}catch{return[]}}function oc(e){localStorage.setItem(nc,JSON.stringify(e))}function lc(){try{const e=localStorage.getItem(ac);return e?JSON.parse(e):[]}catch{return[]}}function cc(e,t,r){const s=e.toLowerCase(),n=t.toLowerCase();return r.some(e=>e.a===s&&e.b===n||e.a===n&&e.b===s)}const dc={listIncoming:e=>ic().filter(t=>t.toId===e),listSent:e=>ic().filter(t=>t.fromId===e),requestMessage(e,t){if(!e||!t||e===t)return;const r=ic(),s=lc();cc(e,t,s)||r.some(r=>r.fromId===e&&r.toId===t)||(r.push({fromId:e.toLowerCase(),toId:t.toLowerCase(),createdAt:Date.now()}),oc(r),window.dispatchEvent(new CustomEvent("realtime:msg_request",{detail:{fromId:e,toId:t,ts:Date.now()}})))},acceptMessage(e,t){const r=ic(),s=lc();var n;oc(r.filter(r=>!(r.fromId===e&&r.toId===t))),cc(e,t,s)||(s.push({a:e.toLowerCase(),b:t.toLowerCase(),createdAt:Date.now()}),n=s,localStorage.setItem(ac,JSON.stringify(n))),window.dispatchEvent(new CustomEvent("realtime:msg_accept",{detail:{fromId:e,toId:t,ts:Date.now()}}))},declineMessage(e,t){oc(ic().filter(r=>!(r.fromId===e&&r.toId===t))),window.dispatchEvent(new CustomEvent("realtime:msg_decline",{detail:{fromId:e,toId:t,ts:Date.now()}}))},canMessage(e,t){if(!e||!t||e===t)return!0;return cc(e,t,lc())}},uc=dc,hc="pedal_notifications_v1";function pc(){try{const e=localStorage.getItem(hc);return e?JSON.parse(e):[]}catch{return[]}}function mc(e){localStorage.setItem(hc,JSON.stringify(e))}const fc={add(e,t,r,s){const n=pc(),a={id:Math.random().toString(36).slice(2)+Date.now().toString(36),userId:e.toLowerCase(),type:t,message:r,createdAt:Date.now(),read:!1,meta:s};return n.push(a),mc(n),window.dispatchEvent(new CustomEvent("realtime:notification",{detail:a})),a},list(e){const t=pc(),r=e.toLowerCase();return t.filter(e=>e.userId===r).sort((e,t)=>t.createdAt-e.createdAt)},countUnread(e){return this.list(e).filter(e=>!e.read).length},markAllRead(e){const t=e.toLowerCase(),r=pc();let s=!1;r.forEach(e=>{e.userId!==t||e.read||(e.read=!0,s=!0)}),s&&mc(r)}},xc=fc,gc=Vi("share",[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]]),yc=e=>{let{userIdOrUsername:r}=e;const{user:s}=ho(),[n,a]=(0,t.useState)(!0),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)("posts"),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(!1),[m,f]=(0,t.useState)(!1),[x,g]=(0,t.useState)([]),[y,v]=(0,t.useState)([]);(0,t.useEffect)(()=>{let e=!1;return(async()=>{a(!0);try{const t=r,s=await el.default.searchUsers(t,1),n=s&&s[0]?s[0]:{id:t,username:t,fullName:t,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(t)}&background=3f3f46&color=fff`,bio:"PEDAL enthusiast",location:"Somewhere on Earth",joinedDate:"January 2024"};e||o({id:n.id||n._id||n.username,username:n.username,fullName:n.fullName,avatar:n.avatar,bio:n.bio||"PEDAL enthusiast",location:n.location||"Somewhere on Earth",joinedDate:n.joinedDate||"January 2024"})}finally{e||a(!1)}})(),()=>{e=!0}},[r]);const[b,w]=(0,t.useState)(0),j=((null===s||void 0===s?void 0:s.username)||(null===s||void 0===s?void 0:s.id)||"").toLowerCase(),N=((null===i||void 0===i?void 0:i.id)||"").toLowerCase(),k=!!i&&Xo.isPrivate(N),S=!(!s||!i)&&El.isFollowing(s.id,i.id),[C,E]=(0,t.useState)(!1),_=i?El.listFollowing(i.id).length:0,P=i?El.listFollowers(i.id).length:0;!(!s||!i)&&uc.canMessage(s.id,i.id);(0,t.useEffect)(()=>{E(!(!j||!N)&&El.listSentRequests(j).some(e=>e.followingId.toLowerCase()===N))},[j,N,b]);const T=()=>{if(!s||!i)return;if(S)return El.unfollow(s.id,i.id),void w(e=>e+1);if(Xo.isPrivate(i.id.toLowerCase()))return El.requestFollow(s.id,i.id),E(!0),xc.add(i.id,"follow_request",`${s.username||s.id} requested to follow you`,{followerId:s.id}),u("Follow request sent"),void setTimeout(()=>u(null),1500);El.follow(s.id,i.id),w(e=>e+1)},A=()=>{if(s&&i)return uc.canMessage(s.id,i.id)?(u("Messaging available"),void setTimeout(()=>u(null),1200)):void(El.isFollowing(s.id,i.id)?(uc.requestMessage(s.id,i.id),xc.add(i.id,"message_request",`${s.username||s.id} requested to message`,{fromId:s.id}),u("Message request sent"),setTimeout(()=>u(null),1500)):(u("Follow first to message"),setTimeout(()=>u(null),1500)))};(0,t.useEffect)(()=>{const e=()=>w(e=>e+1),t=()=>w(e=>e+1);return window.addEventListener("realtime:follow",e),window.addEventListener("realtime:unfollow",t),()=>{window.removeEventListener("realtime:follow",e),window.removeEventListener("realtime:unfollow",t)}},[]);const O=[{id:1,content:"Just finished an amazing ride through the mountains! The weather was perfect and the views were incredible. Can't wait to do it again next weekend. \ud83d\udeb4\u200d\u2642\ufe0f",timestamp:"2 hours ago",likes:0,comments:0,image:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=600&h=400&fit=crop"},{id:2,content:"New gear day! Finally got my hands on the latest carbon fiber wheels. The difference in performance is night and day. Highly recommend for anyone looking to upgrade their setup.",timestamp:"1 day ago",likes:0,comments:0},{id:3,content:"Morning coffee and planning today's route. Nothing beats the anticipation of a good ride ahead! \u2615",timestamp:"2 days ago",likes:0,comments:0}];if(n)return(0,Xi.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,Xi.jsx)("div",{className:"text-white",children:"Loading profile..."})});if(!i)return(0,Xi.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,Xi.jsx)("div",{className:"text-white",children:"User not found"})});return i&&(!!i&&!!s&&k&&!S)?(0,Xi.jsx)("div",{className:"min-h-screen bg-gray-900",children:(0,Xi.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[(0,Xi.jsxs)("div",{className:"flex justify-end gap-2 mb-4",children:[(0,Xi.jsx)("button",{className:"px-3 py-1.5 text-xs rounded-full border border-gray-700 text-gray-300 hover:bg-gray-800",children:"Report"}),(0,Xi.jsx)("button",{className:"px-3 py-1.5 text-xs rounded-full border border-gray-700 text-gray-300 hover:bg-gray-800",children:"Report"}),(0,Xi.jsx)("button",{className:"px-3 py-1.5 text-xs rounded-full border border-gray-700 text-gray-300 hover:bg-gray-800",children:"Report"})]}),(0,Xi.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[(0,Xi.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Xi.jsx)("img",{src:i.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(i.username)}&background=3f3f46&color=fff`,className:"w-20 h-20 rounded-full border-2 border-gray-600",alt:i.username}),(0,Xi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Xi.jsx)("h1",{className:"text-xl font-semibold text-white",children:i.fullName||i.username}),(0,Xi.jsxs)("p",{className:"text-gray-400",children:["@",i.username]}),(0,Xi.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,Xi.jsx)("button",{onClick:T,disabled:C,className:"px-4 py-2 rounded-full font-medium text-sm "+(C?"bg-gray-700 text-gray-300 cursor-not-allowed":"bg-orange-600 text-white hover:bg-orange-500"),children:C?"Requested":"Request Follow"}),(0,Xi.jsx)("button",{onClick:A,className:"px-4 py-2 border border-gray-600 text-gray-300 rounded-full text-sm font-medium hover:bg-gray-800",children:"Message"})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-6 text-sm mt-4",children:[(0,Xi.jsxs)("button",{onClick:()=>p(!0),className:"text-white hover:underline",children:[(0,Xi.jsx)("span",{className:"font-semibold",children:P}),(0,Xi.jsx)("span",{className:"text-gray-400 ml-1",children:"Followers"})]}),(0,Xi.jsxs)("button",{onClick:()=>f(!0),className:"text-white hover:underline",children:[(0,Xi.jsx)("span",{className:"font-semibold",children:_}),(0,Xi.jsx)("span",{className:"text-gray-400 ml-1",children:"Following"})]})]})]})]}),(0,Xi.jsx)("div",{className:"mt-6 p-4 rounded-lg bg-gray-900/40 border border-gray-700 text-gray-300",children:"This account is private. Your follow request must be accepted to view this profile."})]}),d&&(0,Xi.jsx)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 px-4 py-2 rounded-lg bg-black/80 text-white text-sm border border-white/10",children:d}),(h||m)&&(0,Xi.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>{p(!1),f(!1)},children:(0,Xi.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl w-full max-w-md p-4",onClick:e=>e.stopPropagation(),children:[(0,Xi.jsx)("h3",{className:"text-white font-semibold mb-3",children:h?"Followers":"Following"}),(0,Xi.jsx)("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:(()=>{const e=h?El.listFollowers(i.id):El.listFollowing(i.id);return 0===e.length?(0,Xi.jsx)("div",{className:"text-gray-500 text-sm",children:"None"}):e.map(e=>(0,Xi.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-gray-700/40",children:[(0,Xi.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-600"}),(0,Xi.jsx)("div",{className:"text-gray-200 text-sm",children:e})]},e))})()}),(0,Xi.jsx)("div",{className:"flex justify-end mt-3",children:(0,Xi.jsx)("button",{onClick:()=>{p(!1),f(!1)},className:"px-4 py-2 rounded-lg bg-gray-700 text-white",children:"Close"})})]})})]})}):(0,Xi.jsx)("div",{className:"min-h-screen bg-gray-900",children:(0,Xi.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Xi.jsx)("div",{className:"bg-gray-800 border-b border-gray-700",children:(0,Xi.jsx)("div",{className:"p-6",children:(0,Xi.jsxs)("div",{className:"flex items-start gap-6",children:[(0,Xi.jsx)("img",{src:i.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(i.username)}&background=3f3f46&color=fff`,className:"w-20 h-20 rounded-full border-2 border-gray-600",alt:i.username}),(0,Xi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h1",{className:"text-2xl font-bold text-white",children:i.fullName||i.username}),(0,Xi.jsxs)("p",{className:"text-gray-400",children:["u/",i.username]})]}),s&&s.id!==i.id&&(0,Xi.jsxs)("div",{className:"flex gap-2",children:[(0,Xi.jsx)("button",{onClick:T,disabled:!S&&k&&C,className:"px-4 py-2 rounded-full font-medium text-sm transition-colors "+(S?"bg-gray-700 text-white hover:bg-gray-600 border border-gray-600":k&&C?"bg-gray-700 text-gray-300 cursor-not-allowed":"bg-orange-600 text-white hover:bg-orange-500"),children:S?"Following":k?C?"Requested":"Request Follow":"Follow"}),(0,Xi.jsx)("button",{onClick:A,className:"px-4 py-2 border border-gray-600 text-gray-300 rounded-full text-sm font-medium hover:bg-gray-800",children:"Message"})]})]}),i.bio&&(0,Xi.jsx)("p",{className:"text-gray-300 mb-3",children:i.bio}),(0,Xi.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-400 mb-3",children:[i.location&&(0,Xi.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Xi.jsx)(Ji,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{children:i.location})]}),i.joinedDate&&(0,Xi.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Xi.jsx)(wo,{className:"w-4 h-4"}),(0,Xi.jsxs)("span",{children:["Joined ",i.joinedDate]})]})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,Xi.jsxs)("button",{onClick:()=>p(!0),className:"text-white hover:underline",children:[(0,Xi.jsx)("span",{className:"font-semibold",children:P}),(0,Xi.jsx)("span",{className:"text-gray-400 ml-1",children:"Followers"})]}),(0,Xi.jsxs)("button",{onClick:()=>f(!0),className:"text-white hover:underline",children:[(0,Xi.jsx)("span",{className:"font-semibold",children:_}),(0,Xi.jsx)("span",{className:"text-gray-400 ml-1",children:"Following"})]})]})]})]})})}),(0,Xi.jsx)("div",{className:"bg-gray-800 border-b border-gray-700",children:(0,Xi.jsx)("div",{className:"flex",children:[{key:"posts",label:"Posts",count:O.length},{key:"comments",label:"Comments",count:12}].map(e=>(0,Xi.jsxs)("button",{onClick:()=>c(e.key),className:"px-6 py-3 text-sm font-medium border-b-2 transition-colors "+(l===e.key?"text-orange-500 border-orange-500":"text-gray-400 border-transparent hover:text-gray-300"),children:[e.label," (",e.count,")"]},e.key))})}),(0,Xi.jsxs)("div",{className:"p-6",children:["posts"===l&&(0,Xi.jsx)("div",{className:"space-y-4",children:O.map(e=>(0,Xi.jsx)("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:(0,Xi.jsxs)("div",{className:"p-4",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Xi.jsx)("img",{src:i.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(i.username)}&background=3f3f46&color=fff`,className:"w-8 h-8 rounded-full",alt:i.username}),(0,Xi.jsx)("div",{className:"flex-1",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsxs)("span",{className:"font-medium text-white",children:["u/",i.username]}),(0,Xi.jsx)("span",{className:"text-gray-400 text-sm",children:"\u2022"}),(0,Xi.jsx)("span",{className:"text-gray-400 text-sm",children:e.timestamp})]})}),(0,Xi.jsx)("button",{className:"text-gray-400 hover:text-gray-300",children:(0,Xi.jsx)(jo,{className:"w-5 h-5"})})]}),(0,Xi.jsx)("p",{className:"text-gray-300 mb-3 leading-relaxed",children:e.content}),e.image&&(0,Xi.jsx)("img",{src:e.image,className:"w-full rounded-lg mb-3",alt:"Post content"}),(0,Xi.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-400",children:[(0,Xi.jsxs)("button",{className:"flex items-center gap-2 hover:text-orange-500 transition-colors",children:[(0,Xi.jsx)(dl,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{children:e.likes})]}),(0,Xi.jsxs)("button",{className:"flex items-center gap-2 hover:text-blue-500 transition-colors",children:[(0,Xi.jsx)(ko,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{children:e.comments})]}),(0,Xi.jsxs)("button",{className:"flex items-center gap-2 hover:text-green-500 transition-colors",children:[(0,Xi.jsx)(gc,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{children:"Share"})]}),(0,Xi.jsxs)("button",{className:"flex items-center gap-2 hover:text-yellow-500 transition-colors",children:[(0,Xi.jsx)(Eo,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{children:"Save"})]})]})]})},e.id))}),"comments"===l&&(0,Xi.jsx)("div",{className:"space-y-3",children:[{id:"c1",text:"Awesome build, love the details!",time:"1h ago"},{id:"c2",text:"Where did you ride this weekend?",time:"1d ago"}].map(e=>(0,Xi.jsxs)("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4 flex items-start gap-3",children:[(0,Xi.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-700"}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:(0,Xi.jsx)("span",{children:e.time})}),(0,Xi.jsx)("p",{className:"text-gray-200 mt-1",children:e.text})]})]},e.id))}),(h||m)&&(0,Xi.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>{p(!1),f(!1)},children:(0,Xi.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl w-full max-w-md p-4",onClick:e=>e.stopPropagation(),children:[(0,Xi.jsx)("h3",{className:"text-white font-semibold mb-3",children:h?"Followers":"Following"}),(0,Xi.jsx)("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:(()=>{const e=h?El.listFollowers(i.id):El.listFollowing(i.id);return 0===e.length?(0,Xi.jsx)("div",{className:"text-gray-500 text-sm",children:"None"}):e.map(e=>(0,Xi.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-gray-700/40",children:[(0,Xi.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-600"}),(0,Xi.jsx)("div",{className:"text-gray-200 text-sm",children:e})]},e))})()}),(0,Xi.jsx)("div",{className:"flex justify-end mt-3",children:(0,Xi.jsx)("button",{onClick:()=>{p(!1),f(!1)},className:"px-4 py-2 rounded-lg bg-gray-700 text-white",children:"Close"})})]})}),d&&(0,Xi.jsx)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 px-4 py-2 rounded-lg bg-black/80 text-white text-sm border border-white/10",children:d})]})]})})},vc=Vi("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),bc=Vi("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),wc=Vi("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),jc=Vi("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function Nc(e,t){return function(){return e.apply(t,arguments)}}const{toString:kc}=Object.prototype,{getPrototypeOf:Sc}=Object,{iterator:Cc,toStringTag:Ec}=Symbol,_c=(Pc=Object.create(null),e=>{const t=kc.call(e);return Pc[t]||(Pc[t]=t.slice(8,-1).toLowerCase())});var Pc;const Tc=e=>(e=e.toLowerCase(),t=>_c(t)===e),Ac=e=>t=>typeof t===e,{isArray:Oc}=Array,Rc=Ac("undefined");function Mc(e){return null!==e&&!Rc(e)&&null!==e.constructor&&!Rc(e.constructor)&&Ic(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Lc=Tc("ArrayBuffer");const Dc=Ac("string"),Ic=Ac("function"),Fc=Ac("number"),Uc=e=>null!==e&&"object"===typeof e,$c=e=>{if("object"!==_c(e))return!1;const t=Sc(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Ec in e)&&!(Cc in e)},Bc=Tc("Date"),zc=Tc("File"),qc=Tc("Blob"),Vc=Tc("FileList"),Hc=Tc("URLSearchParams"),[Wc,Kc,Jc,Gc]=["ReadableStream","Request","Response","Headers"].map(Tc);function Qc(e,t){let r,s,{allOwnKeys:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Oc(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(Mc(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),a=s.length;let i;for(r=0;r<a;r++)i=s[r],t.call(null,e[i],i,e)}}function Yc(e,t){if(Mc(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s,n=r.length;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const Xc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Zc=e=>!Rc(e)&&e!==Xc;const ed=(td="undefined"!==typeof Uint8Array&&Sc(Uint8Array),e=>td&&e instanceof td);var td;const rd=Tc("HTMLFormElement"),sd=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),nd=Tc("RegExp"),ad=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};Qc(r,(r,n)=>{let a;!1!==(a=t(r,n,e))&&(s[n]=a||r)}),Object.defineProperties(e,s)};const id=Tc("AsyncFunction"),od=((e,t)=>{return e?setImmediate:t?(r=`axios@${Math.random()}`,s=[],Xc.addEventListener("message",e=>{let{source:t,data:n}=e;t===Xc&&n===r&&s.length&&s.shift()()},!1),e=>{s.push(e),Xc.postMessage(r,"*")}):e=>setTimeout(e);var r,s})("function"===typeof setImmediate,Ic(Xc.postMessage)),ld="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Xc):"undefined"!==typeof process&&process.nextTick||od,cd={isArray:Oc,isArrayBuffer:Lc,isBuffer:Mc,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Ic(e.append)&&("formdata"===(t=_c(e))||"object"===t&&Ic(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Lc(e.buffer),t},isString:Dc,isNumber:Fc,isBoolean:e=>!0===e||!1===e,isObject:Uc,isPlainObject:$c,isEmptyObject:e=>{if(!Uc(e)||Mc(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:Wc,isRequest:Kc,isResponse:Jc,isHeaders:Gc,isUndefined:Rc,isDate:Bc,isFile:zc,isBlob:qc,isRegExp:nd,isFunction:Ic,isStream:e=>Uc(e)&&Ic(e.pipe),isURLSearchParams:Hc,isTypedArray:ed,isFileList:Vc,forEach:Qc,merge:function e(){const{caseless:t}=Zc(this)&&this||{},r={},s=(s,n)=>{const a=t&&Yc(r,n)||n;$c(r[a])&&$c(s)?r[a]=e(r[a],s):$c(s)?r[a]=e({},s):Oc(s)?r[a]=s.slice():r[a]=s};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Qc(arguments[n],s);return r},extend:function(e,t,r){let{allOwnKeys:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Qc(t,(t,s)=>{r&&Ic(t)?e[s]=Nc(t,r):e[s]=t},{allOwnKeys:s}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,s)=>{let n,a,i;const o={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),a=n.length;a-- >0;)i=n[a],s&&!s(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==r&&Sc(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:_c,kindOfTest:Tc,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return-1!==s&&s===r},toArray:e=>{if(!e)return null;if(Oc(e))return e;let t=e.length;if(!Fc(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Cc]).call(e);let s;for(;(s=r.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const s=[];for(;null!==(r=e.exec(t));)s.push(r);return s},isHTMLForm:rd,hasOwnProperty:sd,hasOwnProp:sd,reduceDescriptors:ad,freezeMethods:e=>{ad(e,(t,r)=>{if(Ic(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const s=e[r];Ic(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},s=e=>{e.forEach(e=>{r[e]=!0})};return Oc(e)?s(e):s(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Yc,global:Xc,isContextDefined:Zc,isSpecCompliantForm:function(e){return!!(e&&Ic(e.append)&&"FormData"===e[Ec]&&e[Cc])},toJSONObject:e=>{const t=new Array(10),r=(e,s)=>{if(Uc(e)){if(t.indexOf(e)>=0)return;if(Mc(e))return e;if(!("toJSON"in e)){t[s]=e;const n=Oc(e)?[]:{};return Qc(e,(e,t)=>{const a=r(e,s+1);!Rc(a)&&(n[t]=a)}),t[s]=void 0,n}}return e};return r(e,0)},isAsyncFn:id,isThenable:e=>e&&(Uc(e)||Ic(e))&&Ic(e.then)&&Ic(e.catch),setImmediate:od,asap:ld,isIterable:e=>null!=e&&Ic(e[Cc])};function dd(e,t,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}cd.inherits(dd,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:cd.toJSONObject(this.config),code:this.code,status:this.status}}});const ud=dd.prototype,hd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{hd[e]={value:e}}),Object.defineProperties(dd,hd),Object.defineProperty(ud,"isAxiosError",{value:!0}),dd.from=(e,t,r,s,n,a)=>{const i=Object.create(ud);return cd.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),dd.call(i,e.message,t,r,s,n),i.cause=e,i.name=e.name,a&&Object.assign(i,a),i};const pd=dd;function md(e){return cd.isPlainObject(e)||cd.isArray(e)}function fd(e){return cd.endsWith(e,"[]")?e.slice(0,-2):e}function xd(e,t,r){return e?e.concat(t).map(function(e,t){return e=fd(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const gd=cd.toFlatObject(cd,{},null,function(e){return/^is[A-Z]/.test(e)});const yd=function(e,t,r){if(!cd.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(r=cd.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!cd.isUndefined(t[e])})).metaTokens,n=r.visitor||c,a=r.dots,i=r.indexes,o=(r.Blob||"undefined"!==typeof Blob&&Blob)&&cd.isSpecCompliantForm(t);if(!cd.isFunction(n))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(cd.isDate(e))return e.toISOString();if(cd.isBoolean(e))return e.toString();if(!o&&cd.isBlob(e))throw new pd("Blob is not supported. Use a Buffer instead.");return cd.isArrayBuffer(e)||cd.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,n){let o=e;if(e&&!n&&"object"===typeof e)if(cd.endsWith(r,"{}"))r=s?r:r.slice(0,-2),e=JSON.stringify(e);else if(cd.isArray(e)&&function(e){return cd.isArray(e)&&!e.some(md)}(e)||(cd.isFileList(e)||cd.endsWith(r,"[]"))&&(o=cd.toArray(e)))return r=fd(r),o.forEach(function(e,s){!cd.isUndefined(e)&&null!==e&&t.append(!0===i?xd([r],s,a):null===i?r:r+"[]",l(e))}),!1;return!!md(e)||(t.append(xd(n,r,a),l(e)),!1)}const d=[],u=Object.assign(gd,{defaultVisitor:c,convertValue:l,isVisitable:md});if(!cd.isObject(e))throw new TypeError("data must be an object");return function e(r,s){if(!cd.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+s.join("."));d.push(r),cd.forEach(r,function(r,a){!0===(!(cd.isUndefined(r)||null===r)&&n.call(t,r,cd.isString(a)?a.trim():a,s,u))&&e(r,s?s.concat(a):[a])}),d.pop()}}(e),t};function vd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function bd(e,t){this._pairs=[],e&&yd(e,this,t)}const wd=bd.prototype;wd.append=function(e,t){this._pairs.push([e,t])},wd.toString=function(e){const t=e?function(t){return e.call(this,t,vd)}:vd;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const jd=bd;function Nd(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function kd(e,t,r){if(!t)return e;const s=r&&r.encode||Nd;cd.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let a;if(a=n?n(t,r):cd.isURLSearchParams(t)?t.toString():new jd(t,r).toString(s),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const Sd=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){cd.forEach(this.handlers,function(t){null!==t&&e(t)})}},Cd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ed={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:jd,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},_d="undefined"!==typeof window&&"undefined"!==typeof document,Pd="object"===typeof navigator&&navigator||void 0,Td=_d&&(!Pd||["ReactNative","NativeScript","NS"].indexOf(Pd.product)<0),Ad="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Od=_d&&window.location.href||"http://localhost",Rd={...e,...Ed};const Md=function(e){function t(e,r,s,n){let a=e[n++];if("__proto__"===a)return!0;const i=Number.isFinite(+a),o=n>=e.length;if(a=!a&&cd.isArray(s)?s.length:a,o)return cd.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!i;s[a]&&cd.isObject(s[a])||(s[a]=[]);return t(e,r,s[a],n)&&cd.isArray(s[a])&&(s[a]=function(e){const t={},r=Object.keys(e);let s;const n=r.length;let a;for(s=0;s<n;s++)a=r[s],t[a]=e[a];return t}(s[a])),!i}if(cd.isFormData(e)&&cd.isFunction(e.entries)){const r={};return cd.forEachEntry(e,(e,s)=>{t(function(e){return cd.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),s,r,0)}),r}return null};const Ld={transitional:Cd,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",s=r.indexOf("application/json")>-1,n=cd.isObject(e);n&&cd.isHTMLForm(e)&&(e=new FormData(e));if(cd.isFormData(e))return s?JSON.stringify(Md(e)):e;if(cd.isArrayBuffer(e)||cd.isBuffer(e)||cd.isStream(e)||cd.isFile(e)||cd.isBlob(e)||cd.isReadableStream(e))return e;if(cd.isArrayBufferView(e))return e.buffer;if(cd.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(n){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return yd(e,new Rd.classes.URLSearchParams,{visitor:function(e,t,r,s){return Rd.isNode&&cd.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((a=cd.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return yd(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||s?(t.setContentType("application/json",!1),function(e,t,r){if(cd.isString(e))try{return(t||JSON.parse)(e),cd.trim(e)}catch(s){if("SyntaxError"!==s.name)throw s}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ld.transitional,r=t&&t.forcedJSONParsing,s="json"===this.responseType;if(cd.isResponse(e)||cd.isReadableStream(e))return e;if(e&&cd.isString(e)&&(r&&!this.responseType||s)){const r=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(n){if(r){if("SyntaxError"===n.name)throw pd.from(n,pd.ERR_BAD_RESPONSE,this,null,this.response);throw n}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rd.classes.FormData,Blob:Rd.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};cd.forEach(["delete","get","head","post","put","patch"],e=>{Ld.headers[e]={}});const Dd=Ld,Id=cd.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Fd=Symbol("internals");function Ud(e){return e&&String(e).trim().toLowerCase()}function $d(e){return!1===e||null==e?e:cd.isArray(e)?e.map($d):String(e)}function Bd(e,t,r,s,n){return cd.isFunction(s)?s.call(this,t,r):(n&&(t=r),cd.isString(t)?cd.isString(s)?-1!==t.indexOf(s):cd.isRegExp(s)?s.test(t):void 0:void 0)}class zd{constructor(e){e&&this.set(e)}set(e,t,r){const s=this;function n(e,t,r){const n=Ud(t);if(!n)throw new Error("header name must be a non-empty string");const a=cd.findKey(s,n);(!a||void 0===s[a]||!0===r||void 0===r&&!1!==s[a])&&(s[a||t]=$d(e))}const a=(e,t)=>cd.forEach(e,(e,r)=>n(e,r,t));if(cd.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(cd.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let r,s,n;return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),r=e.substring(0,n).trim().toLowerCase(),s=e.substring(n+1).trim(),!r||t[r]&&Id[r]||("set-cookie"===r?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t})(e),t);else if(cd.isObject(e)&&cd.isIterable(e)){let r,s,n={};for(const t of e){if(!cd.isArray(t))throw TypeError("Object iterator must return a key-value pair");n[s=t[0]]=(r=n[s])?cd.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}a(n,t)}else null!=e&&n(t,e,r);return this}get(e,t){if(e=Ud(e)){const r=cd.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}(e);if(cd.isFunction(t))return t.call(this,e,r);if(cd.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ud(e)){const r=cd.findKey(this,e);return!(!r||void 0===this[r]||t&&!Bd(0,this[r],r,t))}return!1}delete(e,t){const r=this;let s=!1;function n(e){if(e=Ud(e)){const n=cd.findKey(r,e);!n||t&&!Bd(0,r[n],n,t)||(delete r[n],s=!0)}}return cd.isArray(e)?e.forEach(n):n(e),s}clear(e){const t=Object.keys(this);let r=t.length,s=!1;for(;r--;){const n=t[r];e&&!Bd(0,this[n],n,e,!0)||(delete this[n],s=!0)}return s}normalize(e){const t=this,r={};return cd.forEach(this,(s,n)=>{const a=cd.findKey(r,n);if(a)return t[a]=$d(s),void delete t[n];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(n):String(n).trim();i!==n&&delete t[n],t[i]=$d(s),r[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return cd.forEach(this,(r,s)=>{null!=r&&!1!==r&&(t[s]=e&&cd.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,s=new Array(r>1?r-1:0),n=1;n<r;n++)s[n-1]=arguments[n];return s.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Fd]=this[Fd]={accessors:{}}).accessors,r=this.prototype;function s(e){const s=Ud(e);t[s]||(!function(e,t){const r=cd.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(e,r,n){return this[s].call(this,t,e,r,n)},configurable:!0})})}(r,e),t[s]=!0)}return cd.isArray(e)?e.forEach(s):s(e),this}}zd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),cd.reduceDescriptors(zd.prototype,(e,t)=>{let{value:r}=e,s=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[s]=e}}}),cd.freezeMethods(zd);const qd=zd;function Vd(e,t){const r=this||Dd,s=t||r,n=qd.from(s.headers);let a=s.data;return cd.forEach(e,function(e){a=e.call(r,a,n.normalize(),t?t.status:void 0)}),n.normalize(),a}function Hd(e){return!(!e||!e.__CANCEL__)}function Wd(e,t,r){pd.call(this,null==e?"canceled":e,pd.ERR_CANCELED,t,r),this.name="CanceledError"}cd.inherits(Wd,pd,{__CANCEL__:!0});const Kd=Wd;function Jd(e,t,r){const s=r.config.validateStatus;r.status&&s&&!s(r.status)?t(new pd("Request failed with status code "+r.status,[pd.ERR_BAD_REQUEST,pd.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const Gd=function(e,t){e=e||10;const r=new Array(e),s=new Array(e);let n,a=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=s[i];n||(n=l),r[a]=o,s[a]=l;let d=i,u=0;for(;d!==a;)u+=r[d++],d%=e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),l-n<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const Qd=function(e,t){let r,s,n=0,a=1e3/t;const i=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n=a,r=null,s&&(clearTimeout(s),s=null),e(...t)};return[function(){const e=Date.now(),t=e-n;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=a?i(l,e):(r=l,s||(s=setTimeout(()=>{s=null,i(r)},a-t)))},()=>r&&i(r)]},Yd=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=0;const n=Gd(50,250);return Qd(r=>{const a=r.loaded,i=r.lengthComputable?r.total:void 0,o=a-s,l=n(o);s=a;e({loaded:a,total:i,progress:i?a/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&a<=i?(i-a)/l:void 0,event:r,lengthComputable:null!=i,[t?"download":"upload"]:!0})},r)},Xd=(e,t)=>{const r=null!=e;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},Zd=e=>function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return cd.asap(()=>e(...r))},eu=Rd.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Rd.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Rd.origin),Rd.navigator&&/(msie|trident)/i.test(Rd.navigator.userAgent)):()=>!0,tu=Rd.hasStandardBrowserEnv?{write(e,t,r,s,n,a){const i=[e+"="+encodeURIComponent(t)];cd.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),cd.isString(s)&&i.push("path="+s),cd.isString(n)&&i.push("domain="+n),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ru(e,t,r){let s=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(s||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const su=e=>e instanceof qd?{...e}:e;function nu(e,t){t=t||{};const r={};function s(e,t,r,s){return cd.isPlainObject(e)&&cd.isPlainObject(t)?cd.merge.call({caseless:s},e,t):cd.isPlainObject(t)?cd.merge({},t):cd.isArray(t)?t.slice():t}function n(e,t,r,n){return cd.isUndefined(t)?cd.isUndefined(e)?void 0:s(void 0,e,0,n):s(e,t,0,n)}function a(e,t){if(!cd.isUndefined(t))return s(void 0,t)}function i(e,t){return cd.isUndefined(t)?cd.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function o(r,n,a){return a in t?s(r,n):a in e?s(void 0,r):void 0}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,r)=>n(su(e),su(t),0,!0)};return cd.forEach(Object.keys({...e,...t}),function(s){const a=l[s]||n,i=a(e[s],t[s],s);cd.isUndefined(i)&&a!==o||(r[s]=i)}),r}const au=e=>{const t=nu({},e);let r,{data:s,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=qd.from(o),t.url=kd(ru(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),cd.isFormData(s))if(Rd.hasStandardBrowserEnv||Rd.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(r=o.getContentType())){const[e,...t]=r?r.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Rd.hasStandardBrowserEnv&&(n&&cd.isFunction(n)&&(n=n(t)),n||!1!==n&&eu(t.url))){const e=a&&i&&tu.read(i);e&&o.set(a,e)}return t},iu="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const s=au(e);let n=s.data;const a=qd.from(s.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:p}=s;function m(){c&&c(),d&&d(),s.cancelToken&&s.cancelToken.unsubscribe(i),s.signal&&s.signal.removeEventListener("abort",i)}let f=new XMLHttpRequest;function x(){if(!f)return;const s=qd.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Jd(function(e){t(e),m()},function(e){r(e),m()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:s,config:e,request:f}),f=null}f.open(s.method.toUpperCase(),s.url,!0),f.timeout=s.timeout,"onloadend"in f?f.onloadend=x:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(x)},f.onabort=function(){f&&(r(new pd("Request aborted",pd.ECONNABORTED,e,f)),f=null)},f.onerror=function(){r(new pd("Network Error",pd.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const n=s.transitional||Cd;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),r(new pd(t,n.clarifyTimeoutError?pd.ETIMEDOUT:pd.ECONNABORTED,e,f)),f=null},void 0===n&&a.setContentType(null),"setRequestHeader"in f&&cd.forEach(a.toJSON(),function(e,t){f.setRequestHeader(t,e)}),cd.isUndefined(s.withCredentials)||(f.withCredentials=!!s.withCredentials),u&&"json"!==u&&(f.responseType=s.responseType),p&&([l,d]=Yd(p,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=Yd(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(s.cancelToken||s.signal)&&(i=t=>{f&&(r(!t||t.type?new Kd(null,e,f):t),f.abort(),f=null)},s.cancelToken&&s.cancelToken.subscribe(i),s.signal&&(s.signal.aborted?i():s.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(s.url);g&&-1===Rd.protocols.indexOf(g)?r(new pd("Unsupported protocol "+g+":",pd.ERR_BAD_REQUEST,e)):f.send(n||null)})},ou=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,s=new AbortController;const n=function(e){if(!r){r=!0,i();const t=e instanceof Error?e:this.reason;s.abort(t instanceof pd?t:new Kd(t instanceof Error?t.message:t))}};let a=t&&setTimeout(()=>{a=null,n(new pd(`timeout ${t} of ms exceeded`,pd.ETIMEDOUT))},t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)}),e=null)};e.forEach(e=>e.addEventListener("abort",n));const{signal:o}=s;return o.unsubscribe=()=>cd.asap(i),o}},lu=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let s,n=0;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},cu=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},du=(e,t,r,s)=>{const n=async function*(e,t){for await(const r of cu(e))yield*lu(r,t)}(e,t);let a,i=0,o=e=>{a||(a=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await n.next();if(t)return o(),void e.close();let a=s.byteLength;if(r){let e=i+=a;r(e)}e.enqueue(new Uint8Array(s))}catch(t){throw o(t),t}},cancel:e=>(o(e),n.return())},{highWaterMark:2})},uu="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,hu=uu&&"function"===typeof ReadableStream,pu=uu&&("function"===typeof TextEncoder?(mu=new TextEncoder,e=>mu.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var mu;const fu=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return!!e(...r)}catch(n){return!1}},xu=hu&&fu(()=>{let e=!1;const t=new Request(Rd.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),gu=hu&&fu(()=>cd.isReadableStream(new Response("").body)),yu={stream:gu&&(e=>e.body)};var vu;uu&&(vu=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!yu[e]&&(yu[e]=cd.isFunction(vu[e])?t=>t[e]():(t,r)=>{throw new pd(`Response type '${e}' is not supported`,pd.ERR_NOT_SUPPORT,r)})}));const bu=async(e,t)=>{const r=cd.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(cd.isBlob(e))return e.size;if(cd.isSpecCompliantForm(e)){const t=new Request(Rd.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return cd.isArrayBufferView(e)||cd.isArrayBuffer(e)?e.byteLength:(cd.isURLSearchParams(e)&&(e+=""),cd.isString(e)?(await pu(e)).byteLength:void 0)})(t):r},wu={http:null,xhr:iu,fetch:uu&&(async e=>{let{url:t,method:r,data:s,signal:n,cancelToken:a,timeout:i,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=au(e);c=c?(c+"").toLowerCase():"text";let p,m=ou([n,a&&a.toAbortSignal()],i);const f=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let x;try{if(l&&xu&&"get"!==r&&"head"!==r&&0!==(x=await bu(d,s))){let e,r=new Request(t,{method:"POST",body:s,duplex:"half"});if(cd.isFormData(s)&&(e=r.headers.get("content-type"))&&d.setContentType(e),r.body){const[e,t]=Xd(x,Yd(Zd(l)));s=du(r.body,65536,e,t)}}cd.isString(u)||(u=u?"include":"omit");const n="credentials"in Request.prototype;p=new Request(t,{...h,signal:m,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",credentials:n?u:void 0});let a=await fetch(p,h);const i=gu&&("stream"===c||"response"===c);if(gu&&(o||i&&f)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=a[t]});const t=cd.toFiniteNumber(a.headers.get("content-length")),[r,s]=o&&Xd(t,Yd(Zd(o),!0))||[];a=new Response(du(a.body,65536,r,()=>{s&&s(),f&&f()}),e)}c=c||"text";let g=await yu[cd.findKey(yu,c)||"text"](a,e);return!i&&f&&f(),await new Promise((t,r)=>{Jd(t,r,{data:g,headers:qd.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:p})})}catch(g){if(f&&f(),g&&"TypeError"===g.name&&/Load failed|fetch/i.test(g.message))throw Object.assign(new pd("Network Error",pd.ERR_NETWORK,e,p),{cause:g.cause||g});throw pd.from(g,g&&g.code,e,p)}})};cd.forEach(wu,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});const ju=e=>`- ${e}`,Nu=e=>cd.isFunction(e)||null===e||!1===e,ku=e=>{e=cd.isArray(e)?e:[e];const{length:t}=e;let r,s;const n={};for(let a=0;a<t;a++){let t;if(r=e[a],s=r,!Nu(r)&&(s=wu[(t=String(r)).toLowerCase()],void 0===s))throw new pd(`Unknown adapter '${t}'`);if(s)break;n[t||"#"+a]=s}if(!s){const e=Object.entries(n).map(e=>{let[t,r]=e;return`adapter ${t} `+(!1===r?"is not supported by the environment":"is not available in the build")});let r=t?e.length>1?"since :\n"+e.map(ju).join("\n"):" "+ju(e[0]):"as no adapter specified";throw new pd("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return s};function Su(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Kd(null,e)}function Cu(e){Su(e),e.headers=qd.from(e.headers),e.data=Vd.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ku(e.adapter||Dd.adapter)(e).then(function(t){return Su(e),t.data=Vd.call(e,e.transformResponse,t),t.headers=qd.from(t.headers),t},function(t){return Hd(t)||(Su(e),t&&t.response&&(t.response.data=Vd.call(e,e.transformResponse,t.response),t.response.headers=qd.from(t.response.headers))),Promise.reject(t)})}const Eu="1.11.0",_u={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_u[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Pu={};_u.transitional=function(e,t,r){function s(e,t){return"[Axios v"+Eu+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,n,a)=>{if(!1===e)throw new pd(s(n," has been removed"+(t?" in "+t:"")),pd.ERR_DEPRECATED);return t&&!Pu[n]&&(Pu[n]=!0,console.warn(s(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,a)}},_u.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};const Tu={assertOptions:function(e,t,r){if("object"!==typeof e)throw new pd("options must be an object",pd.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const a=s[n],i=t[a];if(i){const t=e[a],r=void 0===t||i(t,a,e);if(!0!==r)throw new pd("option "+a+" must be "+r,pd.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new pd("Unknown option "+a,pd.ERR_BAD_OPTION)}},validators:_u},Au=Tu.validators;class Ou{constructor(e){this.defaults=e||{},this.interceptors={request:new Sd,response:new Sd}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(s){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=nu(this.defaults,t);const{transitional:r,paramsSerializer:s,headers:n}=t;void 0!==r&&Tu.assertOptions(r,{silentJSONParsing:Au.transitional(Au.boolean),forcedJSONParsing:Au.transitional(Au.boolean),clarifyTimeoutError:Au.transitional(Au.boolean)},!1),null!=s&&(cd.isFunction(s)?t.paramsSerializer={serialize:s}:Tu.assertOptions(s,{encode:Au.function,serialize:Au.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Tu.assertOptions(t,{baseUrl:Au.spelling("baseURL"),withXsrfToken:Au.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=n&&cd.merge(n.common,n[t.method]);n&&cd.forEach(["delete","get","head","post","put","patch","common"],e=>{delete n[e]}),t.headers=qd.concat(a,n);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[Cu.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(u=0;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=Cu.call(this,h)}catch(p){return Promise.reject(p)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return kd(ru((e=nu(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}cd.forEach(["delete","get","head","options"],function(e){Ou.prototype[e]=function(t,r){return this.request(nu(r||{},{method:e,url:t,data:(r||{}).data}))}}),cd.forEach(["post","put","patch"],function(e){function t(t){return function(r,s,n){return this.request(nu(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}Ou.prototype[e]=t(),Ou.prototype[e+"Form"]=t(!0)});const Ru=Ou;class Mu{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const s=new Promise(e=>{r.subscribe(e),t=e}).then(e);return s.cancel=function(){r.unsubscribe(t)},s},e(function(e,s,n){r.reason||(r.reason=new Kd(e,s,n),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Mu(function(t){e=t}),cancel:e}}}const Lu=Mu;const Du={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Du).forEach(e=>{let[t,r]=e;Du[r]=t});const Iu=Du;const Fu=function e(t){const r=new Ru(t),s=Nc(Ru.prototype.request,r);return cd.extend(s,Ru.prototype,r,{allOwnKeys:!0}),cd.extend(s,r,null,{allOwnKeys:!0}),s.create=function(r){return e(nu(t,r))},s}(Dd);Fu.Axios=Ru,Fu.CanceledError=Kd,Fu.CancelToken=Lu,Fu.isCancel=Hd,Fu.VERSION=Eu,Fu.toFormData=yd,Fu.AxiosError=pd,Fu.Cancel=Fu.CanceledError,Fu.all=function(e){return Promise.all(e)},Fu.spread=function(e){return function(t){return e.apply(null,t)}},Fu.isAxiosError=function(e){return cd.isObject(e)&&!0===e.isAxiosError},Fu.mergeConfig=nu,Fu.AxiosHeaders=qd,Fu.formToJSON=e=>Md(cd.isHTMLForm(e)?new FormData(e):e),Fu.getAdapter=ku,Fu.HttpStatusCode=Iu,Fu.default=Fu;const Uu=Fu,$u=({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE||"").replace(/\/$/,""),Bu=Uu.create({baseURL:$u||"/api",withCredentials:!0});async function zu(e){return function(e){localStorage.setItem("authToken",e)}(e),qu()}async function qu(){try{const{data:e}=await Bu.get("/users/me");return e}catch(e){const t=(localStorage.getItem("authToken")||"guest").toLowerCase();return{id:t,name:t,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(t)}&background=random`}}}Bu.interceptors.request.use(e=>{const t=localStorage.getItem("authToken");return t&&(e.headers=e.headers||{},e.headers.Authorization=`Bearer ${t}`),e});const Vu=e=>{let{onLogin:r}=e;const{login:s}=ho(),[n,a]=(0,t.useState)(!0),[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(""),[h,p]=(0,t.useState)(!1),[m,f]=(0,t.useState)(""),[x,g]=(0,t.useState)(""),[y,v]=(0,t.useState)(!1),[b,w]=(0,t.useState)({emailOrUserId:"",email:"",password:"",username:"",fullName:"",confirmPassword:""}),j=e=>{w(t=>({...t,[e.target.name]:e.target.value}))},N=async e=>{c(!0);try{const t={id:"social-"+Date.now(),username:`${e}user`,email:`user@${e}.com`,fullName:`${e.charAt(0).toUpperCase()+e.slice(1)} User`,avatar:`https://ui-avatars.com/api/?name=${e}+User&background=random`,bio:`Joined via ${e}`,followers:0,following:0,posts:0,joinedDate:(new Date).toISOString().split("T")[0]};s(t),null===r||void 0===r||r()}catch(t){u("Social login failed. Please try again.")}finally{c(!1)}},k=n?b.emailOrUserId&&b.password:b.email&&b.password&&b.username&&b.password===b.confirmPassword;return(0,Xi.jsxs)("div",{className:"min-h-screen bg-app-background flex flex-col items-center justify-center",children:[(0,Xi.jsx)(Fi.div,{className:"mx-4 sm:mx-6 md:mx-8 lg:mx-auto lg:max-w-3xl pt-2 sm:pt-3 md:pt-4 mb-4 sm:mb-6 p-3 sm:p-4 bg-app-card-surface rounded-xl border border-app-borders",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)("div",{className:"flex items-center justify-center gap-2 mb-3",children:(0,Xi.jsx)("span",{className:"text-lg font-semibold text-app-primary-accent",children:"PEDAL"})}),(0,Xi.jsx)("p",{className:"text-app-text-muted text-sm sm:text-base leading-relaxed max-w-2xl mx-auto px-2",children:"Connect with like minded buddies with Pedal"})]})}),(0,Xi.jsx)("div",{className:"flex items-center justify-center px-4 sm:px-6 md:px-8 pb-6",children:(0,Xi.jsxs)(Fi.div,{className:"w-full max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg bg-app-card-surface rounded-xl border border-app-borders p-4 sm:p-5 md:p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:[(0,Xi.jsx)("div",{className:"text-center mb-4 sm:mb-6",children:(0,Xi.jsx)("p",{className:"text-app-text-muted text-sm sm:text-base",children:n?"Continue your Pedal journey":"Create your account and start exploring"})}),(0,Xi.jsxs)("div",{className:"flex bg-app-background rounded-lg p-1 mb-4 sm:mb-6",children:[(0,Xi.jsx)("button",{onClick:()=>a(!0),className:"flex-1 py-2 sm:py-3 px-3 sm:px-4 rounded-lg text-sm sm:text-base font-medium transition-all "+(n?"bg-app-primary-accent text-white":"text-app-text-muted hover:text-app-text-primary"),children:"Sign In"}),(0,Xi.jsx)("button",{onClick:()=>a(!1),className:"flex-1 py-2 sm:py-3 px-3 sm:px-4 rounded-lg text-sm sm:text-base font-medium transition-all "+(n?"text-app-text-muted hover:text-app-text-primary":"bg-app-primary-accent text-white"),children:"Sign Up"})]}),d&&(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl flex items-center gap-2",children:[(0,Xi.jsx)(Io,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),(0,Xi.jsx)("span",{className:"text-red-400 text-sm",children:d})]}),(0,Xi.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(""),c(!0);try{if(n){const e=(b.emailOrUserId||"").trim().toLowerCase(),t=e.includes("@")?e.split("@")[0]:e;if(!t)throw new Error("Please enter your username or email");await zu(t);const n=await qu(),a={id:n.id,username:n.id,email:b.emailOrUserId.includes("@")?b.emailOrUserId:`${n.id}@example.com`,fullName:n.name||n.id,avatar:n.avatar,bio:"",location:"",joinedDate:(new Date).toISOString(),followers:0,following:0,posts:0};s(a);try{await el.default.register({username:a.username,email:a.email,fullName:a.fullName,password:b.password})}catch{}null===r||void 0===r||r()}else{const e=(b.username||b.email||"").toLowerCase();await zu(e);const t=await qu(),n={id:t.id,username:t.id,email:b.email||`${t.id}@example.com`,fullName:t.name||t.id,avatar:t.avatar,bio:"",location:"",joinedDate:(new Date).toISOString(),followers:0,following:0,posts:0};s(n);try{await el.default.register({username:n.username,email:n.email,fullName:n.fullName,password:b.password})}catch{}null===r||void 0===r||r()}}catch(t){u(t instanceof Error?t.message:"An error occurred")}finally{c(!1)}},className:"space-y-4",children:[(0,Xi.jsx)(ol,{mode:"wait",children:!n&&(0,Xi.jsx)(Fi.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"space-y-4",children:(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Username"}),(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)(Qi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-app-text-muted"}),(0,Xi.jsx)("input",{type:"text",name:"username",value:b.username,onChange:j,placeholder:"Choose a username",className:"w-full pl-10 pr-4 py-3 bg-app-background border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:outline-none focus:ring-2 focus:ring-app-primary-accent/50 focus:border-app-primary-accent/50 transition-all"})]})]})})}),n?(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Email or User ID"}),(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)(Qi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-app-text-muted"}),(0,Xi.jsx)("input",{type:"text",name:"emailOrUserId",value:b.emailOrUserId,onChange:j,placeholder:"Enter your email or user ID",className:"w-full pl-10 pr-4 py-3 bg-app-background border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:outline-none focus:ring-2 focus:ring-app-primary-accent/50 focus:border-app-primary-accent/50 transition-all"})]})]}):(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Email"}),(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)(vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-app-text-muted"}),(0,Xi.jsx)("input",{type:"email",name:"email",value:b.email,onChange:j,placeholder:"Enter your email",className:"w-full pl-10 pr-4 py-3 bg-app-background border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:outline-none focus:ring-2 focus:ring-app-primary-accent/50 focus:border-app-primary-accent/50 transition-all"})]})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Password"}),(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)(bc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-app-text-muted"}),(0,Xi.jsx)("input",{type:i?"text":"password",name:"password",value:b.password,onChange:j,placeholder:"Enter your password",className:"w-full pl-10 pr-12 py-3 bg-app-background border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:outline-none focus:ring-2 focus:ring-app-primary-accent/50 focus:border-app-primary-accent/50 transition-all"}),(0,Xi.jsx)("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-app-text-muted hover:text-app-text-primary transition-colors",children:i?(0,Xi.jsx)(wc,{className:"w-5 h-5"}):(0,Xi.jsx)(jc,{className:"w-5 h-5"})})]})]}),(0,Xi.jsx)(ol,{mode:"wait",children:!n&&(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Confirm Password"}),(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)(bc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-app-text-muted"}),(0,Xi.jsx)("input",{type:i?"text":"password",name:"confirmPassword",value:b.confirmPassword,onChange:j,placeholder:"Confirm your password",className:"w-full pl-10 pr-4 py-3 bg-app-background border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:outline-none focus:ring-2 focus:ring-app-primary-accent/50 focus:border-app-primary-accent/50 transition-all"})]})]})}),n&&(0,Xi.jsx)("div",{className:"text-right",children:(0,Xi.jsx)("button",{type:"button",onClick:()=>p(!0),className:"text-sm text-app-primary-accent hover:text-app-primary-accent/80 transition-colors",children:"Forgot Password?"})}),(0,Xi.jsxs)(Fi.button,{type:"submit",disabled:!k,className:"w-full flex items-center justify-center gap-2 py-3 px-4 rounded-xl font-medium transition-all "+(k?"bg-gradient-to-r from-app-primary-accent to-orange-600 text-white hover:shadow-lg hover:shadow-app-primary-accent/25":"bg-app-background text-app-text-muted cursor-not-allowed border border-app-borders"),whileHover:k?{scale:1.02}:{},whileTap:k?{scale:.98}:{},children:[n?"Sign In":"Create Account",(0,Xi.jsx)(ll,{className:"w-5 h-5"})]})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-4 my-6",children:[(0,Xi.jsx)("div",{className:"flex-1 h-px bg-dark-border"}),(0,Xi.jsx)("span",{className:"text-sm text-app-text-muted",children:"or continue with"}),(0,Xi.jsx)("div",{className:"flex-1 h-px bg-dark-border"})]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,Xi.jsxs)(Fi.button,{type:"button",onClick:()=>N("google"),className:"flex items-center justify-center gap-3 p-3 rounded-xl border border-app-borders bg-dark-surface hover:bg-app-background hover:border-neon-orange/30 transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,Xi.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,Xi.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Xi.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Xi.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Xi.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,Xi.jsx)("span",{className:"text-sm font-medium text-app-text-primary",children:"Google"})]}),(0,Xi.jsxs)(Fi.button,{type:"button",onClick:()=>N("facebook"),className:"flex items-center justify-center gap-3 p-3 rounded-xl border border-app-borders bg-dark-surface hover:bg-app-background hover:border-neon-orange/30 transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,Xi.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Xi.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),(0,Xi.jsx)("span",{className:"text-sm font-medium text-app-text-primary",children:"Facebook"})]})]}),(0,Xi.jsxs)("div",{className:"mt-6 text-center text-sm text-app-text-muted",children:[n?"Don't have an account? ":"Already have an account? ",(0,Xi.jsx)("button",{onClick:()=>a(!n),className:"text-neon-orange hover:text-neon-orange/80 transition-colors font-medium",children:n?"Sign Up":"Sign In"})]})]})}),(0,Xi.jsx)(ol,{children:h&&(0,Xi.jsxs)(Fi.div,{className:"fixed inset-0 z-50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,Xi.jsx)("div",{className:"absolute inset-0 bg-black/60",onClick:()=>p(!1)}),(0,Xi.jsxs)(Fi.div,{className:"relative z-10 w-full max-w-sm mx-4 bg-app-card-surface border border-app-borders rounded-2xl p-5 shadow-xl",initial:{y:30,opacity:0},animate:{y:0,opacity:1},exit:{y:30,opacity:0},children:[(0,Xi.jsx)("h3",{className:"text-lg font-semibold text-app-text-primary mb-1",children:"Reset Password"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted mb-4",children:"Enter your account email and we'll send you a reset link."}),(0,Xi.jsxs)("div",{className:"mb-3",children:[(0,Xi.jsx)("label",{className:"block text-sm font-medium text-app-text-primary mb-2",children:"Email"}),(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)(vc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-app-text-muted"}),(0,Xi.jsx)("input",{type:"email",value:m,onChange:e=>f(e.target.value),placeholder:"you@example.com",className:"w-full pl-10 pr-4 py-3 bg-app-background border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:outline-none focus:ring-2 focus:ring-app-primary-accent/50 focus:border-app-primary-accent/50 transition-all"})]})]}),x&&(0,Xi.jsx)("div",{className:"mb-3 text-sm "+(x.includes("sent")?"text-emerald-400":"text-red-400"),children:x}),(0,Xi.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Xi.jsx)("button",{type:"button",className:"px-4 py-2 rounded-lg border border-app-borders text-app-text-primary hover:bg-app-background transition-colors",onClick:()=>p(!1),children:"Cancel"}),(0,Xi.jsx)("button",{type:"button",className:"px-4 py-2 rounded-lg bg-app-primary-accent text-white hover:brightness-110 disabled:opacity-60",disabled:y,onClick:async()=>{if(g(""),m&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m))try{v(!0),await new Promise(e=>setTimeout(e,800)),g("Password reset link sent to your email.")}catch(e){g("Failed to send reset link. Please try again.")}finally{v(!1)}else g("Please enter a valid email address.")},children:y?"Sending\u2026":"Send Reset Link"})]})]})]})})]})},Hu=Vi("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Wu=Vi("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ku=Vi("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Ju=Vi("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Gu=()=>{const e=[{icon:yo,title:"Community Driven",description:"Connect with cyclists worldwide and share your passion for riding"},{icon:Ji,title:"Route Tracking",description:"Discover new routes and track your cycling adventures"},{icon:Hu,title:"Achievements",description:"Earn badges and compete with fellow cyclists"},{icon:Wu,title:"Real-time Updates",description:"Get live updates on weather, traffic, and cycling conditions"},{icon:qo,title:"Safety First",description:"Built-in safety features and emergency support"},{icon:Ku,title:"Global Network",description:"Join a worldwide community of cycling enthusiasts"}];return(0,Xi.jsx)("div",{className:"min-h-screen bg-app-background",children:(0,Xi.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[(0,Xi.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-app-primary-accent to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Xi.jsx)("span",{className:"text-white font-bold text-3xl",children:"P"})}),(0,Xi.jsx)("h1",{className:"text-4xl font-bold text-app-text-primary mb-4",children:"About PEDAL"}),(0,Xi.jsx)("p",{className:"text-xl text-app-text-muted max-w-2xl mx-auto",children:"The ultimate social platform for cycling enthusiasts, connecting riders worldwide through shared passion and adventure."})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-app-card-surface rounded-xl p-8 mb-8 border border-app-borders",children:[(0,Xi.jsxs)("h2",{className:"text-2xl font-bold text-app-text-primary mb-4 flex items-center gap-3",children:[(0,Xi.jsx)(dl,{className:"w-6 h-6 text-app-primary-accent"}),"Our Mission"]}),(0,Xi.jsx)("p",{className:"text-app-text-muted leading-relaxed",children:"PEDAL was born from a simple belief: cycling is more than just transportation or exercise\u2014it's a way of life. We created this platform to bring together cyclists from all walks of life, whether you're a weekend warrior, daily commuter, or professional racer. Our mission is to foster a global community where riders can share experiences, discover new routes, stay safe, and inspire each other to push their limits."})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-8",children:[(0,Xi.jsx)("h2",{className:"text-2xl font-bold text-app-text-primary mb-6 text-center",children:"What Makes PEDAL Special"}),(0,Xi.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,t)=>{const r=e.icon;return(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+.1*t},className:"bg-app-card-surface rounded-xl p-6 border border-app-borders hover:border-app-primary-accent/30 transition-colors",children:[(0,Xi.jsx)("div",{className:"w-12 h-12 bg-app-primary-accent/10 rounded-lg flex items-center justify-center mb-4",children:(0,Xi.jsx)(r,{className:"w-6 h-6 text-app-primary-accent"})}),(0,Xi.jsx)("h3",{className:"text-lg font-semibold text-app-text-primary mb-2",children:e.title}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:e.description})]},e.title)})})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-app-primary-accent/10 to-orange-500/10 rounded-xl p-8 mb-8 border border-app-primary-accent/20",children:[(0,Xi.jsx)("h2",{className:"text-2xl font-bold text-app-text-primary mb-6 text-center",children:"Our Growing Community"}),(0,Xi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 text-center",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("div",{className:"text-3xl font-bold text-app-primary-accent mb-2",children:"50K+"}),(0,Xi.jsx)("div",{className:"text-app-text-muted",children:"Active Riders"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("div",{className:"text-3xl font-bold text-app-primary-accent mb-2",children:"2M+"}),(0,Xi.jsx)("div",{className:"text-app-text-muted",children:"Miles Tracked"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("div",{className:"text-3xl font-bold text-app-primary-accent mb-2",children:"15K+"}),(0,Xi.jsx)("div",{className:"text-app-text-muted",children:"Routes Shared"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("div",{className:"text-3xl font-bold text-app-primary-accent mb-2",children:"120+"}),(0,Xi.jsx)("div",{className:"text-app-text-muted",children:"Countries"})]})]})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-app-card-surface rounded-xl p-8 border border-app-borders text-center",children:[(0,Xi.jsx)("h2",{className:"text-2xl font-bold text-app-text-primary mb-4",children:"Built by Cyclists, for Cyclists"}),(0,Xi.jsx)("p",{className:"text-app-text-muted mb-6",children:"Our team consists of passionate cyclists, experienced developers, and design enthusiasts who understand the unique needs of the cycling community. We're committed to continuously improving PEDAL based on your feedback and the evolving needs of our riders."}),(0,Xi.jsxs)("div",{className:"flex items-center justify-center gap-2 text-app-primary-accent",children:[(0,Xi.jsx)(Ju,{className:"w-5 h-5"}),(0,Xi.jsx)("span",{className:"font-semibold",children:"Available on iOS, Android, and Web"})]})]})]})})},Qu=Vi("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Yu=()=>{const e=[{icon:qo,title:"Data Protection",description:"Your personal information is encrypted and securely stored using industry-standard protocols."},{icon:bc,title:"Privacy by Design",description:"Privacy considerations are built into every feature from the ground up."},{icon:wc,title:"Transparency",description:"We clearly explain what data we collect and how it's used in plain language."},{icon:Xl,title:"User Control",description:"You have full control over your data and can modify or delete it at any time."}];return(0,Xi.jsx)("div",{className:"min-h-screen bg-app-background",children:(0,Xi.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[(0,Xi.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-app-primary-accent to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Xi.jsx)(qo,{className:"w-10 h-10 text-white"})}),(0,Xi.jsx)("h1",{className:"text-4xl font-bold text-app-text-primary mb-4",children:"Privacy Policy"}),(0,Xi.jsx)("p",{className:"text-xl text-app-text-muted max-w-2xl mx-auto",children:"Your privacy is our priority. Learn how we protect and handle your data."}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted mt-2",children:"Last updated: January 2024"})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:[(0,Xi.jsx)("h2",{className:"text-2xl font-bold text-app-text-primary mb-6",children:"Our Privacy Principles"}),(0,Xi.jsx)("div",{className:"grid md:grid-cols-2 gap-6",children:e.map((e,t)=>{const r=e.icon;return(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+.1*t},className:"bg-app-card-surface rounded-xl p-6 border border-app-borders",children:[(0,Xi.jsx)("div",{className:"w-12 h-12 bg-app-primary-accent/10 rounded-lg flex items-center justify-center mb-4",children:(0,Xi.jsx)(r,{className:"w-6 h-6 text-app-primary-accent"})}),(0,Xi.jsx)("h3",{className:"text-lg font-semibold text-app-text-primary mb-2",children:e.title}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:e.description})]},e.title)})})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-app-card-surface rounded-xl p-8 mb-8 border border-app-borders",children:[(0,Xi.jsxs)("h2",{className:"text-2xl font-bold text-app-text-primary mb-6 flex items-center gap-3",children:[(0,Xi.jsx)(Ko,{className:"w-6 h-6 text-app-primary-accent"}),"What Data We Collect"]}),(0,Xi.jsx)("div",{className:"space-y-4",children:[{type:"Profile Information",description:"Name, email, profile picture, and cycling preferences",required:!0},{type:"Activity Data",description:"Routes, distances, times, and cycling statistics",required:!1},{type:"Location Data",description:"GPS coordinates for route tracking (only when actively using the app)",required:!1},{type:"Social Interactions",description:"Posts, comments, likes, and messages with other users",required:!1},{type:"Device Information",description:"Device type, operating system, and app version for technical support",required:!0},{type:"Usage Analytics",description:"Anonymous data about app usage to improve features",required:!1}].map((e,t)=>(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+.1*t},className:"flex items-start gap-4 p-4 rounded-lg bg-app-background/50",children:[(0,Xi.jsx)("div",{className:"flex-shrink-0 mt-1",children:e.required?(0,Xi.jsx)(Qu,{className:"w-5 h-5 text-orange-500"}):(0,Xi.jsx)(Mo,{className:"w-5 h-5 text-green-500"})}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("h4",{className:"font-semibold text-app-text-primary mb-1",children:e.type}),(0,Xi.jsx)("p",{className:"text-app-text-muted text-sm",children:e.description}),(0,Xi.jsx)("span",{className:"inline-block mt-2 px-2 py-1 rounded-full text-xs font-medium "+(e.required?"bg-orange-500/10 text-orange-500":"bg-green-500/10 text-green-500"),children:e.required?"Required":"Optional"})]})]},e.type))})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-app-card-surface rounded-xl p-8 mb-8 border border-app-borders",children:[(0,Xi.jsxs)("h2",{className:"text-2xl font-bold text-app-text-primary mb-6 flex items-center gap-3",children:[(0,Xi.jsx)(Xl,{className:"w-6 h-6 text-app-primary-accent"}),"Your Rights"]}),(0,Xi.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary mb-2",children:"Access & Download"}),(0,Xi.jsx)("p",{className:"text-app-text-muted text-sm",children:"Request a copy of all your data in a portable format."})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary mb-2",children:"Correction"}),(0,Xi.jsx)("p",{className:"text-app-text-muted text-sm",children:"Update or correct any inaccurate personal information."})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary mb-2",children:"Deletion"}),(0,Xi.jsx)("p",{className:"text-app-text-muted text-sm",children:"Request permanent deletion of your account and data."})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary mb-2",children:"Opt-out"}),(0,Xi.jsx)("p",{className:"text-app-text-muted text-sm",children:"Disable data collection for analytics and marketing."})]})]})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-gradient-to-r from-app-primary-accent/10 to-orange-500/10 rounded-xl p-8 mb-8 border border-app-primary-accent/20",children:[(0,Xi.jsx)("h2",{className:"text-2xl font-bold text-app-text-primary mb-4",children:"Data Sharing Policy"}),(0,Xi.jsx)("p",{className:"text-app-text-muted mb-4",children:"We never sell your personal data to third parties. We only share data in the following limited circumstances:"}),(0,Xi.jsxs)("ul",{className:"space-y-2 text-app-text-muted",children:[(0,Xi.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Xi.jsx)(Mo,{className:"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0"}),(0,Xi.jsx)("span",{children:"With your explicit consent for specific features"})]}),(0,Xi.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Xi.jsx)(Mo,{className:"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0"}),(0,Xi.jsx)("span",{children:"Anonymized analytics to improve app performance"})]}),(0,Xi.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Xi.jsx)(Mo,{className:"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0"}),(0,Xi.jsx)("span",{children:"When required by law or to protect user safety"})]})]})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-app-card-surface rounded-xl p-8 border border-app-borders text-center",children:[(0,Xi.jsx)("h2",{className:"text-2xl font-bold text-app-text-primary mb-4",children:"Privacy Settings & Questions"}),(0,Xi.jsx)("p",{className:"text-app-text-muted mb-6",children:"Manage your privacy preferences in the Settings page or contact our privacy team with any questions."}),(0,Xi.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,Xi.jsx)("button",{className:"px-6 py-3 bg-app-primary-accent text-white rounded-lg hover:bg-app-primary-accent/90 transition-colors",children:"Privacy Settings"}),(0,Xi.jsx)("button",{className:"px-6 py-3 border border-app-borders text-app-text-primary rounded-lg hover:bg-app-background transition-colors",children:"Contact Privacy Team"})]})]})]})})},Xu=Vi("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]),Zu=()=>{const e=e=>{switch(e){case"major":return(0,Xi.jsx)(cl,{className:"w-4 h-4 text-yellow-500"});case"minor":return(0,Xi.jsx)(Ki,{className:"w-4 h-4 text-blue-500"});case"patch":return(0,Xi.jsx)(Xu,{className:"w-4 h-4 text-green-500"});default:return(0,Xi.jsx)(Mo,{className:"w-4 h-4 text-gray-500"})}};return(0,Xi.jsx)("div",{className:"min-h-screen bg-app-background",children:(0,Xi.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[(0,Xi.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-app-primary-accent to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Xi.jsx)(Ju,{className:"w-10 h-10 text-white"})}),(0,Xi.jsx)("h1",{className:"text-4xl font-bold text-app-text-primary mb-4",children:"Version Information"}),(0,Xi.jsx)("p",{className:"text-xl text-app-text-muted max-w-2xl mx-auto",children:"Stay up to date with the latest features, improvements, and technical details."})]}),(0,Xi.jsx)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-r from-app-primary-accent/10 to-orange-500/10 rounded-xl p-8 mb-8 border border-app-primary-accent/20",children:(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsxs)("h2",{className:"text-3xl font-bold text-app-text-primary mb-2",children:["PEDAL v","2.4.1"]}),(0,Xi.jsxs)("p",{className:"text-app-text-muted mb-4",children:["Build ","241025"," \u2022 Released ","October 25, 2024"]}),(0,Xi.jsxs)("div",{className:"flex items-center justify-center gap-4 text-sm",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-green-500",children:[(0,Xi.jsx)(Mo,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{children:"Latest Version"})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-app-text-muted",children:[(0,Xi.jsx)(Bo,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{children:"Auto-updates enabled"})]})]})]})}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-app-card-surface rounded-xl p-8 mb-8 border border-app-borders",children:[(0,Xi.jsxs)("h2",{className:"text-2xl font-bold text-app-text-primary mb-6 flex items-center gap-3",children:[(0,Xi.jsx)(Wu,{className:"w-6 h-6 text-app-primary-accent"}),"System Requirements"]}),(0,Xi.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:[{label:"Platform",value:"Progressive Web App"},{label:"Minimum iOS",value:"iOS 14.0+"},{label:"Minimum Android",value:"Android 8.0 (API 26)"},{label:"Web Browsers",value:"Chrome 90+, Safari 14+, Firefox 88+"},{label:"Storage Required",value:"~150 MB"},{label:"Network",value:"Online/Offline capable"}].map((e,t)=>(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+.1*t},className:"flex justify-between items-center p-4 rounded-lg bg-app-background/50",children:[(0,Xi.jsx)("span",{className:"text-app-text-muted",children:e.label}),(0,Xi.jsx)("span",{className:"font-semibold text-app-text-primary",children:e.value})]},e.label))})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-app-card-surface rounded-xl p-8 border border-app-borders",children:[(0,Xi.jsxs)("h2",{className:"text-2xl font-bold text-app-text-primary mb-6 flex items-center gap-3",children:[(0,Xi.jsx)(Do,{className:"w-6 h-6 text-app-primary-accent"}),"Release History"]}),(0,Xi.jsx)("div",{className:"space-y-6",children:[{version:"2.4.1",date:"Oct 25, 2024",type:"patch",changes:["Fixed notification badge counter accuracy","Improved offline mode stability","Enhanced route sharing performance","Minor UI improvements for dark mode"]},{version:"2.4.0",date:"Oct 15, 2024",type:"minor",changes:["New achievement system with 50+ badges","Enhanced community features","Improved map rendering performance","Added weather integration","New privacy controls"]},{version:"2.3.2",date:"Sep 30, 2024",type:"patch",changes:["Fixed GPS tracking accuracy issues","Resolved crash on older Android devices","Improved battery optimization","Updated security protocols"]},{version:"2.3.0",date:"Sep 10, 2024",type:"minor",changes:["Introduced offline mode functionality","New route discovery algorithm","Enhanced social sharing options","Redesigned profile interface","Added support for cycling computers"]}].map((t,r)=>(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5+.1*r},className:"border-l-4 border-app-primary-accent/30 pl-6 pb-6 last:pb-0",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[e(t.type),(0,Xi.jsxs)("h3",{className:"text-lg font-semibold text-app-text-primary",children:["Version ",t.version]}),(0,Xi.jsx)("span",{className:"text-sm text-app-text-muted",children:t.date}),(0,Xi.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("major"===t.type?"bg-yellow-500/10 text-yellow-500":"minor"===t.type?"bg-blue-500/10 text-blue-500":"bg-green-500/10 text-green-500"),children:t.type})]}),(0,Xi.jsx)("ul",{className:"space-y-2",children:t.changes.map((e,t)=>(0,Xi.jsxs)("li",{className:"flex items-start gap-2 text-app-text-muted",children:[(0,Xi.jsx)(Mo,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),(0,Xi.jsx)("span",{children:e})]},t))})]},t.version))})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-8 bg-app-card-surface rounded-xl p-8 border border-app-borders text-center",children:[(0,Xi.jsx)(Io,{className:"w-12 h-12 text-app-primary-accent mx-auto mb-4"}),(0,Xi.jsx)("h2",{className:"text-2xl font-bold text-app-text-primary mb-4",children:"Stay Updated"}),(0,Xi.jsx)("p",{className:"text-app-text-muted mb-6",children:"PEDAL automatically checks for updates and will notify you when new versions are available. You can also manually check for updates in the app settings."}),(0,Xi.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,Xi.jsx)("button",{className:"px-6 py-3 bg-app-primary-accent text-white rounded-lg hover:bg-app-primary-accent/90 transition-colors",children:"Check for Updates"}),(0,Xi.jsx)("button",{className:"px-6 py-3 border border-app-borders text-app-text-primary rounded-lg hover:bg-app-background transition-colors",children:"Update"})]})]})]})})},eh=Vi("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),th=()=>{const[e,r]=(0,t.useState)(null),[s,n]=(0,t.useState)(""),a=[{icon:ko,title:"Live Chat",description:"Get instant help from our support team",availability:"24/7",action:"Start Chat"},{icon:vc,title:"Email Support",description:"Send us a detailed message",availability:"Response within 24h",action:"Send Email"},{icon:Dl,title:"Phone Support",description:"Speak directly with our team",availability:"Mon-Fri 9AM-6PM EST",action:"Call Now"},{icon:yo,title:"Community Forum",description:"Get help from other cyclists",availability:"Always active",action:"Visit Forum"}],i=[{icon:eh,title:"User Guide",description:"Complete guide to using PEDAL",link:"#"},{icon:Il,title:"Video Tutorials",description:"Step-by-step video instructions",link:"#"},{icon:Io,title:"Safety Tips",description:"Essential cycling safety information",link:"#"},{icon:Mo,title:"Best Practices",description:"Tips for getting the most out of PEDAL",link:"#"}],o=[{question:"How do I start tracking my rides?",answer:"To start tracking, tap the 'Start Ride' button on the home screen or use the GPS tracking feature in the Maps section. Make sure location permissions are enabled for accurate tracking."},{question:"Can I use PEDAL offline?",answer:"Yes! PEDAL offers comprehensive offline functionality. You can access downloaded routes, track rides, and view cached content even without an internet connection. Sync occurs automatically when you're back online."},{question:"How do I join cycling groups and communities?",answer:"Visit the Community section to browse local cycling groups, join discussions, and participate in events. You can search by location, cycling style, or interests to find the perfect group for you."},{question:"Is my location data private and secure?",answer:"Absolutely. Your location data is encrypted and only used for route tracking and safety features. You have full control over what data is shared and can adjust privacy settings at any time."},{question:"How do I report a bug or technical issue?",answer:"Use the 'Report Issue' button below or contact our support team directly. Include details about your device, app version, and steps to reproduce the issue for faster resolution."},{question:"Can I export my cycling data?",answer:"Yes, you can export your ride data in various formats (GPX, TCX, CSV) from the Profile section. This allows you to backup your data or use it with other cycling applications."}].filter(e=>e.question.toLowerCase().includes(s.toLowerCase())||e.answer.toLowerCase().includes(s.toLowerCase()));return(0,Xi.jsx)("div",{className:"min-h-screen bg-app-background",children:(0,Xi.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[(0,Xi.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-app-primary-accent to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Xi.jsx)(Jo,{className:"w-10 h-10 text-white"})}),(0,Xi.jsx)("h1",{className:"text-4xl font-bold text-app-text-primary mb-4",children:"Help & Support"}),(0,Xi.jsx)("p",{className:"text-xl text-app-text-muted max-w-2xl mx-auto",children:"We're here to help you get the most out of your PEDAL experience."})]}),(0,Xi.jsx)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:(0,Xi.jsxs)("div",{className:"relative",children:[(0,Xi.jsx)(Lo,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-app-text-muted"}),(0,Xi.jsx)("input",{type:"text",placeholder:"Search for help topics...",value:s,onChange:e=>n(e.target.value),className:"w-full pl-12 pr-4 py-4 bg-app-card-surface border border-app-borders rounded-xl text-app-text-primary placeholder-app-text-muted focus:outline-none focus:border-app-primary-accent"})]})}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-8",children:[(0,Xi.jsx)("h2",{className:"text-2xl font-bold text-app-text-primary mb-6",children:"Get Support"}),(0,Xi.jsx)("div",{className:"grid md:grid-cols-2 gap-6",children:a.map((e,t)=>{const r=e.icon;return(0,Xi.jsx)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+.1*t},className:"bg-app-card-surface rounded-xl p-6 border border-app-borders hover:border-app-primary-accent/30 transition-colors",children:(0,Xi.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Xi.jsx)("div",{className:"w-12 h-12 bg-app-primary-accent/10 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,Xi.jsx)(r,{className:"w-6 h-6 text-app-primary-accent"})}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("h3",{className:"text-lg font-semibold text-app-text-primary mb-2",children:e.title}),(0,Xi.jsx)("p",{className:"text-app-text-muted mb-2",children:e.description}),(0,Xi.jsx)("p",{className:"text-sm text-app-primary-accent mb-4",children:e.availability}),(0,Xi.jsx)("button",{className:"px-4 py-2 bg-app-primary-accent text-white rounded-lg hover:bg-app-primary-accent/90 transition-colors",children:e.action})]})]})},e.title)})})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mb-8",children:[(0,Xi.jsx)("h2",{className:"text-2xl font-bold text-app-text-primary mb-6",children:"Frequently Asked Questions"}),(0,Xi.jsx)("div",{className:"space-y-4",children:o.map((t,s)=>(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5+.1*s},className:"bg-app-card-surface rounded-xl border border-app-borders overflow-hidden",children:[(0,Xi.jsxs)("button",{onClick:()=>r(e===s?null:s),className:"w-full flex items-center justify-between p-6 text-left hover:bg-app-background/50 transition-colors",children:[(0,Xi.jsx)("h3",{className:"text-lg font-semibold text-app-text-primary pr-4",children:t.question}),e===s?(0,Xi.jsx)(vo,{className:"w-5 h-5 text-app-text-muted flex-shrink-0"}):(0,Xi.jsx)(Po,{className:"w-5 h-5 text-app-text-muted flex-shrink-0"})]}),e===s&&(0,Xi.jsx)(Fi.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"px-6 pb-6",children:(0,Xi.jsx)("p",{className:"text-app-text-muted leading-relaxed",children:t.answer})})]},s))})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mb-8",children:[(0,Xi.jsx)("h2",{className:"text-2xl font-bold text-app-text-primary mb-6",children:"Helpful Resources"}),(0,Xi.jsx)("div",{className:"grid md:grid-cols-2 gap-6",children:i.map((e,t)=>{const r=e.icon;return(0,Xi.jsx)(Fi.a,{href:e.link,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7+.1*t},className:"bg-app-card-surface rounded-xl p-6 border border-app-borders hover:border-app-primary-accent/30 transition-colors group",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Xi.jsx)("div",{className:"w-12 h-12 bg-app-primary-accent/10 rounded-lg flex items-center justify-center",children:(0,Xi.jsx)(r,{className:"w-6 h-6 text-app-primary-accent"})}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("h3",{className:"text-lg font-semibold text-app-text-primary mb-1 group-hover:text-app-primary-accent transition-colors",children:e.title}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:e.description})]}),(0,Xi.jsx)(Ml,{className:"w-5 h-5 text-app-text-muted group-hover:text-app-primary-accent transition-colors"})]})},e.title)})})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-gradient-to-r from-red-500/10 to-orange-500/10 rounded-xl p-8 border border-red-500/20 text-center",children:[(0,Xi.jsx)(Io,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,Xi.jsx)("h2",{className:"text-2xl font-bold text-app-text-primary mb-4",children:"Emergency Support"}),(0,Xi.jsx)("p",{className:"text-app-text-muted mb-6",children:"If you're experiencing a safety-related issue while cycling or need immediate assistance, use the emergency features in the app or contact local emergency services."}),(0,Xi.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,Xi.jsx)("button",{className:"px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Emergency SOS"}),(0,Xi.jsx)("button",{className:"px-6 py-3 border border-app-borders text-app-text-primary rounded-lg hover:bg-app-background transition-colors",children:"Safety Features"})]})]})]})})},rh=Vi("bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]),sh=Vi("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),nh=Vi("signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]),ah=Vi("battery",[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]]),ih=Vi("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),oh=Vi("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),lh=Vi("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ch=Vi("hospital",[["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M14 9h-4",key:"1w2s2s"}],["path",{d:"M18 11h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"1tthqt"}],["path",{d:"M18 21V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16",key:"dw4p4i"}]]),dh=Vi("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),uh=()=>{const[e,r]=(0,t.useState)(!1),[s,n]=(0,t.useState)(!1),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)([]),[u,h]=(0,t.useState)([]),[p,m]=(0,t.useState)([]),[f,x]=(0,t.useState)(78),[g,y]=(0,t.useState)(0),[v,b]=(0,t.useState)(null),[w,j]=(0,t.useState)(null),[N,k]=(0,t.useState)(""),[S,C]=(0,t.useState)(!1),[E,_]=(0,t.useState)(!1),[P,T]=(0,t.useState)(!1),[A,O]=(0,t.useState)(!1),[R,M]=(0,t.useState)(!1),[L,D]=(0,t.useState)(!1),[I,F]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const t=JSON.parse(localStorage.getItem("downloadedMaps")||"[]");t.length>0?l(t):l([]);const r=JSON.parse(localStorage.getItem("emergencyContacts")||"[]");d(r),U(),e&&$()},[e]);const U=async()=>{try{h([])}catch(e){console.error("Failed to load emergency services:",e),h([])}},$=async()=>{try{i([])}catch(e){console.error("Failed to scan for Bluetooth devices:",e),i([])}},B=()=>{b("emergency-calling");const e={location:"Current GPS coordinates: 19.0760\xb0 N, 72.8777\xb0 E",timestamp:(new Date).toISOString(),userInfo:"Emergency SOS from PEDAL app user",severity:"HIGH PRIORITY"};setTimeout(()=>{b("emergency-sent"),u.forEach(t=>{console.log(`SOS sent to ${t.name} (${t.number})`),console.log("Emergency details:",e)}),setTimeout(()=>b(null),5e3)},2e3)},z=(e,t,r)=>{const s={id:Date.now().toString(),from:"You",to:e,content:t,timestamp:(new Date).toISOString(),type:r,status:"sending"};m(e=>[...e,s]),setTimeout(()=>{m(e=>e.map(e=>e.id===s.id?{...e,status:"delivered"}:e))},1500),k("")},q=[{id:"offline-maps",title:"Offline Maps",description:"Access downloaded maps without internet",icon:Ji,color:"text-blue-400",bgColor:"bg-blue-400/10",status:`${o.length} maps available`},{id:"bluetooth-messaging",title:"Bluetooth Messaging",description:"Send messages to nearby riders (50m range)",icon:rh,color:"text-purple-400",bgColor:"bg-purple-400/10",status:e?`${a.length} devices nearby`:"Disabled"},{id:"emergency-support",title:"Emergency SOS",description:"Call for help even without signal",icon:Dl,color:"text-red-400",bgColor:"bg-red-400/10",status:"Always available"},{id:"peer-tracking",title:"Peer Tracking",description:"Track group rides via device-to-device",icon:yo,color:"text-green-400",bgColor:"bg-green-400/10",status:"Group mode ready"},{id:"offline-logging",title:"Ride Logging",description:"Record rides without internet",icon:Wu,color:"text-yellow-400",bgColor:"bg-yellow-400/10",status:"Auto-sync when online"},{id:"file-sharing",title:"File Sharing",description:"Share photos/routes via Bluetooth",icon:So,color:"text-cyan-400",bgColor:"bg-cyan-400/10",status:"P2P ready"}];return(0,Xi.jsxs)("div",{className:"min-h-screen bg-app-background p-4 pb-24",children:[(0,Xi.jsxs)("div",{className:"mb-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Xi.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-red-500 to-orange-500 rounded-xl flex items-center justify-center",children:(0,Xi.jsx)(sh,{className:"w-6 h-6 text-white"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h1",{className:"text-2xl font-bold text-app-text-primary",children:"Offline Mode"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"Work without internet connection"})]})]}),(0,Xi.jsx)("div",{className:"bg-app-card-surface rounded-xl p-4 border border-app-borders",children:(0,Xi.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,Xi.jsx)(nh,{className:"w-4 h-4 "+(g>0?"text-green-400":"text-red-400")}),(0,Xi.jsx)("span",{className:"text-sm font-medium text-app-text-primary",children:0===g?"No Signal":`${g} bars`})]}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted",children:"Network"})]}),(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,Xi.jsx)(ah,{className:"w-4 h-4 "+(f>20?"text-green-400":"text-red-400")}),(0,Xi.jsxs)("span",{className:"text-sm font-medium text-app-text-primary",children:[f,"%"]})]}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted",children:"Battery"})]}),(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,Xi.jsx)(rh,{className:"w-4 h-4 "+(e?"text-blue-400":"text-app-text-muted")}),(0,Xi.jsx)("span",{className:"text-sm font-medium text-app-text-primary",children:e?"On":"Off"})]}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted",children:"Bluetooth"})]})]})})]}),(0,Xi.jsxs)("div",{className:"mb-6",children:[(0,Xi.jsx)("h2",{className:"text-lg font-bold text-app-text-primary mb-3",children:"Emergency Support"}),(0,Xi.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Xi.jsx)(Qu,{className:"w-6 h-6 text-red-400"}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h3",{className:"font-semibold text-red-400",children:"SOS Emergency"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:"Works even without cellular signal"})]})]}),(0,Xi.jsx)(Fi.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:B,disabled:"emergency-calling"===v,className:"w-full py-3 bg-red-500 hover:bg-red-600 disabled:bg-red-500/50 text-white rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:"emergency-calling"===v?(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending SOS..."]}):"emergency-sent"===v?(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)(Mo,{className:"w-4 h-4"}),"SOS Sent Successfully"]}):(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)(Dl,{className:"w-4 h-4"}),"Send Emergency SOS"]})})]})]}),(0,Xi.jsxs)("div",{className:"mb-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Xi.jsx)("h2",{className:"text-lg font-bold text-app-text-primary",children:"Bluetooth Messaging"}),(0,Xi.jsx)("button",{onClick:()=>{r(!e),e||(b("bluetooth-scanning"),setTimeout(()=>b(null),3e3))},className:"px-4 py-2 rounded-lg font-medium transition-colors "+(e?"bg-blue-500 text-white":"bg-app-borders text-app-text-muted hover:bg-app-primary-accent hover:text-white"),children:e?"Disable":"Enable"})]}),(0,Xi.jsx)("div",{className:"bg-app-card-surface rounded-xl border border-app-borders overflow-hidden",children:e?(0,Xi.jsxs)(Xi.Fragment,{children:["bluetooth-scanning"===v&&(0,Xi.jsx)("div",{className:"p-4 bg-blue-500/10 border-b border-app-borders",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-blue-400",children:[(0,Xi.jsx)("div",{className:"w-4 h-4 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}),(0,Xi.jsx)("span",{className:"text-sm",children:"Scanning for nearby devices..."})]})}),a.length>0?(0,Xi.jsx)("div",{className:"divide-y divide-app-borders",children:a.map(e=>(0,Xi.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+(e.isConnected?"bg-green-400/20":"bg-blue-400/20"),children:(0,Xi.jsx)(Ju,{className:"w-5 h-5 "+(e.isConnected?"text-green-400":"text-blue-400")})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-semibold text-app-text-primary",children:e.name}),(0,Xi.jsxs)("p",{className:"text-sm text-app-text-muted",children:[e.distance,"m away \u2022 ",e.lastSeen]})]})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[e.isConnected&&(0,Xi.jsx)("button",{onClick:()=>{j(e),C(!0)},className:"p-2 bg-green-400/20 text-green-400 rounded-lg hover:bg-green-400/30 transition-colors",children:(0,Xi.jsx)(ih,{className:"w-4 h-4"})}),(0,Xi.jsx)("div",{className:"w-2 h-2 rounded-full "+(e.isConnected?"bg-green-400":"bg-blue-400")})]})]},e.id))}):(0,Xi.jsxs)("div",{className:"p-8 text-center",children:[(0,Xi.jsx)(oh,{className:"w-12 h-12 text-app-text-muted mx-auto mb-3"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"No devices found nearby"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted mt-1",children:"Make sure other riders have Bluetooth enabled"})]})]}):(0,Xi.jsxs)("div",{className:"p-8 text-center",children:[(0,Xi.jsx)(rh,{className:"w-12 h-12 text-app-text-muted mx-auto mb-3"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"Bluetooth is disabled"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted mt-1",children:"Enable to connect with nearby riders"})]})})]}),(0,Xi.jsxs)("div",{className:"mb-6",children:[(0,Xi.jsx)("h2",{className:"text-lg font-bold text-app-text-primary mb-3",children:"Offline Features"}),(0,Xi.jsx)("div",{className:"grid grid-cols-2 gap-3",children:q.map((e,t)=>{const r=e.icon;return(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},onClick:()=>(e=>{switch(b(e),e){case"bluetooth-messaging":C(!0);break;case"emergency-support":_(!0);break;case"offline-maps":alert("Opening offline maps...");break;case"peer-tracking":O(!0);break;case"offline-logging":T(!0);break;case"file-sharing":M(!0)}})(e.id),className:"bg-app-card-surface rounded-xl p-4 border border-app-borders hover:border-app-primary-accent/30 transition-colors cursor-pointer",children:[(0,Xi.jsx)("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mb-3 ${e.bgColor}`,children:(0,Xi.jsx)(r,{className:`w-5 h-5 ${e.color}`})}),(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary text-sm mb-1",children:e.title}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted mb-2",children:e.description}),(0,Xi.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Xi.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),(0,Xi.jsx)("span",{className:"text-xs text-green-400",children:e.status})]})]},e.id)})})]}),(0,Xi.jsxs)("div",{className:"mb-6",children:[(0,Xi.jsx)("h2",{className:"text-lg font-bold text-app-text-primary mb-3",children:"Downloaded Maps"}),(0,Xi.jsx)("div",{className:"space-y-3",children:o.map(e=>(0,Xi.jsxs)("div",{className:"bg-app-card-surface rounded-xl p-4 border border-app-borders",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary",children:e.name}),(0,Xi.jsx)("span",{className:"text-sm text-app-text-muted",children:e.size})]}),(0,Xi.jsxs)("div",{className:"flex items-center justify-between text-sm text-app-text-muted",children:[(0,Xi.jsxs)("span",{children:["Coverage: ",e.coverage]}),(0,Xi.jsxs)("span",{children:["Downloaded: ",e.downloadDate]})]}),(0,Xi.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,Xi.jsx)("button",{className:"flex-1 py-2 bg-app-primary-accent text-white rounded-lg text-sm font-medium hover:bg-primary-600 transition-colors",children:"Open Map"}),(0,Xi.jsx)("button",{className:"px-4 py-2 bg-app-background text-app-text-muted rounded-lg text-sm hover:bg-app-borders transition-colors",children:"Update"})]})]},e.id))})]}),S&&w&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Xi.jsxs)("div",{className:"bg-app-background rounded-2xl max-w-md w-full max-h-[80vh] overflow-hidden",children:[(0,Xi.jsx)("div",{className:"p-4 border-b border-app-borders",children:(0,Xi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"w-10 h-10 bg-green-400/20 rounded-full flex items-center justify-center",children:(0,Xi.jsx)(Ju,{className:"w-5 h-5 text-green-400"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary",children:w.name}),(0,Xi.jsxs)("p",{className:"text-sm text-app-text-muted",children:["Bluetooth \u2022 ",w.distance,"m away"]})]})]}),(0,Xi.jsx)("button",{onClick:()=>{C(!1),j(null)},className:"p-2 hover:bg-app-card-surface rounded-lg transition-colors",children:(0,Xi.jsx)(lh,{className:"w-5 h-5 text-app-text-muted"})})]})}),(0,Xi.jsx)("div",{className:"p-4 h-64 overflow-y-auto",children:0===p.filter(e=>e.to===w.id||e.from===w.id).length?(0,Xi.jsxs)("div",{className:"text-center text-app-text-muted py-8",children:[(0,Xi.jsx)(ih,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,Xi.jsx)("p",{children:"No messages yet"}),(0,Xi.jsxs)("p",{className:"text-sm mt-1",children:["Start a conversation with ",w.name]})]}):(0,Xi.jsx)("div",{className:"space-y-3",children:p.filter(e=>e.to===w.id||e.from===w.id).map(e=>(0,Xi.jsx)("div",{className:"flex "+("You"===e.from?"justify-end":"justify-start"),children:(0,Xi.jsxs)("div",{className:"max-w-xs p-3 rounded-lg "+("You"===e.from?"bg-app-primary-accent text-white":"bg-app-card-surface text-app-text-primary"),children:[(0,Xi.jsx)("p",{className:"text-sm",children:e.content}),(0,Xi.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,Xi.jsx)("span",{className:"text-xs opacity-70",children:new Date(e.timestamp).toLocaleTimeString()}),"You"===e.from&&(0,Xi.jsx)("div",{className:"w-1 h-1 rounded-full "+("delivered"===e.status?"bg-green-300":"bg-yellow-300")})]})]})},e.id))})}),(0,Xi.jsx)("div",{className:"p-4 border-t border-app-borders",children:(0,Xi.jsxs)("div",{className:"flex gap-2",children:[(0,Xi.jsx)("input",{type:"text",value:N,onChange:e=>k(e.target.value),placeholder:"Type a message...",className:"flex-1 px-3 py-2 bg-app-card-surface border border-app-borders rounded-lg text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none",onKeyPress:e=>{"Enter"===e.key&&N.trim()&&z(w.id,N,"bluetooth")}}),(0,Xi.jsx)("button",{onClick:()=>{N.trim()&&z(w.id,N,"bluetooth")},disabled:!N.trim(),className:"px-4 py-2 bg-app-primary-accent text-white rounded-lg hover:bg-app-primary-accent/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,Xi.jsx)($l,{className:"w-4 h-4"})})]})})]})}),E&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Xi.jsx)("div",{className:"bg-app-background rounded-2xl max-w-md w-full",children:(0,Xi.jsxs)("div",{className:"p-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsx)("h2",{className:"text-xl font-bold text-red-400",children:"Emergency SOS"}),(0,Xi.jsx)("button",{onClick:()=>_(!1),className:"p-2 hover:bg-app-card-surface rounded-lg transition-colors",children:(0,Xi.jsx)(lh,{className:"w-5 h-5 text-app-text-muted"})})]}),(0,Xi.jsxs)("div",{className:"mb-6",children:[(0,Xi.jsx)("p",{className:"text-app-text-muted mb-4",children:"This will send an emergency alert to all nearby emergency services:"}),(0,Xi.jsx)("div",{className:"space-y-3",children:u.map(e=>(0,Xi.jsxs)("div",{className:"flex items-center justify-between p-3 bg-app-card-surface rounded-lg",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(()=>{switch(e.type){case"police":return(0,Xi.jsx)(qo,{className:"w-5 h-5 text-blue-400"});case"fire":return(0,Xi.jsx)(Co,{className:"w-5 h-5 text-red-400"});case"hospital":return(0,Xi.jsx)(ch,{className:"w-5 h-5 text-green-400"});case"ambulance":return(0,Xi.jsx)(Gl,{className:"w-5 h-5 text-orange-400"});default:return(0,Xi.jsx)(Dl,{className:"w-5 h-5 text-app-text-muted"})}})(),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h4",{className:"font-medium text-app-text-primary",children:e.name}),(0,Xi.jsxs)("p",{className:"text-sm text-app-text-muted",children:[e.distance,"km \u2022 ETA: ",e.responseTime]})]})]}),(0,Xi.jsx)("span",{className:"text-sm text-app-text-muted",children:e.number})]},e.id))})]}),(0,Xi.jsxs)("div",{className:"flex gap-3",children:[(0,Xi.jsx)("button",{onClick:()=>_(!1),className:"flex-1 px-4 py-3 bg-app-card-surface text-app-text-primary rounded-lg hover:bg-app-background transition-colors",children:"Cancel"}),(0,Xi.jsx)("button",{onClick:()=>{B(),_(!1)},className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-semibold",children:"Send SOS"})]})]})})}),(0,Xi.jsxs)("div",{className:"mb-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Xi.jsx)("h2",{className:"text-lg font-bold text-app-text-primary",children:"WiFi Direct"}),(0,Xi.jsx)("button",{onClick:()=>n(!s),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(s?"bg-cyan-500 text-white":"bg-app-borders text-app-text-muted hover:bg-app-primary-accent hover:text-white"),children:s?"Disable":"Enable"})]}),(0,Xi.jsx)("div",{className:"bg-app-card-surface rounded-xl border border-app-borders p-4",children:s?(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)(dh,{className:"w-12 h-12 text-cyan-400 mx-auto mb-3"}),(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary mb-2",children:"WiFi Direct Active"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted mb-4",children:"Broadcasting for nearby devices (200m range)"}),(0,Xi.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Xi.jsx)("button",{onClick:()=>F(!0),className:"py-2 px-3 bg-cyan-500/20 text-cyan-400 rounded-lg text-sm hover:bg-cyan-500/30 transition-colors",children:"Voice Call"}),(0,Xi.jsx)("button",{onClick:()=>D(!0),className:"py-2 px-3 bg-cyan-500/20 text-cyan-400 rounded-lg text-sm hover:bg-cyan-500/30 transition-colors",children:"Text Chat"})]})]}):(0,Xi.jsxs)("div",{className:"text-center py-4",children:[(0,Xi.jsx)(dh,{className:"w-12 h-12 text-app-text-muted mx-auto mb-3 opacity-50"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"WiFi Direct is disabled"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted mt-1",children:"Enable for longer range communication"})]})})]}),I&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Xi.jsx)("div",{className:"bg-app-background rounded-2xl max-w-md w-full",children:(0,Xi.jsxs)("div",{className:"p-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsx)("h2",{className:"text-xl font-bold text-cyan-400",children:"WiFi Voice Call"}),(0,Xi.jsx)("button",{onClick:()=>F(!1),className:"p-2 hover:bg-app-card-surface rounded-lg transition-colors",children:(0,Xi.jsx)(lh,{className:"w-5 h-5 text-app-text-muted"})})]}),(0,Xi.jsxs)("div",{className:"text-center mb-6",children:[(0,Xi.jsx)("div",{className:"w-20 h-20 bg-cyan-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Xi.jsx)(Dl,{className:"w-10 h-10 text-cyan-400"})}),(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary mb-2",children:"Ready to Call"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted mb-4",children:"WiFi Direct calling (200m range)"}),(0,Xi.jsxs)("div",{className:"space-y-3",children:[(0,Xi.jsx)("div",{className:"bg-app-card-surface rounded-lg p-3",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"w-8 h-8 bg-green-400/20 rounded-full flex items-center justify-center",children:(0,Xi.jsx)(yo,{className:"w-4 h-4 text-green-400"})}),(0,Xi.jsxs)("div",{className:"text-left",children:[(0,Xi.jsx)("h4",{className:"font-medium text-app-text-primary",children:"Group Call"}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted",children:"Call multiple riders"})]})]})}),(0,Xi.jsx)("div",{className:"bg-app-card-surface rounded-lg p-3",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"w-8 h-8 bg-blue-400/20 rounded-full flex items-center justify-center",children:(0,Xi.jsx)(Dl,{className:"w-4 h-4 text-blue-400"})}),(0,Xi.jsxs)("div",{className:"text-left",children:[(0,Xi.jsx)("h4",{className:"font-medium text-app-text-primary",children:"Direct Call"}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted",children:"Call specific rider"})]})]})})]})]}),(0,Xi.jsxs)("div",{className:"flex gap-3",children:[(0,Xi.jsx)("button",{onClick:()=>F(!1),className:"flex-1 px-4 py-3 bg-app-card-surface text-app-text-primary rounded-lg hover:bg-app-background transition-colors",children:"Cancel"}),(0,Xi.jsx)("button",{onClick:()=>{alert("Starting WiFi voice call..."),F(!1)},className:"flex-1 px-4 py-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors font-semibold",children:"Start Call"})]})]})})}),L&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Xi.jsxs)("div",{className:"bg-app-background rounded-2xl max-w-md w-full max-h-[80vh] overflow-hidden",children:[(0,Xi.jsx)("div",{className:"p-4 border-b border-app-borders",children:(0,Xi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"w-10 h-10 bg-cyan-500/20 rounded-full flex items-center justify-center",children:(0,Xi.jsx)(dh,{className:"w-5 h-5 text-cyan-400"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary",children:"WiFi Direct Chat"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:"200m range \u2022 Group messaging"})]})]}),(0,Xi.jsx)("button",{onClick:()=>D(!1),className:"p-2 hover:bg-app-card-surface rounded-lg transition-colors",children:(0,Xi.jsx)(lh,{className:"w-5 h-5 text-app-text-muted"})})]})}),(0,Xi.jsx)("div",{className:"p-4 h-64 overflow-y-auto",children:(0,Xi.jsxs)("div",{className:"text-center text-app-text-muted py-8",children:[(0,Xi.jsx)(ih,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,Xi.jsx)("p",{children:"WiFi Direct Group Chat"}),(0,Xi.jsx)("p",{className:"text-sm mt-1",children:"Send messages to nearby riders (200m range)"})]})}),(0,Xi.jsx)("div",{className:"p-4 border-t border-app-borders",children:(0,Xi.jsxs)("div",{className:"flex gap-2",children:[(0,Xi.jsx)("input",{type:"text",placeholder:"Type a message to group...",className:"flex-1 px-3 py-2 bg-app-card-surface border border-app-borders rounded-lg text-app-text-primary placeholder-app-text-muted focus:border-app-primary-accent focus:outline-none"}),(0,Xi.jsx)("button",{className:"px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors",children:(0,Xi.jsx)($l,{className:"w-4 h-4"})})]})})]})}),P&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Xi.jsx)("div",{className:"bg-app-background rounded-2xl max-w-md w-full",children:(0,Xi.jsxs)("div",{className:"p-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsx)("h2",{className:"text-xl font-bold text-yellow-400",children:"Ride Logging"}),(0,Xi.jsx)("button",{onClick:()=>T(!1),className:"p-2 hover:bg-app-card-surface rounded-lg transition-colors",children:(0,Xi.jsx)(lh,{className:"w-5 h-5 text-app-text-muted"})})]}),(0,Xi.jsxs)("div",{className:"space-y-4",children:[(0,Xi.jsxs)("div",{className:"bg-app-card-surface rounded-lg p-4",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Xi.jsx)(Wu,{className:"w-6 h-6 text-yellow-400"}),(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary",children:"Current Ride"})]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"Distance"}),(0,Xi.jsx)("p",{className:"font-semibold text-app-text-primary",children:"12.5 km"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"Duration"}),(0,Xi.jsx)("p",{className:"font-semibold text-app-text-primary",children:"45 min"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"Avg Speed"}),(0,Xi.jsx)("p",{className:"font-semibold text-app-text-primary",children:"16.7 km/h"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"Elevation"}),(0,Xi.jsx)("p",{className:"font-semibold text-app-text-primary",children:"+234 m"})]})]})]}),(0,Xi.jsxs)("div",{className:"bg-app-card-surface rounded-lg p-4",children:[(0,Xi.jsx)("h4",{className:"font-medium text-app-text-primary mb-2",children:"Offline Features"}),(0,Xi.jsxs)("div",{className:"space-y-2 text-sm text-app-text-muted",children:[(0,Xi.jsx)("p",{children:"\u2022 GPS tracking without internet"}),(0,Xi.jsx)("p",{children:"\u2022 Auto-sync when back online"}),(0,Xi.jsx)("p",{children:"\u2022 Route recording and analysis"}),(0,Xi.jsx)("p",{children:"\u2022 Performance metrics logging"})]})]})]}),(0,Xi.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,Xi.jsx)("button",{onClick:()=>T(!1),className:"flex-1 px-4 py-3 bg-app-card-surface text-app-text-primary rounded-lg hover:bg-app-background transition-colors",children:"Close"}),(0,Xi.jsx)("button",{onClick:()=>{alert("Starting ride logging..."),T(!1)},className:"flex-1 px-4 py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors font-semibold",children:"Start Logging"})]})]})})}),A&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Xi.jsx)("div",{className:"bg-app-background rounded-2xl max-w-md w-full",children:(0,Xi.jsxs)("div",{className:"p-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsx)("h2",{className:"text-xl font-bold text-green-400",children:"Peer Tracking"}),(0,Xi.jsx)("button",{onClick:()=>O(!1),className:"p-2 hover:bg-app-card-surface rounded-lg transition-colors",children:(0,Xi.jsx)(lh,{className:"w-5 h-5 text-app-text-muted"})})]}),(0,Xi.jsxs)("div",{className:"space-y-4",children:[(0,Xi.jsxs)("div",{className:"bg-app-card-surface rounded-lg p-4",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Xi.jsx)(yo,{className:"w-6 h-6 text-green-400"}),(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary",children:"Group Ride"})]}),(0,Xi.jsxs)("div",{className:"space-y-3",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"w-8 h-8 bg-green-400/20 rounded-full flex items-center justify-center",children:(0,Xi.jsx)("span",{className:"text-xs font-bold text-green-400",children:"AR"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("p",{className:"font-medium text-app-text-primary",children:"Alex Rodriguez"}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted",children:"25m ahead"})]})]}),(0,Xi.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full"})]}),(0,Xi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"w-8 h-8 bg-blue-400/20 rounded-full flex items-center justify-center",children:(0,Xi.jsx)("span",{className:"text-xs font-bold text-blue-400",children:"SC"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("p",{className:"font-medium text-app-text-primary",children:"Sarah Chen"}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted",children:"15m behind"})]})]}),(0,Xi.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full"})]})]})]}),(0,Xi.jsxs)("div",{className:"bg-app-card-surface rounded-lg p-4",children:[(0,Xi.jsx)("h4",{className:"font-medium text-app-text-primary mb-2",children:"Tracking Features"}),(0,Xi.jsxs)("div",{className:"space-y-2 text-sm text-app-text-muted",children:[(0,Xi.jsx)("p",{children:"\u2022 Real-time location sharing"}),(0,Xi.jsx)("p",{children:"\u2022 Device-to-device communication"}),(0,Xi.jsx)("p",{children:"\u2022 No internet required"}),(0,Xi.jsx)("p",{children:"\u2022 Safety alerts and notifications"})]})]})]}),(0,Xi.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,Xi.jsx)("button",{onClick:()=>O(!1),className:"flex-1 px-4 py-3 bg-app-card-surface text-app-text-primary rounded-lg hover:bg-app-background transition-colors",children:"Close"}),(0,Xi.jsx)("button",{onClick:()=>{alert("Starting peer tracking..."),O(!1)},className:"flex-1 px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold",children:"Start Tracking"})]})]})})}),R&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Xi.jsx)("div",{className:"bg-app-background rounded-2xl max-w-md w-full",children:(0,Xi.jsxs)("div",{className:"p-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsx)("h2",{className:"text-xl font-bold text-purple-400",children:"File Sharing"}),(0,Xi.jsx)("button",{onClick:()=>M(!1),className:"p-2 hover:bg-app-card-surface rounded-lg transition-colors",children:(0,Xi.jsx)(lh,{className:"w-5 h-5 text-app-text-muted"})})]}),(0,Xi.jsxs)("div",{className:"space-y-4",children:[(0,Xi.jsxs)("div",{className:"bg-app-card-surface rounded-lg p-4",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,Xi.jsx)(So,{className:"w-6 h-6 text-purple-400"}),(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary",children:"P2P File Transfer"})]}),(0,Xi.jsxs)("div",{className:"space-y-3",children:[(0,Xi.jsx)("button",{className:"w-full p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg text-left hover:bg-purple-500/20 transition-colors",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"w-8 h-8 bg-purple-400/20 rounded-lg flex items-center justify-center",children:(0,Xi.jsx)(Bo,{className:"w-4 h-4 text-purple-400"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("p",{className:"font-medium text-app-text-primary",children:"Share Photos"}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted",children:"Send ride photos to group"})]})]})}),(0,Xi.jsx)("button",{className:"w-full p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg text-left hover:bg-purple-500/20 transition-colors",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"w-8 h-8 bg-purple-400/20 rounded-lg flex items-center justify-center",children:(0,Xi.jsx)(Ji,{className:"w-4 h-4 text-purple-400"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("p",{className:"font-medium text-app-text-primary",children:"Share Routes"}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted",children:"Send GPX files to riders"})]})]})}),(0,Xi.jsx)("button",{className:"w-full p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg text-left hover:bg-purple-500/20 transition-colors",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"w-8 h-8 bg-purple-400/20 rounded-lg flex items-center justify-center",children:(0,Xi.jsx)(Wu,{className:"w-4 h-4 text-purple-400"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("p",{className:"font-medium text-app-text-primary",children:"Share Logs"}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted",children:"Send ride data to group"})]})]})})]})]}),(0,Xi.jsxs)("div",{className:"bg-app-card-surface rounded-lg p-4",children:[(0,Xi.jsx)("h4",{className:"font-medium text-app-text-primary mb-2",children:"Transfer Info"}),(0,Xi.jsxs)("div",{className:"space-y-2 text-sm text-app-text-muted",children:[(0,Xi.jsx)("p",{children:"\u2022 Bluetooth/WiFi Direct transfer"}),(0,Xi.jsx)("p",{children:"\u2022 No internet required"}),(0,Xi.jsx)("p",{children:"\u2022 Encrypted file transfer"}),(0,Xi.jsx)("p",{children:"\u2022 Multiple file format support"})]})]})]}),(0,Xi.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,Xi.jsx)("button",{onClick:()=>M(!1),className:"flex-1 px-4 py-3 bg-app-card-surface text-app-text-primary rounded-lg hover:bg-app-background transition-colors",children:"Close"}),(0,Xi.jsx)("button",{onClick:()=>{alert("Opening file browser..."),M(!1)},className:"flex-1 px-4 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors font-semibold",children:"Browse Files"})]})]})})}),(0,Xi.jsxs)("div",{className:"bg-app-card-surface rounded-xl p-4 border border-app-borders",children:[(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary mb-3",children:"Offline Mode Tips"}),(0,Xi.jsxs)("div",{className:"space-y-2 text-sm text-app-text-muted",children:[(0,Xi.jsx)("p",{children:"\u2022 Keep Bluetooth enabled for peer-to-peer features (50m range)"}),(0,Xi.jsx)("p",{children:"\u2022 Enable WiFi Direct for longer range communication (200m)"}),(0,Xi.jsx)("p",{children:"\u2022 Download maps before heading to remote areas"}),(0,Xi.jsx)("p",{children:"\u2022 Emergency SOS works via satellite when available"}),(0,Xi.jsx)("p",{children:"\u2022 Data syncs automatically when you're back online"}),(0,Xi.jsx)("p",{children:"\u2022 Share your location with group members for safety"})]})]})]})},hh=Vi("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ph=Vi("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),mh=Vi("fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]]),fh=Vi("coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]),xh=Vi("route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]),gh=Vi("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),yh=Vi("cross",[["path",{d:"M4 9a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h4a1 1 0 0 1 1 1v4a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-4a1 1 0 0 1 1-1h4a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-4a1 1 0 0 1-1-1V4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4a1 1 0 0 1-1 1z",key:"1xbrqy"}]]),vh=Vi("circle-parking",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9 17V7h4a3 3 0 0 1 0 6H9",key:"1dfk2c"}]]),bh=Vi("bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]),wh=(Vi("mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]),Vi("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])),jh=Vi("locate",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}]]),Nh=Vi("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),kh=Vi("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Sh=()=>{const[e,r]=(0,t.useState)(""),[s,n]=(0,t.useState)("all"),[a,i]=(0,t.useState)("San Francisco, CA"),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)([]),[u,h]=(0,t.useState)(!1),[p,m]=(0,t.useState)(null),[f,x]=(0,t.useState)([]),[g,y]=(0,t.useState)([]),[v,b]=(0,t.useState)(!1),[w,j]=(0,t.useState)([]),[N,k]=(0,t.useState)(!1),[S,C]=(0,t.useState)(null),[E,_]=(0,t.useState)(!1),[P,T]=(0,t.useState)(!1),[A,O]=(0,t.useState)("5"),[R,M]=(0,t.useState)(!1),[L,D]=(0,t.useState)(null),[I,F]=(0,t.useState)("~75 MB"),U=(0,t.useRef)(null),$=(0,t.useRef)(null),B=(0,t.useRef)([]),z=(0,t.useRef)(null),[q,V]=(0,t.useState)(!1),[H,W]=(0,t.useState)(!1),[K,J]=(0,t.useState)([]),[G,Q]=(0,t.useState)(!1),[Y,X]=(0,t.useState)(!1),[Z,ee]=(0,t.useState)(-1),te=(0,t.useRef)(null),re=(0,t.useRef)(null),se=(0,t.useRef)(null),[ne,ae]=(0,t.useState)(!1),[ie,oe]=(0,t.useState)(null),[le,ce]=(0,t.useState)(0),[de,ue]=(0,t.useState)(null),[he,pe]=(0,t.useState)(null),[me,fe]=(0,t.useState)(!1),[xe,ge]=(0,t.useState)(!1),[ye,ve]=(0,t.useState)(!1),[be,we]=(0,t.useState)(!1),je=(0,t.useRef)(null),Ne=(0,t.useRef)(null),ke=(e,t)=>{const r=1.3*(111*Math.sqrt(Math.pow(t.lat-e.lat,2)+Math.pow(t.lng-e.lng,2))),s=Math.max(.5,r),n=Math.round(2*s),a=[],i=Math.min(12,Math.max(4,Math.round(s/1.5)));for(let o=0;o<=i;o++){const r=o/i,s=.001*Math.sin(r*Math.PI*3);a.push({lat:e.lat+(t.lat-e.lat)*r+s,lng:e.lng+(t.lng-e.lng)*r+.5*s})}return{steps:a.slice(0,-1).map((e,t)=>{const r=a[t+1],s=111*Math.sqrt(Math.pow(r.lat-e.lat,2)+Math.pow(r.lng-e.lng,2))*1.2,n=Math.max(1,Math.round(2*s));let i="Continue straight",o="straight";if(0===t)i="Head northeast on current road",o="straight";else if(t===a.length-2)i="Arrive at destination on the right",o="slight-right";else{const e=[{instruction:"Turn right onto Main Road",maneuver:"right"},{instruction:"Turn left onto Cross Street",maneuver:"left"},{instruction:"Continue straight on Highway",maneuver:"straight"},{instruction:"Keep right at the fork",maneuver:"slight-right"},{instruction:"Keep left to stay on road",maneuver:"slight-left"},{instruction:"Continue on Ring Road",maneuver:"straight"}],r=e[t%e.length];i=r.instruction,o=r.maneuver}return{instruction:i,distance:`${s.toFixed(1)} km`,duration:`${n} min`,maneuver:o,coordinates:e}}),totalDistance:`${s.toFixed(1)} km`,totalDuration:`${n} min`,coordinates:a}},Se=e=>{const t=e.type,r=e.modifier;switch(t){case"depart":return"Head "+(r||"straight");case"turn":return"Turn "+(r||"right");case"merge":return"Merge "+(r||"right");case"on-ramp":return"Take the ramp on the "+(r||"right");case"off-ramp":return"Take the exit on the "+(r||"right");case"fork":return"Keep "+(r||"right")+" at the fork";case"continue":return"Continue straight";case"arrive":return"Arrive at destination";default:return"Continue on route"}},Ce=e=>{switch(e){case 0:default:return"straight";case 1:return"right";case 2:return"sharp-right";case 3:return"u-turn";case 4:return"sharp-left";case 5:return"left";case 6:return"slight-left";case 7:return"slight-right"}},Ee=e=>{switch(e){case"turn-right":return"right";case"turn-left":return"left";case"turn-sharp-right":return"sharp-right";case"turn-sharp-left":return"sharp-left";case"turn-slight-right":return"slight-right";case"turn-slight-left":return"slight-left";case"uturn":return"u-turn";default:return"straight"}},_e=async(e,t)=>{if(he){h(!0);try{const r=await(async(e,t)=>{try{const r=await fetch(`https://router.project-osrm.org/route/v1/driving/${e.lng},${e.lat};${t.lng},${t.lat}?steps=true&geometries=geojson&overview=full&annotations=true`);if(r.ok){const e=await r.json();if(e.routes&&e.routes.length>0){const t=e.routes[0];return{steps:t.legs[0].steps.map(e=>({instruction:e.maneuver.instruction||Se(e.maneuver),distance:`${(e.distance/1e3).toFixed(1)} km`,duration:`${Math.round(e.duration/60)} min`,maneuver:Ee(e.maneuver.type),coordinates:{lat:e.maneuver.location[1],lng:e.maneuver.location[0]}})),totalDistance:`${(t.distance/1e3).toFixed(1)} km`,totalDuration:`${Math.round(t.duration/60)} min`,coordinates:t.geometry.coordinates.map(e=>({lat:e[1],lng:e[0]}))}}}const s=await fetch(`https://api.openrouteservice.org/v2/directions/driving-car?api_key=5b3ce3597851110001cf6248b6fd2b3edeae24b08e1f6dbeffac7b73&start=${e.lng},${e.lat}&end=${t.lng},${t.lat}&format=geojson&instructions=true&radiuses=1000`);if(s.ok){const e=await s.json();if(e.features&&e.features.length>0){const t=e.features[0];return{steps:t.properties.segments[0].steps.map(e=>({instruction:e.instruction,distance:`${(e.distance/1e3).toFixed(1)} km`,duration:`${Math.round(e.duration/60)} min`,maneuver:Ce(e.type),coordinates:{lat:e.way_points[0][1],lng:e.way_points[0][0]}})),totalDistance:`${(t.properties.segments[0].distance/1e3).toFixed(1)} km`,totalDuration:`${Math.round(t.properties.segments[0].duration/60)} min`,coordinates:t.geometry.coordinates.map(e=>({lat:e[1],lng:e[0]}))}}}return ke(e,t)}catch(p){return console.error("Route calculation failed:",p),ke(e,t)}})(he,e);if(oe(r),ue({...e,name:t}),ce(0),ae(!0),fe(!0),$.current&&q){const s=window.L;je.current&&je.current.remove();const n=r.coordinates.map(e=>[e.lat,e.lng]);je.current=s.polyline(n,{color:"#FF6B00",weight:6,opacity:.8}).addTo($.current),s.marker([e.lat,e.lng]).addTo($.current).bindPopup(t),$.current.fitBounds(je.current.getBounds())}}catch(p){m("Failed to calculate route")}finally{h(!1)}}else m("Location access required for navigation")},Pe=()=>{ae(!1),oe(null),ue(null),fe(!1),ce(0),ge(!1),Ne.current&&(navigator.geolocation.clearWatch(Ne.current),Ne.current=null),je.current&&$.current&&($.current.removeLayer(je.current),je.current=null)},Te=e=>{if(!ie||!ie.steps)return;const t=ie.steps[le];if(!t||!t.coordinates)return;var r;Ae(e.lat,e.lng,t.coordinates.lat,t.coordinates.lng)<.05&&le<ie.steps.length-1&&(ce(le+1),console.log(`Next step: ${null===(r=ie.steps[le+1])||void 0===r?void 0:r.instruction}`));de&&Ae(e.lat,e.lng,de.lat,de.lng)<.1&&(m("\ud83c\udf89 You have arrived at your destination!"),setTimeout(()=>{Pe()},3e3))},Ae=(e,t,r,s)=>{const n=(r-e)*Math.PI/180,a=(s-t)*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},Oe=e=>{switch(e){case"left":case"slight-left":case"sharp-left":return Ro;case"right":case"slight-right":case"sharp-right":return ll;case"u-turn":return hh;default:return ph}};(0,t.useEffect)(()=>{Re(),Me()},[]);const Re=async()=>{try{const e=await Yi.maps.getRoutes();e.success&&e.data&&y(e.data)}catch(p){console.error("Failed to load routes:",p)}},Me=async()=>{try{const e=await Yi.maps.getOfflineMaps();if(e.success&&e.data){const t=e.data.map(e=>({id:e.id,name:e.name,bounds:`${e.zoom_level}x zoom level`,size:`${e.size_mb} MB`,downloadUrl:e.id}));x([...f,...t])}}catch(p){console.error("Failed to load offline maps:",p)}};(0,t.useEffect)(()=>{(async()=>{if("undefined"===typeof window||window.L)window.L&&V(!0);else{const e=document.createElement("link");e.rel="stylesheet",e.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(e);const t=document.createElement("script");t.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",t.onload=()=>{V(!0)},document.head.appendChild(t)}})()},[]),(0,t.useEffect)(()=>{if(!R||!U.current)return;let e=!1,t=0,r=0;const s=s=>{e=!0;const n=U.current.getBoundingClientRect();t=s.clientX-n.left,r=s.clientY-n.top,D({north:r,south:r,east:t,west:t})},n=s=>{if(!e)return;const n=U.current.getBoundingClientRect(),a=s.clientX-n.left,i=s.clientY-n.top;D({north:r,south:i,east:a,west:t});const o=Math.abs(a-t)*Math.abs(i-r)/1e4,l=Math.max(10,Math.min(500,2*o));F(`~${Math.round(l)} MB`)},a=()=>{e=!1},i=U.current;return i.addEventListener("mousedown",s),i.addEventListener("mousemove",n),i.addEventListener("mouseup",a),()=>{i.removeEventListener("mousedown",s),i.removeEventListener("mousemove",n),i.removeEventListener("mouseup",a)}},[R]),(0,t.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{const{latitude:t,longitude:r}=e.coords;pe({lat:t,lng:r})},e=>{console.error("Geolocation error:",e),pe({lat:37.7749,lng:-122.4194})})},[]),(0,t.useEffect)(()=>{if(!q||!U.current)return;if($.current)return;const e=window.L,t=he?[he.lat,he.lng]:[37.7749,-122.4194],r=e.map(U.current).setView(t,13);e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(r),$.current=r,he&&e.marker([he.lat,he.lng]).addTo(r).bindPopup("Your Location").openPopup()},[q,he]),(0,t.useEffect)(()=>{if(!q||!$.current)return;const e=window.L;B.current.forEach(e=>e.remove()),B.current=[];c.forEach(t=>{const r=e.marker([t.coordinates.lat,t.coordinates.lng]).addTo($.current);r.bindPopup(`<b>${t.name}</b><br/>${t.address}<br/>${t.distance}`),B.current.push(r)})},[q,c,s]);const Le=(e,t)=>{var r,s,n,a,i,o,l;const c="way"===e.type,d=c?null===(r=e.center)||void 0===r?void 0:r.lat:e.lat,u=c?null===(s=e.center)||void 0===s?void 0:s.lon:e.lon;if(null==d||null==u)return null;const h=(null===(n=e.tags)||void 0===n?void 0:n.name)||(null===(a=e.tags)||void 0===a?void 0:a.brand)||(null===(i=e.tags)||void 0===i?void 0:i.operator)||"Unnamed place",p=(r=>{const s=e.tags||{};return"fuel"===s.amenity?"fuel":"cafe"===s.amenity?"cafe":"bicycle"===s.shop?"shop":"tyres"===s.shop?"puncture":"yes"===s["service:bicycle:repair"]?"mechanic":"yes"===s["service:tyres"]||"yes"===s["service:puncture"]?"puncture":"cycleway"===s.highway||"path"===s.highway&&"no"!==(null!==(r=s.bicycle)&&void 0!==r?r:"")?"trail":t})(),m=$.current,f=m?m.getCenter():{lat:37.7749,lng:-122.4194},x=De(f.lat,f.lng,d,u),g=x<1?`${Math.round(1e3*x)} m`:`${x.toFixed(1)} km`;return{id:e.id,name:h,type:p,distance:g,rating:0,address:(null===(o=e.tags)||void 0===o?void 0:o.addr_full)||(null===(l=e.tags)||void 0===l?void 0:l["addr:street"])||"Nearby",coordinates:{lat:d,lng:u}}},De=(e,t,r,s)=>{const n=e=>e*Math.PI/180,a=n(r-e),i=n(s-t),o=Math.sin(a/2)**2+Math.cos(n(e))*Math.cos(n(r))*Math.sin(i/2)**2;return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},Ie=async e=>{const t=(e=>{const t=$.current;if(!t)return null;const r=t.getBounds(),s=`${r.getSouth()},${r.getWest()},${r.getNorth()},${r.getEast()}`,n=[],a=e=>{n.push(`node[${e}](${s});`),n.push(`way[${e}](${s});`)};return"all"===e?["amenity=fuel","amenity=cafe","shop=bicycle","service:bicycle:repair=yes","highway=cycleway","highway=path","service:tyres=yes","service:puncture=yes","shop=tyres"].forEach(e=>a(e)):"fuel"===e?a("amenity=fuel"):"cafe"===e?a("amenity=cafe"):"shop"===e||"mechanic"===e?(a("shop=bicycle"),a("service:bicycle:repair=yes")):"puncture"===e?(a("service:tyres=yes"),a("service:puncture=yes"),a("shop=tyres")):"trail"===e&&n.push(`way["highway"~"^(cycleway|path)$"][bicycle!~"no"](${s});`),`[out:json][timeout:25];(${n.join("")});out center 100;`})(e);if(t)try{h(!0),m(null);const r=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams({data:t})});if(!r.ok)throw new Error(`Overpass error ${r.status}`);const s=(await r.json()).elements||[],n=[];for(const t of s){const r=Le(t,"all"===e?"shop":e);r&&n.push(r)}const a=e=>`${e.name}-${e.coordinates.lat.toFixed(5)}-${e.coordinates.lng.toFixed(5)}`,i=new Map;n.forEach(e=>{const t=a(e);i.has(t)||i.set(t,e)});const o=Array.from(i.values()).slice(0,50);d(o)}catch(r){console.error(r),m(r.message||"Failed to load nearby places"),d([])}finally{h(!1)}};(0,t.useEffect)(()=>{const e=e=>{const t=e.target;re.current&&re.current.contains(t)||te.current&&te.current.contains(t)||Q(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,t.useEffect)(()=>{const t=setTimeout(async()=>{const t=e.trim();if(!t)return J([]),Q(!1),void ee(-1);if($.current)try{X(!0),se.current&&se.current.abort();const e=new AbortController;se.current=e;const r=$.current.getBounds(),s=`${r.getWest()},${r.getSouth()},${r.getEast()},${r.getNorth()}`,n="https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&limit=6",a=`${n}&viewbox=${encodeURIComponent(s)}&bounded=1&q=${encodeURIComponent(t)}`;let i=await fetch(a,{headers:{Accept:"application/json"},signal:e.signal}),o=await i.json();if(!Array.isArray(o)||0===o.length){const r=`${n}&q=${encodeURIComponent(t)}`;i=await fetch(r,{headers:{Accept:"application/json"},signal:e.signal}),o=await i.json()}if(e.signal.aborted)return;const l=Array.isArray(o)?o:[];J(l),Q(l.length>0),ee(l.length>0?0:-1)}catch(r){J([])}finally{X(!1)}},300);return()=>clearTimeout(t)},[e]);(0,t.useEffect)(()=>{$.current&&Ie(s)},[s]);const Fe=[{id:"fuel",label:"Fuel Stations",icon:mh},{id:"mechanic",label:"Mechanics",icon:Xu},{id:"cafe",label:"Cafes",icon:fh},{id:"shop",label:"Shops",icon:Gi},{id:"trail",label:"Trails",icon:xh},{id:"puncture",label:"Puncture Repair",icon:gh},{id:"hospital",label:"Hospitals",icon:yh},{id:"parking",label:"Parking",icon:vh},{id:"charging",label:"EV Charging",icon:Wu},{id:"bike_shop",label:"Bike Shops",icon:bh}];"all"===s||c.filter(e=>e.type===s);return(0,Xi.jsxs)("div",{className:"h-screen w-full overflow-hidden relative",children:[(0,Xi.jsx)("div",{ref:U,className:"absolute inset-0 w-full h-full z-10",style:{minHeight:"100vh"}}),R&&(0,Xi.jsxs)("div",{className:"absolute inset-0 z-60 bg-black/20",children:[(0,Xi.jsx)("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-app-card-surface/95 backdrop-blur-md rounded-xl px-6 py-4 border border-app-borders/50 shadow-xl",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"p-2 bg-app-primary-accent/10 rounded-lg",children:(0,Xi.jsx)(wh,{className:"w-5 h-5 text-app-primary-accent"})}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("p",{className:"text-app-text-primary font-semibold text-sm",children:"Select Download Area"}),(0,Xi.jsx)("p",{className:"text-app-text-muted text-xs",children:"Click and drag to create a selection rectangle"})]})]})}),L&&(0,Xi.jsxs)("div",{className:"absolute border-2 border-app-primary-accent bg-app-primary-accent/10 pointer-events-none",style:{left:`${Math.min(L.west,L.east)}px`,top:`${Math.min(L.north,L.south)}px`,width:`${Math.abs(L.east-L.west)}px`,height:`${Math.abs(L.south-L.north)}px`},children:[(0,Xi.jsx)("div",{className:"absolute -top-1 -left-1 w-3 h-3 bg-app-primary-accent rounded-full"}),(0,Xi.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-app-primary-accent rounded-full"}),(0,Xi.jsx)("div",{className:"absolute -bottom-1 -left-1 w-3 h-3 bg-app-primary-accent rounded-full"}),(0,Xi.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-app-primary-accent rounded-full"})]}),(0,Xi.jsx)("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-app-card-surface/95 backdrop-blur-md rounded-2xl px-6 py-4 border border-app-borders/50 shadow-xl",children:(0,Xi.jsxs)("div",{className:"flex items-center gap-4",children:[L&&(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)("p",{className:"text-app-text-primary font-semibold text-sm",children:I}),(0,Xi.jsx)("p",{className:"text-app-text-muted text-xs",children:"Estimated size"})]}),(0,Xi.jsxs)("div",{className:"flex gap-3",children:[(0,Xi.jsx)("button",{onClick:()=>{M(!1),D(null)},className:"px-4 py-2 bg-app-background border border-app-borders text-app-text-primary rounded-xl hover:bg-app-background/80 transition-all font-medium",children:"Cancel"}),L&&(0,Xi.jsxs)("button",{onClick:()=>{const e={id:Date.now(),name:`Custom Area - ${(new Date).toLocaleDateString()}`,bounds:"Selected area",size:I,downloadUrl:`offline-map-custom-${Date.now()}`};x(t=>[...t,e]),localStorage.setItem("downloadedMaps",JSON.stringify([...f,e])),M(!1),D(null),m(`Map downloaded successfully! (${I})`),setTimeout(()=>m(null),3e3)},className:"px-4 py-2 bg-app-primary-accent text-white rounded-xl hover:bg-app-primary-accent/90 transition-all font-medium flex items-center gap-2",children:[(0,Xi.jsx)(Bo,{className:"w-4 h-4"}),"Download"]})]})]})})]}),(0,Xi.jsx)("div",{className:"absolute top-4 left-4 right-4 md:left-4 md:right-4 z-50",children:(0,Xi.jsxs)("div",{className:"bg-app-card-surface/95 backdrop-blur-md rounded-2xl shadow-xl border border-app-borders/50",children:[(0,Xi.jsxs)("div",{className:"flex items-center px-4 py-3",children:[(0,Xi.jsx)("button",{onClick:()=>_(!0),className:"mr-3 p-2 bg-app-background/50 hover:bg-app-primary-accent/20 rounded-xl transition-all duration-200 group",title:"Routes & Categories",children:(0,Xi.jsx)(Wl,{className:"w-5 h-5 text-app-text-primary group-hover:text-app-primary-accent transition-colors"})}),(0,Xi.jsxs)("div",{className:"flex items-center flex-1 bg-app-background/50 rounded-xl px-3 py-2",children:[(0,Xi.jsx)(Lo,{className:"w-5 h-5 text-app-text-muted mr-3 flex-shrink-0"}),(0,Xi.jsx)("input",{type:"text",placeholder:"Search places, routes, or POIs...",value:e,onChange:e=>r(e.target.value),className:"flex-1 outline-none text-sm bg-transparent text-app-text-primary placeholder-app-text-muted"}),e&&(0,Xi.jsx)("button",{onClick:()=>{if(K.length>0){const e=K[0],t={lat:parseFloat(e.lat),lng:parseFloat(e.lon)};_e(t,e.display_name)}},className:"ml-2 p-1.5 bg-app-primary-accent hover:bg-app-primary-accent/90 rounded-lg transition-all duration-200 flex items-center justify-center",title:"Get Directions",children:(0,Xi.jsx)(hl,{className:"w-4 h-4 text-white"})})]}),(0,Xi.jsx)("button",{onClick:()=>{navigator.geolocation?(m("Getting your location..."),navigator.geolocation.getCurrentPosition(e=>{const{latitude:t,longitude:r}=e.coords;if(pe({lat:t,lng:r}),$.current&&($.current.flyTo([t,r],16),window.L)){window.L.marker([t,r],{icon:window.L.divIcon({className:"custom-location-marker",html:'<div style="width: 20px; height: 20px; background: #FF6B00; border: 3px solid white; border-radius: 50%; box-shadow: 0 2px 8px rgba(0,0,0,0.3);"></div>',iconSize:[20,20],iconAnchor:[10,10]})}).addTo($.current).bindPopup("You are here").openPopup()}m("Location found!"),setTimeout(()=>m(""),2e3)},e=>{console.error("Geolocation error:",e),m("Unable to get your location. Please check permissions."),setTimeout(()=>m(""),3e3)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})):(m("Geolocation is not supported by this browser."),setTimeout(()=>m(""),3e3))},className:"ml-3 p-2 bg-app-background/50 hover:bg-app-primary-accent/20 rounded-xl transition-all duration-200 group",title:"My Location",children:(0,Xi.jsx)(jh,{className:"w-5 h-5 text-app-text-primary group-hover:text-app-primary-accent transition-colors"})})]}),(K.length>0||G)&&(0,Xi.jsxs)("div",{className:"mt-1 sm:mt-2 bg-white rounded-lg shadow-lg border border-gray-200 max-h-40 sm:max-h-48 overflow-y-auto z-[60]",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between p-2 border-b border-gray-100",children:[(0,Xi.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"Search Results"}),(0,Xi.jsx)("button",{onClick:()=>{J([]),r(""),d([])},className:"text-xs text-app-primary-accent hover:text-app-primary-accent/80 font-medium",children:"Clear All"})]}),K.map((e,t)=>(0,Xi.jsxs)("div",{className:"flex items-center justify-between px-3 sm:px-4 py-2 sm:py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[(0,Xi.jsxs)("button",{onClick:()=>{r(e.display_name),J([]);const t={lat:parseFloat(e.lat),lng:parseFloat(e.lon)};$.current&&$.current.flyTo([t.lat,t.lng],15)},className:"flex items-center gap-2 sm:gap-3 flex-1 text-left",children:[(0,Xi.jsx)(Ji,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400 flex-shrink-0"}),(0,Xi.jsx)("span",{className:"truncate text-xs sm:text-sm text-gray-700",children:e.display_name})]}),(0,Xi.jsxs)("button",{onClick:t=>{t.stopPropagation();const r={lat:parseFloat(e.lat),lng:parseFloat(e.lon)};_e(r,e.display_name)},className:"px-3 py-1 bg-app-primary-accent text-white rounded-lg hover:bg-app-primary-accent/90 transition-all text-xs font-medium flex items-center gap-1 ml-2",title:"Start Navigation",children:[(0,Xi.jsx)(hl,{className:"w-3 h-3"}),"Start"]})]},t))]})]})}),p&&(0,Xi.jsx)(Fi.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-32 left-1/2 transform -translate-x-1/2 z-[70] max-w-sm",children:(0,Xi.jsx)("div",{className:"bg-red-500/95 backdrop-blur-md text-white px-4 py-3 rounded-xl shadow-xl border border-red-400/50 text-sm text-center",children:(0,Xi.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,Xi.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),(0,Xi.jsx)("span",{children:p})]})})}),P&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-end md:items-center justify-center z-[80]",children:(0,Xi.jsxs)(Fi.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},className:"bg-app-card-surface rounded-t-3xl md:rounded-2xl shadow-2xl w-full md:w-96 md:max-w-md border-t md:border border-app-borders/50 max-h-[85vh] md:max-h-[70vh] overflow-hidden",children:[(0,Xi.jsx)("div",{className:"md:hidden flex justify-center py-3",children:(0,Xi.jsx)("div",{className:"w-10 h-1 bg-app-text-muted/30 rounded-full"})}),(0,Xi.jsxs)("div",{className:"p-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("h3",{className:"text-xl font-bold text-app-text-primary",children:"Download Offline Map"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted mt-1",children:"Save maps for offline navigation"})]}),(0,Xi.jsx)("button",{onClick:()=>T(!1),className:"p-2 text-app-text-muted hover:text-app-text-primary hover:bg-app-background/50 rounded-xl transition-all",children:(0,Xi.jsx)(bo,{className:"w-5 h-5"})})]}),(0,Xi.jsx)("div",{className:"space-y-2.5 sm:space-y-4",children:R?(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)("div",{className:"mb-6",children:(0,Xi.jsxs)("div",{className:"bg-app-background/30 rounded-xl p-4",children:[(0,Xi.jsx)("h4",{className:"font-semibold text-app-text-primary mb-2",children:"Area Selection Active"}),(0,Xi.jsxs)("p",{className:"text-sm text-app-text-muted mb-3",children:["Estimated download size: ",(0,Xi.jsx)("span",{className:"font-semibold text-app-primary-accent",children:I})]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-xs text-app-text-muted",children:[(0,Xi.jsx)("div",{className:"w-2 h-2 bg-app-primary-accent rounded-full animate-pulse"}),(0,Xi.jsx)("span",{children:"Tap and drag on the map to select your area"})]})]})}),(0,Xi.jsxs)("div",{className:"space-y-3",children:[(0,Xi.jsxs)("button",{onClick:()=>{const e={id:Date.now(),name:`Downloaded Area - ${(new Date).toLocaleDateString()}`,bounds:L?"Custom area":"5km radius",size:I,downloadUrl:`offline-map-custom-${Date.now()}`};x(t=>[...t,e]),localStorage.setItem("downloadedMaps",JSON.stringify([...f,e])),M(!1),D(null),m(`Map downloaded successfully! (${I})`),setTimeout(()=>m(null),3e3)},className:"w-full px-4 py-4 bg-app-primary-accent text-white rounded-xl hover:bg-app-primary-accent/90 transition-all font-semibold flex items-center justify-center gap-3 shadow-lg",children:[(0,Xi.jsx)(Bo,{className:"w-5 h-5"}),"Download Selected Area"]}),(0,Xi.jsx)("button",{onClick:()=>{M(!1),D(null),T(!0)},className:"w-full px-4 py-4 bg-app-background border border-app-borders text-app-text-primary rounded-xl hover:bg-app-background/80 transition-all font-semibold",children:"Cancel Selection"})]})]}):(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,Xi.jsx)("div",{className:"bg-app-background/30 rounded-xl p-4",children:(0,Xi.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Xi.jsx)("div",{className:"p-2 bg-app-primary-accent/10 rounded-lg",children:(0,Xi.jsx)(Bo,{className:"w-5 h-5 text-app-primary-accent"})}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("h4",{className:"font-semibold text-app-text-primary mb-1",children:"Custom Area"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:"Select a specific area on the map to download"})]})]})}),(0,Xi.jsx)("div",{className:"bg-app-background/30 rounded-xl p-4",children:(0,Xi.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Xi.jsx)("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:(0,Xi.jsx)(Ji,{className:"w-5 h-5 text-blue-500"})}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("h4",{className:"font-semibold text-app-text-primary mb-1",children:"Current Location"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted",children:"Download 5km radius around your location"}),(0,Xi.jsx)("p",{className:"text-xs text-app-text-muted mt-1",children:"~25MB estimated"})]})]})})]}),(0,Xi.jsxs)("div",{className:"space-y-3",children:[(0,Xi.jsxs)("button",{onClick:()=>{M(!0),T(!1)},className:"w-full px-4 py-4 bg-app-primary-accent text-white rounded-xl hover:bg-app-primary-accent/90 transition-all font-semibold flex items-center justify-center gap-3 shadow-lg",children:[(0,Xi.jsx)(Bo,{className:"w-5 h-5"}),"Select Custom Area"]}),(0,Xi.jsxs)("button",{onClick:()=>{const e={id:Date.now(),name:`Current Location - ${(new Date).toLocaleDateString()}`,bounds:"5km radius",size:"~25MB",downloadUrl:`offline-map-location-${Date.now()}`};x(t=>[...t,e]),localStorage.setItem("downloadedMaps",JSON.stringify([...f,e])),T(!1),m("Map downloaded successfully! (~25MB)"),setTimeout(()=>m(null),3e3)},className:"w-full px-4 py-4 bg-app-background border border-app-borders text-app-text-primary rounded-xl hover:bg-app-background/80 transition-all font-semibold",children:[(0,Xi.jsx)(Ji,{className:"w-5 h-5"}),"Download Current Area"]})]}),(0,Xi.jsx)("div",{className:"mt-6 p-4 bg-app-primary-accent/5 border border-app-primary-accent/20 rounded-xl",children:(0,Xi.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Xi.jsx)("div",{className:"p-1.5 bg-app-primary-accent/10 rounded-lg",children:(0,Xi.jsx)(Bo,{className:"w-4 h-4 text-app-primary-accent"})}),(0,Xi.jsxs)("div",{className:"text-sm text-app-text-muted",children:[(0,Xi.jsx)("p",{className:"font-semibold text-app-primary-accent mb-1",children:"Offline Benefits:"}),(0,Xi.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,Xi.jsx)("li",{children:"\u2022 Navigate without internet connection"}),(0,Xi.jsx)("li",{children:"\u2022 Save mobile data usage"}),(0,Xi.jsx)("li",{children:"\u2022 Faster map loading"})]})]})]})})]})})]})]})}),me&&ie&&(0,Xi.jsxs)(Fi.div,{initial:{y:"100%",x:0},animate:{y:0,x:0},exit:{y:"100%",x:0},drag:"y",dragConstraints:{top:-300,bottom:0},dragElastic:.2,onDragEnd:(e,t)=>{t.offset.y>150&&fe(!1)},className:"absolute md:relative bottom-0 md:top-0 left-0 right-0 md:right-auto md:bottom-auto w-full md:w-80 h-[70vh] md:h-full bg-app-card-surface/95 backdrop-blur-md shadow-2xl border-t md:border-t-0 md:border-r border-app-borders/50 z-40 overflow-hidden rounded-t-3xl md:rounded-none",children:[(0,Xi.jsx)(Fi.div,{className:"md:hidden flex justify-center py-4 cursor-grab active:cursor-grabbing",whileTap:{scale:1.1},children:(0,Xi.jsx)("div",{className:"w-16 h-2 bg-app-text-muted/60 rounded-full hover:bg-app-text-muted/80 transition-colors shadow-sm"})}),(0,Xi.jsxs)("div",{className:"p-4 border-b border-app-borders/50 md:pt-4 pt-2",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Xi.jsx)("h3",{className:"text-lg font-bold text-app-text-primary",children:"Navigation"}),(0,Xi.jsx)("button",{onClick:Pe,className:"p-2 text-app-text-muted hover:text-red-500 hover:bg-red-500/10 rounded-xl transition-all",children:(0,Xi.jsx)(bo,{className:"w-5 h-5"})})]}),de&&(0,Xi.jsxs)("div",{className:"bg-app-background/30 rounded-xl p-3",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Xi.jsx)(Ji,{className:"w-4 h-4 text-app-primary-accent"}),(0,Xi.jsx)("span",{className:"text-sm font-medium text-app-text-primary truncate",children:de.name})]}),(0,Xi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-4 text-xs text-app-text-muted",children:[(0,Xi.jsx)("span",{children:ie.totalDistance}),(0,Xi.jsx)("span",{children:ie.totalDuration})]}),(0,Xi.jsxs)("button",{onClick:()=>{de&&ie&&(ge(!0),ae(!0),navigator.geolocation&&(Ne.current=navigator.geolocation.watchPosition(e=>{const t={lat:e.coords.latitude,lng:e.coords.longitude};pe(t),$.current&&$.current.setView([t.lat,t.lng],18),Te(t)},e=>{console.error("Error watching position:",e),m("Unable to track your location for navigation")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:1e3})),m("Journey started! Following your location..."),setTimeout(()=>m(""),3e3))},className:"px-4 py-2 rounded-lg transition-all text-sm font-medium flex items-center gap-2 "+(xe?"bg-green-500 text-white cursor-not-allowed":"bg-app-primary-accent text-white hover:bg-app-primary-accent/90"),disabled:xe,children:[(0,Xi.jsx)(hl,{className:"w-4 h-4"}),xe?"Journey Active":"Start Journey"]})]})]})]}),ie.steps[le]&&(0,Xi.jsxs)("div",{className:"p-4 bg-app-primary-accent/5 border-b border-app-borders/30",children:[(0,Xi.jsxs)("div",{className:"md:hidden mb-3 text-center",children:[(0,Xi.jsx)("div",{className:"text-2xl font-bold text-app-primary-accent",children:ie.steps[le].distance}),(0,Xi.jsxs)("div",{className:"text-sm text-app-text-muted",children:["in ",ie.steps[le].duration]})]}),(0,Xi.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Xi.jsx)("div",{className:"p-3 md:p-2 bg-app-primary-accent/10 rounded-lg",children:t.createElement(Oe(ie.steps[le].maneuver),{className:"w-8 h-8 md:w-5 md:h-5 text-app-primary-accent"})}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("p",{className:"font-semibold text-app-text-primary mb-1 text-lg md:text-base",children:ie.steps[le].instruction}),(0,Xi.jsxs)("div",{className:"hidden md:flex items-center gap-3 text-sm text-app-text-muted",children:[(0,Xi.jsx)("span",{children:ie.steps[le].distance}),(0,Xi.jsx)("span",{children:ie.steps[le].duration})]})]})]})]}),(0,Xi.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,Xi.jsxs)("div",{className:"p-2",children:[(0,Xi.jsx)("h4",{className:"text-sm font-semibold text-app-text-muted px-2 py-2",children:"All Directions"}),ie.steps.map((e,t)=>{const r=Oe(e.maneuver),s=t===le,n=t<le;return(0,Xi.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-xl mb-2 transition-all "+(s?"bg-app-primary-accent/10 border border-app-primary-accent/20":n?"bg-app-background/30 opacity-60":"hover:bg-app-background/20"),children:[(0,Xi.jsx)("div",{className:"p-1.5 rounded-lg "+(s?"bg-app-primary-accent/20":n?"bg-green-500/20":"bg-app-background/50"),children:(0,Xi.jsx)(r,{className:"w-4 h-4 "+(s?"text-app-primary-accent":n?"text-green-500":"text-app-text-muted")})}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("p",{className:"text-sm font-medium mb-1 "+(s?"text-app-text-primary":n?"text-app-text-muted line-through":"text-app-text-primary"),children:e.instruction}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-xs text-app-text-muted",children:[(0,Xi.jsx)("span",{children:e.distance}),(0,Xi.jsx)("span",{children:"\u2022"}),(0,Xi.jsx)("span",{children:e.duration})]})]}),s&&(0,Xi.jsxs)("div",{className:"flex gap-1",children:[(0,Xi.jsx)("button",{onClick:()=>ce(Math.max(0,le-1)),disabled:0===le,className:"p-1 text-app-text-muted hover:text-app-primary-accent disabled:opacity-30 disabled:cursor-not-allowed",children:(0,Xi.jsx)(Ro,{className:"w-3 h-3"})}),(0,Xi.jsx)("button",{onClick:()=>ce(Math.min(ie.steps.length-1,le+1)),disabled:le===ie.steps.length-1,className:"p-1 text-app-text-muted hover:text-app-primary-accent disabled:opacity-30 disabled:cursor-not-allowed",children:(0,Xi.jsx)(ll,{className:"w-3 h-3"})})]})]},t)})]})})]}),c.length>0&&!me&&0===K.length&&(0,Xi.jsxs)(Fi.div,{initial:{y:"100%"},animate:{y:0},className:"absolute bottom-0 left-0 right-0 z-20 bg-app-card-surface/95 backdrop-blur-md rounded-t-3xl shadow-2xl border-t border-app-borders/50 max-h-80 overflow-hidden",children:[(0,Xi.jsx)("div",{className:"flex justify-center py-2",children:(0,Xi.jsx)("div",{className:"w-8 h-1 bg-gray-300 rounded-full"})}),(0,Xi.jsx)("div",{className:"px-4 py-3 border-b border-gray-200",children:(0,Xi.jsx)("h3",{className:"text-lg font-semibold text-app-text-primary",children:"Nearby Places"})}),(0,Xi.jsx)("div",{className:"overflow-y-auto max-h-60",children:c.map(e=>(0,Xi.jsx)("div",{className:"px-4 py-3 border-b border-gray-100 last:border-b-0",children:(0,Xi.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("h4",{className:"font-semibold text-app-text-primary",children:e.name}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted mt-1",children:e.address}),(0,Xi.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Xi.jsx)(cl,{className:"w-4 h-4 text-yellow-400 fill-current"}),(0,Xi.jsx)("span",{className:"text-sm text-app-text-primary",children:e.rating})]}),(0,Xi.jsx)("span",{className:"text-sm text-app-text-muted",children:e.distance}),e.hours&&(0,Xi.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Xi.jsx)(Do,{className:"w-4 h-4 text-app-text-muted"}),(0,Xi.jsx)("span",{className:"text-xs text-app-text-muted",children:e.hours})]})]})]}),(0,Xi.jsxs)("div",{className:"flex flex-col gap-2 ml-3",children:[(0,Xi.jsxs)("button",{onClick:()=>_e(e.coordinates,e.name),className:"px-3 py-2 bg-app-primary-accent text-white rounded-lg hover:bg-app-primary-accent/90 transition-colors flex items-center gap-1.5",title:"Start Navigation",children:[(0,Xi.jsx)(hl,{className:"w-4 h-4"}),(0,Xi.jsx)("span",{className:"text-xs font-medium",children:"Start"})]}),e.phone&&(0,Xi.jsx)("button",{className:"p-2 bg-app-background border border-app-borders text-app-text-primary rounded-lg hover:bg-app-background/80 transition-colors",children:(0,Xi.jsx)("span",{className:"text-xs",children:"Call"})})]})]})},e.id))})]}),(0,Xi.jsx)(ol,{children:E&&(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,x:-300},animate:{opacity:1,x:0},exit:{opacity:0,x:-300},className:"fixed left-0 top-0 h-full w-full sm:w-80 max-w-sm bg-app-card-surface shadow-2xl z-[70] overflow-y-auto border-r border-app-borders",children:[(0,Xi.jsxs)("div",{className:"p-3 sm:p-4 border-b border-app-borders",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[(0,Xi.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-app-text-primary",children:"Categories"}),(0,Xi.jsx)("button",{onClick:()=>_(!1),className:"p-2 sm:p-2.5 hover:bg-app-background rounded-full text-app-text-muted min-w-[44px] min-h-[44px] touch-manipulation flex items-center justify-center",children:(0,Xi.jsx)(bo,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),(0,Xi.jsxs)("div",{className:"space-y-1.5 sm:space-y-2",children:[(0,Xi.jsx)("h4",{className:"text-xs sm:text-sm font-medium text-app-text-muted mb-2",children:"All"}),(0,Xi.jsxs)("button",{onClick:()=>{n("all"),d([]),fe(!1),oe(null),ue(null),_(!1)},className:"w-full flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg transition-all min-h-[44px] touch-manipulation "+("all"===s?"bg-app-primary-accent text-white":"text-app-text-primary hover:bg-app-background"),children:[(0,Xi.jsx)(Ji,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,Xi.jsx)("span",{className:"font-medium text-sm sm:text-base",children:"All"})]}),Fe.map(e=>{const t=e.icon;return(0,Xi.jsxs)("button",{onClick:()=>{n(e.id),Ie(e.id),_(!1)},className:"w-full flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg transition-all min-h-[44px] touch-manipulation "+(s===e.id?"bg-app-primary-accent text-white":"text-app-text-primary hover:bg-app-background"),children:[(0,Xi.jsx)(t,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,Xi.jsx)("span",{className:"font-medium text-sm sm:text-base",children:e.label})]},e.id)})]})]}),(0,Xi.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,Xi.jsx)("h4",{className:"text-base sm:text-lg font-semibold text-app-text-primary mb-2 sm:mb-3",children:"My Routes"}),(0,Xi.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[g.map(e=>(0,Xi.jsxs)("div",{className:"bg-app-background border border-app-borders rounded-lg p-2.5 sm:p-3 hover:shadow-md transition-shadow",children:[(0,Xi.jsxs)("div",{className:"flex items-start justify-between mb-1.5 sm:mb-2",children:[(0,Xi.jsx)("h5",{className:"font-medium text-app-text-primary truncate text-sm sm:text-base",children:e.name}),(0,Xi.jsx)("button",{onClick:()=>e.id&&(async e=>{try{const t=await Yi.maps.deleteRoute(e);t.success?await Re():m(t.error||"Failed to delete route")}catch(p){m(p.message||"Delete failed")}})(e.id),className:"p-0.5 sm:p-1 text-red-400 hover:bg-red-400/10 rounded",children:(0,Xi.jsx)(Nh,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]}),(0,Xi.jsxs)("div",{className:"text-xs sm:text-sm text-app-text-muted space-y-0.5 sm:space-y-1 mb-2 sm:mb-3",children:[(0,Xi.jsxs)("div",{className:"flex justify-between",children:[(0,Xi.jsx)("span",{children:"Distance:"}),(0,Xi.jsxs)("span",{children:[e.distance.toFixed(1)," km"]})]}),(0,Xi.jsxs)("div",{className:"flex justify-between",children:[(0,Xi.jsx)("span",{children:"Duration:"}),(0,Xi.jsxs)("span",{children:[e.duration," min"]})]}),(0,Xi.jsxs)("div",{className:"flex justify-between",children:[(0,Xi.jsx)("span",{children:"Difficulty:"}),(0,Xi.jsx)("span",{className:"capitalize",children:e.difficulty})]})]}),(0,Xi.jsx)("button",{onClick:()=>(e=>{if(!$.current||!q)return;const t=window.L;z.current&&z.current.remove();const r=e.waypoints.map(e=>[e.lat,e.lng]);z.current=t.polyline(r,{color:"#FF6B00",weight:4,opacity:.8}).addTo($.current),$.current.fitBounds(z.current.getBounds())})(e),className:"w-full py-1.5 sm:py-2 px-2.5 sm:px-3 bg-app-primary-accent text-white text-xs sm:text-sm rounded-lg hover:bg-app-primary-accent/90 transition-colors",children:"Show on Map"})]},e.id)),0===g.length&&(0,Xi.jsxs)("div",{className:"text-center text-app-text-muted py-6 sm:py-8",children:[(0,Xi.jsx)(xh,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 sm:mb-3 opacity-30"}),(0,Xi.jsx)("p",{className:"font-medium text-sm sm:text-base",children:"No saved routes yet"}),(0,Xi.jsx)("p",{className:"text-xs sm:text-sm",children:"Start recording to create your first route"})]})]}),(0,Xi.jsx)("div",{className:"mt-4 sm:mt-6 pt-3 sm:pt-4 border-t border-app-borders",children:(0,Xi.jsxs)("button",{onClick:()=>T(!0),className:"w-full flex items-center justify-center gap-1.5 sm:gap-2 py-2.5 sm:py-3 px-3 sm:px-4 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm sm:text-base",children:[(0,Xi.jsx)(Bo,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,Xi.jsx)("span",{children:"Download Offline Maps"})]})})]})]})}),(0,Xi.jsx)(ol,{children:N&&S&&(0,Xi.jsx)(Fi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4",onClick:()=>k(!1),children:(0,Xi.jsx)(Fi.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-app-card-surface rounded-2xl max-w-md w-full border border-app-borders mx-2 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,Xi.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,Xi.jsxs)("h2",{className:"text-lg sm:text-xl font-bold text-app-text-primary mb-3 sm:mb-4 flex items-center gap-2",children:[(0,Xi.jsx)(kh,{className:"w-5 h-5 sm:w-6 sm:h-6 text-app-primary-accent"}),"Save Route"]}),(0,Xi.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-app-text-primary mb-1",children:"Route Name"}),(0,Xi.jsx)("input",{type:"text",value:S.name,onChange:e=>C({...S,name:e.target.value}),className:"w-full px-2.5 sm:px-3 py-1.5 sm:py-2 bg-app-background border border-app-borders rounded-lg text-app-text-primary text-sm sm:text-base",placeholder:"Enter route name"})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-app-text-primary mb-1",children:"Description (optional)"}),(0,Xi.jsx)("textarea",{value:S.description||"",onChange:e=>C({...S,description:e.target.value}),className:"w-full px-2.5 sm:px-3 py-1.5 sm:py-2 bg-app-background border border-app-borders rounded-lg text-app-text-primary text-sm sm:text-base",placeholder:"Describe your route",rows:2})]}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-app-text-primary mb-1",children:"Difficulty"}),(0,Xi.jsxs)("select",{value:S.difficulty,onChange:e=>C({...S,difficulty:e.target.value}),className:"w-full px-2.5 sm:px-3 py-1.5 sm:py-2 bg-app-background border border-app-borders rounded-lg text-app-text-primary text-sm sm:text-base",children:[(0,Xi.jsx)("option",{value:"easy",children:"Easy"}),(0,Xi.jsx)("option",{value:"moderate",children:"Moderate"}),(0,Xi.jsx)("option",{value:"hard",children:"Hard"})]})]}),(0,Xi.jsxs)("div",{className:"bg-app-background rounded-lg p-2.5 sm:p-3 text-xs sm:text-sm text-app-text-muted",children:[(0,Xi.jsxs)("div",{children:["Distance: ",S.distance.toFixed(1)," km"]}),(0,Xi.jsxs)("div",{children:["Duration: ",S.duration," minutes"]}),(0,Xi.jsxs)("div",{children:["Waypoints: ",S.waypoints.length]})]}),(0,Xi.jsxs)("div",{className:"flex gap-2 sm:gap-3",children:[(0,Xi.jsx)("button",{onClick:()=>k(!1),className:"flex-1 py-1.5 sm:py-2 px-3 sm:px-4 border border-app-borders text-app-text-primary rounded-lg hover:bg-app-background transition-colors text-sm",children:"Cancel"}),(0,Xi.jsx)("button",{onClick:()=>(async e=>{try{const t=await Yi.maps.saveRoute(e);t.success?(k(!1),C(null),j([]),await Re()):m(t.error||"Failed to save route")}catch(p){m(p.message||"Save failed")}})(S),disabled:!S.name.trim(),className:"flex-1 py-1.5 sm:py-2 px-3 sm:px-4 bg-app-primary-accent text-white rounded-lg hover:bg-app-primary-accent/90 transition-colors disabled:opacity-50 text-sm",children:"Save Route"})]})]})]})})})})]})},Ch=Vi("newspaper",[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]]),Eh=e=>{let{onNewsClick:t,onNotificationsClick:r,onMessagesClick:s,notificationCount:n=0,messageCount:a=0,onMenuClick:i,activeTab:o="home"}=e;return(0,Xi.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-50 bg-app-background/95 backdrop-blur-md border-b border-app-borders",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 md:px-6",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)(Fi.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"p-2.5 hover:bg-app-primary-accent/10 rounded-xl transition-colors bg-app-card-surface border border-app-borders shadow-sm",children:(0,Xi.jsx)(Wl,{className:"w-5 h-5 text-app-text-primary"})}),(0,Xi.jsx)(Fi.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"p-2.5 hover:bg-app-primary-accent/10 rounded-xl transition-colors bg-app-card-surface border border-app-borders shadow-sm",children:(0,Xi.jsx)(Ch,{className:"w-5 h-5 text-app-text-primary"})})]}),(0,Xi.jsx)("div",{className:"flex-1 flex justify-center items-center",children:(0,Xi.jsx)("h1",{className:"text-2xl font-bold text-app-text-primary tracking-wide",children:(()=>{switch(o){case"home":default:return"Home Feed";case"explore":return"Explore";case"news":return"News Feed";case"maps":return"Maps";case"marketplace":return"Marketplace";case"profile":return"Profile";case"notifications":return"Notifications";case"messages":return"Messages"}})()})}),(0,Xi.jsx)("div",{className:"flex items-center",children:(0,Xi.jsxs)(Fi.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,className:"relative p-2.5 hover:bg-app-primary-accent/10 rounded-xl transition-colors bg-app-card-surface border border-app-borders shadow-sm mr-16 md:mr-20",children:[(0,Xi.jsx)(zo,{className:"w-5 h-5 text-app-text-muted"}),n>0&&(0,Xi.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-app-primary-accent text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg",children:n>9?"9+":n})]})})]}),(0,Xi.jsxs)(Fi.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"fixed top-4 right-4 md:right-6 z-50 p-2.5 hover:bg-app-primary-accent/10 rounded-xl transition-colors bg-app-card-surface border border-app-borders shadow-lg",style:{boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[(0,Xi.jsx)(ko,{className:"w-5 h-5 text-app-text-muted"}),a>0&&(0,Xi.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-app-primary-accent text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg",children:a>9?"9+":a})]})]})},_h=Vi("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ph=Vi("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Th=Vi("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Ah=Vi("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),Oh=e=>{let{isOpen:t,onClose:r,onNavigate:s}=e;const n=[{id:"offline",label:"Offline Mode",icon:Wi,description:"Access offline features and content"},{id:"settings",label:"Settings",icon:_h,description:"Account, preferences, and app settings"},{id:"privacy",label:"Privacy",icon:Ph,description:"Privacy settings and data control"},{id:"about",label:"About",icon:Th,description:"About PEDAL and app information"},{id:"help",label:"Help & Support",icon:Jo,description:"Get help and support"},{id:"feedback",label:"Send Feedback",icon:ih,description:"Share your feedback with us"},{id:"terms",label:"Terms of Service",icon:ec,description:"Terms and conditions"}];return(0,Xi.jsx)(ol,{children:t&&(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)(Fi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40"}),(0,Xi.jsxs)(Fi.div,{initial:{x:-300,opacity:0},animate:{x:0,opacity:1},exit:{x:-300,opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"fixed left-0 top-0 bottom-0 w-full max-w-xs xs:max-w-sm sm:max-w-md md:max-w-lg lg:w-80 xl:w-96 bg-app-card-surface border-r border-app-borders shadow-2xl z-50 overflow-y-auto",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between p-3 xs:p-4 sm:p-5 md:p-6 border-b border-app-borders",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2 xs:gap-3 min-w-0 flex-1",children:[(0,Xi.jsx)("div",{className:"w-7 h-7 xs:w-8 xs:h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-gradient-to-r from-app-primary-accent to-orange-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,Xi.jsx)("span",{className:"text-white font-bold text-xs xs:text-sm sm:text-lg md:text-xl",children:"P"})}),(0,Xi.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,Xi.jsx)("h2",{className:"text-base xs:text-lg sm:text-xl md:text-2xl font-bold text-app-text-primary truncate",children:"PEDAL"}),(0,Xi.jsx)("p",{className:"text-xs xs:text-xs sm:text-sm md:text-base text-app-text-muted truncate",children:"Navigation Menu"})]})]}),(0,Xi.jsx)("button",{onClick:r,className:"p-1 xs:p-1.5 sm:p-2 md:p-2.5 hover:bg-app-background rounded-lg transition-colors flex-shrink-0 ml-2",children:(0,Xi.jsx)(bo,{className:"w-4 h-4 xs:w-4 xs:h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 text-app-text-muted"})})]}),(0,Xi.jsx)("div",{className:"p-2 xs:p-3 sm:p-4 md:p-5 space-y-1 xs:space-y-1.5 sm:space-y-2 md:space-y-2.5",children:n.map(e=>{const t=e.icon;return(0,Xi.jsxs)(Fi.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>{return t=e.id,s(t),void r();var t},className:"w-full flex items-center gap-2 xs:gap-3 sm:gap-4 md:gap-5 p-2.5 xs:p-3 sm:p-4 md:p-5 rounded-lg xs:rounded-xl hover:bg-app-primary-accent/10 transition-all duration-200 text-left group",children:[(0,Xi.jsx)("div",{className:"w-7 h-7 xs:w-8 xs:h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-app-primary-accent/10 rounded-md xs:rounded-lg flex items-center justify-center group-hover:bg-app-primary-accent/20 transition-colors flex-shrink-0",children:(0,Xi.jsx)(t,{className:"w-3.5 h-3.5 xs:w-4 xs:h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 text-app-primary-accent"})}),(0,Xi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Xi.jsx)("h3",{className:"font-semibold text-xs xs:text-sm sm:text-base md:text-lg text-app-text-primary group-hover:text-app-primary-accent transition-colors truncate",children:e.label}),(0,Xi.jsx)("p",{className:"text-xs xs:text-xs sm:text-sm md:text-base text-app-text-muted line-clamp-2 leading-tight",children:e.description})]})]},e.id)})}),(0,Xi.jsx)("div",{className:"p-2 xs:p-3 sm:p-4 md:p-5 border-t border-app-borders mt-2 xs:mt-3 sm:mt-4",children:(0,Xi.jsxs)(Fi.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>{localStorage.removeItem("isAuthenticated"),localStorage.removeItem("user"),localStorage.removeItem("authToken"),window.location.reload()},className:"w-full flex items-center gap-2 xs:gap-3 sm:gap-4 md:gap-5 p-2.5 xs:p-3 sm:p-4 md:p-5 rounded-lg xs:rounded-xl hover:bg-red-500/10 transition-all duration-200 text-left group",children:[(0,Xi.jsx)("div",{className:"w-7 h-7 xs:w-8 xs:h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-red-500/10 rounded-md xs:rounded-lg flex items-center justify-center group-hover:bg-red-500/20 transition-colors flex-shrink-0",children:(0,Xi.jsx)(Ah,{className:"w-3.5 h-3.5 xs:w-4 xs:h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 text-red-500"})}),(0,Xi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Xi.jsx)("h3",{className:"font-semibold text-xs xs:text-sm sm:text-base md:text-lg text-red-500 truncate",children:"Sign Out"}),(0,Xi.jsx)("p",{className:"text-xs xs:text-xs sm:text-sm md:text-base text-app-text-muted leading-tight",children:"Log out of your account"})]})]})})]})]})})};function Rh(e){const r=xt(()=>Ks(e)),{isStatic:s}=(0,t.useContext)(H);if(s){const[,s]=(0,t.useState)(e);(0,t.useEffect)(()=>r.on("change",s),[])}return r}function Mh(e,t){const r=Rh(t()),s=()=>r.set(t());return s(),G(()=>{const t=()=>St.update(s,!1,!0),r=e.map(e=>e.on("change",t));return()=>{r.forEach(e=>e()),Ct(s)}}),r}function Lh(e,t,r,s){if("function"===typeof e)return function(e){Hs.current=[],e();const t=Mh(Hs.current,e);return Hs.current=void 0,t}(e);const n="function"===typeof t?t:function(){const e=!Array.isArray(arguments.length<=0?void 0:arguments[0]),t=e?0:-1,r=0+t<0||arguments.length<=0+t?void 0:arguments[0+t],s=2+t<0||arguments.length<=2+t?void 0:arguments[2+t],n=3+t<0||arguments.length<=3+t?void 0:arguments[3+t],a=rs(1+t<0||arguments.length<=1+t?void 0:arguments[1+t],s,{mixer:(i=s[0],(e=>e&&"object"===typeof e&&e.mix)(i)?i.mix:void 0),...n});var i;return e?a(r):a}(t,r,s);return Array.isArray(e)?Dh(e,n):Dh([e],e=>{let[t]=e;return n(t)})}function Dh(e,t){const r=xt(()=>[]);return Mh(e,()=>{r.length=0;const s=e.length;for(let t=0;t<s;t++)r[t]=e[t].get();return t(r)})}const Ih=e=>{let{isOpen:r,onClose:s,onOpenSettings:n}=e;const{user:a}=ho(),[i,o]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)([]),[m,f]=(0,t.useState)([]),[x,g]=(0,t.useState)([]),[y,v]=(0,t.useState)("notifications"),[b,w]=(0,t.useState)({available:!1,version:"",notes:""});(0,t.useEffect)(()=>{(async()=>{if(r){c(!0),u(null);try{const e=JSON.parse(localStorage.getItem("notifications")||"[]");o(e),p(e)}catch(e){console.error("Failed to load notifications:",e),u("Failed to load notifications"),o([]),p([])}finally{c(!1)}}})();const e=((null===a||void 0===a?void 0:a.id)||(null===a||void 0===a?void 0:a.username)||"").toLowerCase();e?(f(Cl.listIncomingRequests(e)),g(dc.listIncoming(e))):(f([]),g([]))},[a,r]),(0,t.useEffect)(()=>{const e=()=>{const e=((null===a||void 0===a?void 0:a.id)||(null===a||void 0===a?void 0:a.username)||"").toLowerCase();if(!e)return f([]),void g([]);f(Cl.listIncomingRequests(e)),g(dc.listIncoming(e))},t=["realtime:follow_request","realtime:follow_accept","realtime:follow_decline","realtime:msg_request","realtime:msg_accept","realtime:msg_decline"];return t.forEach(t=>window.addEventListener(t,e)),()=>t.forEach(t=>window.removeEventListener(t,e))},[a]);const j=async e=>{try{const t=h.map(t=>t.id===e?{...t,read:!0,archived:!0}:t);p(t),localStorage.setItem("notifications",JSON.stringify(t))}catch(d){console.error("Failed to archive notification:",d)}},N=async e=>{try{const t=h.filter(t=>t.id!==e);p(t),localStorage.setItem("notifications",JSON.stringify(t))}catch(d){console.error("Failed to delete notification:",d)}},k=e=>{if(e.icon)return e.icon;switch(e.type){case"like":return(0,Xi.jsx)(dl,{className:"w-5 h-5 text-red-500"});case"comment":return(0,Xi.jsx)(ko,{className:"w-5 h-5 text-blue-500"});case"follow":return(0,Xi.jsx)(Zl,{className:"w-5 h-5 text-green-500"});default:return(0,Xi.jsx)(zo,{className:"w-5 h-5 text-app-text-muted"})}},S=h.filter(e=>!e.read).length,C=e=>{let{notification:t,index:r,onArchive:s,onDelete:n}=e;const a=Rh(0),i=Lh(a,[0,80],[0,1]),o=Lh(a,[-80,0],[1,0]);return(0,Xi.jsxs)("div",{className:"relative overflow-hidden rounded-xl",children:[(0,Xi.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,Xi.jsx)("div",{className:"absolute inset-y-0 left-0 w-1/2 flex items-center pl-4",children:(0,Xi.jsx)(Fi.div,{style:{opacity:i},className:"flex items-center gap-2 text-green-400",children:(0,Xi.jsx)("span",{className:"text-sm font-medium",children:"Archive"})})}),(0,Xi.jsx)("div",{className:"absolute inset-y-0 right-0 w-1/2 flex items-center justify-end pr-4",children:(0,Xi.jsx)(Fi.div,{style:{opacity:o},className:"flex items-center gap-2 text-red-400",children:(0,Xi.jsx)("span",{className:"text-sm font-medium",children:"Delete"})})})]}),(0,Xi.jsx)(Fi.div,{style:{x:a},initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-50,height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0,borderWidth:0},transition:{delay:.03*r},layout:!0,drag:"x",dragConstraints:{left:0,right:0},onDragEnd:(e,r)=>{r.offset.x<=-100?n(t.id):r.offset.x>=100&&s(t.id)},className:"relative p-4 rounded-xl border cursor-pointer bg-app-card-surface "+(t.read||t.archived?"border-app-borders":"border-app-primary-accent/30"),children:(0,Xi.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Xi.jsx)("div",{className:"flex-shrink-0",children:t.avatar?(0,Xi.jsx)("img",{src:t.avatar,alt:"",className:"w-10 h-10 rounded-full"}):(0,Xi.jsx)("div",{className:"w-10 h-10 bg-app-primary-accent/10 rounded-full flex items-center justify-center",children:k(t)})}),(0,Xi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Xi.jsx)("h3",{className:"font-semibold mb-1 "+(t.read||t.archived?"text-app-text-muted":"text-app-text-primary"),children:t.title}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted mb-2 line-clamp-2",children:t.message}),(0,Xi.jsxs)("div",{className:"flex items-center gap-2 text-xs text-app-text-muted",children:[(0,Xi.jsx)(Do,{className:"w-3 h-3"}),(0,Xi.jsx)("span",{children:t.time}),!t.read&&!t.archived&&(0,Xi.jsx)("span",{className:"w-2 h-2 bg-app-primary-accent rounded-full ml-auto"})]})]})]})})]})};return(0,Xi.jsx)(ol,{children:r&&(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)(Fi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40"}),(0,Xi.jsxs)(Fi.div,{initial:{x:300,opacity:0},animate:{x:0,opacity:1},exit:{x:300,opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 bottom-0 w-96 bg-app-card-surface border-l border-app-borders shadow-2xl z-50 overflow-y-auto",children:[(0,Xi.jsxs)("div",{className:"sticky top-0 bg-app-card-surface border-b border-app-borders p-6 z-10",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)(zo,{className:"w-6 h-6 text-app-primary-accent"}),(0,Xi.jsx)("h2",{className:"text-xl font-bold text-app-text-primary",children:"notifications"===y?"Notifications":"Notification Settings"}),S>0&&(0,Xi.jsx)("span",{className:"px-2 py-1 bg-app-primary-accent text-white text-xs font-bold rounded-full",children:S})]}),(0,Xi.jsx)("button",{onClick:s,className:"p-2 hover:bg-app-background rounded-lg transition-colors",children:(0,Xi.jsx)(bo,{className:"w-5 h-5 text-app-text-muted"})})]}),"notifications"===y?(0,Xi.jsxs)("div",{className:"flex gap-2",children:[(0,Xi.jsx)("button",{onClick:async()=>{try{const e=h.map(e=>({...e,read:!0}));p(e),localStorage.setItem("notifications",JSON.stringify(e))}catch(d){console.error("Failed to mark all as read:",d)}},className:"flex-1 px-3 py-2 text-sm bg-app-primary-accent text-white rounded-lg hover:bg-app-primary-accent/90 transition-colors",children:"Mark All Read"}),(0,Xi.jsx)("button",{className:"flex-1 px-3 py-2 text-sm border border-app-borders text-app-text-primary rounded-lg hover:bg-app-background transition-colors",onClick:()=>v("settings"),children:"Settings"})]}):(0,Xi.jsx)("div",{className:"flex gap-2",children:(0,Xi.jsx)("button",{className:"flex-1 px-3 py-2 text-sm border border-app-borders text-app-text-primary rounded-lg hover:bg-app-background transition-colors",onClick:()=>v("notifications"),children:"Back to Notifications"})})]}),"notifications"===y?(0,Xi.jsx)("div",{className:"p-4 space-y-3",children:l?(0,Xi.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,Xi.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-app-primary-accent"})}):d?(0,Xi.jsxs)("div",{className:"text-center py-8",children:[(0,Xi.jsx)("p",{className:"text-app-text-muted mb-4",children:d}),(0,Xi.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-app-primary-accent text-white rounded-lg hover:bg-app-primary-accent/90",children:"Retry"})]}):(0,Xi.jsxs)(Xi.Fragment,{children:[(m.length>0||x.length>0)&&(0,Xi.jsxs)("div",{className:"rounded-xl border border-app-borders bg-app-background p-4",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Xi.jsx)(Zl,{className:"w-5 h-5 text-green-500"}),(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary",children:"Requests"})]}),(0,Xi.jsxs)("div",{className:"space-y-3",children:[m.map(e=>(0,Xi.jsxs)("div",{className:"flex items-center justify-between bg-app-card-surface border border-app-borders rounded-lg p-3",children:[(0,Xi.jsxs)("div",{className:"text-sm text-app-text-primary",children:[(0,Xi.jsx)("span",{className:"font-medium",children:e.followerId})," requested to follow you"]}),(0,Xi.jsxs)("div",{className:"flex gap-2",children:[(0,Xi.jsx)("button",{onClick:()=>(e=>{const t=((null===a||void 0===a?void 0:a.id)||(null===a||void 0===a?void 0:a.username)||"").toLowerCase();t&&Cl.acceptRequest(e,t)})(e.followerId),className:"px-3 py-1 text-xs bg-green-600 text-white rounded-md hover:bg-green-500",children:"Accept"}),(0,Xi.jsx)("button",{onClick:()=>(e=>{const t=((null===a||void 0===a?void 0:a.id)||(null===a||void 0===a?void 0:a.username)||"").toLowerCase();t&&Cl.declineRequest(e,t)})(e.followerId),className:"px-3 py-1 text-xs border border-app-borders text-app-text-primary rounded-md hover:bg-app-background",children:"Decline"})]})]},`fr-${e.followerId}`)),x.map(e=>(0,Xi.jsxs)("div",{className:"flex items-center justify-between bg-app-card-surface border border-app-borders rounded-lg p-3",children:[(0,Xi.jsxs)("div",{className:"text-sm text-app-text-primary",children:[(0,Xi.jsx)("span",{className:"font-medium",children:e.fromId})," requested to message you"]}),(0,Xi.jsxs)("div",{className:"flex gap-2",children:[(0,Xi.jsx)("button",{onClick:()=>(e=>{const t=((null===a||void 0===a?void 0:a.id)||(null===a||void 0===a?void 0:a.username)||"").toLowerCase();t&&dc.acceptMessage(e,t)})(e.fromId),className:"px-3 py-1 text-xs bg-green-600 text-white rounded-md hover:bg-green-500",children:"Accept"}),(0,Xi.jsx)("button",{onClick:()=>(e=>{const t=((null===a||void 0===a?void 0:a.id)||(null===a||void 0===a?void 0:a.username)||"").toLowerCase();t&&dc.declineMessage(e,t)})(e.fromId),className:"px-3 py-1 text-xs border border-app-borders text-app-text-primary rounded-md hover:bg-app-background",children:"Decline"})]})]},`mr-${e.fromId}`))]})]}),0===h.length?(0,Xi.jsxs)("div",{className:"text-center py-12",children:[(0,Xi.jsx)(zo,{className:"w-12 h-12 text-app-text-muted mx-auto mb-4"}),(0,Xi.jsx)("h3",{className:"text-lg font-semibold text-app-text-primary mb-2",children:"No notifications"}),(0,Xi.jsx)("p",{className:"text-app-text-muted",children:"You're all caught up! New notifications will appear here."})]}):(0,Xi.jsx)(ol,{initial:!1,children:h.map((e,t)=>(0,Xi.jsx)(C,{notification:e,index:t,onArchive:j,onDelete:N},e.id))})]})}):(0,Xi.jsx)("div",{className:"p-4 space-y-3",children:(0,Xi.jsx)("div",{className:"rounded-xl border border-app-borders bg-app-background p-4",children:(0,Xi.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Xi.jsx)("div",{className:"w-10 h-10 bg-app-primary-accent/10 rounded-full flex items-center justify-center",children:(0,Xi.jsx)(zo,{className:"w-5 h-5 text-app-primary-accent"})}),(0,Xi.jsxs)("div",{className:"flex-1",children:[(0,Xi.jsx)("h3",{className:"font-semibold text-app-text-primary",children:b.available?`New update available (${b.version})`:"Your app is up to date"}),(0,Xi.jsx)("p",{className:"text-sm text-app-text-muted mt-1",children:b.available?b.notes:"You are on the latest version."}),(0,Xi.jsx)("div",{className:"flex gap-2 mt-3",children:b.available?(0,Xi.jsxs)(Xi.Fragment,{children:[(0,Xi.jsx)("button",{onClick:()=>w(e=>({...e,available:!1})),className:"px-3 py-2 text-sm border border-app-borders rounded-lg text-app-text-primary hover:bg-app-background",children:"Later"}),(0,Xi.jsx)("button",{onClick:()=>{alert("Starting update..."),w(e=>({...e,available:!1}))},className:"px-3 py-2 text-sm bg-app-primary-accent text-white rounded-lg hover:bg-app-primary-accent/90",children:"Update now"})]}):(0,Xi.jsx)("button",{onClick:()=>w(e=>({...e,available:!0})),className:"px-3 py-2 text-sm border border-app-borders rounded-lg text-app-text-primary hover:bg-app-background",children:"Check again"})})]})]})})}),(0,Xi.jsx)("div",{className:"sticky bottom-0 bg-app-card-surface border-t border-app-borders p-4",children:(0,Xi.jsx)("button",{className:"w-full px-4 py-3 text-center text-app-primary-accent hover:bg-app-primary-accent/10 rounded-lg transition-colors",children:"View All Notifications"})})]})]})})},Fh=()=>{const[e,r]=(0,t.useState)(new Date),{user:s}=ho();(0,t.useEffect)(()=>{const e=setInterval(()=>{r(new Date)},1e3);return()=>clearInterval(e)},[]);const n=e=>"number"!==typeof e?"0":e>=1e3?(e/1e3).toFixed(1)+"k":String(e);return t.useEffect(()=>{const e=document.createElement("style");return e.textContent="\n      .invisible-scrollbar::-webkit-scrollbar {\n        width: 6px;\n      }\n      .invisible-scrollbar::-webkit-scrollbar-track {\n        background: transparent;\n      }\n      .invisible-scrollbar::-webkit-scrollbar-thumb {\n        background: transparent;\n        border-radius: 3px;\n        transition: background 0.3s ease;\n      }\n      .invisible-scrollbar.hover-scrollbar::-webkit-scrollbar-thumb {\n        background: #4B5563;\n      }\n      .invisible-scrollbar::-webkit-scrollbar-thumb:hover {\n        background: #6B7280;\n      }\n      .invisible-scrollbar.scrolling::-webkit-scrollbar-thumb {\n        background: #4B5563;\n      }\n      /* Firefox scrollbar styling */\n      .invisible-scrollbar {\n        scrollbar-width: thin;\n        scrollbar-color: transparent transparent;\n      }\n      .invisible-scrollbar.hover-scrollbar,\n      .invisible-scrollbar.scrolling {\n        scrollbar-color: #4B5563 transparent;\n      }\n    ",document.head.appendChild(e),()=>{document.head.contains(e)&&document.head.removeChild(e)}},[]),(0,Xi.jsx)("div",{className:"h-screen overflow-y-auto invisible-scrollbar",onMouseEnter:e=>{e.currentTarget&&e.currentTarget.classList.add("hover-scrollbar")},onMouseLeave:e=>{e.currentTarget&&(e.currentTarget.classList.remove("hover-scrollbar"),e.currentTarget.classList.remove("scrolling"))},onScroll:e=>{e.currentTarget&&(e.currentTarget.classList.add("scrolling"),clearTimeout(e.currentTarget.scrollTimeout),e.currentTarget.scrollTimeout=setTimeout(()=>{e.currentTarget&&!e.currentTarget.classList.contains("hover-scrollbar")&&e.currentTarget.classList.remove("scrolling")},1e3))},children:(0,Xi.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Xi.jsx)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)("div",{className:"text-2xl font-bold text-white mb-1",children:(a=e,a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}))}),(0,Xi.jsx)("div",{className:"text-sm text-gray-400",children:(e=>e.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}))(e)})]})}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[(0,Xi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,Xi.jsx)(yo,{className:"w-5 h-5 text-orange-500"}),"Your Stats"]}),(0,Xi.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)("div",{className:"text-xl font-bold text-white",children:n(null===s||void 0===s?void 0:s.posts)}),(0,Xi.jsx)("div",{className:"text-xs text-gray-400",children:"Posts"})]}),(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)("div",{className:"text-xl font-bold text-white",children:n(null===s||void 0===s?void 0:s.followers)}),(0,Xi.jsx)("div",{className:"text-xs text-gray-400",children:"Followers"})]}),(0,Xi.jsxs)("div",{className:"text-center",children:[(0,Xi.jsx)("div",{className:"text-xl font-bold text-white",children:n(null===s||void 0===s?void 0:s.following)}),(0,Xi.jsx)("div",{className:"text-xs text-gray-400",children:"Following"})]})]})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[(0,Xi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,Xi.jsx)(Ol,{className:"w-5 h-5 text-orange-500"}),"Trending Now"]}),(0,Xi.jsx)("div",{className:"space-y-3",children:[{id:1,title:"#MountainBiking",posts:1247,trend:"up"},{id:2,title:"#RoadCycling",posts:892,trend:"up"},{id:3,title:"#BikeRepair",posts:634,trend:"stable"},{id:4,title:"#CyclingTips",posts:445,trend:"down"},{id:5,title:"#GroupRides",posts:321,trend:"up"}].map((e,t)=>(0,Xi.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-700 rounded-lg transition-colors cursor-pointer",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Xi.jsx)("div",{className:"w-2 h-2 rounded-full "+("up"===e.trend?"bg-green-500":"down"===e.trend?"bg-red-500":"bg-yellow-500")}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("div",{className:"text-sm font-medium text-white",children:e.title}),(0,Xi.jsxs)("div",{className:"text-xs text-gray-400",children:[e.posts.toLocaleString()," posts"]})]})]}),(0,Xi.jsx)(Po,{className:"w-4 h-4 text-gray-400"})]},e.id))})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[(0,Xi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,Xi.jsx)(wo,{className:"w-5 h-5 text-orange-500"}),"Upcoming Events"]}),(0,Xi.jsx)("div",{className:"space-y-4",children:[{id:1,title:"Weekend Group Ride",date:"Tomorrow 8:00 AM",participants:24,location:"Central Park"},{id:2,title:"Mountain Trail Challenge",date:"Sunday 7:00 AM",participants:18,location:"Rocky Mountains"},{id:3,title:"Bike Maintenance Workshop",date:"Next Week",participants:12,location:"Community Center"}].map(e=>(0,Xi.jsxs)("div",{className:"p-3 bg-gray-700 rounded-lg",children:[(0,Xi.jsx)("div",{className:"font-medium text-white mb-2",children:e.title}),(0,Xi.jsxs)("div",{className:"text-xs text-gray-400 mb-2",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,Xi.jsx)(Do,{className:"w-3 h-3"}),e.date]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,Xi.jsx)(Ji,{className:"w-3 h-3"}),e.location]}),(0,Xi.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Xi.jsx)(yo,{className:"w-3 h-3"}),e.participants," participants"]})]})]},e.id))})]}),(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[(0,Xi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,Xi.jsx)(Yl,{className:"w-5 h-5 text-orange-500"}),"Your Progress"]}),(0,Xi.jsx)("div",{className:"space-y-4",children:[{id:1,title:"Daily Rider",description:"Ride 7 days in a row",icon:"\ud83d\udeb4\u200d\u2642\ufe0f",progress:5,maxProgress:7},{id:2,title:"Social Butterfly",description:"Join 10 group rides",icon:"\ud83e\udd8b",progress:7,maxProgress:10},{id:3,title:"Distance Master",description:"Ride 1000 miles total",icon:"\ud83c\udfc6",progress:847,maxProgress:1e3}].map(e=>(0,Xi.jsxs)("div",{className:"space-y-2",children:[(0,Xi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xi.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Xi.jsx)("span",{className:"text-lg",children:e.icon}),(0,Xi.jsxs)("div",{children:[(0,Xi.jsx)("div",{className:"text-sm font-medium text-white",children:e.title}),(0,Xi.jsx)("div",{className:"text-xs text-gray-400",children:e.description})]})]}),(0,Xi.jsxs)("div",{className:"text-xs text-gray-400",children:[e.progress,"/",e.maxProgress]})]}),(0,Xi.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,Xi.jsx)("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:e.progress/e.maxProgress*100+"%"}})})]},e.id))})]})]})});var a},Uh=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.queryCache=e.queryCache||new L,this.mutationCache=e.mutationCache||new I,this.logger=e.logger||j,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,1===this.mountCount&&(this.unsubscribeFocus=S.subscribe(()=>{S.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=E.subscribe(()=>{E.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,t;this.mountCount--,0===this.mountCount&&(null==(e=this.unsubscribeFocus)||e.call(this),this.unsubscribeFocus=void 0,null==(t=this.unsubscribeOnline)||t.call(this),this.unsubscribeOnline=void 0)}isFetching(e,t){const[r]=o(e,t);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var r;return null==(r=this.queryCache.find(e,t))?void 0:r.state.data}ensureQueryData(e,t,r){const s=i(e,t,r),n=this.getQueryData(s.queryKey);return n?Promise.resolve(n):this.fetchQuery(s)}getQueriesData(e){return this.getQueryCache().findAll(e).map(e=>{let{queryKey:t,state:r}=e;return[t,r.data]})}setQueryData(e,t,r){const s=this.queryCache.find(e),n=function(e,t){return"function"===typeof e?e(t):e}(t,null==s?void 0:s.state.data);if("undefined"===typeof n)return;const a=i(e),o=this.defaultQueryOptions(a);return this.queryCache.build(this,o).setData(n,{...r,manual:!0})}setQueriesData(e,t,r){return N.batch(()=>this.getQueryCache().findAll(e).map(e=>{let{queryKey:s}=e;return[s,this.setQueryData(s,t,r)]}))}getQueryState(e,t){var r;return null==(r=this.queryCache.find(e,t))?void 0:r.state}removeQueries(e,t){const[r]=o(e,t),s=this.queryCache;N.batch(()=>{s.findAll(r).forEach(e=>{s.remove(e)})})}resetQueries(e,t,r){const[s,n]=o(e,t,r),a=this.queryCache,i={type:"active",...s};return N.batch(()=>(a.findAll(s).forEach(e=>{e.reset()}),this.refetchQueries(i,n)))}cancelQueries(e,t,r){const[s,n={}]=o(e,t,r);"undefined"===typeof n.revert&&(n.revert=!0);const i=N.batch(()=>this.queryCache.findAll(s).map(e=>e.cancel(n)));return Promise.all(i).then(a).catch(a)}invalidateQueries(e,t,r){const[s,n]=o(e,t,r);return N.batch(()=>{var e,t;if(this.queryCache.findAll(s).forEach(e=>{e.invalidate()}),"none"===s.refetchType)return Promise.resolve();const r={...s,type:null!=(e=null!=(t=s.refetchType)?t:s.type)?e:"active"};return this.refetchQueries(r,n)})}refetchQueries(e,t,r){const[s,n]=o(e,t,r),i=N.batch(()=>this.queryCache.findAll(s).filter(e=>!e.isDisabled()).map(e=>{var t;return e.fetch(void 0,{...n,cancelRefetch:null==(t=null==n?void 0:n.cancelRefetch)||t,meta:{refetchPage:s.refetchPage}})}));let l=Promise.all(i).then(a);return null!=n&&n.throwOnError||(l=l.catch(a)),l}fetchQuery(e,t,r){const s=i(e,t,r),n=this.defaultQueryOptions(s);"undefined"===typeof n.retry&&(n.retry=!1);const a=this.queryCache.build(this,n);return a.isStaleByTime(n.staleTime)?a.fetch(n):Promise.resolve(a.state.data)}prefetchQuery(e,t,r){return this.fetchQuery(e,t,r).then(a).catch(a)}fetchInfiniteQuery(e,t,r){const s=i(e,t,r);return s.behavior=F(),this.fetchQuery(s)}prefetchInfiniteQuery(e,t,r){return this.fetchInfiniteQuery(e,t,r).then(a).catch(a)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){const r=this.queryDefaults.find(t=>u(e)===u(t.queryKey));r?r.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;const t=this.queryDefaults.find(t=>h(e,t.queryKey));return null==t?void 0:t.defaultOptions}setMutationDefaults(e,t){const r=this.mutationDefaults.find(t=>u(e)===u(t.mutationKey));r?r.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;const t=this.mutationDefaults.find(t=>h(e,t.mutationKey));return null==t?void 0:t.defaultOptions}defaultQueryOptions(e){if(null!=e&&e._defaulted)return e;const t={...this.defaultOptions.queries,...this.getQueryDefaults(null==e?void 0:e.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=d(t.queryKey,t)),"undefined"===typeof t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),"undefined"===typeof t.useErrorBoundary&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return null!=e&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(null==e?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}({defaultOptions:{queries:{staleTime:3e5,cacheTime:6e5}}}),$h=()=>{const{user:e}=ho(),[r,s]=t.useState("home"),[n,a]=t.useState(0),[i,o]=t.useState(0),[l,c]=t.useState(!1),[d,u]=t.useState(!1),[h,p]=t.useState(!1),[m,f]=t.useState(""),[x,g]=t.useState("");t.useEffect(()=>{const e=e=>{const t=(null===e||void 0===e?void 0:e.detail)||{};null!==t&&void 0!==t&&t.q&&f(String(t.q)),s("followers")};return window.addEventListener("nav:followers",e),()=>window.removeEventListener("nav:followers",e)},[]),t.useEffect(()=>{const e=e=>{const t=(null===e||void 0===e?void 0:e.detail)||{};null!==t&&void 0!==t&&t.id?g(String(t.id)):null!==t&&void 0!==t&&t.username&&g(String(t.username)),s("user")};return window.addEventListener("nav:user",e),()=>window.removeEventListener("nav:user",e)},[]),t.useEffect(()=>{const e=()=>s("settings");return window.addEventListener("nav:settings",e),()=>window.removeEventListener("nav:settings",e)},[]),t.useEffect(()=>{const e=()=>s("messages");return window.addEventListener("nav:messages",e),()=>window.removeEventListener("nav:messages",e)},[]),t.useEffect(()=>{const t=t=>{const{followerId:r,followingId:n}=(null===t||void 0===t?void 0:t.detail)||{};if(!r||!n)return;const a=null===e||void 0===e?void 0:e.id;if(!a)return;const i=a===r?n:a===n?r:null;i&&(g(String(i)),s("user"))};return window.addEventListener("realtime:follow",t),()=>window.removeEventListener("realtime:follow",t)},[e]);return t.useEffect(()=>{const e={ModernHome:$o,Explore:xl,CreatePost:Al,News:Ll,Messages:Bl,Maps:Sh,Marketplace:Ql,Profile:tc,Followers:sc,UserProfile:yc,About:Gu,Privacy:Yu,Version:Zu,Help:th,OfflineApplication:uh,ModernSettings:Zo,TopNavigation:Eh,MenuOverlay:Oh,NotificationOverlay:Ih,DesktopSidebar:Fh};Object.entries(e).forEach(e=>{let[t,r]=e;"function"!==typeof r&&"object"!==typeof r&&console.warn(`[PageRouter] Component '${t}' is ${String(r)} (expected function/class). Check its import/export.`)})},[]),(0,Xi.jsxs)("div",{className:"h-full flex flex-col",children:[Eh?(0,Xi.jsx)(Eh,{onMenuClick:()=>{c(!l)},onNewsClick:()=>{s("news")},onNotificationsClick:()=>{u(!d)},onMessagesClick:()=>{s("messages")},activeTab:r,notificationCount:n,messageCount:i}):null,(0,Xi.jsxs)("div",{className:"hidden md:flex flex-1 pt-16",children:[(0,Xi.jsx)("div",{className:"w-16 bg-gray-900 border-r border-gray-800 flex flex-col",children:(0,Xi.jsx)("div",{className:"p-2",children:(0,Xi.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,Xi.jsx)("button",{className:"flex items-center justify-center w-12 h-12 rounded-xl transition-all "+("home"===r?"bg-gray-700 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"),onClick:()=>s("home"),children:(0,Xi.jsx)(Hi,{className:"w-6 h-6"})}),(0,Xi.jsx)("button",{className:"flex items-center justify-center w-12 h-12 rounded-xl transition-all "+("explore"===r?"bg-orange-500 text-white":"text-gray-400 hover:bg-orange-500/10 hover:text-orange-500"),onClick:()=>s("explore"),children:(0,Xi.jsx)(Wi,{className:"w-6 h-6"})}),(0,Xi.jsx)("button",{className:"flex items-center justify-center w-12 h-12 rounded-xl transition-all "+("create"===r?"bg-orange-500 text-white":"text-gray-400 hover:bg-orange-500/10 hover:text-orange-500"),onClick:()=>s("create"),children:(0,Xi.jsx)(Ki,{className:"w-6 h-6"})}),(0,Xi.jsx)("button",{className:"flex items-center justify-center w-12 h-12 rounded-xl transition-all "+("maps"===r?"bg-orange-500 text-white":"text-gray-400 hover:bg-orange-500/10 hover:text-orange-500"),onClick:()=>s("maps"),children:(0,Xi.jsx)(Ji,{className:"w-6 h-6"})}),(0,Xi.jsx)("button",{className:"flex items-center justify-center w-12 h-12 rounded-xl transition-all "+("marketplace"===r?"bg-orange-500 text-white":"text-gray-400 hover:bg-orange-500/10 hover:text-orange-500"),onClick:()=>s("marketplace"),children:(0,Xi.jsx)(Gi,{className:"w-6 h-6"})}),(0,Xi.jsx)("button",{className:"flex items-center justify-center w-12 h-12 rounded-xl transition-all "+("profile"===r?"bg-orange-500 text-white":"text-gray-400 hover:bg-orange-500/10 hover:text-orange-500"),onClick:()=>s("profile"),children:(0,Xi.jsx)(Qi,{className:"w-6 h-6"})})]})})}),(0,Xi.jsx)("div",{className:"w-[320px] lg:w-[400px] bg-gray-900 border-r border-gray-800",children:Fh?(0,Xi.jsx)(Fh,{}):null}),(0,Xi.jsxs)("div",{className:"flex-1 overflow-y-auto h-screen bg-gray-900 pr-4 lg:pr-6",children:["home"===r&&$o?(0,Xi.jsx)($o,{}):null,"explore"===r&&xl?(0,Xi.jsx)(xl,{}):null,"create"===r&&Al?(0,Xi.jsx)(Al,{}):null,"news"===r&&Ll?(0,Xi.jsx)(Ll,{}):null,"messages"===r&&Bl?(0,Xi.jsx)(Bl,{}):null,"maps"===r&&Sh?(0,Xi.jsx)(Sh,{}):null,"marketplace"===r&&Ql?(0,Xi.jsx)(Ql,{}):null,"profile"===r&&tc?(0,Xi.jsx)(tc,{}):null,"followers"===r&&sc?(0,Xi.jsx)(sc,{initialQuery:m}):null,"user"===r&&yc?(0,Xi.jsx)(yc,{userIdOrUsername:x}):null,"about"===r&&(0,Xi.jsx)(Gu,{}),"privacy"===r&&(0,Xi.jsx)(Yu,{}),"version"===r&&(0,Xi.jsx)(Zu,{}),"help"===r&&(0,Xi.jsx)(th,{}),"offline"===r&&(0,Xi.jsx)(uh,{}),"settings"===r&&(0,Xi.jsx)(Zo,{})]})]}),(0,Xi.jsxs)("div",{className:"md:hidden flex-1 overflow-auto pt-16",children:["home"===r&&$o?(0,Xi.jsx)($o,{}):null,"explore"===r&&xl?(0,Xi.jsx)(xl,{}):null,"create"===r&&Al?(0,Xi.jsx)(Al,{}):null,"news"===r&&Ll?(0,Xi.jsx)(Ll,{}):null,"messages"===r&&Bl?(0,Xi.jsx)(Bl,{}):null,"maps"===r&&Sh?(0,Xi.jsx)(Sh,{}):null,"marketplace"===r&&Ql?(0,Xi.jsx)(Ql,{}):null,"profile"===r&&tc?(0,Xi.jsx)(tc,{}):null,"followers"===r&&sc?(0,Xi.jsx)(sc,{initialQuery:m}):null,"user"===r&&yc?(0,Xi.jsx)(yc,{userIdOrUsername:x}):null,"about"===r&&(0,Xi.jsx)(Gu,{}),"privacy"===r&&(0,Xi.jsx)(Yu,{}),"version"===r&&(0,Xi.jsx)(Zu,{}),"help"===r&&(0,Xi.jsx)(th,{}),"offline"===r&&(0,Xi.jsx)(uh,{}),"settings"===r&&(0,Xi.jsx)(Zo,{})]}),Oh?(0,Xi.jsx)(Oh,{isOpen:l,onClose:()=>c(!1),onNavigate:e=>{s(e),c(!1)}}):null,Ih?(0,Xi.jsx)(Ih,{isOpen:d,onClose:()=>u(!1),onOpenSettings:()=>s("settings")}):null,h&&(0,Xi.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",onClick:()=>p(!1),children:(0,Xi.jsxs)("div",{className:"bg-app-card-surface rounded-xl p-8 max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,Xi.jsx)("h2",{className:"text-2xl font-bold text-app-text-primary mb-4",children:"Create Post"}),(0,Xi.jsx)("p",{className:"text-app-text-muted mb-6",children:"Create post functionality will be implemented here."}),(0,Xi.jsx)("button",{onClick:()=>p(!1),className:"w-full px-4 py-2 bg-app-primary-accent text-white rounded-lg hover:bg-app-primary-accent/90 transition-colors",children:"Close"})]})}),(0,Xi.jsx)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50",children:(0,Xi.jsx)("div",{className:"bg-gray-800 border-t border-gray-700",children:(0,Xi.jsxs)("div",{className:"flex items-center justify-around py-2",children:[(0,Xi.jsx)(Fi.button,{whileTap:{scale:.9},className:"p-3",onClick:()=>s("home"),children:"home"===r?(0,Xi.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"white",stroke:"black",strokeWidth:"2",children:[(0,Xi.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,Xi.jsx)("polyline",{points:"9,22 9,12 15,12 15,22"})]}):(0,Xi.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[(0,Xi.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,Xi.jsx)("polyline",{points:"9,22 9,12 15,12 15,22"})]})}),(0,Xi.jsx)(Fi.button,{whileTap:{scale:.9},className:"p-3",onClick:()=>s("explore"),children:"explore"===r?(0,Xi.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"white",stroke:"black",strokeWidth:"2",children:[(0,Xi.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,Xi.jsx)("polygon",{points:"16.24,7.76 14.12,14.12 7.76,16.24 9.88,9.88 16.24,7.76"})]}):(0,Xi.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[(0,Xi.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,Xi.jsx)("polygon",{points:"16.24,7.76 14.12,14.12 7.76,16.24 9.88,9.88 16.24,7.76"})]})}),(0,Xi.jsx)(Fi.button,{whileTap:{scale:.9},className:"p-3",onClick:()=>s("create"),children:"create"===r?(0,Xi.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"white",stroke:"black",strokeWidth:"2",children:[(0,Xi.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,Xi.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}):(0,Xi.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[(0,Xi.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,Xi.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),(0,Xi.jsx)(Fi.button,{whileTap:{scale:.9},className:"p-3",onClick:()=>s("maps"),children:"maps"===r?(0,Xi.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"white",stroke:"black",strokeWidth:"2",children:[(0,Xi.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,Xi.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}):(0,Xi.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[(0,Xi.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,Xi.jsx)("circle",{cx:"12",cy:"10",r:"3"})]})}),(0,Xi.jsx)(Fi.button,{whileTap:{scale:.9},className:"p-3",onClick:()=>s("marketplace"),children:"marketplace"===r?(0,Xi.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"white",stroke:"black",strokeWidth:"2",children:[(0,Xi.jsx)("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),(0,Xi.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,Xi.jsx)("path",{d:"M16 10a4 4 0 0 1-8 0"})]}):(0,Xi.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[(0,Xi.jsx)("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),(0,Xi.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,Xi.jsx)("path",{d:"M16 10a4 4 0 0 1-8 0"})]})}),(0,Xi.jsx)(Fi.button,{whileTap:{scale:.9},className:"p-3",onClick:()=>s("profile"),children:"profile"===r?(0,Xi.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"white",stroke:"black",strokeWidth:"2",children:[(0,Xi.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,Xi.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}):(0,Xi.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[(0,Xi.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,Xi.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})})]})})})]})};const Bh=function(){const[e,r]=(0,t.useState)(!1),[s,n]=(0,t.useState)(!0);(0,t.useEffect)(()=>{setTimeout(()=>{const e="true"===localStorage.getItem("isAuthenticated");r(e),n(!1)},1e3)},[]);const a=()=>{localStorage.setItem("isAuthenticated","true"),r(!0)};return s?(0,Xi.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,Xi.jsxs)(Fi.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center",children:[(0,Xi.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Xi.jsx)("span",{className:"text-white font-bold text-2xl",children:"P"})}),(0,Xi.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"PEDAL"}),(0,Xi.jsx)("div",{className:"w-8 h-1 bg-primary-500 rounded mx-auto animate-pulse"})]})}):e?(0,Xi.jsx)(V,{client:Uh,children:(0,Xi.jsx)(mo,{children:(0,Xi.jsx)(to,{children:(0,Xi.jsx)(uo,{children:(0,Xi.jsx)(io,{children:(0,Xi.jsx)(lo,{children:(0,Xi.jsx)(no,{children:(0,Xi.jsx)($h,{})})})})})})})}):(0,Xi.jsx)(V,{client:Uh,children:(0,Xi.jsx)(mo,{children:(0,Xi.jsx)(to,{children:(0,Xi.jsx)(uo,{children:(0,Xi.jsx)(Vu,{onLogin:a})})})})})};s.createRoot(document.getElementById("root")).render((0,Xi.jsx)(t.StrictMode,{children:(0,Xi.jsx)(Bh,{})}))})()})();
//# sourceMappingURL=main.1964c0ca.js.map